webpackJsonp(["app/js/activity/doc/index"],{e3591734a7ec9a6a6c56:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_esSwfobject=__webpack_require__("10a04670192737fb9c0f"),_esSwfobject2=_interopRequireDefault(_esSwfobject);__webpack_require__("9a5c59a43068776403d1");var DocPlayer=function(){function DocPlayer(_ref){var element=_ref.element,swfUrl=_ref.swfUrl,pdfUrl=_ref.pdfUrl,watermarkOptions=_ref.watermarkOptions,canCopy=_ref.canCopy;_classCallCheck(this,DocPlayer),this.element=$(element),this.swfUrl=swfUrl||"",this.pdfUrl=pdfUrl||"",this.swfPlayerWidth="100%",this.swfPlayerHeight="100%",this.swfPlayerUrl="",this.watermarkOptions=watermarkOptions||"",this.canCopy=canCopy||!1,this.init(),console.log(watermarkOptions)}return _createClass(DocPlayer,[{key:"init",value:function(){this.isSupportHtml5()&&!this.isIE9()?this.initPDFJSViewer():this.initSwfViewer()}},{key:"isIE9",value:function(){return navigator.appVersion.indexOf("MSIE 9.")!=-1}},{key:"isSupportHtml5",value:function(){return $.support.leadingWhitespace}},{key:"initPDFJSViewer",value:function(){$("html").attr("dir","ltr");var src="http://opencdn.edusoho.net/pdf.js/v3/viewer.html#"+this.pdfUrl;this.canCopy||(src+="#false");var iframe=document.createElement("iframe");iframe.style.height="100%",iframe.allowfullscreen=!0,iframe.style.width="100%",iframe.id="doc-pdf-player",iframe.src=src,this.element.get(0).appendChild(iframe),this.addWatermark()}},{key:"initSwfViewer",value:function(){$.html('<div id="website"><p align="center" class="style1">'+Translator.trans("您还没有安装flash播放器 请点击")+'<a href="http://www.adobe.com/go/getflashplayer">'+Translator.trans("这里")+"</a>"+Translator.trans("安装")+"</p></div>");var flashVars={doc_url:decodeURI(this.swfUrl.value)},params={bgcolor:"#efefef",allowFullScreen:!0,wmode:"window",allowNetworking:"all",allowscriptaccess:"always",autoPlay:!1},attributes={id:"website"};_esSwfobject2["default"].embedSWF(this.swfPlayerUrl,"website",this.swfPlayerWidth,this.swfPlayerHeight,"9.0.45",null,flashVars,params,attributes),this.addWatermark()}},{key:"addWatermark",value:function(){this.watermarkOptions&&this.element.WaterMark(this.watermarkOptions)}}]),DocPlayer}();exports["default"]=DocPlayer},0:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function initDocPlayer(contents){new _docPlayer2["default"]({element:$element,swfUrl:$element.data("swf"),pdfUrl:$element.data("pdf"),watermarkOptions:{contents:contents,xPosition:"center",yPosition:"center",rotate:45}})}var _docPlayer=__webpack_require__("e3591734a7ec9a6a6c56"),_docPlayer2=_interopRequireDefault(_docPlayer),$element=$("#document-content"),watermarkUrl=$element.data("watermark-url");console.log(watermarkUrl),watermarkUrl?(console.log("watermarkUrl"),$.get(watermarkUrl,function(watermark){console.log(watermark),initDocPlayer(watermark)})):initDocPlayer("")}});