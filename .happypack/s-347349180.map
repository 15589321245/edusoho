{"version":3,"sources":["app/Resources/static-src/app/js/activity-manage/flash/index.js"],"names":["$mediaId","$","_inItStep2form","$form","validator","validate","rules","title","required","maxlength","trim","mediaId","messages","data","onConditionTimeType","$step3_form","onkeyup","finishDetail","positive_integer","max","$select","children","val","fileChooser","on","file","id","conditionsType","event","currentTarget","$conditionsDetail","addClass"],"mappings":";;AAAA;;;;AACA;;;;AACA,IAAIA,WAAWC,EAAE,kBAAF,CAAf;;AAEA,gCAAgBD,QAAhB;AACAE;;AAEA,SAASA,cAAT,GAA0B;AACxB,MAAIC,QAAQF,EAAE,aAAF,CAAZ;AACA,MAAIG,YAAYD,MAAME,QAAN,CAAe;AAC7BC,WAAO;AACLC,aAAO;AACLC,kBAAU,IADL;AAELC,mBAAW,EAFN;AAGLC,cAAM;AAHD,OADF;AAMLC,eAAS;AANJ,KADsB;AAS7BC,cAAU;AACRD,eAAS;AACPH,kBAAU;AADH;AADD;AATmB,GAAf,CAAhB;;AAgBAL,QAAMU,IAAN,CAAW,WAAX,EAAwBT,SAAxB;AACD;;AAED,SAASU,mBAAT,GAA+B;;AAE7B,MAAIC,cAAcd,EAAE,aAAF,CAAlB;;AAEA,MAAIG,YAAYW,YAAYV,QAAZ,CAAqB;AACnCW,aAAS,KAD0B;AAEnCV,WAAO;AACLW,oBAAc;AACZT,kBAAU,IADE;AAEZU,0BAAiB,IAFL;AAGZC,aAAK;AAHO;AADT,KAF4B;AASnCP,cAAU;AACRK,oBAAc;AACZT,kBAAU;AADE;AADN;AATyB,GAArB,CAAhB;;AAgBAO,cAAYF,IAAZ,CAAiB,WAAjB,EAA8BT,SAA9B;AAED;;AAED,IAAIgB,UAAUnB,EAAE,mBAAF,CAAd;;AAEA,IAAImB,QAAQC,QAAR,CAAiB,iBAAjB,EAAoCC,GAApC,OAA8C,MAAlD,EAA0D;AACxDR;AACD;;AAED,IAAIS,cAAc,0BAAlB;;AAEAA,YAAYC,EAAZ,CAAe,QAAf,EAAyB,UAACC,IAAD,EAAU;AACjC;AACAzB,WAASsB,GAAT,CAAaG,KAAKC,EAAlB;AACD,CAHD;;AAKAN,QAAQI,EAAR,CAAW,QAAX,EAAqB,iBAAS;AAC5B,MAAIG,iBAAiB1B,EAAE2B,MAAMC,aAAR,EAAuBR,QAAvB,CAAgC,iBAAhC,EAAmDC,GAAnD,EAArB;;AAEA,MAAIQ,oBAAoB7B,EAAE,kBAAF,CAAxB;AACA,MAAI0B,mBAAmB,MAAvB,EAA+B;AAC7BG,sBAAkBC,QAAlB,CAA2B,QAA3B;AACD,GAFD,MAEO;AACLjB;AACD;AACF,CATD","file":"index.js","sourceRoot":"/Users/kz/projects/edusoho","sourcesContent":["import FileChooser from '../../file-chooser/file-choose';\nimport { chooserUiOpen, chooserUiClose, showChooserType } from '../widget/chooser-ui.js';\nlet $mediaId = $('[name=\"mediaId\"]');\n\nshowChooserType($mediaId);\n_inItStep2form();\n\nfunction _inItStep2form() {\n  var $form = $('#step2-form');\n  var validator = $form.validate({\n    rules: {\n      title: {\n        required: true,\n        maxlength: 50,\n        trim: true,\n      },\n      mediaId: 'required',\n    },\n    messages: {\n      mediaId: {\n        required: '请上传或选择%display%'\n      }\n    }\n  });\n\n  $form.data('validator', validator);\n}\n\nfunction onConditionTimeType() {\n\n  var $step3_form = $(\"#step3-form\");\n\n  let validator = $step3_form.validate({\n    onkeyup: false,\n    rules: {\n      finishDetail: {\n        required: true,\n        positive_integer:true,\n        max: 300,\n      },\n    },\n    messages: {\n      finishDetail: {\n        required: '请输入至少观看多少分钟',\n      },\n    }\n  });\n\n  $step3_form.data('validator', validator);\n\n};\n\nlet $select = $('#condition-select');\n\nif ($select.children('option:selected').val() === 'time') {\n  onConditionTimeType();\n}\n\nlet fileChooser = new FileChooser();\n\nfileChooser.on('select', (file) => {\n  chooserUiClose();\n  $mediaId.val(file.id);\n});\n\n$select.on('change', event => {\n  let conditionsType = $(event.currentTarget).children('option:selected').val();\n\n  let $conditionsDetail = $(\"#condition-group\");\n  if (conditionsType !== 'time') {\n    $conditionsDetail.addClass('hidden');\n  } else {\n    onConditionTimeType();\n  }\n});\n"]}