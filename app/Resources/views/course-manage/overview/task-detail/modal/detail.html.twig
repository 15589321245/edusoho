{% extends 'bootstrap-modal-layout.html.twig' %}
{% set modal_class= "modal-lg" %}
{% set hide_footer = 1 %}

{% block title %}
    {% if task.isOptional %}
        选修任务
    {% else %}
        任务{{ task.number }}
    {% endif %}
    : {{ task.title }}
{% endblock %}

{% block body %}
<table class="table table-striped table-hover">
    <thead>
        <tr>
            <th width="">用户名</th>
            <th width="">加入任务时间</th>
            <th width="">完成任务时间</th>
            <th width="">任务学习时长(分)</th>
            <th>
                音频观看时长(分)
            </th>
        </tr>
    </thead>
    <tbody>
        {% for student in students %}
            {% set taskResult = taskResults[student['userId']]|default()  %}
            {% if taskResult %}
                <tr>
                    <td width="">{{ users[student['userId']].nickname }}</td>
                    <td width="">
                        {{ taskResult.createdTime|date('Y-m-d H:i:s') }}
                    </td>
                    <td width="">
                        {% if  taskResult.finishedTime|default() %}
                            {{ taskResult.finishedTime|date('Y-m-d H:i:s') }}</td>
                        {% else %}
                            --
                        {% endif %}
                    <td width="">{{ taskResult.time|default() }}</td>
                    <td>
                        {{ taskResult.watchTime|default() / 60 }}
                    </td>
                </tr>
            {% else %}
                <tr>
                    <td width="">{{ users[student['userId']].nickname }}</td>
                    <td width="">
                        未开始
                    </td>
                    <td width="">
                        --
                    </td>
                    <td width="">
                        --
                    </td>
                    <td>
                        --
                    </td>
                </tr>
            {% endif %}

        {% endfor %}
    </tbody>
</table>
{% endblock %}
