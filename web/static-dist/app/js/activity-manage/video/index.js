webpackJsonp(["app/js/activity-manage/video/index"],[function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _inItStep2form(){var $step2_form=$("#step2-form"),validator=$step2_form.data("validator");$step2_form.validate({groups:{date:"minute second"},rules:{title:{required:!0,maxlength:50},minute:"required unsigned_integer",second:"required second_range","ext[mediaSource]":"required"},messages:{minute:{required:"请输入时长"},second:{required:"请输入时长"},"ext[mediaSource]":"请上传或选择%display%"}}),$step2_form.data("validator",validator)}var _fileChoose=__webpack_require__("eca7a2561fa47d3f75f6"),_fileChoose2=_interopRequireDefault(_fileChoose),_chooserUi=__webpack_require__("f324dbdea53170d5000f");jQuery.validator.addMethod("unsigned_integer",function(value,element){return this.optional(element)||/^([1-9]\d*|0)$/.test(value)},"时长必须为非负整数"),jQuery.validator.addMethod("second_range",function(value,element){return this.optional(element)||/^([0-9]|[012345][0-9]|59)$/.test(value)},"秒数只能在0-59之间"),(0,_chooserUi.showChooserType)($('[name="ext[mediaSource]"]')),_inItStep2form(),$(".js-length").blur(function(){var validator=$("#step2-form").data("validator");if(validator&&validator.form()){var minute=0|parseInt($("#minute").val()),second=0|parseInt($("#second").val());$("#length").val(60*minute+second)}});var fileChooser=new _fileChoose2["default"],onSelectFile=function(file){if((0,_chooserUi.chooserUiClose)(),file.length&&file.length>0){var minute=parseInt(file.length/60),second=Math.round(file.length%60);$("#minute").val(minute),$("#second").val(second),$("#length").val(60*minute+second)}$('[name="ext[mediaSource]"]').val(file.source),"self"==file.source?$("#ext_mediaId").val(file.id):$("#ext_mediaUri").val(file.uri)};fileChooser.on("select",onSelectFile)}]);