{% extends 'TopxiaWebBundle:Default:layout.html.twig' %}

{% block content %}

<div class="es-row-wrap">
  <div class="row">
    <div class="col-lg-12">
      <div class="page-header"><h1>课程</h1></div>
    </div>
  </div>

  <div class="row">
    <div class="col-md-3">
      <ul class="nav nav-pills nav-stacked">
        <li {% if not category.id %}class="active"{% endif %}><a href="{{ path('course_explore') }}">全部</a></li>
        {% for cat in categories %}
          <li {% if category.id == cat.id %}class="active"{% endif %}><a href="{{ path('course_explore', {category:cat.code|default(cat.id)}) }}">{{ cat.name }}</a></li>
        {% endfor %}
      </ul>
    </div>
    <div class="col-md-9">

      <div class="category-filters">
        <a href="{{ path('course_explore', {category:category.code|default(category.id), sort:'popular'}) }}" {% if sort == 'popular' %}class="active"{% endif %}>热门</a>
        <a href="{{ path('course_explore', {category:category.code|default(category.id), sort:'latest'}) }}" {% if sort == 'latest' %}class="active"{% endif %}>最新</a>
        <a href="{{ path('course_explore', {category:category.code|default(category.id), sort:'recommended'}) }}" {% if sort == 'recommended' %}class="active"{% endif %}>推荐</a>
      </div>

      {% if courses %}
        {{ render(controller('TopxiaWebBundle:Course:coursesBlock', {courses:courses, view: 'list'})) }}
        {{ web_macro.paginator(paginator) }} 
      {% else %}
        <div class="empty">该分类下无课程</div>
      {% endif %}
    </div>
  </div>

</div>
{% endblock %}