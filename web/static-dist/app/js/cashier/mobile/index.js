webpackJsonp(["app/js/cashier/mobile/index"],{"0462758757283f323cc5":function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,i,a){return i&&t(e.prototype,i),a&&t(e,a),e}}(),n=function(){function t(e){i(this,t),this.$container=e.$coinContainer,this.cashierForm=e.cashierForm,this.$form=e.$form,this.priceType=this.$container.data("priceType"),this.coinRate=this.$container.data("coinRate"),this.maxCoinInput=this.$container.data("maxAllowCoin")>this.$container.data("coinBalance")?this.$container.data("coinBalance"):this.$container.data("maxAllowCoin"),this.initEvent()}return a(t,[{key:"initEvent",value:function(){var t=this;this.$form.on("change",".js-coin-amount",function(e){return t.changeAmount(e)})}},{key:"changeAmount",value:function(t){var e=$(t.currentTarget),i=e.val();if(parseFloat(i)>parseFloat(this.maxCoinInput)&&(i=this.maxCoinInput),isNaN(parseFloat(i))||parseFloat(i)<=0)return i=0,e.val(""),this.removePasswordValidate(),this.$form.trigger("removePriceItem",["coin-price"]),void this.cashierForm.calcPayPrice(i);e.val(parseFloat(i).toFixed(2)),this.addPasswordValidate();var a=this.$form.data("coin-name"),n=0;if("coin"===this.priceType){n=parseFloat(i).toFixed(2)+" "+a;var r=parseFloat(this.$container.data("maxAllowCoin")),o=parseFloat(r-i).toFixed(2)+" "+a;this.$form.trigger("changeCoinPrice",[o])}else n="ï¿¥"+parseFloat(i/this.coinRate).toFixed(2);this.$form.trigger("addPriceItem",["coin-price",a+Translator.trans("order.create.minus"),n]),this.cashierForm.calcPayPrice(i)}},{key:"addPasswordValidate",value:function(){this.$container.find('[name="payPassword"]').rules("add","required es_remote_with_cache")}},{key:"removePasswordValidate",value:function(){this.$container.find('[name="payPassword"]').rules("remove","required es_remote_with_cache")}}]),t}();e.default=n},0:function(t,e,i){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,i,a){return i&&t(e.prototype,i),a&&t(e,a),e}}(),o=i("0462758757283f323cc5"),c=a(o),s=function(){function t(e){n(this,t),this.$container=e,this.validator=this.$container.validate(),this.initEvent(),this.initCoin()}return r(t,[{key:"initCoin",value:function(){var t=$("#coin-use-section");t.length>0&&(this.coin=new c.default(t,this))}},{key:"calcPayPrice",value:function(t){var e=this;$.post(this.$container.data("priceUrl"),{coinAmount:t},function(t){e.$container.find(".js-pay-price").text(t.data)})}},{key:"initEvent",value:function(){this.$container.on("click",".check",function(t){var e=$(t.currentTarget);e.hasClass("active")||e.hasClass("disabled")||(e.addClass("active").siblings().removeClass("active"),$("input[name='payment']").val(e.attr("id")))});var t=this.$container;t.on("click",".js-pay-btn",function(e){t.valid()&&t.submit()})}}]),t}();new s($("#cashier-form"))}});