<?php

namespace Application\Migrations;

use Doctrine\DBAL\Migrations\AbstractMigration,
    Doctrine\DBAL\Schema\Schema;

/**
 * Auto-generated Migration: Please modify to your need!
 */
class Version20131009155504 extends AbstractMigration
{
    public function up(Schema $schema)
    {
        // this up() migration is autogenerated, please modify it to your needs
    	$this->addSql("ALTER TABLE  `user` CHANGE  `uri`  `uri` VARCHAR( 64 ) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT  ''");
    	$this->addSql("
			ALTER TABLE  `user` CHANGE  `title`  `title` VARCHAR( 255 ) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT  '',
			CHANGE  `tags`  `tags` VARCHAR( 255 ) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT  '',
			CHANGE  `smallAvatar`  `smallAvatar` VARCHAR( 255 ) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT  '',
			CHANGE  `mediumAvatar`  `mediumAvatar` VARCHAR( 255 ) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT  '',
			CHANGE  `largeAvatar`  `largeAvatar` VARCHAR( 255 ) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT  '',
			CHANGE  `promotedTime`  `promotedTime` INT( 10 ) UNSIGNED NOT NULL DEFAULT  '0' COMMENT  '推荐时间',
			CHANGE  `loginIp`  `loginIp` VARCHAR( 64 ) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT  '',
			CHANGE  `createdIp`  `createdIp` VARCHAR( 64 ) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT  '',
			CHANGE  `createdTime`  `createdTime` INT UNSIGNED NOT NULL DEFAULT  '0';
		");

		$this->addSql("
			ALTER TABLE `user_profile` CHANGE `truename` `truename` VARCHAR(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '', CHANGE `city` `city` VARCHAR(64) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '', CHANGE `mobile` `mobile` VARCHAR(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '', CHANGE `qq` `qq` VARCHAR(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '', CHANGE `signature` `signature` TEXT CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL, CHANGE `about` `about` TEXT CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL, CHANGE `company` `company` VARCHAR(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '', CHANGE `job` `job` VARCHAR(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '', CHANGE `weibo` `weibo` VARCHAR(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '', CHANGE `weixin` `weixin` VARCHAR(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '', CHANGE `site` `site` VARCHAR(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '';
		");

		$this->addSql("
			ALTER TABLE  `user_profile` CHANGE  `signature`  `signature` TEXT CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL ,
			CHANGE  `about`  `about` TEXT CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL;
		");

		$this->addSql("
			ALTER TABLE `course` CHANGE `title` `title` VARCHAR(1024) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL, CHANGE `subtitle` `subtitle` VARCHAR(1024) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '副标题', CHANGE `tags` `tags` TEXT CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL, CHANGE `smallPicture` `smallPicture` VARCHAR(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '', CHANGE `middlePicture` `middlePicture` VARCHAR(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '', CHANGE `largePicture` `largePicture` VARCHAR(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '', CHANGE `about` `about` TEXT CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL, CHANGE `teacherIds` `teacherIds` TEXT CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL, CHANGE `goals` `goals` TEXT CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '课程目标', CHANGE `audiences` `audiences` TEXT CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT 'audiences', CHANGE `address` `address` VARCHAR(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '', CHANGE `userId` `userId` INT(10) UNSIGNED NOT NULL, CHANGE `createdTime` `createdTime` INT(10) UNSIGNED NOT NULL;
		");

		$this->addSql("
			ALTER TABLE  `course_member` CHANGE  `orderId`  `orderId` INT( 10 ) UNSIGNED NOT NULL DEFAULT  '0' COMMENT  '学员购买课程时的订单ID',
			CHANGE  `noteNum`  `noteNum` INT UNSIGNED NOT NULL DEFAULT  '0' COMMENT  '笔记数目',
			CHANGE  `noteLastUpdateTime`  `noteLastUpdateTime` INT UNSIGNED NOT NULL DEFAULT  '0' COMMENT  '最新的笔记更新时间',
			CHANGE  `remark`  `remark` VARCHAR( 255 ) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT  '' COMMENT  '备注';
		");

		$this->addSql("
			ALTER TABLE  `course_thread` CHANGE  `courseId`  `courseId` INT UNSIGNED NOT NULL DEFAULT  '0',
			CHANGE  `lessonId`  `lessonId` INT UNSIGNED NOT NULL DEFAULT  '0',
			CHANGE  `content`  `content` TEXT CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL ,
			CHANGE  `followNum`  `followNum` INT UNSIGNED NOT NULL DEFAULT  '0',
			CHANGE  `createdTime`  `createdTime` INT( 10 ) UNSIGNED NOT NULL DEFAULT  '0';
		");

		$this->addSql("
			ALTER TABLE  `course_thread_post` CHANGE  `courseId`  `courseId` INT UNSIGNED NOT NULL DEFAULT  '0',
			CHANGE  `lessonId`  `lessonId` INT( 10 ) UNSIGNED NOT NULL DEFAULT  '0',
			CHANGE  `threadId`  `threadId` INT( 10 ) UNSIGNED NOT NULL DEFAULT  '0',
			CHANGE  `userId`  `userId` INT( 10 ) UNSIGNED NOT NULL DEFAULT  '0',
			CHANGE  `content`  `content` TEXT CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL ,
			CHANGE  `createdTime`  `createdTime` INT( 10 ) UNSIGNED NOT NULL;
		");

		$this->addSql("
			ALTER TABLE  `course_review` CHANGE  `id`  `id` INT UNSIGNED NOT NULL AUTO_INCREMENT ,
			CHANGE  `userId`  `userId` INT( 10 ) UNSIGNED NOT NULL DEFAULT  '0',
			CHANGE  `courseId`  `courseId` INT( 10 ) UNSIGNED NOT NULL DEFAULT  '0',
			CHANGE  `title`  `title` VARCHAR( 255 ) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT  '' COMMENT  '评论title',
			CHANGE  `content`  `content` TEXT CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT  '评论内容',
			CHANGE  `rating`  `rating` INT UNSIGNED NOT NULL DEFAULT  '0',
			CHANGE  `createdTime`  `createdTime` INT UNSIGNED NOT NULL COMMENT  '评价创建时间';
		");

		$this->addSql("
			ALTER TABLE  `course_quiz` CHANGE  `id`  `id` INT UNSIGNED NOT NULL AUTO_INCREMENT ,
			CHANGE  `courseId`  `courseId` INT( 10 ) UNSIGNED NOT NULL DEFAULT  '0',
			CHANGE  `lessonId`  `lessonId` INT( 10 ) UNSIGNED NOT NULL DEFAULT  '0',
			CHANGE  `itemIds`  `itemIds` VARCHAR( 255 ) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT  '' COMMENT  '对应的题目Id',
			CHANGE  `answerIds`  `answerIds` VARCHAR( 255 ) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT  '' COMMENT  '对应的答案Id',
			CHANGE  `userId`  `userId` INT UNSIGNED NOT NULL DEFAULT  '0',
			CHANGE  `score`  `score` TINYINT( 4 ) UNSIGNED NOT NULL DEFAULT  '0' COMMENT  '测验分数',
			CHANGE  `startTime`  `startTime` INT UNSIGNED NOT NULL DEFAULT  '0' COMMENT  '开始时间',
			CHANGE  `endTime`  `endTime` INT UNSIGNED NOT NULL DEFAULT  '0' COMMENT  '结束时间';
		");

		$this->addSql("
			ALTER TABLE `course_quiz_item` CHANGE `id` `id` INT(10) UNSIGNED NOT NULL AUTO_INCREMENT, CHANGE `courseId` `courseId` INT(10) UNSIGNED NOT NULL DEFAULT '0', CHANGE `lessonId` `lessonId` INT(10) UNSIGNED NOT NULL DEFAULT '0', CHANGE `description` `description` TEXT CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '题目描述', CHANGE `choices` `choices` TEXT CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '课时测验的可选结果', CHANGE `answers` `answers` VARCHAR(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '答案可以多个，用|竖线分割', CHANGE `level` `level` ENUM('low','normal','high') CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '难度等级', CHANGE `type` `type` ENUM('single','multiple') CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '问答题目类型', CHANGE `userId` `userId` INT(10) UNSIGNED NOT NULL DEFAULT '0', CHANGE `createdTime` `createdTime` INT UNSIGNED NOT NULL COMMENT '课时测验创建时间';
		");

		$this->addSql("
			ALTER TABLE  `course_quiz_item_answer` CHANGE  `id`  `id` INT( 10 ) UNSIGNED NOT NULL AUTO_INCREMENT ,
			CHANGE  `userId`  `userId` INT UNSIGNED NOT NULL ,
			CHANGE  `quizId`  `quizId` INT( 10 ) UNSIGNED NOT NULL ,
			CHANGE  `itemId`  `itemId` INT( 10 ) UNSIGNED NOT NULL ,
			CHANGE  `answers`  `answers` VARCHAR( 255 ) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT  '测验时用户提供的答案',
			CHANGE  `isCorrect`  `isCorrect` TINYINT( 1 ) NOT NULL COMMENT  '测验正确与否结果',
			CHANGE  `createdTime`  `createdTime` INT UNSIGNED NOT NULL COMMENT  '创建时间';
		");

		$this->addSql("
			UPDATE `course_order` SET giftTo = '';
			ALTER TABLE  `course_order` CHANGE  `giftTo`  `giftTo` VARCHAR( 64 ) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT  '',
			CHANGE  `bank`  `bank` VARCHAR( 32 ) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT  '' COMMENT  '银行编号';
		");

		$this->addSql("
			ALTER TABLE  `course_order_refund` CHANGE  `reasonType`  `reasonType` VARCHAR( 64 ) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT  '',
			CHANGE  `reasonNote`  `reasonNote` VARCHAR( 1024 ) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT  '';
		");

		$this->addSql("
			ALTER TABLE  `course_note` CHANGE  `courseId`  `courseId` INT UNSIGNED NOT NULL DEFAULT  '0' COMMENT  '课程ID',
			CHANGE  `lessonId`  `lessonId` INT UNSIGNED NOT NULL DEFAULT  '0' COMMENT  '课时ID',
			CHANGE  `length`  `length` INT UNSIGNED NOT NULL DEFAULT  '0' COMMENT  '笔记内容的字数';
		");

		$this->addSql("
			ALTER TABLE  `course_material` CHANGE  `courseId`  `courseId` INT( 10 ) UNSIGNED NOT NULL DEFAULT  '0',
			CHANGE  `lessonId`  `lessonId` INT( 10 ) UNSIGNED NOT NULL DEFAULT  '0',
			CHANGE  `title`  `title` VARCHAR( 1024 ) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL ,
			CHANGE  `description`  `description` TEXT CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL ,
			CHANGE  `fileUri`  `fileUri` VARCHAR( 255 ) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT  '',
			CHANGE  `fileMime`  `fileMime` VARCHAR( 255 ) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT  '',
			CHANGE  `fileSize`  `fileSize` INT( 10 ) UNSIGNED NOT NULL DEFAULT  '0',
			CHANGE  `userId`  `userId` INT( 10 ) UNSIGNED NOT NULL DEFAULT  '0';
		");

		$this->addSql("
			ALTER TABLE  `course_announcement` CHANGE  `updatedTime`  `updatedTime` INT( 10 ) UNSIGNED NOT NULL DEFAULT  '0';
		");

		$this->addSql("
			ALTER TABLE `content` CHANGE `id` `id` INT(10) UNSIGNED NOT NULL AUTO_INCREMENT, CHANGE `title` `title` VARCHAR(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL, CHANGE `type` `type` VARCHAR(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL, CHANGE `alias` `alias` VARCHAR(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '', CHANGE `summary` `summary` TEXT CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL, CHANGE `body` `body` TEXT CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL, CHANGE `picture` `picture` VARCHAR(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '', CHANGE `template` `template` VARCHAR(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '', CHANGE `status` `status` ENUM('published','unpublished','trash') CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL, CHANGE `categoryId` `categoryId` INT(10) UNSIGNED NOT NULL DEFAULT '0', CHANGE `tagIds` `tagIds` TINYTEXT CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL, CHANGE `hits` `hits` INT(10) UNSIGNED NOT NULL DEFAULT '0', CHANGE `featured` `featured` INT(10) UNSIGNED NOT NULL DEFAULT '0', CHANGE `promoted` `promoted` TINYINT(3) UNSIGNED NOT NULL DEFAULT '1' COMMENT '在列表中是否显示该条目。', CHANGE `sticky` `sticky` TINYINT(3) UNSIGNED NOT NULL DEFAULT '0' COMMENT '是否置顶', CHANGE `userId` `userId` INT(10) UNSIGNED NOT NULL, CHANGE `field1` `field1` TEXT CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL, CHANGE `field2` `field2` TEXT CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL, CHANGE `field3` `field3` TEXT CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL, CHANGE `field4` `field4` TEXT CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL, CHANGE `field5` `field5` TEXT CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL, CHANGE `field6` `field6` TEXT CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL, CHANGE `field7` `field7` TEXT CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL, CHANGE `field8` `field8` TEXT CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL, CHANGE `field9` `field9` TEXT CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL, CHANGE `field10` `field10` TEXT CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL, CHANGE `publishedTime` `publishedTime` INT(10) UNSIGNED NOT NULL DEFAULT '0', CHANGE `createdTime` `createdTime` INT(10) UNSIGNED NOT NULL;
		");

		$this->addSql("
			ALTER TABLE  `category` CHANGE  `code`  `code` VARCHAR( 64 ) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT  '',
			CHANGE  `path`  `path` VARCHAR( 255 ) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT  '',
			CHANGE  `groupId`  `groupId` INT( 10 ) UNSIGNED NOT NULL;
		");

		$this->addSql("
			ALTER TABLE  `block` CHANGE  `content`  `content` TEXT CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT  '编辑区的内容',
			CHANGE  `code`  `code` VARCHAR( 255 ) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT  '',
			CHANGE  `updateTime`  `updateTime` INT UNSIGNED NOT NULL DEFAULT  '0';
		");

		$this->addSql("
			ALTER TABLE  `navigation` CHANGE  `updateTime`  `updateTime` INT UNSIGNED NOT NULL DEFAULT  '0';
		");

		$this->addSql("
			ALTER TABLE  `notification` CHANGE  `content`  `content` TEXT CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL;
		");

		$this->addSql("
			ALTER TABLE  `user_bind` CHANGE  `token`  `token` VARCHAR( 64 ) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT  '',
			CHANGE  `refreshToken`  `refreshToken` VARCHAR( 255 ) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT  '';
		");

		$this->addSql("
			ALTER TABLE  `user_disk_file` CHANGE  `filepath`  `filepath` VARCHAR( 2048 ) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT  '',
			CHANGE  `filename`  `filename` VARCHAR( 1024 ) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT  '',
			CHANGE  `uri`  `uri` VARCHAR( 1024 ) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT  '',
			CHANGE  `mimeType`  `mimeType` VARCHAR( 255 ) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT  '',
			CHANGE  `etag`  `etag` VARCHAR( 128 ) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT  '',
			CHANGE  `bucket`  `bucket` VARCHAR( 255 ) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT  '',
			CHANGE  `updatedTime`  `updatedTime` INT( 10 ) UNSIGNED NOT NULL DEFAULT  '0';
		");

		$this->addSql("
			ALTER TABLE  `user_fortune_log` CHANGE  `note`  `note` VARCHAR( 255 ) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT  '';
		");

		



    }

    public function down(Schema $schema)
    {
        // this down() migration is autogenerated, please modify it to your needs

    }
}
