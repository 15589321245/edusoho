{"version":3,"sources":["webpack:///./app/Resources/static-src/app/js/activity-manage/audio/audio.js","webpack:///./app/Resources/static-src/app/js/activity-manage/audio/index.js"],"names":["Audio","$","initStep2Form","autoValidatorLength","initFileChooser","$step2_form","validator","data","validate","groups","nameGroup","rules","title","required","maxlength","trim","course_title","minute","second","messages","Translator","trans","unsigned_integer","second_range","blur","form","parseInt","val","fileChooser","console","log","onSelectFile","placeMediaAttr","file","length","undefined","$minute","$second","$length","JSON","stringify","source","valid","id","uri","on"],"mappings":"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","file":"app/js/activity-manage/audio/index.js","sourcesContent":["import FileChooser from 'app/js/file-chooser/file-choose';\nimport { chooserUiOpen, chooserUiClose, showChooserType } from 'app/js/activity-manage/widget/chooser-ui.js';\nexport default class Audio {\n  constructor() {\n    showChooserType($('[name=\"ext[mediaId]\"]'));\n    this.initStep2Form();\n    this.autoValidatorLength();\n    this.initFileChooser();\n  }\n\n  initStep2Form() {\n    var $step2_form = $('#step2-form');\n    var validator = $step2_form.data('validator');\n\n    $step2_form.validate({\n      groups: {\n        nameGroup: 'minute second'\n      },\n      rules: {\n        title: {\n          required: true,\n          maxlength: 50,\n          trim: true,\n          course_title: true,\n        },\n        minute: 'required unsigned_integer unsigned_integer',\n        second: 'required second_range unsigned_integer',\n        'ext[mediaId]': 'required'\n      },\n      messages: {\n        minute: {\n          required: Translator.trans('activity.audio_manage.length_required_error_hint'),\n          unsigned_integer: Translator.trans('activity.audio_manage.length_unsigned_integer_error_hint')\n        },\n        second: {\n          required: Translator.trans('activity.audio_manage.length_required_error_hint'),\n          second_range: Translator.trans('activity.audio_manage.second_range_error_hint'),\n          unsigned_integer: Translator.trans('activity.audio_manage.length_unsigned_integer_error_hint')\n        },\n        'ext[mediaId]': Translator.trans('activity.audio_manage.media_error_hint')\n      }\n    });\n\n  }\n\n  autoValidatorLength() {\n    $(\".js-length\").blur(function () {\n      let validator = $(\"#step2-form\").data('validator');\n      if (validator && validator.form()) {\n        const minute = parseInt($('#minute').val()) | 0;\n        const second = parseInt($('#second').val()) | 0;\n        $(\"#length\").val(minute * 60 + second);\n      }\n    });\n  }\n\n  initFileChooser() {\n    const fileChooser = new FileChooser();\n    console.log(fileChooser);\n    const onSelectFile = file => {\n      chooserUiClose();\n      let placeMediaAttr = (file) => {\n        if (file.length !== 0 && file.length !== undefined) {\n          let $minute = $('#minute');\n          let $second = $('#second');\n\n          let length = parseInt(file.length);\n          let minute = parseInt(length / 60);\n          let second = length % 60;\n          $minute.val(minute);\n          $second.val(second);\n          $length.val(length);\n          file.minute = minute;\n          file.second = second;\n        }\n        $('[name=\"media\"]').val(JSON.stringify(file));\n      };\n      placeMediaAttr(file);\n\n      $('[name=\"ext[mediaId]\"]').val(file.source);\n      $(\"#step2-form\").valid();\n      if (file.source == 'self') {\n        $(\"#ext_mediaId\").val(file.id);\n        $(\"#ext_mediaUri\").val('');\n      } else {\n        $(\"#ext_mediaId\").val('');\n        $(\"#ext_mediaUri\").val(file.uri);\n      }\n    }\n    fileChooser.on('select', onSelectFile);\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/activity-manage/audio/audio.js","import Audio from './audio';\n\nnew Audio();\n\n\n\n\n\n\n\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/activity-manage/audio/index.js"],"sourceRoot":""}