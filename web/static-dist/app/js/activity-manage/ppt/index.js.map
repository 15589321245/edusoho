{"version":3,"sources":["webpack:///./app/Resources/static-src/app/js/activity-manage/ppt/index.js","webpack:///./app/Resources/static-src/app/js/activity-manage/ppt/ppt.js"],"names":["PPT","$mediaId","$","validator3","init","initStep2Form","initSelect","initFileChooser","$step2_form","validator","data","validate","rules","title","required","maxlength","trim","course_title","mediaId","messages","Translator","trans","$step3_form","finishDetail","children","val","positive_integer","max","min","fileChooser","on","file","id","valid","JSON","stringify","$select","initStep3Form","conditionsType","event","currentTarget","$conditionsDetail","addClass","removeClass"],"mappings":";;;;;;;AAAA;;;;;;AAEA,qB;;;;;;;;;;;;;;;ACFA;;;;AACA;;;;;;KAEqBA,G;AACnB,kBAAc;AAAA;;AACZ,UAAKC,QAAL,GAAgBC,EAAE,kBAAF,CAAhB;AACA,UAAKC,UAAL,GAAkB,IAAlB;AACA,UAAKC,IAAL;AACD;;;;4BACM;AACL,uCAAgB,KAAKH,QAArB;AACA,YAAKI,aAAL;AACA,YAAKC,UAAL;AACA,YAAKC,eAAL;AACD;;;qCAEe;AACd,WAAIC,cAAcN,EAAE,aAAF,CAAlB;AACA,WAAIO,YAAYD,YAAYE,IAAZ,CAAiB,WAAjB,CAAhB;AACAD,mBAAYD,YAAYG,QAAZ,CAAqB;AAC/BC,gBAAO;AACLC,kBAAO;AACLC,uBAAU,IADL;AAELC,wBAAW,EAFN;AAGLC,mBAAM,IAHD;AAILC,2BAAc;AAJT,YADF;AAOLC,oBAAS;AAPJ,UADwB;AAU/BC,mBAAU;AACRD,oBAAS;AACPJ,uBAAUM,WAAWC,KAAX,CAAiB,sCAAjB;AADH;AADD;AAVqB,QAArB,CAAZ;AAgBD;;;qCAEe;AACd,WAAIC,cAAcpB,EAAE,aAAF,CAAlB;AACA,YAAKC,UAAL,GAAkBmB,YAAYX,QAAZ,CAAqB;AACrCC,gBAAO;AACLW,yBAAc;AACZT,uBAAU,oBAAK;AACb,sBAAOZ,EAAE,mBAAF,EAAuBsB,QAAvB,CAAgC,iBAAhC,EAAmDC,GAAnD,OAA6D,MAApE;AACD,cAHW;AAIZC,+BAAkB,IAJN;AAKZC,kBAAK,GALO;AAMZC,kBAAK;AANO;AADT,UAD8B;AAWrCT,mBAAU;AACRI,yBAAc;AACZT,uBAAUM,WAAWC,KAAX,CAAiB,uDAAjB;AADE;AADN;AAX2B,QAArB,CAAlB;AAiBAC,mBAAYZ,IAAZ,CAAiB,WAAjB,EAA8B,KAAKP,UAAnC;AACD;;;uCAEiB;AAAA;;AAChB,WAAI0B,cAAc,0BAAlB;;AAEAA,mBAAYC,EAAZ,CAAe,QAAf,EAAyB,UAACC,IAAD,EAAU;AACjC;AACA,eAAK9B,QAAL,CAAcwB,GAAd,CAAkBM,KAAKC,EAAvB;AACA9B,WAAE,aAAF,EAAiB+B,KAAjB;AACA/B,WAAE,gBAAF,EAAoBuB,GAApB,CAAwBS,KAAKC,SAAL,CAAeJ,IAAf,CAAxB;AACD,QALD;AAMD;;;kCAEY;AAAA;;AACX,WAAIK,UAAUlC,EAAE,mBAAF,CAAd;AACA,WAAIkC,QAAQZ,QAAR,CAAiB,iBAAjB,EAAoCC,GAApC,OAA8C,MAAlD,EAA0D;AACxD,cAAKY,aAAL;AACD;;AAEDD,eAAQN,EAAR,CAAW,QAAX,EAAqB,iBAAS;AAC5B,aAAIQ,iBAAiBpC,EAAEqC,MAAMC,aAAR,EAAuBhB,QAAvB,CAAgC,iBAAhC,EAAmDC,GAAnD,EAArB;AACA,aAAIgB,oBAAoBvC,EAAE,kBAAF,CAAxB;AACA,aAAIoC,mBAAmB,MAAvB,EAA+B;AAC7BG,6BAAkBC,QAAlB,CAA2B,QAA3B;AACA;AACD,UAHD,MAGM;AACHD,6BAAkBE,WAAlB,CAA8B,QAA9B;AACF;AACD,aAAG,CAAC,OAAKxC,UAAT,EAAqB;AAClB,kBAAKkC,aAAL;AACF;AACF,QAZD;AAaD;;;;;;mBAtFkBrC,G","file":"app/js/activity-manage/ppt/index.js","sourcesContent":["import PPT from './ppt';\n\nnew PPT();\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/activity-manage/ppt/index.js","import FileChooser from 'app/js/file-chooser/file-choose';\nimport { chooserUiOpen, chooserUiClose, showChooserType } from '../widget/chooser-ui.js';\n\nexport default class PPT {\n  constructor() {\n    this.$mediaId = $('[name=\"mediaId\"]');\n    this.validator3 = null\n    this.init();\n  }\n  init() {\n    showChooserType(this.$mediaId);\n    this.initStep2Form();\n    this.initSelect();\n    this.initFileChooser();\n  }\n\n  initStep2Form() {\n    var $step2_form = $(\"#step2-form\");\n    var validator = $step2_form.data('validator');\n    validator = $step2_form.validate({\n      rules: {\n        title: {\n          required: true,\n          maxlength: 50,\n          trim: true,\n          course_title: true,\n        },\n        mediaId: 'required',\n      },\n      messages: {\n        mediaId: {\n          required: Translator.trans('activity.ppt_manage.media_error_hint')\n        }\n      }\n    });\n  }\n\n  initStep3Form() {\n    var $step3_form = $(\"#step3-form\");\n    this.validator3 = $step3_form.validate({\n      rules: {\n        finishDetail: {\n          required: ()=> {\n            return $('#condition-select').children('option:selected').val() === 'time';\n          },\n          positive_integer: true,\n          max: 300,\n          min: 1,\n        },\n      },\n      messages: {\n        finishDetail: {\n          required: Translator.trans('activity.ppt_manage.finish_detail_required_error_hint'),\n        },\n      }\n    });\n    $step3_form.data('validator', this.validator3);\n  }\n\n  initFileChooser() {\n    let fileChooser = new FileChooser();\n\n    fileChooser.on('select', (file) => {\n      chooserUiClose();\n      this.$mediaId.val(file.id);\n      $(\"#step2-form\").valid();\n      $('[name=\"media\"]').val(JSON.stringify(file));\n    });\n  }\n\n  initSelect() {\n    let $select = $('#condition-select');\n    if ($select.children('option:selected').val() === 'time') {\n      this.initStep3Form();\n    }\n\n    $select.on('change', event => {\n      let conditionsType = $(event.currentTarget).children('option:selected').val();\n      let $conditionsDetail = $(\"#condition-group\");\n      if (conditionsType !== 'time') {\n        $conditionsDetail.addClass('hidden');\n        return;\n      }else {\n         $conditionsDetail.removeClass('hidden');\n      }\n      if(!this.validator3) {\n         this.initStep3Form();\n      }\n    });\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/activity-manage/ppt/ppt.js"],"sourceRoot":""}