{"version":3,"sources":["app/Resources/static-src/app/js/course-manage/marketing/index.js"],"names":["$form","$","perfectScrollbar","validator","validate","onkeyup","rules","originPrice","required","val","positive_currency","tryLookLength","digits","min","max","tryLookLimit","buyExpiryTime","date","messages","on","event","$li","toggleClass","$input","find","prop","is","stopPropagation","closest","removeClass","addClass","datetimepicker","format","language","minView","autoclose","endDate","Date","now","console","log","click","$item","currentTarget","$values","values","JSON","parse","hasClass","splice","indexOf","text","push","stringify","evt","form","submit"],"mappings":"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","file":"index.js","sourceRoot":"/Users/kz/projects/edusoho","sourcesContent":["import { TabChange } from '../help';\n\nTabChange();\nlet $form = $('#course-marketing-form');\n$('.js-task-price-setting').perfectScrollbar();\n\nlet validator = $form.validate({\n  onkeyup: false,\n  rules: {\n    originPrice: {\n      required: function () {\n        return $(\"[name=isFree]:checked\").val() == 0;\n      },\n      positive_currency: function () {\n        return $(\"[name=isFree]:checked\").val() == 0;\n      },\n    },\n    tryLookLength: {\n      digits: true,\n      min: 1,\n      max: 10\n    },\n    tryLookLimit: {\n      digits: true\n    },\n    buyExpiryTime: {\n      required: function () {\n        return $('input[name=\"enableBuyExpiryTime\"]:checked').val() == 1;\n      },\n      date: true\n    }\n  },\n  messages: {\n    buyExpiryTime: '请选择有效的购买截止日期'\n  }\n});\n\n$('.js-task-price-setting').on('click', 'li', function (event) {\n  let $li = $(this).toggleClass('open');\n  let $input = $li.find('input');\n  $input.prop(\"checked\", !$input.is(\":checked\"))\n});\n\n$('.js-task-price-setting').on('click', 'input', function (event) {\n  event.stopPropagation();\n  let $input = $(this);\n  $input.closest('li').toggleClass('open');\n});\n\n$('input[name=\"isFree\"]').on('change', function (event) {\n  if ($('input[name=\"isFree\"]:checked').val() == 0) {\n    $('.js-is-free').removeClass('hidden');\n  } else {\n    $('.js-is-free').addClass('hidden');\n  }\n});\n\n$('input[name=\"enableBuyExpiryTime\"]').on('change', function (event) {\n  if ($('input[name=\"enableBuyExpiryTime\"]:checked').val() == 0) {\n    $('#buyExpiryTime').addClass('hidden');\n  } else {\n    $('#buyExpiryTime').removeClass('hidden');\n  }\n});\n\n$('input[name=\"buyExpiryTime\"]').datetimepicker({\n  format: 'yyyy-mm-dd',\n  language: \"zh\",\n  minView: 2, //month\n  autoclose: true,\n  endDate: new Date(Date.now() + 86400 * 365 * 100 * 1000)\n});\n$('input[name=\"buyExpiryTime\"]').datetimepicker('setStartDate', new Date());\n\n$('input[name=\"tryLookable\"]').on('change', function (event) {\n  console.log('tryLook : ', $('input[name=\"tryLookable\"]:checked').val());\n  if ($('input[name=\"tryLookable\"]:checked').val() == 1) {\n    $('.js-enable-try-look').removeClass('hidden');\n    $('#tryLookLength').val('1');\n  } else {\n    $('.js-enable-try-look').addClass('hidden');\n  }\n});\n\n$('.js-service-item').click(function (event) {\n  let $item = $(event.currentTarget);\n  let $values = $('#course_services').val();\n  if (!$values) {\n    values = [];\n  }\n  $values = JSON.parse($values);\n  if ($item.hasClass('label-primary')) {\n    $item.removeClass('label-primary');\n    $item.addClass('label-default');\n    $values.splice($values.indexOf($item.text()), 1);\n  } else {\n    $item.removeClass('label-default');\n    $item.addClass('label-primary');\n    $values.push($item.text());\n  }\n  $('#course_services').val(JSON.stringify($values));\n});\n\n$('#course-submit').click(function (evt) {\n  if (validator.form()) {\n    $form.submit();\n  }\n});"]}