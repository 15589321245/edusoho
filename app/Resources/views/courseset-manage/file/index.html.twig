{% if courseSet.type == 'open' or courseSet.type == 'liveOpen' %}
  {% set layout = 'open-course-manage/layout.html.twig' %}
{% else %}
  {% set layout = 'courseset-manage/layout.html.twig' %}
{% endif %}
{% extends layout %}

{% block title %}{{'my.teaching.open_course.files'|trans}} - {{ parent() }}{% endblock %}

{% set side_nav = 'files' %}
{% set tab = 'courseLesson' %}
{# {% set script_controller = 'course-manage-file/index' %} #}
{% do load_script('course-manage-file/index') %}
{% block main %}
  <style type="text/css">
  .tooltip-inner{
  max-width: 600px;
  }
  </style>
  {% if courseSet.type in ['open','liveOpen'] %}
    {% set targetType = 'opencoursematerial' %}
  {% else %}
    {% set targetType = 'coursematerial' %}
  {% endif %}
  <div class="panel panel-default" role="courseset-manage-file">
    <div class="panel-heading">
      <a class="btn btn-info btn-sm pull-right"
        data-toggle="modal" data-target="#modal"
        data-url="{{path('uploader_batch_upload', {token:uploader_token(targetType, courseSet.id, 'private')}) }}"
      >
        <i class="glyphicon glyphicon-cloud-upload"></i>{{'my.teaching.open_course.files.add_btn'|trans}}
      </a>
      {{'my.teaching.open_course.files'|trans}}
    </div>

    <div class="panel-body" id="file-manage-panel" data-file-status-url="{{path('course_set_manage_file_status')}}">
      <table class="table table-striped table-hover" id="course-lesson-table">
        <thead>
          <tr>
            <th width="5%"><input type="checkbox"  data-role="batch-select"></th>
            <th width="30%">{{'my.teaching.open_course.files.file_name'|trans}}</th>
            <th>{{'my.teaching.open_course.files.type'|trans}}</th>
            <th>{{'my.teaching.open_course.files.size'|trans}}</th>
            <th>{{'my.teaching.open_course.files.use_status'|trans}}</th>
            <th>{{'my.teaching.open_course.files.latest_update'|trans}}</th>
            <th>{{'my.teaching.open_course.files.operation'|trans}}</th>
          </tr>
        </thead>
        <tbody>

          {% for uploadFile in files if uploadFile %}
            {% include 'courseset-manage/file/tbody-tr.html.twig' %}
          {% else %}
            <tr class="empty"><td colspan="20">{{'site.datagrid.empty'|trans}}</td></tr>
          {% endfor %}
          
        </tbody>
      </table>

      <label class="checkbox-inline mrm mbm"><input type="checkbox" data-role="batch-select"> {{'my.teaching.open_course.files.select_all'|trans}}</label>

      <div class="btn-group mbm">
        {% if courseSet.type == 'normal' or courseSet.type =='live'  %}
          <button class="btn btn-danger btn-sm" data-role="batch-delete" data-name="{{'my.teaching.open_course.files.file_record'|trans}}" data-url="{{ path('course_set_manage_delete_materials_show', {id:courseSet.id, type:tab}) }}">
        {% elseif courseSet.type == 'open' or courseSet.type == 'liveOpen' %}
          <button class="btn btn-danger btn-sm" data-role="batch-delete" data-name="{{'my.teaching.open_course.files.file_record'|trans}}" data-url="{{ path('open_course_manage_delete_materials_show', {id:courseSet.id, type:tab}) }}">
        {% endif %}
        <i class="glyphicon glyphicon-trash"></i>
        {{'my.teaching.open_course.files.remove_btn'|trans}}</button>
      </div>

      <nav class="text-center">
        {{ web_macro.paginator(paginator) }}
      </nav>

    </div>
  </div>
{% endblock %}