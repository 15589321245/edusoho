{% extends 'TopxiaWebBundle::layout.html.twig' %}

{% block title %}登录 - {{ parent() }}{% endblock %}
{% set script_controller = 'auth/login' %}

{% block content %}
<div class="row">
  <div class="col-lg-6 col-lg-offset-3">

    {% embed "TopxiaWebBundle:Bootstrap:panel.html.twig" with {class:'panel-page mtl'} %}
      {% block heading %}<h2>登录</h2>{% endblock %}
      {% block body %}

        <form id="login-form" class="form-vertical" method="post" action="{{ path('login_check') }}">

          {% if error %}
            <div class="alert alert-danger">{{ error.message|trans }}</div>
          {% endif %}

          <div class="form-group">
            <label class="control-label" for="login_username">Email地址</label>
            <div class="controls">
              <input class="form-control" id="login_username" type="text" name="_username" value="{{ last_username }}" required />
            </div>
          </div>
          <div class="form-group">
            <label class="control-label" for="login_password">密码</label>
            <div class="controls">
              <input class="form-control" id="login_password" type="password" name="_password" required />
            </div>
          </div>

          <div class="form-group">
            <div class="controls">
              {% if app.request.query.get('to') %}
                <input type="hidden" name="_target_path" value="{{ app.request.query.get('to') }}" />
              {% endif %}
              <button type="submit" class="btn btn-fat btn-primary btn-large">登录</button>
              <span class="checkbox mtm pull-right">
                <label> <input type="checkbox" name="_remember_me" checked="checked"> 记住密码 </label>
              </span>
            </div>
          </div>
        </form>

        <div class="ptl">
            <a href="{{ path('password_reset') }}">找回密码</a>
            <span class="text-muted mhs">|</span>
            <span class="text-muted">还没有注册帐号？</span>
            <a href="{{ path('register') }}">立即注册</a>
        </div>

        {% include 'TopxiaWebBundle:Login:social-logins-block.html.twig' %}

      {% endblock %}
    {% endembed %}
  </div>
</div>
{% endblock %}