{"version":3,"sources":["webpack:///./app/Resources/static-src/app/js/classroom/buy-modal/index.js","webpack:///./app/Resources/static-src/app/js/user/userinfo-fields-common.js?06be*"],"names":["element","UserInfoFieldsItemValidate","options","validator","$element","$","setup","createValidator","initComponents","smsCodeValidate","initEvent","on","event","changeCaptcha","sendSms","each","datetimepicker","autoclose","format","minView","language","document","documentElement","lang","validate","currentDom","rules","email","required","remote","url","data","type","val","mobile","phone","truename","chinese_alphanumeric","minlength","maxlength","qq","idcard","idcardNumber","gender","company","job","weibo","weixin","messages","Translator","trans","submitHandler","form","valid","post","attr","serialize","modal","getCustomFields","length","alphanumeric","es_remote","callback","bool","removeClass","addClass","find","Math","random","unsigned_integer","e","smsType","dataTo","captchaNum","captcha","captchaValidated","preSmsSend","couldSender","i","int","float","date","$code","currentTarget"],"mappings":"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","file":"app/js/classroom/buy-modal/index.js","sourcesContent":["import UserInfoFieldsItemValidate from 'app/js/user/userinfo-fields-common'\n\nnew UserInfoFieldsItemValidate({\n  element: '#classroom-buy-form'\n});\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/classroom/buy-modal/index.js","import SmsSender from 'app/common/widget/sms-sender';\nimport notify from 'common/notify';\n\nexport default class UserInfoFieldsItemValidate {\n  constructor(options) {\n    this.validator = null;\n    this.$element = $(options.element);\n    this.setup();\n  }\n\n  setup() {\n    this.createValidator();\n    this.initComponents();\n    this.smsCodeValidate();\n    this.initEvent();\n  }\n\n  initEvent()\n  {\n    this.$element.on('click', '#getcode_num', (event) => this.changeCaptcha(event));\n    this.$element.on('click', '.js-sms-send', (event) => this.sendSms(event));\n  }\n\n  initComponents() {\n    $('.date').each(function () {\n      $(this).datetimepicker({\n        autoclose: true,\n        format: 'yyyy-mm-dd',\n        minView: 2,\n        language: document.documentElement.lang\n      });\n    });\n  }\n\n  createValidator() {\n    this.validator = this.$element.validate({\n      currentDom: '#form-submit-btn',\n      rules: {\n        email: {\n          required: true,\n          email: true,\n          remote: {\n            url: $('#email').data('url'),\n            type: 'get',\n            data: {\n              'value': function () {\n                return $('#email').val();\n              }\n            }\n          }\n        },\n        mobile: {\n          required: true,\n          phone: true,\n          remote: {\n            url: $('#mobile').data('url'),\n            type: 'get',\n            data: {\n              'value': function () {\n                return $('#mobile').val();\n              }\n            }\n          }\n        },\n        truename: {\n          required: true,\n          chinese_alphanumeric: true,\n          minlength: 2,\n          maxlength: 36,\n        },\n        qq: {\n          required: true,\n          qq: true,\n        },\n        idcard: {\n          required: true,\n          idcardNumber: true,\n        },\n        gender: {\n          required: true,\n        },\n        company: {\n          required: true,\n        },\n        job: {\n          required: true,\n        },\n        weibo: {\n          required: true,\n          url: true,\n        },\n        weixin: {\n          required: true,\n        }\n      },\n      messages: {\n        gender: {\n          required: Translator.trans('site.choose_gender_hint'),\n        },\n        mobile: {\n          phone: Translator.trans('validate.phone.message'),\n        }\n      },\n      submitHandler: form => {\n        if ($(form).valid()) {\n          $.post($(form).attr('action'), $(form).serialize(), resp => {\n            notify('success', Translator.trans('site.save_success_hint'));\n            $('#modal').modal('hide');\n          });\n        }\n      }\n      });\n    this.getCustomFields();\n  }\n\n  smsCodeValidate() {\n    if ($('.js-captch-num').length > 0) {\n      \n      //$('.js-captch-num').find('#getcode_num').attr(\"src\", $(\"#getcode_num\").data(\"url\") + \"?\" + Math.random());\n\n      $('input[name=\"captcha_num\"]').rules('add', {\n        required: true,\n        alphanumeric: true,\n        es_remote: {\n          type: 'get',\n          callback: function (bool) {\n            if (bool) {\n              $('.js-sms-send').removeClass('disabled');\n            } else {\n              $('.js-sms-send').addClass('disabled');\n              $('.js-captch-num').find('#getcode_num').attr(\"src\",$(\"#getcode_num\").data(\"url\")+ \"?\" + Math.random());\n            }\n          }\n        },\n        messages: {\n          required: Translator.trans('site.captcha_code.required'),\n          alphanumeric: Translator.trans('json_response.verification_code_error.message'),\n        }\n      });\n\n      $('input[name=\"sms_code\"]').rules('add', {\n        required: true,\n        unsigned_integer: true,\n        es_remote: {\n          type: 'get',\n        },\n        messages: {\n          required: Translator.trans('validate.sms_code_input.message'),\n        }\n      })\n    }\n  }\n\n  sendSms(e) {\n\n    new SmsSender({\n      element: '.js-sms-send',\n      url: $('.js-sms-send').data('smsUrl'),\n      smsType: 'sms_bind',\n      dataTo: 'mobile',\n      captchaNum: 'captcha_num',\n      captcha: true,\n      captchaValidated: $('input[name=\"captcha_num\"]').valid(),\n      preSmsSend: function () {\n        let couldSender = true;\n        return couldSender;\n      }\n    });\n  }\n\n  getCustomFields() {\n    for (var i = 1; i <= 5; i++) {\n      $(`[name=\"intField${i}\"]`).rules('add', {\n        required: true,\n        int: true,\n      });\n      $(`[name=\"floatField${i}\"]`).rules('add', {\n        required: true,\n        float: true,\n      });\n      $(`[name=\"dateField${i}\"]`).rules('add', {\n        required: true,\n        date: true,\n      });\n    }\n    for (var i = 1; i <= 10; i++) {\n      $(`[name=\"varcharField${i}\"]`).rules('add', {\n        required: true,\n      });\n      $(`[name=\"textField${i}\"]`).rules('add', {\n        required: true,\n      });\n    }\n  }\n\n  changeCaptcha(e) {\n    var $code = $(e.currentTarget);\n    $code.attr(\"src\", $code.data(\"url\") + \"?\" + Math.random());\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/user/userinfo-fields-common.js"],"sourceRoot":""}