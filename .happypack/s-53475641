'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

require('jquery-sortable');

var sortList = function sortList(options) {
  var callback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function (data) {};

  var defaultOptions = {
    element: '#sortable-list',
    distance: 20,
    itemSelector: "li.drag",
    // success: (response) => {},
    ajax: true,
    submit: false
  };

  var settings = Object.assign({}, defaultOptions, options);

  var $list = $(settings.element).sortable(Object.assign({}, settings, {

    onDrop: function onDrop(item, container, _super) {
      _super(item, container);
      var data = $list.sortable("serialize").get();
      callback(data);
      if (submit) {
        return;
      }
      if (settings.ajax) {
        $.post($list.data('sortUrl'), { ids: data }, function (response) {
          settings.success ? settings.success(response) : document.location.reload();
        });
      }
    },

    serialize: function serialize(parent, children, isContainer) {
      return isContainer ? children : parent.attr('id');
    }

  }));
};

exports.default = sortList;