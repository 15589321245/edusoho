{"version":3,"sources":["webpack:///./app/Resources/static-src/app/js/live-course/classroom/index.js"],"names":["intervalId","tryCount","getRoomUrl","clearInterval","html","Translator","trans","$","ajax","url","data","success","error","param","setInterval"],"mappings":";;;;;;AAAA,KAAIA,aAAa,CAAjB;AACA,KAAIC,WAAW,CAAf;;AAEA,UAASC,UAAT,GAAsB;AACpB,OAAID,WAAW,EAAf,EAAmB;AACjBE,mBAAcH,UAAd;;AAEA,SAAII,OAAOC,WAAWC,KAAX,CAAiB,kBAAjB,IAAqC,kDAArC,GAAwFD,WAAWC,KAAX,CAAiB,IAAjB,CAAxF,GAA+G,MAA/G,GAAsHD,WAAWC,KAAX,CAAiB,GAAjB,CAAtH,GAA4I,uCAA5I,GAAoLD,WAAWC,KAAX,CAAiB,IAAjB,CAApL,GAA2M,MAAtN;;AAEAC,OAAE,gBAAF,EAAoBH,IAApB,CAAyBA,IAAzB;AACA;AACD;AACDG,KAAEC,IAAF,CAAO;AACLC,UAAKF,EAAE,gBAAF,EAAoBG,IAApB,CAAyB,KAAzB,CADA;AAELC,cAAS,iBAASD,IAAT,EAAe;AACtB,WAAIA,KAAKE,KAAT,EAAgB;AACdT,uBAAcH,UAAd;;AAEA,aAAII,QAAOM,KAAKE,KAAL,GAAWP,WAAWC,KAAX,CAAiB,GAAjB,CAAX,GAAiC,kDAAjC,GAAoFD,WAAWC,KAAX,CAAiB,IAAjB,CAApF,GAA2G,MAA3G,GAAkHD,WAAWC,KAAX,CAAiB,GAAjB,CAAlH,GAAwI,uCAAxI,GAAgLD,WAAWC,KAAX,CAAiB,IAAjB,CAAhL,GAAuM,MAAlN;;AAEAC,WAAE,gBAAF,EAAoBH,IAApB,CAAyBA,KAAzB;AACA;AACD;;AAED,WAAIM,KAAKD,GAAT,EAAc;AACZ,aAAIA,MAAMC,KAAKD,GAAf;AACA,aAAIC,KAAKG,KAAT,EAAgB;AACdJ,iBAAMA,MAAI,SAAJ,GAAcC,KAAKG,KAAzB;AACD;AACD,aAAIT,SAAO,mCAAiCK,GAAjC,GAAqC,2GAAhD;;AAEAF,WAAE,MAAF,EAAUH,IAAV,CAAeA,MAAf;;AAEAD,uBAAcH,UAAd;AACD;;AAEDC;AACD,MAzBI;AA0BLW,YAAO,iBAAW;AAChB;AACA;AACD;AA7BI,IAAP;AA+BD;;AAEDV;;AAEAF,cAAac,YAAYZ,UAAZ,EAAwB,IAAxB,CAAb,C","file":"app/js/live-course/classroom/index.js","sourcesContent":["let intervalId = 0;\nlet tryCount = 1;\n\nfunction getRoomUrl() {\n  if (tryCount > 10) {\n    clearInterval(intervalId);\n\n    let html = Translator.trans('进入直播教室错误，请联系管理员，')+\"<a href='javascript:document.location.reload()'>\"+Translator.trans('重试')+\"</a>\"+Translator.trans('或')+\"<a href='javascript:window.close();'>\"+Translator.trans('关闭')+\"</a>\"\n    \n    $(\"#classroom-url\").html(html);\n    return;\n  }\n  $.ajax({\n    url: $(\"#classroom-url\").data(\"url\"),\n    success: function(data) {\n      if (data.error) {\n        clearInterval(intervalId);\n\n        let html = data.error+Translator.trans('，')+\"<a href='javascript:document.location.reload()'>\"+Translator.trans('重试')+\"</a>\"+Translator.trans('或')+\"<a href='javascript:window.close();'>\"+Translator.trans('关闭')+\"</a>\";\n        \n        $(\"#classroom-url\").html(html);\n        return;\n      }\n\n      if (data.url) {\n        let url = data.url;\n        if (data.param) {\n          url = url+\"?param=\"+data.param;\n        }\n        let html = '<iframe name=\"classroom\" src=\"'+url+'\" style=\"position:absolute; left:0; top:0; height:100%; width:100%; border:0px;\" scrolling=\"no\"></iframe>';\n\n        $(\"body\").html(html);\n\n        clearInterval(intervalId);\n      }\n\n      tryCount ++;\n    },\n    error: function() {\n      //var html = \"进入直播教室错误，请联系管理员，<a href='javascript:document.location.reload()'>重试</a>或<a href='javascript:window.close();'>关闭</a>\"\n      //$(\"#classroom-url\").html(html);\n    }\n  })\n}\n\ngetRoomUrl();\n\nintervalId = setInterval(getRoomUrl, 3000);\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/live-course/classroom/index.js"],"sourceRoot":""}