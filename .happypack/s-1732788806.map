{"version":3,"sources":["app/Resources/static-src/app/js/courseset/create/index.js"],"names":["Creator","props","$element","$courseSetType","find","$currentCourseSetType","init","_extendValidator","validator","validate","onkeyup","rules","title","required","open_live_course_title","data","messages","click","removeClass","$","event","currentTarget","addClass","val","form","button","submit","addMethod","value","element","params","test","console","log","Translator","trans"],"mappings":";;;;;;IAAMA,O;AACJ,mBAAYC,KAAZ,EAAmB;AAAA;;AACjB,SAAKC,QAAL,GAAgBD,KAAhB;AACA,SAAKE,cAAL,GAAsB,KAAKD,QAAL,CAAcE,IAAd,CAAmB,mBAAnB,CAAtB;AACA,SAAKC,qBAAL,GAA6B,KAAKH,QAAL,CAAcE,IAAd,CAAmB,0BAAnB,CAA7B,CAA4E;AAC5E,SAAKE,IAAL;AACD;;;;2BAEM;AAAA;;AACL,WAAKC,gBAAL;AACA,UAAIC,YAAY,KAAKN,QAAL,CAAcO,QAAd,CAAuB;AACrCC,iBAAS,KAD4B;AAErCC,eAAO;AACLC,iBAAO;AACLC,sBAAU,IADL;AAELC,oCAAwB,kCAAM;AAC5B,qBAAO,MAAKT,qBAAL,CAA2BU,IAA3B,CAAgC,MAAhC,MAA4C,UAAnD;AACD;AAJI;AADF,SAF8B;AAUrCC,kBAAU;AACRJ,iBAAO;AADC;AAV2B,OAAvB,CAAhB;;AAgBA,WAAKT,cAAL,CAAoBc,KAApB,CAA0B,iBAAS;AACjC,cAAKd,cAAL,CAAoBe,WAApB,CAAgC,QAAhC;AACA,cAAKb,qBAAL,GAA6Bc,EAAEC,MAAMC,aAAR,CAA7B;AACA,cAAKhB,qBAAL,CAA2BiB,QAA3B,CAAoC,QAApC;AACAH,UAAE,oBAAF,EAAwBI,GAAxB,CAA4B,MAAKlB,qBAAL,CAA2BU,IAA3B,CAAgC,MAAhC,CAA5B;AACD,OALD;;AAOAI,QAAE,uBAAF,EAA2BF,KAA3B,CAAiC,iBAAS;AACxC,YAAIT,UAAUgB,IAAV,EAAJ,EAAsB;AACpBL,YAAEC,MAAMC,aAAR,EAAuBI,MAAvB,CAA8B,SAA9B;AACA,gBAAKvB,QAAL,CAAcwB,MAAd;AACD;AACF,OALD;AAMD;;;uCAEkB;AACjBP,QAAEX,SAAF,CAAYmB,SAAZ,CAAsB,wBAAtB,EAAgD,UAAUC,KAAV,EAAiBC,OAAjB,EAA0BC,MAA1B,EAAkC;AAChF,eAAO,CAAC,4BAA4BC,IAA5B,CAAiCH,KAAjC,CAAR;;AAEAI,gBAAQC,GAAR,CAAY,CAAC,4BAA4BF,IAA5B,CAAiCH,KAAjC,CAAb;AACD,OAJD,EAIGM,WAAWC,KAAX,CAAiB,+BAAjB,CAJH;AAKD;;;;;;AAGH,IAAInC,OAAJ,CAAYmB,EAAE,wBAAF,CAAZ","file":"index.js","sourceRoot":"/Users/kz/projects/edusoho","sourcesContent":["class Creator {\n  constructor(props) {\n    this.$element = props;\n    this.$courseSetType = this.$element.find('.js-courseSetType');\n    this.$currentCourseSetType = this.$element.find('.js-courseSetType.active');;\n    this.init();\n  }\n\n  init() {\n    this._extendValidator();\n    let validator = this.$element.validate({\n      onkeyup: false,\n      rules: {\n        title: {\n          required: true,\n          open_live_course_title: () => {\n            return this.$currentCourseSetType.data('type') === 'liveOpen';\n          }\n        }\n      },\n      messages: {\n        title: \"请输入有效的课程标题（直播公开课标题暂不支持<、>、\\\"、&、‘、’、”、“字符）\"\n      }\n    });\n\n\n    this.$courseSetType.click(event => {\n      this.$courseSetType.removeClass('active');\n      this.$currentCourseSetType = $(event.currentTarget);\n      this.$currentCourseSetType.addClass('active');\n      $('input[name=\"type\"]').val(this.$currentCourseSetType.data('type'));\n    });\n\n    $('#courseset-create-btn').click(event => {\n      if (validator.form()) {\n        $(event.currentTarget).button('loading');\n        this.$element.submit();\n      }\n    });\n  }\n\n  _extendValidator() {\n    $.validator.addMethod(\"open_live_course_title\", function (value, element, params) {\n      return !/^[^(<|>|'|\"|&|‘|’|”|“)]*$/.test(value);\n\n      console.log(!/^[^(<|>|'|\"|&|‘|’|”|“)]*$/.test(value));\n    }, Translator.trans('直播公开课标题暂不支持<、>、\\\"、&、‘、’、”、“字符'));\n  }\n}\n\nnew Creator($('#courseset-create-form'));\n"]}