<div class="panel panel-default panel-col">
  <div class="panel-heading">
    <div class="pull-right">
      <a href="{{ path('admin_category_manage_question_create',{categoryId:category.id,type:'choice',parentId:parentId, goto:app.request.server.get('REQUEST_URI')}) }}" class="btn btn-info btn-sm"><span class="glyphicon glyphicon-plus"></span> 选择题</a>
      <a href="{{ path('admin_category_manage_question_create',{categoryId:category.id,type:'fill',parentId:parentId, goto:app.request.server.get('REQUEST_URI')}) }}" class="btn btn-info btn-sm"><span class="glyphicon glyphicon-plus"></span> 填空题</a>
      <a href="{{ path('admin_category_manage_question_create',{categoryId:category.id,type:'determine',parentId:parentId, goto:app.request.server.get('REQUEST_URI')}) }}" class="btn btn-info btn-sm"><span class="glyphicon glyphicon-plus"></span> 判断题</a>
      <a href="{{ path('admin_category_manage_question_create',{categoryId:category.id,type:'essay',parentId:parentId, goto:app.request.server.get('REQUEST_URI')}) }}" class="btn btn-info btn-sm"><span class="glyphicon glyphicon-plus"></span> 问答题</a>
      {% if not parentQuestion %}
        <a href="{{ path('admin_category_manage_question_create',{categoryId:category.id,type:'material'}) }}" class="btn btn-info btn-sm"><span class="glyphicon glyphicon-plus"></span> 材料题</a>
      {% endif %}
    </div>
    题目管理
  </div>

  <div class="panel-body " id="quiz-table-container">

    {% if parentQuestion %}
      <ol class="breadcrumb">
        <li><a href="{{ path('admin_category_manage_question',{categoryId:category.id}) }}">题目管理</a></li>
        <li class="active">材料题</li>
      </ol>
    {% endif %}

    {{ web_macro.flash_messages() }}

    {% if parentQuestion %}
      <div class="row">
        <div class="col-sm-12">
          <div class="well well-sm short-long-text">
            <div class="short-text">{{ parentQuestion.stem|plain_text(100) }} <span class="trigger">(展开)</span></div>
            <div class="long-text">{{ parentQuestion.stem|raw }} <span class="trigger">(收起)</span></div>
          </div>
        </div>
      </div>
    {% endif %}

    {% if not parentQuestion %}
      <form class="form-inline well well-sm" action="" method="get" novalidate>
        
{#         <div class="form-group">
          <input type="text" id="keyword" name="keyword" class="form-control" value="{{ app.request.query.get('keyword') }}" placeholder="关键词">

        </div> #}

        <div class="form-group">
          <div class="controls" style="width:300px;">
            {% include('TopxiaWebBundle:TagChooser:tag-chooser-tree-main-knowledge.html.twig') %}
          </div>
        </div>
        <div class="form-group">
          <div class="controls" style="width:300px;">
            {% include('TopxiaWebBundle:TagChooser:tag-chooser.html.twig') %}
          </div>
        </div>
        <button class="btn btn-primary btn-sm">搜索</button>
        <br>

        <div class="row">
          <div class="col-md-1"><span>题型</span></div>
          <div class="col-md-11">
            <label class="checkbox-inline">
              <input type="checkbox" id="inlineCheckbox1" name="types[single_choice]" value="single_choice" {% if app.request.query.get('types').single_choice|default('') %} checked {% endif %}>单选题
            </label>
            <label class="checkbox-inline">
              <input type="checkbox" id="inlineCheckbox2" name="types[choice]" value="choice" {% if app.request.query.get('types').choice|default('') %} checked {% endif %}>多选题
            </label>
            <label class="checkbox-inline">
              <input type="checkbox" id="inlineCheckbox3" name="types[uncertain_choice]" value="uncertain_choice"  {% if app.request.query.get('types').uncertain_choice|default('') %} checked {% endif %}>不定型选择题
            </label>
            <label class="checkbox-inline">
              <input type="checkbox" id="inlineCheckbox1" name="types[fill]" value="fill"  {% if app.request.query.get('types').fill|default('') %} checked {% endif %}>填空题
            </label>
            <label class="checkbox-inline">
              <input type="checkbox" id="inlineCheckbox2" name="types[determine]" value="determine"  {% if app.request.query.get('types').determine|default('') %} checked {% endif %}>判断题
            </label>
            <label class="checkbox-inline">
              <input type="checkbox" id="inlineCheckbox3" name="types[essay]" value="essay"  {% if app.request.query.get('types').essay|default('') %} checked {% endif %}>问答题
            </label>
            <label class="checkbox-inline">
              <input type="checkbox" id="inlineCheckbox3" name="types[material]" value="material"  {% if app.request.query.get('types').material|default('') %} checked {% endif %}>材料题
            </label>
          </div>
        
        </div>
        <input type="hidden" data-role='tag-ids' name="tag-ids" value="{{ app.request.query.get('tag-ids') }}">
        <input type="hidden" data-role='main-knowledge-ids' name="main-knowledge-ids" value="{{ app.request.query.get('main-knowledge-ids') }}">
        <input type="hidden" data-role='categoryId' value="{{ category.id }}">
      </form>
    {% endif %}


    <table class="table table-striped table-hover" id="quiz-table">
      <thead>
      <tr>
        <th><input type="checkbox"  autocomplete="off"  data-role="batch-select"></th>
        <th width="50%">题干</th>
        <th>类型</th>
        <th>最后更新</th>
        <th>操作</th>
      </tr>
      </thead>
      <tbody>
        {% for question in questions %}
          {% include 'TopxiaAdminBundle:CategoryQuestionManage:question-tr.html.twig' %}
        {% else %}
          <tr>
            <td colspan="20"><div class="empty">一道题都没有，请点击右上角按钮，按不同的题型录入题目</div></td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
    <div>
      <label class="checkbox-inline"><input type="checkbox"  autocomplete="off" data-role="batch-select"> 全选</label>
      <button class="btn btn-default btn-sm mlm" data-role="batch-delete"  data-name="题目" data-url="{{ path('admin_category_manage_question_deletes',{categoryId:category.id}) }}">删除</button>
      <span class="pull-right text-muted">共{{ paginator.getItemCount() }}题</span>
    </div>
    {{ web_macro.paginator(paginator) }}
  </div>
</div>