{% extends 'old-bootstrap-modal-layout.html.twig' %}

{% block title %}{{'admin.order_refund.audit.content_title'|trans}}{% endblock %}

{% block body %}
  {% set coinSetting = setting('coin') %}
  <form id="order-refund-confirm-form" class="form-horizontal" method="post" action="{{ path('admin_order_audit_refund', {id:order.id}) }}">

    <div class="form-group">
      <label class="col-md-3 control-label">{{'admin.order_refund.order_amount'|trans}}</label>
      <div class="col-md-8 controls">
        <span class="control-text">{{ order.pay_amount/100 }}{{'site.currency.CNY'|trans}}</span>
      </div>
    </div>

    <div class="form-group">
      <label class="col-md-3 control-label">现金支付</label>
      <div class="col-md-8 controls">
        <span class="control-text">
        {{ trade.cash_amount/100 }}{{'site.currency.CNY'|trans}}
        ({{dict_text('payment', trade.platform)}}) 
        （需线下手动退款）
        </span>
      </div>
    </div>

    <div class="form-group">
      <label class="col-md-3 control-label">{{coinSetting.coin_name}}支付</label>
      <div class="col-md-8 controls">
        <span class="control-text">
        {{ trade.coin_amount * trade.rate }}{{'site.currency.CNY'|trans}} 
        (={{trade.coin_amount ~ coinSetting.coin_name}})
        （提交后自动退款）
        </span>
      </div>
    </div>

    <div class="form-group">
      <label class="col-md-3 control-label">{{'admin.order_refund.audit.result'|trans}}</label>
      <div class="col-md-8 controls radios">
        {{ radios('result', {pass:'form.radio_btn.pass'|trans, unpass:'form.radio_btn.unpass'|trans}) }}
      </div>
    </div>

    <div class="form-group amount-form-group" style="display:none;">
      <label class="col-md-3 control-label" for="refund-amount-field">{{'admin.order_refund.audit.refund_actual_amount'|trans}}</label>
      <div class="col-md-8 controls">
        <input id="refund-amount-field" class="form-control" type="text" name="amount">
      </div>
    </div>

    <div class="form-group">
      <label class="control-label col-md-3" for="refund-note-field">{{'admin.order_refund.audit.description'|trans}}</label>
      <div class="col-md-8 controls">
        <textarea id="refund-note-field" class="form-control" name="note"></textarea>
      </div>
    </div>

    <input type="hidden" name="_csrf_token" value="{{ csrf_token('site') }}">
    <div class="alert alert-info text-center">
      <strong>{{ 'admin.order_refund.audit.tips'|trans }}</strong>
    </div>
  </form>
{% endblock %}

{% block footer %}
  <button id="refund-confirm-btn" data-submiting-text="{{'form.btn.submit.submiting'|trans}}" class="btn btn-primary" type="submit" data-toggle="form-submit" data-target="#order-refund-confirm-form">{{'form.btn.submit'|trans}}</button>
  
  <script>app.load('order/refund-confirm-modal');</script>
{% endblock %}