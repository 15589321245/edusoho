webpackJsonp(["app/js/activity-manage/audio/index"],[function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_fileChoose=__webpack_require__("eca7a2561fa47d3f75f6"),_fileChoose2=_interopRequireDefault(_fileChoose),_chooserUi=__webpack_require__("f324dbdea53170d5000f"),Audio=function(){function Audio(){_classCallCheck(this,Audio),(0,_chooserUi.showChooserType)($('[name="ext[mediaId]"]')),this.initStep2form(),this.autoValidatorLength(),this.initfileChooser()}return _createClass(Audio,[{key:"initStep2form",value:function(){var $step2_form=$("#step2-form");$step2_form.data("validator");$step2_form.validate({groups:{nameGroup:"minute second"},rules:{title:{required:!0,maxlength:50,trim:!0},minute:"required unsigned_integer unsigned_integer",second:"required second_range unsigned_integer","ext[mediaId]":"required"},messages:{minute:{required:"请输入时长",unsigned_integer:"时长必须大于0"},second:{required:"请输入时长",second_range:"秒只能在0-59之间",unsigned_integer:"时长必须大于0"},"ext[mediaId]":"请上传或选择%display%"}})}},{key:"autoValidatorLength",value:function(){$(".js-length").blur(function(){var validator=$("#step2-form").data("validator");if(validator&&validator.form()){var minute=0|parseInt($("#minute").val()),second=0|parseInt($("#second").val());$("#length").val(60*minute+second)}})}},{key:"initfileChooser",value:function(){var fileChooser=new _fileChoose2["default"],onSelectFile=function(file){if((0,_chooserUi.chooserUiClose)(),file.length){var minute=parseInt(file.length/60),second=Math.round(file.length%60);$("#minute").val(minute),$("#second").val(second),$("#length").val(60*minute+second)}$('[name="ext[mediaId]"]').val(file.source),"self"==file.source?($("#ext_mediaId").val(file.id),$("#ext_mediaUri").val("")):($("#ext_mediaId").val(""),$("#ext_mediaUri").val(file.uri))};fileChooser.on("select",onSelectFile)}}]),Audio}();new Audio}]);