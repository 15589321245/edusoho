{"version":3,"sources":["webpack:///./app/Resources/static-src/app/common/widget/chapter-animate.js?a523*","webpack:///./app/Resources/static-src/app/js/course-manage/help.js?ac8f**","webpack:///./app/Resources/static-src/app/js/course-manage/index.js"],"names":["toggleIcon","target","$expandIconClass","$putIconClass","$icon","find","$text","hasClass","removeClass","addClass","text","Translator","trans","chapterAnimate","delegateTarget","$","on","event","$this","currentTarget","nextUntil","animate","height","opacity","sortablelist","list","$list","data","sortable","get","lessonNum","chapterNum","unitNum","each","$item","length","trigger","post","ids","response","taskSortable","element","ajax","closeCourse","evt","$target","confirm","warn","message","success","location","reload","deleteCourse","redirect","window","href","publishCourse","delay","deleteTask","parents","remove","console","log","children","document","publishTask","parentLi","closest","unpublishTask","showSettings","$li","stop","slideUp","slideDown","siblings","hide","TabChange","click","updateTaskNum","container","TaskListHeaderFixed","$header","headerTop","offset","top","scroll","scrollTop","popover","sortableList","$chapter"],"mappings":"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","file":"app/js/course-manage/index.js","sourcesContent":["export let toggleIcon = (target, $expandIconClass, $putIconClass) => {\n  let $icon = target.find('.js-remove-icon');\n  let $text = target.find('.js-remove-text');\n  if ($icon.hasClass($expandIconClass)) {\n    $icon.removeClass($expandIconClass).addClass($putIconClass);\n    $text ? $text.text(Translator.trans('收起')): '';\n  } else {\n    $icon.removeClass($putIconClass).addClass($expandIconClass);\n    $text ? $text.text(Translator.trans('展开')): '';\n  }\n}\n\nexport let chapterAnimate = (\n  delegateTarget = 'body',\n  target = '.js-task-chapter',\n  $expandIconClass = 'es-icon-remove',\n  $putIconClass = 'es-icon-anonymous-iconfont') => {\n  $(delegateTarget).on('click', target, (event) => {\n    let $this = $(event.currentTarget);\n    $this.nextUntil(target).animate({ height: 'toggle', opacity: 'toggle' }, \"normal\");\n    toggleIcon($this, $expandIconClass, $putIconClass)\n  })\n}\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/common/widget/chapter-animate.js","import notify from 'common/notify';\nimport sortList from 'common/sortable';\n\nexport const sortablelist = (list) => {\n  let $list = $(list);\n  let data = $list.sortable(\"serialize\").get();\n\n  let lessonNum = 0,\n    chapterNum = 0,\n    unitNum = 0;\n  $list.find('.task-manage-item').each(function () {\n    let $item = $(this);\n    if ($item.hasClass('js-task-manage-item')) {\n      if ($item.find('.number').length > 0) {\n        lessonNum++;\n        $item.find('.number').text(lessonNum);\n      }\n    } else if ($item.hasClass('task-manage-unit')) {\n      unitNum++;\n      $item.find('.number').text(unitNum);\n    } else if ($item.hasClass('task-manage-chapter')) {\n      chapterNum++;\n      unitNum = 0;\n      $item.find('.number').text(chapterNum);\n    }\n  });\n\n  $list.trigger('finished');\n\n  $.post($list.data('sortUrl'), { ids: data }, (response) => {\n\n  });\n}\n\nexport const taskSortable = (list) => {\n  if ($(list).length) {\n    sortList({\n      element: list,\n      ajax: false,\n    }, (data) => {\n      sortablelist(list);\n    });\n  }\n}\n\nexport const closeCourse = () => {\n  $('body').on('click', '.js-close-course', function (evt) {\n    let $target = $(evt.currentTarget);\n    if (!confirm(Translator.trans('course.manage.close_hint'))) {\n      return;\n    }\n\n    $.post($target.data('check-url'), function (data) {\n\n      if (data.warn) {\n        if (!confirm(Translator.trans(data.message))) {\n          return;\n        }\n      }\n\n      $.post($target.data('url'), function (data) {\n        if (data.success) {\n          notify('success', Translator.trans('course.manage.close_success_hint'));\n          location.reload();\n        } else {\n          notify('danger', Translator.trans('course.manage.close_fail_hint') + ':' + data.message);\n        }\n      });\n    });\n  });\n};\n\nexport const deleteCourse = () => {\n  $('body').on('click', '.js-delete-course', function (evt) {\n    if (!confirm(Translator.trans('course.manage.delete_hint'))) {\n      return;\n    }\n    $.post($(evt.currentTarget).data('url'), function (data) {\n      if (data.success) {\n        notify('success', Translator.trans('site.delete_success_hint'));\n        if (data.redirect) {\n          window.location.href = data.redirect;\n        }else {\n          location.reload();\n        }\n      } else {\n        notify('danger', Translator.trans('site.delete_fail_hint') + ':' + data.message);\n      }\n    });\n  });\n};\n\nexport const publishCourse = () => {\n  $('body').on('click', '.js-publish-course', function (evt) {\n    if (!confirm(Translator.trans('course.manage.publish_hint'))) {\n      return;\n    }\n    $.post($(evt.target).data('url'), function (data) {\n      if (data.success) {\n        notify('success', Translator.trans('course.manage.task_publish_success_hint'));\n        location.reload();\n      } else {\n        notify('danger', Translator.trans('course.manage.task_publish_fail_hint')+':' + data.message, {delay:5000});\n      }\n    });\n  });\n};\n\nexport const deleteTask = () => {\n  $('body').on('click', '.delete-item', function (evt) {\n    if ($(evt.currentTarget).data('type') == 'task') {\n      if (!confirm(Translator.trans('course.manage.task_delete_hint'))) {\n        return;\n      }\n    } else if ($(evt.currentTarget).data('type') == 'chapter') {\n      if (!confirm(Translator.trans('course.manage.chapter_delete_hint'))) {\n        return;\n      }\n    }\n    $.post($(evt.currentTarget).data('url'), function (data) {\n      if (data.success) {\n        notify('success', Translator.trans('site.delete_success_hint'));\n        $(evt.target).parents('.task-manage-item').remove();\n        sortablelist('#sortable-list');\n        console.log($('#sortable-list').children('li').length);\n        if($('#sortable-list').children('li').length < 1 && $('.js-task-empty').hasClass('hidden') ) {\n            $('.js-task-empty').removeClass('hidden');\n        }\n        document.location.reload();\n      } else {\n        notify('danger', Translator.trans('site.delete_fail_hint') + ':' + data.message);\n      }\n    });\n  });\n};\n\nexport const publishTask = () => {\n  $('body').on('click', '.publish-item', (event) => {\n    $.post($(event.target).data('url'), function (data) {\n      if (data.success) {\n        var parentLi = $(event.target).closest('.task-manage-item');\n        notify('success', Translator.trans('course.manage.task_publish_success_hint'));\n        $(parentLi).find('.publish-item').addClass('hidden')\n        $(parentLi).find('.delete-item').addClass('hidden')\n        $(parentLi).find('.unpublish-item').removeClass('hidden')\n        $(parentLi).find('.publish-status').addClass('hidden')\n      } else {\n        notify('danger', Translator.trans('course.manage.task_publish_fail_hint') + ':' + data.message);\n      }\n    });\n  })\n};\n\nexport const unpublishTask = () => {\n  $('body').on('click', '.unpublish-item', (event) => {\n    $.post($(event.target).data('url'), function (data) {\n      if (data.success) {\n        var parentLi = $(event.target).closest('.task-manage-item');\n        notify('success', Translator.trans('course.manage.task_unpublish_success_hint'));\n        $(parentLi).find('.publish-item').removeClass('hidden')\n        $(parentLi).find('.delete-item').removeClass('hidden')\n        $(parentLi).find('.unpublish-item').addClass('hidden')\n        $(parentLi).find('.publish-status').removeClass('hidden')\n      } else {\n        notify('danger', Translator.trans('course.manage.task_unpublish_fail_hint') + ':' + data.message);\n      }\n    });\n  })\n};\n\nexport const showSettings = () => {\n  $(\"#sortable-list\").on('click', '.js-item-content', (event) => {\n    console.log('click');\n    let $this = $(event.currentTarget);\n    let $li = $this.closest('.js-task-manage-item');\n    if ($li.hasClass('active')) {\n      $li.removeClass('active').find('.js-settings-list').stop().slideUp(500);\n    }\n    else {\n      $li.addClass('active').find('.js-settings-list').stop().slideDown(500);\n      $li.siblings(\".js-task-manage-item.active\").removeClass('active').find('.js-settings-list').hide();\n    }\n  });\n};\n\nexport const TabChange = () => {\n  $('[data-role=\"tab\"]').click(function (event) {\n    let $this = $(this);\n    $($this.data('tab-content')).removeClass(\"hidden\").siblings('[data-role=\"tab-content\"]').addClass('hidden');\n  });\n};\n\nexport const updateTaskNum = (container) => {\n  // let $container = $(container);\n  // $container.on('finished',function(){\n  //   $('#task-num').text($(container).find('i[data-role=\"task\"]').length);\n  // })\n}\n\nexport const TaskListHeaderFixed = () => {\n  let $header = $('.js-task-list-header');\n  if(!$header.length){\n    return;\n  }\n  let headerTop = $header.offset().top;\n\t$(window).scroll(function(event) {\n\t\t\tif ($(window).scrollTop() >= headerTop) {\n\t\t\t\t$header.addClass('fixed')\n\t\t\t} else {\n\t\t\t\t$header.removeClass('fixed');\n\t\t\t}\n\t});\n}\n\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/course-manage/help.js","import {\n  taskSortable,\n  courseFunctionRemask,\n  closeCourse,\n  deleteCourse,\n  showSettings,\n  deleteTask,\n  publishTask,\n  unpublishTask,\n  updateTaskNum,\n  TaskListHeaderFixed\n} from './help';\n\nimport { toggleIcon } from 'app/common/widget/chapter-animate';\n\n$('[data-help=\"popover\"]').popover();\n\nlet sortableList = '#sortable-list';\ntaskSortable(sortableList);\nupdateTaskNum(sortableList);\ncloseCourse();\ndeleteCourse();\ndeleteTask();\npublishTask();\nunpublishTask();\nshowSettings();\nTaskListHeaderFixed();\n// @TODO拆分，这个js被几个页面引用了有的页面根本不用js\n\n$('#sortable-list').on('click', '.js-chapter-toggle-show', (event) => {\n  let $this = $(event.currentTarget);\n  let $chapter = $this.closest('.js-task-manage-chapter');\n  $chapter.nextUntil('.js-task-manage-chapter').animate({ height: 'toggle', opacity: 'toggle' }, \"normal\");\n  toggleIcon($chapter, 'es-icon-keyboardarrowdown', 'es-icon-keyboardarrowup');\n});\n\n\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/course-manage/index.js"],"sourceRoot":""}