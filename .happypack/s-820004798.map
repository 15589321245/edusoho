{"version":3,"sources":["app/Resources/static-src/app/js/course-manage/marketing/index.js"],"names":["Marketing","init","$","perfectScrollbar","$form","validator","validate","onkeyup","rules","originPrice","required","val","currency","tryLookLength","digits","tryLookLimit","messages","Translator","trans","addMethod","value","element","params","optional","test","on","event","$li","toggleClass","$input","find","prop","is","stopPropagation","closest","removeClass","addClass","datetimepicker","format","language","minView","autoclose","click","$item","currentTarget","$values","values","JSON","parse","hasClass","splice","indexOf","text","push","stringify","evt","form","button","submit"],"mappings":"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","file":"index.js","sourceRoot":"/Users/kz/projects/edusoho","sourcesContent":["\nimport { TabChange } from '../help';\n\nclass Marketing {\n\tconstructor(){\n\t\tthis.init();\n\t}\n\n\tinit(){\n\t\t$('.js-task-price-setting').perfectScrollbar();\n\t\tlet $form = $('#course-marketing-form');\n\t\t$('.js-task-price-setting').perfectScrollbar();\n\t\tTabChange();\n\n\t\tlet validator = $form.validate({\n\t\t\tonkeyup: false,\n\t\t\trules: {\n        originPrice: {\n\t\t\t\t\trequired: function() {\n            return $(\"[name=isFree]:checked\").val() == 0;\n          },\n\t\t\t\t\tcurrency: true\n\t\t\t\t},\n\t\t\t\ttryLookLength: {\n\t\t\t\t\trequired: '#enableTryLook:checked',\n\t\t\t\t\tdigits: true\n\t\t\t\t},\n\t\t\t\ttryLookLimit: {\n\t\t\t\t\trequired: '#enableTryLook:checked',\n\t\t\t\t\tdigits: true\n\t\t\t\t}\n\t\t\t},\n\t\t\tmessages: {\n        originPrice: {\n\t\t\t\t\trequired: Translator.trans('请输入价格'),\n\t\t\t\t\tcurrency: Translator.trans('请输入价格，最多两位小数')\n\t\t\t\t},\n\t\t\t\ttryLookLength: Translator.trans('请输入试看时长'),\n\t\t\t\ttryLookLimit: Translator.trans('请输入视频观看时长限制')\n\t\t\t}\n\t\t});\n\n\t\t$.validator.addMethod(\"currency\",function(value, element, params) {\n      return this.optional(element) || /^[1-9]{0,8}(\\.\\d{0,2})?$/.test(value);\n    },Translator.trans('请输入价格，最多两位小数'));\n\n    $('.js-task-price-setting').on('click','li',function(event){\n      let $li = $(this).toggleClass('open');\n      let $input =  $li.find('input');\n      $input.prop(\"checked\", !$input.is(\":checked\"))\n    });\n\n    $('.js-task-price-setting').on('click','input',function(event){\n      event.stopPropagation();\n      let $input =  $(this);\n      $input.closest('li').toggleClass('open');\n    });\n\n\t\t$('input[name=\"isFree\"]').on('change', function(event){\n\t\t\tif($('input[name=\"isFree\"]:checked').val() == 0){\n\t\t\t\t$('.js-is-free').removeClass('hidden');\n\t\t\t}else{\n\t\t\t\t$('.js-is-free').addClass('hidden');\n\t\t\t}\n    });\n\n\t\t$('input[name=\"enableBuyExpiryTime\"]').on('change', function(event){\n\t\t\tif($('input[name=\"enableBuyExpiryTime\"]:checked').val() == 0){\n\t\t\t\t$('#buyExpiryTime').addClass('hidden');\n\t\t\t}else{\n\t\t\t\t$('#buyExpiryTime').removeClass('hidden');\n\t\t\t}\n    });\n\n\t\t$('input[name=\"buyExpiryTime\"]').datetimepicker({\n\t\t\tformat: 'yyyy-mm-dd',\n\t\t\tlanguage: \"zh\",\n\t\t\tminView: 2, //month\n\t\t\tautoclose: true\n\t\t});\n\n    $('input[name=\"tryLookable\"]').on('change', function(event){\n      if($('input[name=\"tryLookable\"]:checked').val() == 1){\n\t\t\t\t$('.js-enable-try-look').removeClass('hidden');\n\t\t  }else{\n\t\t\t $('.js-enable-try-look').addClass('hidden');\n\t\t  }\n    });\t\n\n    $('.js-service-item').click(function(event){\n    \tlet $item = $(event.currentTarget);\n    \tlet $values = $('#course_services').val();\n    \tif(!$values){\n    \t\tvalues = [];\n    \t}\n    \t$values = JSON.parse($values);\n    \tif($item.hasClass('label-primary')){\n    \t\t$item.removeClass('label-primary');\n    \t\t$item.addClass('label-default');\n    \t\t$values.splice($values.indexOf($item.text()), 1);\n    \t}else{\n    \t\t$item.removeClass('label-default');\n    \t\t$item.addClass('label-primary');\n    \t\t$values.push($item.text());\n    \t}\n    \t$('#course_services').val(JSON.stringify($values));\n    });\n\n\t\t$('#course-submit').click(function(evt){\n      if(validator.form()){\n        $(evt.currentTarget).button('loading');\n        $form.submit();\n      }\n\t  });\n\t}\n}\n\nnew Marketing();"]}