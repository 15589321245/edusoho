{"version":3,"sources":["app/Resources/static-src/app/js/courseset/show/index.js"],"names":["initTaskLearnChart","triggerMemberExpired","remainTime","$","length","colorVaule","css","rgbString","parts","match","i","parseInt","toString","hexString","join","easyPieChart","easing","trackColor","barColor","scaleColor","lineWidth","size","onStep","from","to","percent","Math","round","el","addClass","find","html","bg","trigger","data","endtime","Date","valueOf","countdown","event","$this","strftime","Translator","trans","on","setTimeout","post","app","crontab","window","location","reload"],"mappings":"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","file":"index.js","sourceRoot":"/Users/kz/projects/edusoho","sourcesContent":["import { chapterAnimate } from 'app/common/widget/chapter-animate';\nimport AttachmentActions from 'app/js/attachment/widget/attachment-actions';\nimport { Browser } from 'common/utils';\nimport Swiper from 'swiper';\n\nchapterAnimate();\ninitTaskLearnChart();\ntriggerMemberExpired();\nremainTime();\n\nif ($('.js-attachment-list').length > 0) {\n  new AttachmentActions($('.js-attachment-list'));\n}\n\nfunction initTaskLearnChart() {\n  let colorVaule = $('.btn-primary').css('background');\n  var rgbString = \"rgb(0, 70, 255)\"; // get this in whatever way.\nvar parts = rgbString.match(/^rgb\\((\\d+),\\s*(\\d+),\\s*(\\d+)\\)$/);\n// parts now should be [\"rgb(0, 70, 255\", \"0\", \"70\", \"255\"]\ndelete (parts[0]);\nfor (var i = 1; i <= 3; ++i) {\n\tparts[i] = parseInt(parts[i]).toString(16);\n\tif (parts[i].length == 1) parts[i] = '0' + parts[i];\n}\nvar hexString = parts.join(''); // \"0070ff\"\n  $('#freeprogress').easyPieChart({\n    easing: 'easeOutBounce',\n    trackColor: '#ebebeb',\n    barColor: colorVaule,\n    scaleColor: false,\n    lineWidth: 14,\n    size: 145,\n    onStep: function (from, to, percent) {\n      $('canvas').css('height', '146px');\n      $('canvas').css('width', '146px');\n      if (Math.round(percent) == 100) {\n        $(this.el).addClass('done');\n      }\n      $(this.el).find('.percent').html('学习进度' + '<br><span class=\"num\">' + Math.round(percent) + '%</span>');\n    }\n  });\n\n  $('#orderprogress-plan').easyPieChart({\n    easing: 'easeOutBounce',\n    trackColor: '#ebebeb',\n    barColor: '#fd890c',\n    scaleColor: false,\n    lineWidth: 14,\n    size: 145,\n  });\n\n  let bg = $('#orderprogress-plan').length > 0 ? 'transparent' : '#ebebeb';\n\n  $('#orderprogress').easyPieChart({\n    easing: 'easeOutBounce',\n    trackColor: bg,\n    barColor: colorVaule,\n    scaleColor: false,\n    lineWidth: 14,\n    size: 145,\n    onStep: function (from, to, percent) {\n      if (Math.round(percent) == 100) {\n        $(this.el).addClass('done');\n      }\n      $(this.el).find('.percent').html('学习进度' + '<br><span class=\"num\">' + Math.round(percent) + '%</span>');\n    }\n  });\n}\n\nfunction triggerMemberExpired() {\n  if ($('.member-expire').length) {\n    $(\".member-expire a\").trigger('click');\n  }\n}\n\nfunction remainTime() {\n  var remainTime = parseInt($('#discount-endtime-countdown').data('remaintime'));\n  if (remainTime >= 0) {\n    var endtime = new Date(new Date().valueOf() + remainTime * 1000);\n    $('#discount-endtime-countdown').countdown(endtime, function (event) {\n      var $this = $(this).html(event.strftime(Translator.trans('剩余 ')\n        + '<span>%D</span>' + Translator.trans('天 ')\n        + '<span>%H</span>' + Translator.trans('时 ')\n        + '<span>%M</span>' + Translator.trans('分 ')\n        + '<span>%S</span> ' + Translator.trans('秒')));\n    }).on('finish.countdown', function () {\n      $(this).html(Translator.trans('活动时间到，正在刷新网页，请稍等...'));\n      setTimeout(function () {\n        $.post(app.crontab, function () {\n          window.location.reload();\n        });\n      }, 2000);\n    });\n  }\n\n\n}\n\n// 暂时去掉块状\n// let orderLearnSwiper = null;\n// $('.js-task-show-type').on('click', 'a', function() {\n//     let $this = $(this).addClass('active');\n//     $($this.data('list')).removeClass('hidden');\n//     $($this.siblings('a').removeClass('active').data('list')).addClass('hidden');\n//     if($this.data('type') == 'chart'&& !orderLearnSwiper) {\n//       initSwiper();\n//     }\n// })\n// 暂时去掉块状\n// function initSwiper() {\n//   orderLearnSwiper = new Swiper('.swiper-container',{\n//     pagination: '.swiper-pager',\n//     loop:true,\n//     grabCursor: true,\n//     paginationClickable: true\n//   })\n//   $('.arrow-left').on('click', function(e){\n//     e.preventDefault()\n//     orderLearnSwiper.swipePrev();\n//   })\n//   $('.arrow-right').on('click', function(e){\n//     e.preventDefault()\n//     orderLearnSwiper.swipeNext();\n//   })\n// }"]}