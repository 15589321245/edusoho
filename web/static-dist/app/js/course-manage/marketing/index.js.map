{"version":3,"sources":["webpack:///./app/Resources/static-src/app/js/course-manage/marketing/index.js"],"names":["Marketing","validator","init","initDatePicker","initValidator","initExpiryMode","initenableBuyExpiry","taskPriceSetting","checkBoxChange","initDatetimepicker","setService","$","click","event","$item","currentTarget","$values","val","values","JSON","parse","hasClass","removeClass","addClass","splice","indexOf","data","push","stringify","datetimepicker","format","language","document","documentElement","lang","minView","autoclose","on","form","updateDatetimepicker","$form","perfectScrollbar","validate","groups","date","rules","originPrice","required","positive_currency","watchLimit","digits","rewardPoint","max","unsigned_integer","taskRewardPoint","messages","buyExpiryTime","Translator","trans","button","submit","Date","now","$li","toggleClass","$input","find","prop","is","stopPropagation","closest","$id","$picker","endDate","$enableBuyExpiryTime","$buyable","$buyExpiryTime","elementAddRules","getBuyExpiryTimeRules","elementRemoveRules","$deadline","$expiryDays","$expiryStartDate","$expiryEndDate","expiryMode","$deadlineType","getDeadlineEndDateRules","getExpiryDaysRules","getExpiryStartDateRules","getExpiryEndDateRules","after_date","before_date","positive_integer","max_year","$element","options"],"mappings":"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","file":"app/js/course-manage/marketing/index.js","sourcesContent":["class Marketing {\n  constructor() {\n    this.validator = null;\n    this.init();\n  }\n\n  init() {\n    this.initDatePicker('#expiryStartDate');\n    this.initDatePicker('#expiryEndDate');\n    this.initDatePicker('#deadline');\n    this.initValidator();\n    this.initExpiryMode();\n    this.initenableBuyExpiry();\n    this.taskPriceSetting();\n    this.checkBoxChange();\n    this.initDatetimepicker();\n    this.setService();\n  }\n\n  setService() {\n    $('.js-service-item').click(function (event) {\n      let $item = $(event.currentTarget);\n      let $values = $('#course_services').val();\n      let values;\n      if (!$values) {\n        values = [];\n      } else {\n        values = JSON.parse($values);\n      }\n\n      if ($item.hasClass('label-primary')) {\n        $item.removeClass('label-primary').addClass('label-default');\n        values.splice(values.indexOf($item.data('code')), 1);\n      } else {\n        $item.removeClass('label-default').addClass('label-primary');\n        values.push($item.data('code'));\n      }\n      \n      $('#course_services').val(JSON.stringify(values));\n    });\n  }\n\n  initDatetimepicker() {\n    $('input[name=\"buyExpiryTime\"]').datetimepicker({\n      format: 'yyyy-mm-dd',\n      language: document.documentElement.lang,\n      minView: 2, //month\n      autoclose: true,\n    }).on('hide', () => {\n      this.validator && this.validator.form();\n    })\n    this.updateDatetimepicker();\n  }\n\n  initValidator() {\n    let $form = $('#course-marketing-form');\n    $('.js-task-price-setting').perfectScrollbar();\n    this.validator = $form.validate({\n      groups: {\n        date: 'expiryStartDate expiryEndDate'\n      },\n      rules: {\n        originPrice: {\n          required: function () {\n            return $(\"[name=isFree]:checked\").val() == 0;\n          },\n          positive_currency: function () {\n            return $(\"[name=isFree]:checked\").val() == 0;\n          },\n        },\n        watchLimit: {\n          digits: true\n        },\n        rewardPoint: {\n          required: true,\n          max:100000,\n          unsigned_integer:true,\n        },\n        taskRewardPoint: {\n          required: true,\n          max:100000,\n          unsigned_integer:true,\n        }\n      },\n      messages: {\n        buyExpiryTime: {\n          required: Translator.trans('course.manage.buy_expiry_time_error_hint'),\n          date: Translator.trans('course.manage.buy_expiry_time_error_hint')\n        },\n        rewardPoint: {\n          required: Translator.trans('请输入教学计划奖励积分'),\n          max: Translator.trans('请输入0-100000的整数')\n        },\n        taskRewardPoint: {\n          required: Translator.trans('请输入计划任务奖励积分'),\n          max: Translator.trans('请输入0-100000的整数')\n        },\n      }\n    });\n    $('#course-submit').click((event) => {\n      if (this.validator && this.validator.form()) {\n        $(event.currentTarget).button('loading');\n        $form.submit();\n      }\n    });\n  }\n\n  updateDatetimepicker() {\n    $('input[name=\"buyExpiryTime\"]').datetimepicker('setStartDate', new Date(Date.now()));\n    $('input[name=\"buyExpiryTime\"]').datetimepicker('setEndDate', new Date(Date.now() + 86400 * 365 * 10 * 1000));\n  }\n\n  checkBoxChange() {\n    $('input[name=\"buyable\"]').on('change',  (event)=> {\n      if ($('input[name=\"buyable\"]:checked').val() == 0) {\n        $('.js-course-add-close-show').removeClass('hidden');\n        $('.js-course-add-open-show').addClass('hidden');\n      } else {\n        $('.js-course-add-close-show').addClass('hidden');\n        $('.js-course-add-open-show').removeClass('hidden');\n      }\n      this.initenableBuyExpiry();\n    });\n    $('input[name=\"enableBuyExpiryTime\"]').on('change', (event) => {\n      if ($('input[name=\"enableBuyExpiryTime\"]:checked').val() == 0) {\n        $('#buyExpiryTime').addClass('hidden');\n      } else {\n        $('#buyExpiryTime').removeClass('hidden');\n        this.updateDatetimepicker();\n      }\n      this.initenableBuyExpiry();\n    });\n\n    $('input[name=\"deadlineType\"]').on('change', (event) => {\n      if ($('input[name=\"deadlineType\"]:checked').val() == 'end_date') {\n        $('#deadlineType-date').removeClass('hidden');\n        $('#deadlineType-days').addClass('hidden');\n      } else {\n        $('#deadlineType-date').addClass('hidden');\n        $('#deadlineType-days').removeClass('hidden');\n      }\n      this.initExpiryMode();\n    });\n\n    $('input[name=\"expiryMode\"]').on('change', (event) => {\n      if ($('input[name=\"expiryMode\"]:checked').val() == 'date') {\n        $('#expiry-days').removeClass('hidden').addClass('hidden');\n        $('#expiry-date').removeClass('hidden');\n      } else if ($('input[name=\"expiryMode\"]:checked').val() == 'days') {\n        $('#expiry-date').removeClass('hidden').addClass('hidden');\n        $('#expiry-days').removeClass('hidden');\n      } else {\n        $('#expiry-date').removeClass('hidden').addClass('hidden');\n        $('#expiry-days').removeClass('hidden').addClass('hidden');\n      }\n      this.initExpiryMode();\n    });\n\n    $('input[name=\"isFree\"]').on('change', (event) => {\n      if ($('input[name=\"isFree\"]:checked').val() == 0) {\n        $('.js-is-free').removeClass('hidden');\n      } else {\n        $('.js-is-free').addClass('hidden');\n      }\n    });\n    $('input[name=\"tryLookable\"]').on('change', (event) => {\n      if ($('input[name=\"tryLookable\"]:checked').val() == 1) {\n        $('.js-enable-try-look').removeClass('hidden');\n      } else {\n        $('.js-enable-try-look').addClass('hidden');\n      }\n    });\n\n    $('input[name=\"showServices\"]').on('change', (event) => {\n      if ($('input[name=\"showServices\"]:checked').val() == 1) {\n        $('.js-services').removeClass('hidden');\n      } else {\n        $('.js-services').addClass('hidden');\n      }\n    });\n  }\n\n  taskPriceSetting() {\n    $('.js-task-price-setting').on('click', 'li', function (event) {\n      let $li = $(this).toggleClass('open');\n      let $input = $li.find('input');\n      $input.prop(\"checked\", !$input.is(\":checked\"))\n    });\n\n    $('.js-task-price-setting').on('click', 'input', function (event) {\n      event.stopPropagation();\n      let $input = $(this);\n      $input.closest('li').toggleClass('open');\n    });\n  }\n\n  initDatePicker($id) {\n    let $picker = $($id);\n    $picker.datetimepicker({\n      format: 'yyyy-mm-dd',\n      language: \"zh\",\n      minView: 2, //month\n      autoclose: true,\n      endDate: new Date(Date.now() + 86400 * 365 * 10 * 1000)\n    }).on('hide', () => {\n      this.validator.form();\n    });\n    $picker.datetimepicker('setStartDate', new Date());\n  }\n\n  initenableBuyExpiry() {\n    let $enableBuyExpiryTime = $('[name=\"enableBuyExpiryTime\"]:checked');\n    let $buyable = $('[name=\"buyable\"]:checked');\n    let $buyExpiryTime = $('[name=\"buyExpiryTime\"]');\n    if ($buyable.val() == 1 && $enableBuyExpiryTime.val() == 1) {\n      this.elementAddRules($buyExpiryTime, this.getBuyExpiryTimeRules());\n    }\n    else {\n      this.elementRemoveRules($buyExpiryTime);\n    }\n    this.validator.form();\n  }\n\n  initExpiryMode() {\n    let $deadline = $('[name=\"deadline\"]');\n    let $expiryDays = $('[name=\"expiryDays\"]');\n    let $expiryStartDate = $('[name=\"expiryStartDate\"]');\n    let $expiryEndDate = $('[name=\"expiryEndDate\"]');\n    let expiryMode = $('[name=\"expiryMode\"]:checked').val();\n    this.elementRemoveRules($deadline);\n    this.elementRemoveRules($expiryDays);\n    this.elementRemoveRules($expiryStartDate);\n    this.elementRemoveRules($expiryEndDate);\n\n    switch (expiryMode) {\n      case 'days':\n        let $deadlineType = $('[name=\"deadlineType\"]:checked');\n        if ($deadlineType.val() === 'end_date') {\n          this.elementAddRules($deadline, this.getDeadlineEndDateRules());\n          this.validator.form();\n          return;\n        }\n        this.elementAddRules($expiryDays, this.getExpiryDaysRules());\n        this.validator.form();\n        break;\n      case 'date':\n        this.elementAddRules($expiryStartDate, this.getExpiryStartDateRules());\n        this.elementAddRules($expiryEndDate, this.getExpiryEndDateRules());\n        this.validator.form();\n        break;\n      default:\n        this.validator.form();\n        break;\n    }\n  }\n\n  getBuyExpiryTimeRules() {\n    return {\n      required: true,\n      messages: {\n        required: Translator.trans('course.manage.buy_expiry_time_required_error_hint')\n      }\n    };\n  }\n\n  getExpiryEndDateRules() {\n    return {\n      required: true,\n      date: true,\n      after_date: '#expiryStartDate',\n      messages: {\n        required: Translator.trans('course.manage.expiry_end_date_error_hint')\n      }\n    }\n  }\n\n  getExpiryStartDateRules() {\n    return {\n      required: true,\n      date: true,\n      before_date: '#expiryEndDate',\n      messages: {\n        required: Translator.trans('course.manage.expiry_start_date_error_hint')\n      }\n    }\n  }\n\n  getExpiryDaysRules() {\n    return {\n      required: true,\n      positive_integer: true,\n      max_year: true,\n      messages: {\n        required: Translator.trans(Translator.trans('course.manage.expiry_days_error_hint'))\n      }\n    }\n  }\n\n  getDeadlineEndDateRules() {\n    return {\n      required: true,\n      date: true,\n      messages: {\n        required: Translator.trans('course.manage.deadline_end_date_error_hint')\n      }\n    }\n  }\n\n  elementAddRules($element, options) {\n    $element.rules(\"add\", options);\n  }\n\n  elementRemoveRules($element) {\n    $element.rules('remove');\n  }\n}\n\nnew Marketing();\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/course-manage/marketing/index.js"],"sourceRoot":""}