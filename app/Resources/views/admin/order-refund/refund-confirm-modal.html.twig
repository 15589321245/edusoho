{% extends 'old-bootstrap-modal-layout.html.twig' %}
{% import "admin/macro.html.twig" as admin_macro %}

{% block title %}{{'admin.order_refund.audit.content_title'|trans}}{% endblock %}

{% block body %}
  {% set coinSetting = setting('coin') %}
  <form id="order-refund-confirm-form" class="form-horizontal" method="post" action="{{ path('admin_order_audit_refund', {refundId:refund.id}) }}">
    <table class="table cd-table table-striped order-detail-table">
      <tr>
        <td width="25%">
        </td>
        <td width="75%">
          {{ radios('result', {pass:'form.radio_btn.pass'|trans, unpass:'form.radio_btn.unpass'|trans}) }}
        </td>
      </tr>
      <tr>
        <td width="25%">{{ '退款人'|trans }}</td>
        <td width="75%">{{ admin_macro.user_link(user) }}</td>
      </tr>
      <tr>
        <td width="25%">{{ '退款申请时间'|trans }}</td>
        <td width="75%">{{ refund.created_time|date('Y-n-d H:i:s') }}</td>
      </tr>
      <tr>
        <td width="25%">{{ '退款理由'|trans }}</td>
        <td width="75%">{{ refund.reason }}</td>
      </tr>
      <tr>
        <td width="25%">{{ '商品名称'|trans }}</td>
        <td width="75%">{{ order.title }}</td>
      </tr>
      <tr>
        <td width="25%">{{ '实付价格'|trans }}</td>
        <td width="75%"><span class="color-warning">{{ order.pay_amount|fen_to_yuan(0) }}</span> {{ 'site.currency.CNY'|trans }}</td>
      </tr>
      <tr>
        <td width="25%" class="text-muted" style="padding-left: 32px;">{{ '实付虚拟币'|trans }}</td>
        <td width="75%"><span class="color-warning">{{ order.paid_coin_amount|fen_to_yuan(0) }}</span></td>
      </tr>
      <tr>
        <td width="25%" class="text-muted" style="padding-left: 32px;">{{ '实付现金'|trans }}</td>
        <td width="75%"><span class="color-warning">{{ order.paid_cash_amount|fen_to_yuan(0) }}</span> {{ 'site.currency.CNY'|trans }}</td>
      </tr>
      <tr>
        <td width="25%">{{ '退款总额'|trans }}</td>
        <td width="75%"><span class="color-warning">{{ refund.amount|fen_to_yuan(0) }}</span> {{ 'site.currency.CNY'|trans }}</td>
      </tr>
      <tr>
        <td width="25%" class="text-muted" style="padding-left: 32px;">{{ '退款虚拟币'|trans }}</td>
        <td width="75%"><span class="color-warning">{{ refund.refund_coin_amount|fen_to_yuan(0) }}</span></td>
      </tr>
      <tr>
        <td width="25%" class="text-muted" style="padding-left: 32px;">{{ '退款现金'|trans }}</td>
        <td width="75%"><span class="color-warning">{{ refund.refund_coin_amount|fen_to_yuan(0) }}</span> {{ 'site.currency.CNY'|trans }}</td>
      </tr>
      <tr>
        <td width="25%">{{ '反馈信息'|trans }}</td>
        <td width="75%">
          <textarea id="refund-note-field" class="form-control" name="note"></textarea>
        </td>
      </tr>
    </table>
    {#<div class="form-group">#}
      {#<label class="col-md-3 control-label">{{'admin.order_refund.order_amount'|trans}}</label>#}
      {#<div class="col-md-8 controls">#}
        {#<span class="control-text">{{ refund.amount|fen_to_yuan(0) }}</span>#}
      {#</div>#}
    {#</div>#}

    {#<div class="form-group">#}
      {#<label class="col-md-3 control-label">{{ 'order.payment_pattern.cash'|trans }}</label>#}
      {#<div class="col-md-8 controls">#}
        {#<span class="control-text">#}
        {#{{ refund.refund_cash_amount|fen_to_yuan(0) }}#}
        {#（{{ 'admin.order_cash.refund.success.tips'|trans }}）#}
        {#</span>#}
      {#</div>#}
    {#</div>#}

    {#{% if refund.refund_coin_amount %}#}
      {#<div class="form-group">#}
        {#<label class="col-md-3 control-label">{{ 'order.payment_pattern.coin'|trans({'%coin_name%': coinSetting.coin_name}) }}</label>#}
        {#<div class="col-md-8 controls">#}
          {#<span class="control-text">#}
          {#{{ refund.refund_coin_amount|fen_to_yuan(0) }}#}
          {#（{{ 'admin.order_coin.refund.success.tips'|trans }}）#}
          {#</span>#}
        {#</div>#}
      {#</div>#}
    {#{% endif %}#}

    {#<div class="form-group">#}
      {#<label class="col-md-3 control-label">{{'admin.order_refund.audit.result'|trans}}</label>#}
      {#<div class="col-md-8 controls radios">#}
        {#{{ radios('result', {pass:'form.radio_btn.pass'|trans, unpass:'form.radio_btn.unpass'|trans}) }}#}
      {#</div>#}
    {#</div>#}

    {#<div class="form-group">#}
      {#<label class="control-label col-md-3" for="refund-note-field">{{'admin.order_refund.audit.description'|trans}}</label>#}
      {#<div class="col-md-8 controls">#}
        {#<textarea id="refund-note-field" class="form-control" name="note"></textarea>#}
      {#</div>#}
    {#</div>#}

    <input type="hidden" name="_csrf_token" value="{{ csrf_token('site') }}">
    {% if refund.refund_coin_amount %}
       <div class="alert alert-danger">
        <strong>
          {{ 'admin.order_cash_coin_refund.audit.tips'|trans }}
        </strong>
      </div>
    {% else %}
       <div class="alert alert-info">
        <strong>
          {{ 'admin.order_cash_refund.audit.tips'|trans }}
        </strong>
      </div>
    {% endif %}
  </form>
{% endblock %}

{% block footer %}
  <button id="refund-confirm-btn" data-submiting-text="{{'form.btn.submit.submiting'|trans}}" class="btn btn-primary" type="submit" data-toggle="form-submit" data-target="#order-refund-confirm-form">{{'form.btn.submit'|trans}}</button>
  
  <script>app.load('order/refund-confirm-modal');</script>
{% endblock %}