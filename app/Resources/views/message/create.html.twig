{% extends 'old-layout.html.twig' %}

{% block title %}{{ 'user.message.send'|trans }} - {{ parent() }}{% endblock %}
{% set script_controller = 'message/create' %}
{% set script_arguments = {
followingMatchByNickname: path('following_match_bynickname')
} %}

{% block content %}
  <style>

    .ui-autocomplete {
      border: 1px solid #ccc;
      background-color: #FFFFFF;
      box-shadow: 2px 2px 3px #EEEEEE;
    }

    .ui-autocomplete-ctn {
      margin: 0;
      padding: 0;
    }

    .ui-autocomplete-item {
      width: 180px;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
      line-height: 30px;
      padding: 0 10px 0 10px;
      cursor: default;
    }

    .ui-autocomplete-item-hover {
      background: #f2f2f2;
    }

    .ui-autocomplete-item-hl {
      background: #F6FF94;
    }

  </style>
  <div class="row row-8">
    <div class="col-md-8 col-md-offset-2">
      <div class="panel panel-default panel-page">
        <div class="panel-heading">
          <a href="{{ path('message') }}" class="btn btn-default pull-right">{{ 'user.message.btn.back'|trans }}</a>
          <h2>{{ 'user.message.send.content_title'|trans }}</h2>
        </div>

        <form id="message-create-form" class="form-horizontal" method="post">

          <div class="form-group">
            <div class="col-md-12 controls">
              <input type="text" id="message_receiver" name="message[receiver]" required="required" class="form-control"
                     placeholder="{{'user.message.send.receiver_name' |trans }}" data-auto-url="{{ script_arguments.followingMatchByNickname }}"
                     data-url="{{ path('message_check_receiver') }}" data-display="{{'user.message.send.receiver_name'|trans }}"
                     data-widget-cid="widget-2" data-explain=""
                     autocomplete="off">
            </div>
          </div>

          <div class="form-group">
            <div class="col-md-12 controls">
              <textarea id="message_content" name="message[content]" required="required" class="form-control" rows="5"
                        placeholder="{{ 'user.message.send.message_content'|trans }}" data-display="{{ 'user.message.send.message_content'|trans }}" data-widget-cid="widget-3" data-explain=""></textarea>
            </div>
          </div>

          <div class="form-group">
            <div class="col-md-12 controls">
              <button id="message-create-btn" class="btn btn-primary pull-right"
                      data-loading-text="{{ 'form.btn.sending'|trans }}" type="submit" value="">{{ 'form.btn.send'|trans }}</button>
            </div>
          </div>

          <input type="hidden" name="_csrf_token" value="{{ csrf_token('site') }}">
        </form>


      </div><!-- /panel -->
    </div>
  </div>

{% endblock %}