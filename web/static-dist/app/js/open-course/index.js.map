{"version":3,"sources":["webpack:///./app/Resources/static-src/app/js/open-course/index.js","webpack:///./app/Resources/static-src/app/js/thread/thread-show.js?d8f5"],"names":["main","init","onClickThumb","onClickfavorite","removeMask","onClickReplay","$","on","self","url","action","off","css","data","post","res","$number","parent","next","currentNum","html","parseInt","isFavorited","hasClass","text","load","modal","replayUrl","isEsVedio","addClass","setTimeout","find","threadShowWidget","element","ThreadShowWidget","prop","ele","initEvent","length","get","val","response","initPostForm","$node","console","log","onClickPostMore","event","onClickReply","onPostDelete","onPostUp","onConfirmBtn","onClickToggleSubpostForm","onClickEventCancelBtn","onClickSubpost","e","stopPropagation","$btn","currentTarget","parents","removeClass","inSubpost","$container","$form","Translator","trans","trigger","toggleClass","initSubpostForm","confirm","$subpostsNum","remove","status","window","location","href","reload","result","preventDefault","$pageBtn","attr","id","animate","scrollTop","offset","top","closest","$list","that","editor","$textarea","CKEDITOR","replace","toolbar","filebrowserImageUploadUrl","getData","validate","ajax","currentDom","rules","content","submitSuccess","button","append","setData","prepend","pos","empty","submitError","parseJSON","responseText","error","message","eventName"],"mappings":"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","file":"app/js/open-course/index.js","sourcesContent":["import ThreadShowWidget from 'app/js/thread/thread-show';\nimport notify from 'common/notify';\n\nconst main = {\n  init: function () {\n    main.onClickThumb();\n    main.onClickfavorite();\n    main.removeMask();\n    main.onClickReplay();\n  },\n  onClickThumb: function () {\n    $('.js-like-num').on('click', function () {\n      var self = $(this);\n      var url, action;\n      self.off('click').css('cursor', 'default');\n      url = self.data('likeUrl');\n      action = 'addClass';\n      $.post(url, function (res) {\n        var $number = self.parent().next();\n        var currentNum = $number.html();\n\n        $number.html(parseInt(currentNum) + 1);\n\n        self.parent()[action]('active');\n      });\n    })\n  },\n  onClickfavorite: function () {\n    $('.js-favorite-num').on('click', function () {\n      var self = $(this);\n\n      var isFavorited = self.parent().hasClass('active');\n      var url, action, text;\n      if (isFavorited) {\n        text = '收藏';\n        url = self.data('cancelFavoriteUrl');\n        action = 'removeClass';\n      } else {\n        url = self.data('favoriteUrl');\n        action = 'addClass';\n        text = '已收藏';\n      }\n\n      $.post(url, function (data) {\n        if (data['result']) {\n          self.parent().next().html(text);\n          self.parent()[action]('active');\n        } else if (!data['result'] && data['message'] == 'Access Denied') {\n          $('#modal').html();\n          $('#modal').load(self.data('loginUrl'));\n          $('#modal').modal('show');\n        } else {\n          notify('danger',data['message']);\n        }\n\n      })\n    })\n  },\n  //点击ES直播公开课回放\n  onClickReplay: function () {\n    $('.js-play-es-live').on('click', function () {\n      var replayUrl = $(this).data('url');\n      var html = '<iframe src=\\'' + replayUrl + '\\' name=\\'viewerIframe\\' id=\\'viewerIframe\\' width=\\'100%\\'allowfullscreen webkitallowfullscreen height=\\'100%\\' style=\\'border:0px\\'></iframe>';\n      $('.open-course-views').html(html);\n    })\n  },\n  isEsVedio: function () {\n    if ($('#lesson-preview-player').html() == \"\") {\n      $('.embed-responsive-16by9').addClass('masks')\n    }\n  },\n  removeMask: function () {\n    setTimeout(main.isEsVedio, 1500);\n  }\n}\n\nmain.init();\n\nif (!$('#open-course-comment').find('[type=submit]').hasClass('disabled')) {\n  var threadShowWidget = new ThreadShowWidget({\n    element: '#open-course-comment',\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/open-course/index.js","import notify from 'common/notify';\n\nclass ThreadShowWidget {\n    constructor(prop) {\n        this.ele = $(prop.element);\n        this.init();\n    }\n\n    init() {\n        this.initEvent();\n        if ($('[name=access-intercept-check]').length > 0) {\n            $.get($('[name=access-intercept-check]').val(), function (response) {\n                if (response) {\n                    return;\n                }\n\n                $('.access-intercept-modal').modal('show');\n\n            }, 'json');\n        }\n        this.initPostForm();\n    }\n    initEvent() {\n        const $node = this.ele;\n\n        console.log($node);\n\n        $node.on('click', '.js-post-more', event => this.onClickPostMore(event));\n        $node.on('click', '.js-reply', event => this.onClickReply(event));\n        $node.on('click', '.js-post-delete', event => this.onPostDelete(event));\n        $node.on('click', '.js-post-up', event => this.onPostUp(event));\n        $node.on('click', '[data-role=confirm-btn]', event => this.onConfirmBtn(event));\n        $node.on('click', '.js-toggle-subpost-form', event => this.onClickToggleSubpostForm(event));\n        $node.on('click', '.js-event-cancel', event => this.onClickEventCancelBtn(event));\n        $node.on('click', '.thread-subpost-container .pagination a', event => this.onClickSubpost(event));\n    }\n\n    onClickPostMore(e) {\n        e.stopPropagation();\n        const $btn = $(e.currentTarget);\n        $btn.parents('.thread-subpost-moretext').addClass('hide');\n        $btn.parents('.thread-post').find('.thread-subpost').removeClass('hide');\n        $btn.parents('.thread-post').find('.pagination').removeClass('hide');\n    }\n\n    onClickReply(e) {\n        console.log('ok');\n        e.stopPropagation();\n        const $btn = $(e.currentTarget);\n        const inSubpost = $btn.parents('.thread-subpost-list').length > 0;\n        const $container = $btn.parents('.thread-post').find('.thread-subpost-container');\n        const $form = $container.find('.thread-subpost-form');\n        if (inSubpost) {\n            $form.removeClass('hide');\n            const text = Translator.trans('thread.post.reply') + ' @ ' + $btn.parents('.thread-post').data('authorName') + '： ';\n            $form.find('textarea').val(text).trigger('focus');\n\n        } else {\n            $container.toggleClass('hide');\n        }\n\n        if ($btn.html() == Translator.trans('thread.post.reply')) {\n            $btn.html(Translator.trans('thread.post.put_away'));\n        } else {\n            $btn.html(Translator.trans('thread.post.reply'));\n        }\n\n        this.initSubpostForm($form);\n    }\n\n    onPostDelete(e) {\n        e.stopPropagation();\n        const $node = this.ele;\n        const $btn = $(e.currentTarget);\n        if (!confirm(Translator.trans('thread.post.delete_hint'))) {\n            return;\n        }\n        const inSubpost = $btn.parents('.thread-subpost-list').length > 0;\n\n        $.post($btn.data('url'), function () {\n            if (inSubpost) {\n                const $subpostsNum = $btn.parents('.thread-post').find('.subposts-num');\n                $subpostsNum.text(parseInt($subpostsNum.text()) - 1);\n            } else {\n                $node.find('.thread-post-num').text(parseInt($node.find('.thread-post-num').text()) - 1);\n            }\n            $($btn.data('for')).remove();\n        });\n    }\n\n    onPostUp(e) {\n        e.stopPropagation();\n        const $btn = $(e.currentTarget);\n        $.post($btn.data('url'), function (response) {\n            if (response.status == 'ok') {\n                $btn.find(\".post-up-num\").text(parseInt($btn.find(\".post-up-num\").text()) + 1);\n            } else if (response.status == 'votedError') {\n                notify('danger', Translator.trans('thread.post.like_hint'));\n            } else {\n                notify('danger', Translator.trans('thread.post.like_error_hint'));\n            }\n        }, 'json');\n    }\n\n    onConfirmBtn(e) {\n        e.stopPropagation();\n        const $btn = $(e.currentTarget);\n        if (!confirm($btn.data('confirmMessage'))) {\n            return;\n        }\n        $.post($btn.data('url'), function () {\n            if ($btn.data('afterUrl')) {\n                window.location.href = $btn.data('afterUrl');\n                return;\n            }\n            window.location.reload();\n        });\n    }\n\n    onClickToggleSubpostForm(e) {\n        e.stopPropagation();\n        const $btn = $(e.currentTarget);\n        const $form = $btn.parents('.thread-subpost-container').find('.thread-subpost-form');\n        $form.toggleClass('hide');\n        this.initSubpostForm($form);\n    }\n\n    onClickEventCancelBtn(e) {\n        $.post($(e.currentTarget).data('url'), function (result) {\n            window.location.reload();\n        });\n    }\n\n    onClickSubpost(e) {\n        e.preventDefault();\n        const $pageBtn = $(e.currentTarget);\n\n        $.post($pageBtn.attr('href'), function (result) {\n\n            const id = $pageBtn.parents(\".thread-post\").attr(\"id\");\n            $(\"body,html\").animate({\n                scrollTop: $(\"#\" + id).offset().top\n            }, 300), !1\n\n            $pageBtn.closest('.thread-subpost-container .thread-subpost-content').html(result);\n        });\n    }\n\n    initPostForm() {\n        const $list = $('.thread-pripost-list');\n        const $form = $('#thread-post-form');\n        const that = this;\n\n        if ($form.length == 0) {\n            return;\n        }\n\n        let editor = null;\n        const $textarea = $form.find('textarea[name=content]');\n        if ($textarea.data('imageUploadUrl')) {\n            editor = CKEDITOR.replace($textarea.attr('id'), {\n                toolbar: 'Thread',\n                filebrowserImageUploadUrl: $textarea.data('imageUploadUrl')\n            });\n            editor.on('change',()=> {\n                $textarea.val(editor.getData());\n            })\n        }\n        const $btn = $form.find('[type=submit]');\n        $form.validate({\n            ajax: true,\n            currentDom: $btn,\n            rules: {\n                content: 'required'\n            },\n            submitSuccess: function (response) {\n                $btn.button('reset');\n                if ($textarea.data('imageUploadUrl')) {\n                    $list.append(response);\n                    editor.setData('');\n                } else {\n                    $list.prepend(response);\n                    $textarea.val('');\n                }\n\n                const pos = $list.find('li:last-child').offset();\n                $('body').scrollTop(pos.top);\n                $form.find('.thread-post-num').text(parseInt($form.find('.thread-post-num').text()) + 1);\n                $list.find('li.empty').remove();\n                $list.closest('.top-reply').removeClass('hidden');\n\n                //清除附件\n                $('.js-attachment-list').empty();\n                $('.js-attachment-ids').val(\"\");\n                $('.js-upload-file').removeClass('hidden');\n            },\n            submitError: function (data) {\n                $btn.button('reset');\n                data = $.parseJSON(data.responseText);\n                if (data.error) {\n                    notify('danger', data.error.message)\n                } else {\n                    notify('danger', Translator.trans('thread.post.reply_error_hint'))\n                }\n            }\n        })\n    }\n\n    initSubpostForm($form) {\n        const $btn = $form.find('[type=submit]');\n        $form.validate({\n            ajax: true,\n            currentDom: $btn,\n            rules: {\n                content: 'required'\n            },\n            submitSuccess: function (data) {\n                if (data.error) {\n                    notify('danger', data.error);\n                    return;\n                }\n                $btn.button('reset');\n                $form.parents('.thread-subpost-container').find('.thread-subpost-list').append(data);\n                $form.find('textarea').val('');\n                const $subpostsNum = $form.parents('.thread-post').find('.subposts-num');\n                $subpostsNum.text(parseInt($subpostsNum.text()) + 1);\n                $subpostsNum.parent().removeClass('hide');\n            },\n            submitError: function (data) {\n                $btn.button('reset');\n                data = $.parseJSON(data.responseText);\n                if (data.error) {\n                    notify('danger', data.error.message);\n                } else {\n                    notify('danger', Translator.trans('thread.post.reply_error_hint'));\n                }\n            }\n        })\n    }\n\n    undelegateEvents(element, eventName) {\n        this.ele.off(element, eventName);\n    }\n}\n\nexport default ThreadShowWidget\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/thread/thread-show.js"],"sourceRoot":""}