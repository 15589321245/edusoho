{"version":3,"sources":["webpack:///./app/Resources/static-src/app/common/component/persona-multi-input/index.js","webpack:///./app/Resources/static-src/app/common/component/persona-multi-input/list.js","webpack:///./app/Resources/static-src/app/js/course-manage/teachers/index.js"],"names":["initItem","dataSourceUi","data","index","props","obj","itemId","Math","random","nickname","isVisible","avatar","seq","id","outputValue","push","updateChecked","map","item","PersonaMultiInput","onChecked","event","currentTarget","value","state","setState","addItem","replaceItem","length","dataSource","addable","searchable","sortable","listClassName","inputName","showCheckbox","showDeleteBtn","checkBoxName","removeItem","sortItem","propTypes","PropTypes","string","bool","defaultProps","childContextTypes","func","List","context","name","listId","i","Translator","trans","contextTypes","render","$","enable","url","document","getElementById","on","val","submit"],"mappings":"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","file":"app/js/course-manage/teachers/index.js","sourcesContent":["import React, { Component } from 'react';\nimport MultiInput from '../multi-input';\nimport List from './list';\n\nfunction initItem(dataSourceUi,data,index,props) {\n  let obj = {\n    itemId:Math.random(),\n    nickname: data[props.nickname],\n    isVisible: data[props.isVisible] == 1 ? true : false,\n    avatar: data[props.avatar],\n    seq: index,\n    id:data[props.id],\n    outputValue: {\n      [props.id]: data[props.id],\n      [props.isVisible]: data[props.isVisible] ,\n    }\n  }\n  dataSourceUi.push(obj);\n}\n\nfunction updateChecked(dataSourceUi,id) {\n  dataSourceUi.map((item,index)=>{\n    if(item.itemId == id) {\n      dataSourceUi[index].isVisible = !dataSourceUi[index].isVisible;\n      dataSourceUi[index].outputValue.isVisible = dataSourceUi[index].isVisible ? 1 : 0\n    }\n  })\n}\n\nexport default class PersonaMultiInput extends MultiInput {\n  constructor(props) {\n    super(props);\n  }\n  \n  componentWillMount() {\n    this.state = {\n      dataSourceUi: [],\n    }\n    this.props.dataSource.map((item,index)=>{\n      initItem(this.state.dataSourceUi,item,index+1,this.props);\n    })\n  }\n\n  getChildContext() {\n    return {\n      addable: this.props.addable,\n      searchable: this.props.searchable,\n      sortable: this.props.sortable,\n      listClassName:this.props.listClassName,\n      inputName: this.props.inputName,\n      showCheckbox:this.props.showCheckbox,\n      showDeleteBtn:this.props.showDeleteBtn,\n      checkBoxName:this.props.checkBoxName,\n      onChecked:this.onChecked,\n      removeItem: this.removeItem,\n      sortItem: this.sortItem,\n      addItem: this.addItem,\n      dataSourceUi: this.state.dataSourceUi,\n    }\n  }\n\n  onChecked=(event)=> {\n    let id = event.currentTarget.value;\n    updateChecked(this.state.dataSourceUi,id);\n    this.setState({\n      dataSourceUi: this.state.dataSourceUi,\n    });\n  }\n\n  addItem = (value,data) =>{\n    if(!data)  {\n      return;\n    }\n    //@TODO重复添加提示\n    if(this.props.replaceItem) {\n      this.state.dataSourceUi = [];\n    }\n    initItem(this.state.dataSourceUi,data,this.state.dataSourceUi.length+1,this.props);\n\n    this.setState({\n      dataSourceUi: this.state.dataSourceUi,\n    });\n  }\n\n  getList() {\n    return (<List></List>);\n  }\n}\n\nPersonaMultiInput.propTypes = {\n  ...MultiInput.propTypes,\n  id:React.PropTypes.string,\n  nickname:React.PropTypes.string,\n  avatar: React.PropTypes.string,\n  isVisible:React.PropTypes.string,\n  replaceItem: React.PropTypes.bool,\n  showCheckbox:React.PropTypes.bool,\n  showDeleteBtn:React.PropTypes.bool,\n};\n\nPersonaMultiInput.defaultProps = {\n  ...MultiInput.defaultProps,\n  id: 'id',\n  nickname:'nickname',\n  avatar: 'avatar',\n  isVisible:'isVisible',\n  replaceItem: false,\n  showCheckbox: true,\n  showDeleteBtn:true,\n};\n\nPersonaMultiInput.childContextTypes = {\n  ...MultiInput.childContextTypes,\n  showCheckbox:React.PropTypes.bool,\n  showDeleteBtn:React.PropTypes.bool,\n  checkBoxName:React.PropTypes.string,\n  onChecked: React.PropTypes.func,\n};\n\n\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/common/component/persona-multi-input/index.js","import React, { Component } from 'react';\nimport sortList from 'common/sortable';\nimport { getRandomString } from '../multi-input/part';\nimport MultiInputList from 'app/common/component/multi-input/list';\n\nexport default class List extends MultiInputList {\n  constructor(props) {\n    super(props);\n  }\n  \n  render() {\n    const {\n      dataSourceUi,\n      listClassName,\n      sortable,\n      showCheckbox,\n      showDeleteBtn,\n      checkBoxName,\n      inputName\n    } = this.context;\n    let name = '';\n    if (dataSourceUi.length > 0) {\n      name = 'list-group';\n    }\n    return (\n      <ul id={this.listId} className={`multi-list sortable-list ${name} ${listClassName}`}>\n        {\n          dataSourceUi.map((item, i) => {\n            return (\n              <li className=\"list-group-item\" id={item.itemId} key={i} data-seq={item.seq}>\n                {sortable && <i className=\"es-icon es-icon-yidong mrl color-gray inline-block vertical-middle\"></i>}\n                <img className=\"avatar-sm avatar-sm-square mrm\" src={item.avatar} />\n                <span className=\"label-name text-overflow inline-block vertical-middle\">{item.nickname}</span>\n                <label className={showCheckbox ? '' : 'hidden'}><input type=\"checkbox\" name={checkBoxName + item.id} checked={item.isVisible} onChange={event => this.context.onChecked(event)} value={item.itemId} />{Translator.trans('course.manage.teacher_display_label')}</label>\n                <a className={showDeleteBtn ? 'pull-right link-gray mtm' : 'hidden'} onClick={event => this.context.removeItem(event)} data-item-id={item.itemId}>\n                  <i className=\"es-icon es-icon-close01 text-12\"></i>\n                </a>\n                <input type=\"hidden\" name={inputName} value={item.id} />\n              </li>\n            )\n          })\n        }\n      </ul>\n    )\n  }\n};\n\nList.contextTypes = {\n  ...MultiInputList.contextTypes,\n  showCheckbox: React.PropTypes.bool,\n  showDeleteBtn: React.PropTypes.bool,\n  checkBoxName: React.PropTypes.string,\n  onChecked: React.PropTypes.func,\n};\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/common/component/persona-multi-input/list.js","import ReactDOM from 'react-dom';\nimport React from 'react';\nimport PersonaMultiInput from 'app/common/component/persona-multi-input';\nimport sortList from 'common/sortable';\nimport notify from 'common/notify';\n\nReactDOM.render( \n\t<PersonaMultiInput \n\t\taddable={true}  \n\t\tdataSource= {$('#course-teachers').data('init-value')}  \n\t\toutputDataElement='teachers' \n    inputName=\"ids[]\"\n\t\tsearchable={{enable:true,url:$('#course-teachers').data('query-url') + \"?q=\"}} \n\t/>,\n  document.getElementById('course-teachers')\n);\n\n$('.js-btn-save').on('click', function(event){\n  if($(\"input[name=teachers]\").val() !== '[]'){\n    $('#teachers-form').submit();\n  }else{\n    notify('warning', Translator.trans('course.manage.min_teacher_num_error_hint'));\n  }\n});\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/course-manage/teachers/index.js"],"sourceRoot":""}