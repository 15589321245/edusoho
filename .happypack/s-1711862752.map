{"version":3,"sources":["app/Resources/static-src/app/js/activity-manage/flash/index.js"],"names":["Flash","$mediaId","$","validator2","init","initStep2Form","initStep3Form","initFileChooser","$form","validate","rules","title","required","maxlength","trim","mediaId","messages","data","$step3_form","validator","onkeyup","finishDetail","positive_integer","max","min","fileChooser","on","file","val","id","form"],"mappings":";;;;AAAA;;;;AACA;;;;;;IAEMA,K;AACJ,mBAAc;AAAA;;AACZ,SAAKC,QAAL,GAAgBC,EAAE,kBAAF,CAAhB;AACA,SAAKC,UAAL,GAAkB,IAAlB;AACA,SAAKC,IAAL;AACD;;;;2BACM;AACL,sCAAgB,KAAKH,QAArB;AACA,WAAKI,aAAL;AACA,WAAKC,aAAL;AACA,WAAKC,eAAL;AACD;;;oCAEe;AACd,UAAIC,QAAQN,EAAE,aAAF,CAAZ;AACA,WAAKC,UAAL,GAAkBK,MAAMC,QAAN,CAAe;AAC/BC,eAAO;AACLC,iBAAO;AACLC,sBAAU,IADL;AAELC,uBAAW,EAFN;AAGLC,kBAAM;AAHD,WADF;AAMLC,mBAAS;AANJ,SADwB;AAS/BC,kBAAU;AACRD,mBAAS;AACPH,sBAAU;AADH;AADD;AATqB,OAAf,CAAlB;;AAgBAJ,YAAMS,IAAN,CAAW,WAAX,EAAwB,KAAKd,UAA7B;AACD;;;oCAEe;AACd,UAAIe,cAAchB,EAAE,aAAF,CAAlB;;AAEA,UAAIiB,YAAYD,YAAYT,QAAZ,CAAqB;AACnCW,iBAAS,KAD0B;AAEnCV,eAAO;AACLW,wBAAc;AACZT,sBAAU,IADE;AAEZU,8BAAkB,IAFN;AAGZC,iBAAK,GAHO;AAIZC,iBAAK;AAJO;AADT,SAF4B;AAUnCR,kBAAU;AACRK,wBAAc;AACZT,sBAAU;AADE;AADN;AAVyB,OAArB,CAAhB;;AAiBAM,kBAAYD,IAAZ,CAAiB,WAAjB,EAA8BE,SAA9B;AACD;;;sCAEiB;AAAA;;AAChB,UAAIM,cAAc,0BAAlB;AACAA,kBAAYC,EAAZ,CAAe,QAAf,EAAyB,UAACC,IAAD,EAAU;AACjC;AACA,cAAK1B,QAAL,CAAc2B,GAAd,CAAkBD,KAAKE,EAAvB;AACA,YAAG,MAAK1B,UAAR,EAAoB;AAClB,gBAAKA,UAAL,CAAgB2B,IAAhB;AACD;AACF,OAND;AAOD;;;;;;AAGH,IAAI9B,KAAJ","file":"index.js","sourceRoot":"/Users/kz/projects/edusoho","sourcesContent":["import FileChooser from '../../file-chooser/file-choose';\nimport { chooserUiOpen, chooserUiClose, showChooserType } from '../widget/chooser-ui.js';\n\nclass Flash {\n  constructor() {\n    this.$mediaId = $('[name=\"mediaId\"]');\n    this.validator2 = null;\n    this.init();\n  }\n  init() {\n    showChooserType(this.$mediaId);\n    this.initStep2Form();\n    this.initStep3Form();\n    this.initFileChooser();\n  }\n\n  initStep2Form() {\n    let $form = $('#step2-form');\n    this.validator2 = $form.validate({\n      rules: {\n        title: {\n          required: true,\n          maxlength: 50,\n          trim: true,\n        },\n        mediaId: 'required',\n      },\n      messages: {\n        mediaId: {\n          required: '请上传或选择%display%'\n        }\n      }\n    });\n\n    $form.data('validator', this.validator2);\n  }\n\n  initStep3Form() {\n    let $step3_form = $(\"#step3-form\");\n\n    let validator = $step3_form.validate({\n      onkeyup: false,\n      rules: {\n        finishDetail: {\n          required: true,\n          positive_integer: true,\n          max: 300,\n          min: 1,\n        },\n      },\n      messages: {\n        finishDetail: {\n          required: '请输入至少观看多少分钟',\n        },\n      }\n    });\n\n    $step3_form.data('validator', validator);\n  }\n\n  initFileChooser() {\n    let fileChooser = new FileChooser();\n    fileChooser.on('select', (file) => {\n      chooserUiClose();\n      this.$mediaId.val(file.id);\n      if(this.validator2) {\n        this.validator2.form();\n      }\n    });\n  }\n}\n\nnew Flash();"]}