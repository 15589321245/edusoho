{"version":3,"sources":["node_modules/.0.5.0@postal.xframe/lib/postal.xframe.min.js"],"names":["e","t","exports","module","require","define","amd","postalXframe","_","postal","n","r","o","id","loaded","call","m","c","p","w","routeMessage","apply","arguments","a","include","g","workers","addEventListener","push","i","__esModule","s","u","_memoRemoteByInstanceId","f","_memoRemoteByTarget","l","_disconnectClient","safeSerialize","d","state","h","env","v","getInstance","origin","isWorker","Worker","options","target","fedx","transports","xframe","eagerSerialize","useEagerSerialize","XFrameClient","configure","config","defaults","extend","clearConfiguration","getTargets","postMessage","map","document","getElementsByTagName","createElement","href","src","protocol","host","contentWindow","defaultOriginUrl","window","parent","concat","remotes","wrapForTransport","JSON","stringify","packingSlip","unwrapFromTransport","indexOf","parse","source","currentTarget","data","find","instanceId","onMessage","sendMessage","cloneDeep","each","disconnect","reduce","isArray","doNotNotify","without","signalReady","length","sendPing","Error","listenToWorker","stopListeningToWorker","removeEventListener","pop","Symbol","iterator","next","done","value","isPlainObject","Array","Object","TypeError","defineProperty","regeneratorRuntime","mark","wrap","prev","keys","t0","finish","stop","entries","location","test","navigator","userAgent","allowedOrigins","enabled","configurable","writable","defineProperties","prototype","getOwnPropertyDescriptor","getPrototypeOf","get","create","constructor","enumerable","__proto__","transportName","shouldProcess","contains","send","FederationClient"],"mappings":"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","file":"postal.xframe.min.js","sourceRoot":"/Users/kz/projects/edusoho","sourcesContent":["/*!\n *  * postal.xframe - postal.js/postal.federation plugin for federating instances of postal.js across iframe/window boundaries.\n *  * Author: Jim Cowart (http://ifandelse.com)\n *  * Version: v0.5.0\n *  * Url: http://github.com/postaljs/postal.xframe\n *  * License(s): (MIT OR GPL-2.0)\n */\n(function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t(require(\"lodash\"),require(\"postal\")):\"function\"==typeof define&&define.amd?define([\"lodash\",\"postal\"],t):\"object\"==typeof exports?exports.postalXframe=t(require(\"lodash\"),require(\"postal\")):e.postalXframe=t(e._,e.postal)})(this,function(e,t){return function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var r={};return t.m=e,t.c=r,t.p=\"\",t(0)}([function(e,t,r){function n(){w.routeMessage.apply(w,arguments)}function o(e){a.include(g.workers,e)||(e.addEventListener(\"message\",n),g.workers.push(e))}var i=function(e){return e&&e.__esModule?e[\"default\"]:e},a=i(r(1)),s=i(r(2)),u=r(3),c=u._memoRemoteByInstanceId,f=u._memoRemoteByTarget,l=u._disconnectClient,p=u.safeSerialize,d=r(4),g=d.state,h=d.env,v=i(r(5));v.getInstance=function(e,t,r){var n=new v(e,{origin:t,isWorker:\"undefined\"!=typeof Worker&&e instanceof Worker},r);return n.options.isWorker&&o(n.target),n};var m=function(){},w=s.fedx.transports.xframe={eagerSerialize:h.useEagerSerialize,XFrameClient:v,configure:function(e){return e&&(g.config=a.defaults(a.extend(g.config,e),g.defaults)),g.config},clearConfiguration:function(){g.config=a.extend({},g.defaults)},getTargets:h.isWorker?function(){return[{target:{postMessage:postMessage}}]}:function(){var e=a.map(document.getElementsByTagName(\"iframe\"),function(e){var t=document.createElement(\"a\");t.href=e.src;var r=t.protocol+\"//\"+t.host;return\"//\"===r&&(r=null),{target:e.contentWindow,origin:r||g.config.defaultOriginUrl}});return window.parent&&window.parent!==window&&e.push({target:window.parent,origin:\"*\"}),e.concat(g.workers)},remotes:[],wrapForTransport:h.useEagerSerialize?function(e){return JSON.stringify({postal:!0,packingSlip:e})}:function(e){return{postal:!0,packingSlip:e}},unwrapFromTransport:function(e){if(\"string\"!=typeof e||!h.useEagerSerialize&&-1===e.indexOf('\"postal\":true'))return e;try{return JSON.parse(e)}catch(t){return{}}},routeMessage:function(e){var t=e.source||e.currentTarget,r=this.unwrapFromTransport(e.data);if(r.postal){var n=a.find(this.remotes,function(e){return e.target===t});n||(n=v.getInstance(t,e.origin,r.packingSlip.instanceId),this.remotes.push(n)),n.onMessage(r.packingSlip)}},sendMessage:function(e){var t=e;g.config.safeSerialize&&(t=p(a.cloneDeep(e))),a.each(this.remotes,function(e){e.sendMessage(t)})},disconnect:function(e){e=e||{};var t=e.instanceId?a.reduce(a.isArray(e.instanceId)?e.instanceId:[e.instanceId],c,[],this):e.target?a.reduce(a.isArray(e.target)?e.target:[e.target],f,[],this):this.remotes;e.doNotNotify||a.each(t,l,this),this.remotes=a.without.apply(null,[this.remotes].concat(t))},signalReady:function(e,t){e=a.isArray(e)?e:[e],e=e.length?e:this.getTargets(),t=t||m,a.each(e,function(e){if(e.target){e.origin=e.origin||g.config.defaultOriginUrl;var r=a.find(this.remotes,function(t){return t.target===e.target});r||(r=v.getInstance(e.target,e.origin),this.remotes.push(r)),r.sendPing(t)}},this)},addEventListener:h.isWorker?function(){addEventListener(\"message\",n)}:function(e,t,r){if(\"undefined\"==typeof window||\"function\"!=typeof window.addEventListener)throw new Error(\"postal.xframe only works with browsers that support window.addEventListener\");window.addEventListener(e,t,r)},listenToWorker:o,stopListeningToWorker:function(e){if(e)e.removeEventListener(\"message\",n),g.workers=a.without(g.workers,e);else for(;g.workers.length;)g.workers.pop().removeEventListener(\"message\",n)}};w.addEventListener(\"message\",n,!1)},function(t,r){t.exports=e},function(e,r){e.exports=t},function(e,t,r){function n(e,t){var r=c.find(this.remotes,function(e){return e.instanceId===t});return r&&e.push(r),e}function o(e,t){var r=c.find(this.remotes,function(e){return e.target===t});return r&&e.push(r),e}function i(e){e.disconnect()}function a(e){var t=!0,r=!1,n=void 0;try{for(var o,i=f(e)[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var s=u(o.value,2),l=s[0],p=s[1];\"function\"==typeof p&&delete e[l],c.isPlainObject(p)&&a(p),c.isArray(p)&&c.each(p,a)}}catch(d){r=!0,n=d}finally{try{!t&&i[\"return\"]&&i[\"return\"]()}finally{if(r)throw n}}return e}var s=function(e){return e&&e.__esModule?e[\"default\"]:e},u=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e)){for(var r,n=[],o=e[Symbol.iterator]();!(r=o.next()).done&&(n.push(r.value),!t||n.length!==t););return n}throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")};t._memoRemoteByInstanceId=n,t._memoRemoteByTarget=o,t._disconnectClient=i,t.safeSerialize=a,Object.defineProperty(t,\"__esModule\",{value:!0});var c=s(r(1)),f=regeneratorRuntime.mark(function l(e){var t,r,n,o,i,a;return regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:-1===[\"object\",\"function\"].indexOf(typeof e)&&(e={}),t=!0,r=!1,n=void 0,s.prev=4,o=Object.keys(e)[Symbol.iterator]();case 6:if(t=(i=o.next()).done){s.next=13;break}return a=i.value,s.next=10,[a,e[a]];case 10:t=!0,s.next=6;break;case 13:s.next=19;break;case 15:s.prev=15,s.t0=s[\"catch\"](4),r=!0,n=s.t0;case 19:s.prev=19,s.prev=20,!t&&o[\"return\"]&&o[\"return\"]();case 22:if(s.prev=22,!r){s.next=25;break}throw n;case 25:return s.finish(22);case 26:return s.finish(19);case 27:case\"end\":return s.stop()}},l,this,[[4,15,19,27],[20,,22,26]])});t.entries=f},function(e,t,r){var n=function(e){return e&&e.__esModule?e[\"default\"]:e};Object.defineProperty(t,\"__esModule\",{value:!0});var o=n(r(1)),i={origin:location.origin||location.protocol+\"//\"+location.host,isWorker:\"undefined\"==typeof window&&postMessage&&location,useEagerSerialize:/MSIE [8,9]/.test(navigator.userAgent)};t.env=i;var a={allowedOrigins:[i.origin],enabled:!0,defaultOriginUrl:\"*\",safeSerialize:!1},s={workers:[],config:o.extend({},a),defaults:a};t.state=s},function(e,t,r){var n=function(e){return e&&e.__esModule?e[\"default\"]:e},o=function(){function e(e,t){for(var r in t){var n=t[r];n.configurable=!0,n.value&&(n.writable=!0)}Object.defineProperties(e,t)}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=function g(e,t,r){var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var o=Object.getPrototypeOf(e);return null===o?void 0:g(o,t,r)}if(\"value\"in n&&n.writable)return n.value;var i=n.get;return void 0===i?void 0:i.call(r)},a=function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)},s=function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")},u=n(r(2)),c=n(r(1)),f=r(4),l=f.state,p=f.env,d=function(e){function t(){for(var e=arguments.length,r=Array(e),n=0;e>n;n++)r[n]=arguments[n];s(this,t),this.transportName=\"xframe\",i(Object.getPrototypeOf(t.prototype),\"constructor\",this).apply(this,r)}return a(t,e),o(t,{shouldProcess:{value:function(){var e=!!l.config.allowedOrigins.length;return l.config.enabled&&(\"*\"===this.options.origin||e&&c.contains(l.config.allowedOrigins,this.options.origin)||!e||this.options.isWorker&&c.contains(l.workers,this.target)||p.isWorker)}},send:{value:function(e){if(this.shouldProcess()){var t=p.isWorker?null:this.target,r=[u.fedx.transports.xframe.wrapForTransport(e)];this.options.isWorker||p.isWorker||r.push(this.options.origin),p.isWorker?this.target.postMessage.apply(t,r):1===r.length?this.target.postMessage(r[0]):this.target.postMessage(r[0],r[1])}}}}),t}(u.fedx.FederationClient);e.exports=d}])});\n//# sourceMappingURL=postal.xframe.min.js.map"]}