{"version":3,"sources":["webpack:///./app/Resources/static-src/app/js/course-manage/batch-create/batch-create.js","webpack:///./app/Resources/static-src/app/js/course-manage/batch-create/index.js","webpack:///./app/Resources/static-src/app/js/course-manage/help.js?ac8f*"],"names":["BatchCreate","options","element","$","uploader","files","$sortable","init","initUploader","initEvent","$uploader","UploaderSDK","id","attr","initUrl","data","finishUrl","accept","process","ui","locale","document","documentElement","lang","on","file","push","error","status","Translator","trans","message","event","setProcess","getUploadProcess","length","$btn","currentTarget","button","console","log","map","index","isLast","createLesson","popover","html","uploadProcess","get","reduce","prams","dom","find","val","supportMobile","self","ajax","type","url","async","fileId","success","response","append","complete","modal","sortablelist","list","$list","sortable","lessonNum","chapterNum","unitNum","each","$item","hasClass","text","trigger","post","ids","taskSortable","closeCourse","evt","$target","confirm","warn","location","reload","deleteCourse","redirect","window","href","publishCourse","target","delay","deleteTask","parents","remove","children","removeClass","publishTask","parentLi","closest","addClass","unpublishTask","showSettings","$this","$li","stop","slideUp","slideDown","siblings","hide","TabChange","click","updateTaskNum","container","TaskListHeaderFixed","$header","headerTop","offset","top","scroll","scrollTop"],"mappings":"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","file":"app/js/course-manage/batch-create/index.js","sourcesContent":["import notify from 'common/notify';\nimport { sortablelist } from \"app/js/course-manage/help\";\n\nclass BatchCreate {\n  constructor(options) {\n    this.element = $(options.element);\n    this.uploader = null;\n    this.files = [];\n    this.$sortable = $('#sortable-list');\n    this.init();\n  }\n\n  init() {\n    this.initUploader();\n    this.initEvent();\n  }\n\n  initUploader() {\n    let $uploader = this.element;\n    this.uploader = new UploaderSDK({\n      id: $uploader.attr('id'),\n      initUrl: $uploader.data('initUrl'),\n      finishUrl: $uploader.data('finishUrl'),\n      accept: $uploader.data('accept'),\n      process: $uploader.data('process'),\n      ui: 'batch',\n      locale: document.documentElement.lang\n    })\n\n    this.uploader.on('file.finish', (file) => {\n      this.files.push(file);\n    });\n\n    this.uploader.on('error', (error) => {\n      let status = {'F_DUPLICATE':Translator.trans('uploader.file.exist')};\n      if (!error.message){\n          error.message = status[error.error];\n      }\n      notify('danger', error.message);\n    });\n  }\n\n  initEvent() {\n    $('.js-upload-params').on('change', (event) => {\n      this.uploader.setProcess(this.getUploadProcess());\n    });\n\n    $('.js-batch-create-lesson-btn').on('click', (event) => {\n\n      if (!this.files.length) {\n        notify('danger', Translator.trans('uploader.select_one_file'));\n        return;\n      }\n\n      let $btn = $(event.currentTarget);\n      $btn.button('loading');\n      console.log('files', this.files);\n\n      this.files.map((file, index) => {\n        let isLast = false;\n        if (index + 1 == this.files.length) {\n          isLast = true;\n        }\n        console.log('file', file)\n        this.createLesson($btn, file, isLast);\n      })\n    });\n\n    $('[data-toggle=\"popover\"]').popover({\n      html: true,\n    });\n  }\n\n  getUploadProcess() {\n    let uploadProcess = $('.js-upload-params').get().reduce((prams, dom) => {\n      prams[$(dom).attr('name')] = $(dom).find('option:selected').val();\n      return prams;\n    }, {});\n\n    if($('[name=support_mobile]').length > 0){\n      uploadProcess.supportMobile = $('[name=support_mobile]').val();\n    }\n    console.log(uploadProcess);\n    return uploadProcess;\n  }\n\n  createLesson($btn, file, isLast) {\n    let self = this;\n    $.ajax({\n      type: 'post',\n      url: $btn.data('url'),\n      async: false,\n      data: {\n        fileId: file.id\n      },\n      success: function(response) {\n        if (response && response.error) {\n          notify('danger', response.error)\n        } else {\n          self.$sortable.append(response.html);\n        }\n      },\n      error: function(response) {\n        console.log('error', response)\n        notify('danger', Translator.trans('uploader.status.error'));\n      },\n      complete: function (response) {\n        console.log('complete', response);\n        if (isLast) {\n          sortablelist(self.$sortable);\n          $('#modal').modal('hide');\n        }\n      }\n    });\n  }\n\n}\n\nexport default BatchCreate;\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/course-manage/batch-create/batch-create.js","import BatchCreate from './batch-create';\n\nnew BatchCreate({\n  element: '#batch-uploader',\n}) \n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/course-manage/batch-create/index.js","import notify from 'common/notify';\nimport sortList from 'common/sortable';\n\nexport const sortablelist = (list) => {\n  let $list = $(list);\n  let data = $list.sortable(\"serialize\").get();\n\n  let lessonNum = 0,\n    chapterNum = 0,\n    unitNum = 0;\n  $list.find('.task-manage-item').each(function () {\n    let $item = $(this);\n    if ($item.hasClass('js-task-manage-item')) {\n      if ($item.find('.number').length > 0) {\n        lessonNum++;\n        $item.find('.number').text(lessonNum);\n      }\n    } else if ($item.hasClass('task-manage-unit')) {\n      unitNum++;\n      $item.find('.number').text(unitNum);\n    } else if ($item.hasClass('task-manage-chapter')) {\n      chapterNum++;\n      unitNum = 0;\n      $item.find('.number').text(chapterNum);\n    }\n  });\n\n  $list.trigger('finished');\n\n  $.post($list.data('sortUrl'), { ids: data }, (response) => {\n\n  });\n}\n\nexport const taskSortable = (list) => {\n  if ($(list).length) {\n    sortList({\n      element: list,\n      ajax: false,\n    }, (data) => {\n      sortablelist(list);\n    });\n  }\n}\n\nexport const closeCourse = () => {\n  $('body').on('click', '.js-close-course', function (evt) {\n    let $target = $(evt.currentTarget);\n    if (!confirm(Translator.trans('course.manage.close_hint'))) {\n      return;\n    }\n\n    $.post($target.data('check-url'), function (data) {\n\n      if (data.warn) {\n        if (!confirm(Translator.trans(data.message))) {\n          return;\n        }\n      }\n\n      $.post($target.data('url'), function (data) {\n        if (data.success) {\n          notify('success', Translator.trans('course.manage.close_success_hint'));\n          location.reload();\n        } else {\n          notify('danger', Translator.trans('course.manage.close_fail_hint') + ':' + data.message);\n        }\n      });\n    });\n  });\n};\n\nexport const deleteCourse = () => {\n  $('body').on('click', '.js-delete-course', function (evt) {\n    if (!confirm(Translator.trans('course.manage.delete_hint'))) {\n      return;\n    }\n    $.post($(evt.currentTarget).data('url'), function (data) {\n      if (data.success) {\n        notify('success', Translator.trans('site.delete_success_hint'));\n        if (data.redirect) {\n          window.location.href = data.redirect;\n        }else {\n          location.reload();\n        }\n      } else {\n        notify('danger', Translator.trans('site.delete_fail_hint') + ':' + data.message);\n      }\n    });\n  });\n};\n\nexport const publishCourse = () => {\n  $('body').on('click', '.js-publish-course', function (evt) {\n    if (!confirm(Translator.trans('course.manage.publish_hint'))) {\n      return;\n    }\n    $.post($(evt.target).data('url'), function (data) {\n      if (data.success) {\n        notify('success', Translator.trans('course.manage.task_publish_success_hint'));\n        location.reload();\n      } else {\n        notify('danger', Translator.trans('course.manage.task_publish_fail_hint')+':' + data.message, {delay:5000});\n      }\n    });\n  });\n};\n\nexport const deleteTask = () => {\n  $('body').on('click', '.delete-item', function (evt) {\n    if ($(evt.currentTarget).data('type') == 'task') {\n      if (!confirm(Translator.trans('course.manage.task_delete_hint'))) {\n        return;\n      }\n    } else if ($(evt.currentTarget).data('type') == 'chapter') {\n      if (!confirm(Translator.trans('course.manage.chapter_delete_hint'))) {\n        return;\n      }\n    }\n    $.post($(evt.currentTarget).data('url'), function (data) {\n      if (data.success) {\n        notify('success', Translator.trans('site.delete_success_hint'));\n        $(evt.target).parents('.task-manage-item').remove();\n        sortablelist('#sortable-list');\n        console.log($('#sortable-list').children('li').length);\n        if($('#sortable-list').children('li').length < 1 && $('.js-task-empty').hasClass('hidden') ) {\n            $('.js-task-empty').removeClass('hidden');\n        }\n        document.location.reload();\n      } else {\n        notify('danger', Translator.trans('site.delete_fail_hint') + ':' + data.message);\n      }\n    });\n  });\n};\n\nexport const publishTask = () => {\n  $('body').on('click', '.publish-item', (event) => {\n    $.post($(event.target).data('url'), function (data) {\n      if (data.success) {\n        var parentLi = $(event.target).closest('.task-manage-item');\n        notify('success', Translator.trans('course.manage.task_publish_success_hint'));\n        $(parentLi).find('.publish-item').addClass('hidden')\n        $(parentLi).find('.delete-item').addClass('hidden')\n        $(parentLi).find('.unpublish-item').removeClass('hidden')\n        $(parentLi).find('.publish-status').addClass('hidden')\n      } else {\n        notify('danger', Translator.trans('course.manage.task_publish_fail_hint') + ':' + data.message);\n      }\n    });\n  })\n};\n\nexport const unpublishTask = () => {\n  $('body').on('click', '.unpublish-item', (event) => {\n    $.post($(event.target).data('url'), function (data) {\n      if (data.success) {\n        var parentLi = $(event.target).closest('.task-manage-item');\n        notify('success', Translator.trans('course.manage.task_unpublish_success_hint'));\n        $(parentLi).find('.publish-item').removeClass('hidden')\n        $(parentLi).find('.delete-item').removeClass('hidden')\n        $(parentLi).find('.unpublish-item').addClass('hidden')\n        $(parentLi).find('.publish-status').removeClass('hidden')\n      } else {\n        notify('danger', Translator.trans('course.manage.task_unpublish_fail_hint') + ':' + data.message);\n      }\n    });\n  })\n};\n\nexport const showSettings = () => {\n  $(\"#sortable-list\").on('click', '.js-item-content', (event) => {\n    console.log('click');\n    let $this = $(event.currentTarget);\n    let $li = $this.closest('.js-task-manage-item');\n    if ($li.hasClass('active')) {\n      $li.removeClass('active').find('.js-settings-list').stop().slideUp(500);\n    }\n    else {\n      $li.addClass('active').find('.js-settings-list').stop().slideDown(500);\n      $li.siblings(\".js-task-manage-item.active\").removeClass('active').find('.js-settings-list').hide();\n    }\n  });\n};\n\nexport const TabChange = () => {\n  $('[data-role=\"tab\"]').click(function (event) {\n    let $this = $(this);\n    $($this.data('tab-content')).removeClass(\"hidden\").siblings('[data-role=\"tab-content\"]').addClass('hidden');\n  });\n};\n\nexport const updateTaskNum = (container) => {\n  // let $container = $(container);\n  // $container.on('finished',function(){\n  //   $('#task-num').text($(container).find('i[data-role=\"task\"]').length);\n  // })\n}\n\nexport const TaskListHeaderFixed = () => {\n  let $header = $('.js-task-list-header');\n  if(!$header.length){\n    return;\n  }\n  let headerTop = $header.offset().top;\n\t$(window).scroll(function(event) {\n\t\t\tif ($(window).scrollTop() >= headerTop) {\n\t\t\t\t$header.addClass('fixed')\n\t\t\t} else {\n\t\t\t\t$header.removeClass('fixed');\n\t\t\t}\n\t});\n}\n\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/course-manage/help.js"],"sourceRoot":""}