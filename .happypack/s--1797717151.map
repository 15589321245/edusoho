{"version":3,"sources":["node_modules/.1.3.20@store/store.js"],"names":["define","module","exports","root","factory","amd","store","win","window","global","doc","document","localStorageName","scriptTag","storage","disabled","version","set","key","value","get","defaultVal","has","undefined","remove","clear","transact","transactionFn","val","getAll","forEach","serialize","JSON","stringify","deserialize","parse","e","isLocalStorageNameSupported","err","setItem","getItem","removeItem","ret","callback","i","length","documentElement","addBehavior","storageOwner","storageContainer","ActiveXObject","open","write","close","w","frames","createElement","body","withIEStorage","storeFunction","args","Array","prototype","slice","call","arguments","unshift","appendChild","load","result","apply","removeChild","forbiddenCharsRegex","RegExp","ieKeyFix","replace","setAttribute","save","getAttribute","removeAttribute","attributes","XMLDocument","name","attr","testKey","enabled"],"mappings":"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","file":"store.js","sourceRoot":"/Users/kz/projects/edusoho","sourcesContent":["/*** IMPORTS FROM imports-loader ***/\nvar define = false;\nvar module = false;\nvar exports = false;\n(function() {\n\n\"use strict\"\n// Module export pattern from\n// https://github.com/umdjs/umd/blob/master/returnExports.js\n;(function (root, factory) {\n    if (typeof define === 'function' && define.amd) {\n        // AMD. Register as an anonymous module.\n        define([], factory);\n    } else if (typeof exports === 'object') {\n        // Node. Does not work with strict CommonJS, but\n        // only CommonJS-like environments that support module.exports,\n        // like Node.\n        module.exports = factory();\n    } else {\n        // Browser globals (root is window)\n        root.store = factory();\n  }\n}(this, function () {\n\t\n\t// Store.js\n\tvar store = {},\n\t\twin = (typeof window != 'undefined' ? window : global),\n\t\tdoc = win.document,\n\t\tlocalStorageName = 'localStorage',\n\t\tscriptTag = 'script',\n\t\tstorage\n\n\tstore.disabled = false\n\tstore.version = '1.3.20'\n\tstore.set = function(key, value) {}\n\tstore.get = function(key, defaultVal) {}\n\tstore.has = function(key) { return store.get(key) !== undefined }\n\tstore.remove = function(key) {}\n\tstore.clear = function() {}\n\tstore.transact = function(key, defaultVal, transactionFn) {\n\t\tif (transactionFn == null) {\n\t\t\ttransactionFn = defaultVal\n\t\t\tdefaultVal = null\n\t\t}\n\t\tif (defaultVal == null) {\n\t\t\tdefaultVal = {}\n\t\t}\n\t\tvar val = store.get(key, defaultVal)\n\t\ttransactionFn(val)\n\t\tstore.set(key, val)\n\t}\n\tstore.getAll = function() {}\n\tstore.forEach = function() {}\n\n\tstore.serialize = function(value) {\n\t\treturn JSON.stringify(value)\n\t}\n\tstore.deserialize = function(value) {\n\t\tif (typeof value != 'string') { return undefined }\n\t\ttry { return JSON.parse(value) }\n\t\tcatch(e) { return value || undefined }\n\t}\n\n\t// Functions to encapsulate questionable FireFox 3.6.13 behavior\n\t// when about.config::dom.storage.enabled === false\n\t// See https://github.com/marcuswestin/store.js/issues#issue/13\n\tfunction isLocalStorageNameSupported() {\n\t\ttry { return (localStorageName in win && win[localStorageName]) }\n\t\tcatch(err) { return false }\n\t}\n\n\tif (isLocalStorageNameSupported()) {\n\t\tstorage = win[localStorageName]\n\t\tstore.set = function(key, val) {\n\t\t\tif (val === undefined) { return store.remove(key) }\n\t\t\tstorage.setItem(key, store.serialize(val))\n\t\t\treturn val\n\t\t}\n\t\tstore.get = function(key, defaultVal) {\n\t\t\tvar val = store.deserialize(storage.getItem(key))\n\t\t\treturn (val === undefined ? defaultVal : val)\n\t\t}\n\t\tstore.remove = function(key) { storage.removeItem(key) }\n\t\tstore.clear = function() { storage.clear() }\n\t\tstore.getAll = function() {\n\t\t\tvar ret = {}\n\t\t\tstore.forEach(function(key, val) {\n\t\t\t\tret[key] = val\n\t\t\t})\n\t\t\treturn ret\n\t\t}\n\t\tstore.forEach = function(callback) {\n\t\t\tfor (var i=0; i<storage.length; i++) {\n\t\t\t\tvar key = storage.key(i)\n\t\t\t\tcallback(key, store.get(key))\n\t\t\t}\n\t\t}\n\t} else if (doc && doc.documentElement.addBehavior) {\n\t\tvar storageOwner,\n\t\t\tstorageContainer\n\t\t// Since #userData storage applies only to specific paths, we need to\n\t\t// somehow link our data to a specific path.  We choose /favicon.ico\n\t\t// as a pretty safe option, since all browsers already make a request to\n\t\t// this URL anyway and being a 404 will not hurt us here.  We wrap an\n\t\t// iframe pointing to the favicon in an ActiveXObject(htmlfile) object\n\t\t// (see: http://msdn.microsoft.com/en-us/library/aa752574(v=VS.85).aspx)\n\t\t// since the iframe access rules appear to allow direct access and\n\t\t// manipulation of the document element, even for a 404 page.  This\n\t\t// document can be used instead of the current document (which would\n\t\t// have been limited to the current path) to perform #userData storage.\n\t\ttry {\n\t\t\tstorageContainer = new ActiveXObject('htmlfile')\n\t\t\tstorageContainer.open()\n\t\t\tstorageContainer.write('<'+scriptTag+'>document.w=window</'+scriptTag+'><iframe src=\"/favicon.ico\"></iframe>')\n\t\t\tstorageContainer.close()\n\t\t\tstorageOwner = storageContainer.w.frames[0].document\n\t\t\tstorage = storageOwner.createElement('div')\n\t\t} catch(e) {\n\t\t\t// somehow ActiveXObject instantiation failed (perhaps some special\n\t\t\t// security settings or otherwse), fall back to per-path storage\n\t\t\tstorage = doc.createElement('div')\n\t\t\tstorageOwner = doc.body\n\t\t}\n\t\tvar withIEStorage = function(storeFunction) {\n\t\t\treturn function() {\n\t\t\t\tvar args = Array.prototype.slice.call(arguments, 0)\n\t\t\t\targs.unshift(storage)\n\t\t\t\t// See http://msdn.microsoft.com/en-us/library/ms531081(v=VS.85).aspx\n\t\t\t\t// and http://msdn.microsoft.com/en-us/library/ms531424(v=VS.85).aspx\n\t\t\t\tstorageOwner.appendChild(storage)\n\t\t\t\tstorage.addBehavior('#default#userData')\n\t\t\t\tstorage.load(localStorageName)\n\t\t\t\tvar result = storeFunction.apply(store, args)\n\t\t\t\tstorageOwner.removeChild(storage)\n\t\t\t\treturn result\n\t\t\t}\n\t\t}\n\n\t\t// In IE7, keys cannot start with a digit or contain certain chars.\n\t\t// See https://github.com/marcuswestin/store.js/issues/40\n\t\t// See https://github.com/marcuswestin/store.js/issues/83\n\t\tvar forbiddenCharsRegex = new RegExp(\"[!\\\"#$%&'()*+,/\\\\\\\\:;<=>?@[\\\\]^`{|}~]\", \"g\")\n\t\tvar ieKeyFix = function(key) {\n\t\t\treturn key.replace(/^d/, '___$&').replace(forbiddenCharsRegex, '___')\n\t\t}\n\t\tstore.set = withIEStorage(function(storage, key, val) {\n\t\t\tkey = ieKeyFix(key)\n\t\t\tif (val === undefined) { return store.remove(key) }\n\t\t\tstorage.setAttribute(key, store.serialize(val))\n\t\t\tstorage.save(localStorageName)\n\t\t\treturn val\n\t\t})\n\t\tstore.get = withIEStorage(function(storage, key, defaultVal) {\n\t\t\tkey = ieKeyFix(key)\n\t\t\tvar val = store.deserialize(storage.getAttribute(key))\n\t\t\treturn (val === undefined ? defaultVal : val)\n\t\t})\n\t\tstore.remove = withIEStorage(function(storage, key) {\n\t\t\tkey = ieKeyFix(key)\n\t\t\tstorage.removeAttribute(key)\n\t\t\tstorage.save(localStorageName)\n\t\t})\n\t\tstore.clear = withIEStorage(function(storage) {\n\t\t\tvar attributes = storage.XMLDocument.documentElement.attributes\n\t\t\tstorage.load(localStorageName)\n\t\t\tfor (var i=attributes.length-1; i>=0; i--) {\n\t\t\t\tstorage.removeAttribute(attributes[i].name)\n\t\t\t}\n\t\t\tstorage.save(localStorageName)\n\t\t})\n\t\tstore.getAll = function(storage) {\n\t\t\tvar ret = {}\n\t\t\tstore.forEach(function(key, val) {\n\t\t\t\tret[key] = val\n\t\t\t})\n\t\t\treturn ret\n\t\t}\n\t\tstore.forEach = withIEStorage(function(storage, callback) {\n\t\t\tvar attributes = storage.XMLDocument.documentElement.attributes\n\t\t\tfor (var i=0, attr; attr=attributes[i]; ++i) {\n\t\t\t\tcallback(attr.name, store.deserialize(storage.getAttribute(attr.name)))\n\t\t\t}\n\t\t})\n\t}\n\n\ttry {\n\t\tvar testKey = '__storejs__'\n\t\tstore.set(testKey, testKey)\n\t\tif (store.get(testKey) != testKey) { store.disabled = true }\n\t\tstore.remove(testKey)\n\t} catch(e) {\n\t\tstore.disabled = true\n\t}\n\tstore.enabled = !store.disabled\n\t\n\treturn store\n}));\n\n}.call(window));"]}