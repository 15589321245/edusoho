{% for material in materials %}
  {% set createdUser = createdUsers[material.createdUserId|default(0)]|default(null) %}
  <tr>
    <td>
      <div>
        <div class="pull-left" style="width:25%">
          <a href="javascript:;">
            <img style="width:60px;height:60px;border-radius:4px;" src="{{ asset(material.thumbnail|default('assets/img/default/cloud_' ~ material.type ~ '.jpg')) }}">
          </a>
        </div>
        <div class="pull-right" style="width:68% ;margin-left:15px;">
          <p class="text-overflow" data-toggle="tooltip" data-placement="top" title="{{ material.name }}" style="margin:0;">{{ material.name }}</p>

          <div>
            <span class="text-sm text-muted" style="display:block">
              {% if createdUser %}
                {{ createdUser.nickname }} 上传
              {% endif %}
            </span>
            {% if material.processStatus == 'ok' %}
              {#}<span class="label label-success">
                {{ dict_text('processStatus', material.processStatus) }}
              </span>#}
            {% elseif material.processStatus == 'waiting' %}
              <span class="label label-info">
                {{ dict_text('processStatus', material.processStatus) }}
              </span>
            {% elseif material.processStatus == 'processing' %}
              label-primary
              <span class="label label-info">
                {{ dict_text('processStatus', material.processStatus) }}
              </span>
            {% elseif material.processStatus == 'error' %}
              <span class="label label-danger">{{ dict_text('processStatus', material.processStatus) }}</span><br><a href="javascript:;" class="btn btn-primary btn-xs js-reconvert-btn" data-url="{{ path('material_reconvert', {globalId:material.no}) }}" data-loading-text="正在提交..." style="margin-top:10px">重新转码</a>
            {% else %}
              <span class="label label-default">
                {{ dict_text('processStatus', material.processStatus) }}
              </span>
            {% endif %}
          </div>

        </div>
      </div>
    </td>

    <td class="text-center">
      {{ material.views }}
    </td>
    <td class="text-center">
      {{ dict_text('fileType', material.type) }}
    </td>
    <td class="text-center">
      {{ material.size|file_size }}
    </td>
    <td>
      <span style="display:block">{{ material.createdTime|date('Y-m-d H:i:s') }}</span>
    </td>
    <td class="es-materillib-table">
      <a type="button" class="glyphicon glyphicon-info-sign js-detail-btn mrl" href="javascript:;"data-toggle="tooltip" data-placement="top" title="详细信息" data-url="{{ path('admin_material_detail', {globalId:material.no}) }}"></a>
      <a class="glyphicon glyphicon-save js-download-btn mrl" href="{{ path('material_download', {globalId:material.no}) }}"data-toggle="tooltip" data-placement="top" title="下载" target="__blank"></a>
      <div class="btn-group">
        <a href="javascript:;" class="es-icon es-icon-morehoriz" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          <span class="sr-only">Toggle Dropdown</span>
        </a>
        <ul class="dropdown-menu">
          {% if material.processStatus == 'error' %}
            <li><a href="javascript:;" class="glyphicon glyphicon-refresh js-refresh-btn" data-url="{{ path('material_reconvert', {globalId:material.no}) }}" data-loading-text="正在提交..."> 重新转码</a></li>
          
            <li class="js-delete-btn" data-url="{{ path('material_delete', {globalId:material.no}) }}"><a class="glyphicon glyphicon-trash" href="javascript:;"> 删除文件</a></li>
          {% else %}
            <li class="js-delete-btn" data-url="{{ path('material_delete', {globalId:material.no}) }}"><a class="glyphicon glyphicon-trash" href="javascript:;"> 删除文件</a></li>
          {% endif %}
        </ul>
      </div>
    </td>
  </tr>
{% else %}
  <tr>
    <td class="empty" colspan="10" style="color:#999;padding:80px;">没有搜索到任何资源......</td>
  </tr>
{% endfor %}

<tr class="hide">
  <td class="js-paginator">
    {% if paginator.lastPage > 1 %}
      <ul class="pagination">
        {% if paginator.currentPage != paginator.firstPage %}
          <li data-page="{{paginator.firstPage}}"><a  href="javascript:;">首页</a></li>
          <li data-page="{{paginator.previousPage}}"><a  href="javascript:;"><i class="es-icon es-icon-chevronleft"></i></a></li>
        {% endif %}
        {% for page in paginator.pages %}
          <li {% if page == paginator.currentPage %}class="active"{% endif %} data-page="{{ page }}"><a href="javascript:;">{{ page }}</a></li>
        {% endfor %}

        {% if paginator.currentPage != paginator.lastPage %}
          <li data-page="{{paginator.nextPage}}"><a  href="javascript:;"><i class="es-icon es-icon-chevronright"></i></a></li>
          <li data-page="{{paginator.getLastPage}}"><a  href="javascript:;">尾页</a></li>
        {% endif %}
      </ul>
    {% endif %}
  </td>
</tr>
