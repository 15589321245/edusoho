{"version":3,"sources":["app/Resources/static-src/app/js/courseset/create/index.js"],"names":["Creator","props","$element","$courseSetType","find","$currentCourseSetType","init","_extendValidator","validator","validate","onkeyup","rules","title","required","open_live_course_title","messages","click","removeClass","$","event","currentTarget","addClass","val","data","form","button","submit","addMethod","value","element","params","test","Translator","trans"],"mappings":";;;;;;IAAMA,O;AACJ,mBAAYC,KAAZ,EAAmB;AAAA;;AACjB,SAAKC,QAAL,GAAgBD,KAAhB;AACA,SAAKE,cAAL,GAAsB,KAAKD,QAAL,CAAcE,IAAd,CAAmB,mBAAnB,CAAtB;AACA,SAAKC,qBAAL,GAA6B,KAAKH,QAAL,CAAcE,IAAd,CAAmB,0BAAnB,CAA7B,CAA4E;AAC5E,SAAKE,IAAL;AACD;;;;2BAEM;AAAA;;AACL,WAAKC,gBAAL;AACA,UAAIC,YAAY,KAAKN,QAAL,CAAcO,QAAd,CAAuB;AACrCC,iBAAS,KAD4B;AAErCC,eAAO;AACLC,iBAAO;AACLC,sBAAU,IADL;AAELC,oCAAwB;AAFnB;AADF,SAF8B;AAQrCC,kBAAU;AACRH,iBAAO;AADC;AAR2B,OAAvB,CAAhB;;AAcA,WAAKT,cAAL,CAAoBa,KAApB,CAA0B,iBAAS;AACjC,cAAKb,cAAL,CAAoBc,WAApB,CAAgC,QAAhC;AACA,cAAKZ,qBAAL,GAA6Ba,EAAEC,MAAMC,aAAR,CAA7B;AACA,cAAKf,qBAAL,CAA2BgB,QAA3B,CAAoC,QAApC;AACAH,UAAE,oBAAF,EAAwBI,GAAxB,CAA4B,MAAKjB,qBAAL,CAA2BkB,IAA3B,CAAgC,MAAhC,CAA5B;AACD,OALD;;AAOAL,QAAE,uBAAF,EAA2BF,KAA3B,CAAiC,iBAAS;AACxC,YAAIR,UAAUgB,IAAV,EAAJ,EAAsB;AACpBN,YAAEC,MAAMC,aAAR,EAAuBK,MAAvB,CAA8B,SAA9B;AACA,gBAAKvB,QAAL,CAAcwB,MAAd;AACD;AACF,OALD;AAMD;;;uCAEkB;AACjB,UAAIrB,wBAAwB,KAAKA,qBAAjC;AACAa,QAAEV,SAAF,CAAYmB,SAAZ,CAAsB,wBAAtB,EAAgD,UAASC,KAAT,EAAgBC,OAAhB,EAAyBC,MAAzB,EAAiC;AAC/E,YAAIzB,sBAAsBkB,IAAtB,CAA2B,MAA3B,MAAuC,UAAvC,IAAqD,CAAC,4BAA4BQ,IAA5B,CAAiCH,KAAjC,CAA1D,EAAmG;AACjG,iBAAO,KAAP;AACD,SAFD,MAEO;AACL,iBAAO,IAAP;AACD;AACF,OAND,EAMGI,WAAWC,KAAX,CAAiB,+BAAjB,CANH;AAOD;;;;;;AAGH,IAAIjC,OAAJ,CAAYkB,EAAE,wBAAF,CAAZ","file":"index.js","sourceRoot":"/Users/kz/projects/edusoho","sourcesContent":["class Creator {\n  constructor(props) {\n    this.$element = props;\n    this.$courseSetType = this.$element.find('.js-courseSetType');\n    this.$currentCourseSetType = this.$element.find('.js-courseSetType.active');;\n    this.init();\n  }\n\n  init() {\n    this._extendValidator();\n    let validator = this.$element.validate({\n      onkeyup: false,\n      rules: {\n        title: {\n          required: true,\n          open_live_course_title: true\n        }\n      },\n      messages: {\n        title: \"请输入有效的课程标题（直播公开课标题暂不支持<、>、\\\"、&、‘、’、”、“字符）\"\n      }\n    });\n    \n\n    this.$courseSetType.click(event => {\n      this.$courseSetType.removeClass('active');\n      this.$currentCourseSetType = $(event.currentTarget);\n      this.$currentCourseSetType.addClass('active');\n      $('input[name=\"type\"]').val(this.$currentCourseSetType.data('type'));\n    });\n\n    $('#courseset-create-btn').click(event => {\n      if (validator.form()) {\n        $(event.currentTarget).button('loading');\n        this.$element.submit();\n      }\n    });\n  }\n\n  _extendValidator() {\n    let $currentCourseSetType = this.$currentCourseSetType;\n    $.validator.addMethod(\"open_live_course_title\", function(value, element, params) {\n      if ($currentCourseSetType.data('type') === 'liveOpen' && !/^[^(<|>|'|\"|&|‘|’|”|“)]*$/.test(value)) {\n        return false;\n      } else {\n        return true;\n      }\n    }, Translator.trans('直播公开课标题暂不支持<、>、\\\"、&、‘、’、”、“字符'));\n  }\n}\n\nnew Creator($('#courseset-create-form'));\n"]}