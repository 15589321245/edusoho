{"version":3,"sources":["webpack:///./app/Resources/static-src/app/js/open-course-manage/live-open-time-set/index.js"],"names":["$content","$","$form","now","Date","$btn","thisTime","val","replace","parse","nowTime","attr","html","css","validator","validate","rules","startTime","required","after_now","timeLength","positive_integer","es_remote","type","data","length","datetimepicker","autoclose","language","document","documentElement","lang","on","ev","click","form","button","submit"],"mappings":";;;;;;AAAA,KAAIA,WAAWC,EAAE,4BAAF,CAAf;AACA,KAAIC,QAAQD,EAAE,wBAAF,CAAZ;AACA,KAAIE,MAAM,IAAIC,IAAJ,EAAV;AACA,KAAIC,OAAOJ,EAAE,4BAAF,CAAX;AACA,KAAIK,WAAWL,EAAE,kBAAF,EAAsBM,GAAtB,EAAf;AACAD,YAAWA,SAASE,OAAT,CAAiB,IAAjB,EAAuB,GAAvB,CAAX;AACAF,YAAWF,KAAKK,KAAL,CAAWH,QAAX,IAAuB,IAAlC;AACA,KAAII,UAAUN,KAAKK,KAAL,CAAW,IAAIL,IAAJ,EAAX,IAAyB,IAAvC;;AAEA,KAAIM,UAAUJ,QAAd,EAAwB;AACtBL,KAAE,kBAAF,EAAsBU,IAAtB,CAA2B,UAA3B,EAAuC,IAAvC;AACAV,KAAE,oBAAF,EAAwBU,IAAxB,CAA6B,UAA7B,EAAyC,IAAzC;AACAV,KAAE,4BAAF,EAAgCU,IAAhC,CAAqC,UAArC,EAAiD,IAAjD;;AAEAV,KAAE,uBAAF,EAA2BW,IAA3B,CAAgC,iBAAhC;AACAX,KAAE,uBAAF,EAA2BY,GAA3B,CAA+B,OAA/B,EAAwC,SAAxC;AACAZ,KAAE,wBAAF,EAA4BW,IAA5B,CAAiC,iBAAjC;AACAX,KAAE,wBAAF,EAA4BY,GAA5B,CAAgC,OAAhC,EAAyC,SAAzC;AACD,EATD,MASO;AACLZ,KAAE,kBAAF,EAAsBU,IAAtB,CAA2B,UAA3B,EAAuC,KAAvC;AACAV,KAAE,4BAAF,EAAgCU,IAAhC,CAAqC,UAArC,EAAiD,KAAjD;AACD;;AAED,KAAIG,YAAYZ,MAAMa,QAAN,CAAe;AAC7BC,UAAO;AACLC,gBAAW;AACTC,iBAAU,IADD;AAETC,kBAAW;AAFF,MADN;AAKLC,iBAAY;AACVF,iBAAU,IADA;AAEVG,yBAAkB,IAFR;AAGVC,kBAAW;AACTC,eAAM,KADG;AAETC,eAAM,EAAsB;AAC1BP,sBAAW,qBAAY;AACrB,oBAAOhB,EAAE,kBAAF,EAAsBM,GAAtB,EAAP;AACD,YAHG;AAIJkB,mBAAQ,kBAAY;AAClB,oBAAOxB,EAAE,mBAAF,EAAuBM,GAAvB,EAAP;AACD;AANG;AAFG;AAHD;AALP;AADsB,EAAf,CAAhB;;AAwBAN,GAAE,kBAAF,EAAsByB,cAAtB,CAAqC;AACnCC,cAAW,IADwB;AAEnCC,aAAUC,SAASC,eAAT,CAAyBC;AAFA,EAArC,EAGGC,EAHH,CAGM,MAHN,EAGc,UAAUC,EAAV,EAAc;AAC1B/B,SAAMa,QAAN,CAAe,kBAAf;AACD,EALD;AAMAd,GAAE,kBAAF,EAAsByB,cAAtB,CAAqC,cAArC,EAAqDvB,GAArD;;AAEAE,MAAK6B,KAAL,CAAW,YAAM;AACf,OAAIpB,UAAUqB,IAAV,EAAJ,EAAsB;AACpB9B,UAAK+B,MAAL,CAAY,SAAZ;AACAlC,WAAMmC,MAAN;AACD;AACF,EALD,E","file":"app/js/open-course-manage/live-open-time-set/index.js","sourcesContent":["let $content = $(\"#live-lesson-content-field\");\nlet $form = $('#live-open-course-form');\nlet now = new Date();\nlet $btn = $('#live-open-course-form-btn');\nlet thisTime = $('[name=startTime]').val();\nthisTime = thisTime.replace(/-/g, \"/\");\nthisTime = Date.parse(thisTime) / 1000;\nlet nowTime = Date.parse(new Date()) / 1000;\n\nif (nowTime > thisTime) {\n  $('[name=startTime]').attr('disabled', true);\n  $('#live-length-field').attr('disabled', true);\n  $('#live-open-course-form-btn').attr('disabled', true);\n\n  $('#starttime-help-block').html(\"直播已经开始或者结束,无法编辑\");\n  $('#starttime-help-block').css('color', '#a94442');\n  $('#timelength-help-block').html(\"直播已经开始或者结束,无法编辑\");\n  $('#timelength-help-block').css('color', '#a94442');\n} else {\n  $('[name=startTime]').attr('disabled', false);\n  $('#live-open-course-form-btn').attr('disabled', false);\n}\n\nlet validator = $form.validate({\n  rules: {\n    startTime: {\n      required: true,\n      after_now: true\n    },\n    timeLength: {\n      required: true,\n      positive_integer: true,\n      es_remote: {\n        type: 'get',\n        data: {                     //要传递的数据\n          startTime: function () {\n            return $('[name=startTime]').val();\n          },\n          length: function () {\n            return $('[name=timeLength]').val();\n          },\n        }\n      }\n    }\n  }\n});\n\n$(\"[name=startTime]\").datetimepicker({\n  autoclose: true,\n  language: document.documentElement.lang\n}).on('hide', function (ev) {\n  $form.validate('[name=startTime]');\n});\n$('[name=startTime]').datetimepicker('setStartDate', now);\n\n$btn.click(() => {\n  if (validator.form()) {\n    $btn.button('loading');\n    $form.submit();\n  }\n})\n\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/open-course-manage/live-open-time-set/index.js"],"sourceRoot":""}