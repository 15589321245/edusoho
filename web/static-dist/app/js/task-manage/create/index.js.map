{"version":3,"sources":["webpack:///./app/Resources/static-src/app/js/course-manage/help.js","webpack:///./app/Resources/static-src/app/js/courseset-manage/intro.js","webpack:///./app/Resources/static-src/app/js/task-manage/create/editor.js","webpack:///./app/Resources/static-src/app/js/task-manage/create/index.js","webpack:///./app/Resources/static-src/common/load-animation.js"],"names":["sortablelist","list","$list","$","data","sortable","get","lessonNum","chapterNum","unitNum","find","each","$item","hasClass","length","text","trigger","post","ids","response","taskSortable","element","ajax","closeCourse","on","evt","$target","currentTarget","confirm","Translator","trans","warn","message","success","location","reload","deleteCourse","redirect","window","href","publishCourse","target","delay","deleteTask","parents","remove","console","log","children","removeClass","document","publishTask","event","parentLi","closest","addClass","unpublishTask","showSettings","$this","$li","stop","slideUp","slideDown","siblings","hide","TabChange","click","updateTaskNum","container","TaskListHeaderFixed","$header","headerTop","offset","top","scroll","scrollTop","COURSE_BASE_INTRO","COURSE_TASK_INTRO","COURSE_TASK_DETAIL_INTRO","COURSE_LIST_INTRO","COURSE_LIST_INTRO_COOKIE","Intro","intro","customClass","exit","isTaskCreatePage","initTaskCreatePageIntro","isCourseListPage","initNotTaskCreatePageIntro","initCourseListPageIntro","attr","steps","doneLabel","introJs","setOptions","skipLabel","nextLabel","prevLabel","showBullets","tooltipPosition","showStepNumbers","exitOnEsc","exitOnOverlayClick","tooltipClass","start","onexit","onchange","_currentStep","_introItems","before","store","set","introStart","initAllSteps","initTaskSteps","initTaskDetailSteps","initNotTaskPageSteps","listLength","Promise","resolve","reject","setTimeout","$courseMenu","then","initCourseListIntro","initCourseListSteps","arry","isInitTaskDetailIntro","push","position","introBtnClassName","Editor","$modal","$element","$task_manage_content","$task_manage_type","$frame","$iframe_body","iframe_jQuery","iframe_name","mode","type","step","loaded","contentUrl","_init","_initEvent","_onSave","_onNext","_onPrev","_onSetType","_onDelete","_inItStep1form","_renderContent","_switchPage","e","_validator","val","button","postData","serializeArray","concat","done","needAppend","append","html","modal","chapterId","input","name","add","$parent","value","nextAll","showDefaultSetting","initIntro","fail","msg","errorResponse","JSON","parse","responseText","error","initTaskDetailIntro","$btn","url","undefined","_renderStep","_rendStepIframe","_rendButton","Date","toLocaleTimeString","_initIframe","show","iFrameResize","loadiframe","validator","contentWindow","contents","load","$step1_form","validate","rules","mediaType","required","messages","$from","form","_renderPrev","_rendSubmit","_renderNext","prev","next","removeAttr","loadAnimation","fn","$loading","prependTo","arr","l","x","callee","apply"],"mappings":";;;;;;;;;;;;AAAA;;;;AACA;;;;;;AAEO,KAAMA,sCAAe,SAAfA,YAAe,CAACC,IAAD,EAAU;AACpC,OAAIC,QAAQC,EAAEF,IAAF,CAAZ;AACA,OAAIG,OAAOF,MAAMG,QAAN,CAAe,WAAf,EAA4BC,GAA5B,EAAX;;AAEA,OAAIC,YAAY,CAAhB;AAAA,OACEC,aAAa,CADf;AAAA,OAEEC,UAAU,CAFZ;AAGAP,SAAMQ,IAAN,CAAW,mBAAX,EAAgCC,IAAhC,CAAqC,YAAY;AAC/C,SAAIC,QAAQT,EAAE,IAAF,CAAZ;AACA,SAAIS,MAAMC,QAAN,CAAe,qBAAf,CAAJ,EAA2C;AACzC,WAAID,MAAMF,IAAN,CAAW,SAAX,EAAsBI,MAAtB,GAA+B,CAAnC,EAAsC;AACpCP;AACAK,eAAMF,IAAN,CAAW,SAAX,EAAsBK,IAAtB,CAA2BR,SAA3B;AACD;AACF,MALD,MAKO,IAAIK,MAAMC,QAAN,CAAe,kBAAf,CAAJ,EAAwC;AAC7CJ;AACAG,aAAMF,IAAN,CAAW,SAAX,EAAsBK,IAAtB,CAA2BN,OAA3B;AACD,MAHM,MAGA,IAAIG,MAAMC,QAAN,CAAe,qBAAf,CAAJ,EAA2C;AAChDL;AACAC,iBAAU,CAAV;AACAG,aAAMF,IAAN,CAAW,SAAX,EAAsBK,IAAtB,CAA2BP,UAA3B;AACD;AACF,IAfD;;AAiBAN,SAAMc,OAAN,CAAc,UAAd;;AAEAb,KAAEc,IAAF,CAAOf,MAAME,IAAN,CAAW,SAAX,CAAP,EAA8B,EAAEc,KAAKd,IAAP,EAA9B,EAA6C,UAACe,QAAD,EAAc,CAE1D,CAFD;AAGD,EA7BM;;AA+BA,KAAMC,sCAAe,SAAfA,YAAe,CAACnB,IAAD,EAAU;AACpC,OAAIE,EAAEF,IAAF,EAAQa,MAAZ,EAAoB;AAClB,6BAAS;AACPO,gBAASpB,IADF;AAEPqB,aAAM;AAFC,MAAT,EAGG,UAAClB,IAAD,EAAU;AACXJ,oBAAaC,IAAb;AACD,MALD;AAMD;AACF,EATM;;AAWA,KAAMsB,oCAAc,SAAdA,WAAc,GAAM;AAC/BpB,KAAE,MAAF,EAAUqB,EAAV,CAAa,OAAb,EAAsB,kBAAtB,EAA0C,UAAUC,GAAV,EAAe;AACvD,SAAIC,UAAUvB,EAAEsB,IAAIE,aAAN,CAAd;AACA,SAAI,CAACC,QAAQC,WAAWC,KAAX,CAAiB,0BAAjB,CAAR,CAAL,EAA4D;AAC1D;AACD;;AAED3B,OAAEc,IAAF,CAAOS,QAAQtB,IAAR,CAAa,WAAb,CAAP,EAAkC,UAAUA,IAAV,EAAgB;;AAEhD,WAAIA,KAAK2B,IAAT,EAAe;AACb,aAAI,CAACH,QAAQC,WAAWC,KAAX,CAAiB1B,KAAK4B,OAAtB,CAAR,CAAL,EAA8C;AAC5C;AACD;AACF;;AAED7B,SAAEc,IAAF,CAAOS,QAAQtB,IAAR,CAAa,KAAb,CAAP,EAA4B,UAAUA,IAAV,EAAgB;AAC1C,aAAIA,KAAK6B,OAAT,EAAkB;AAChB,iCAAO,SAAP,EAAkBJ,WAAWC,KAAX,CAAiB,kCAAjB,CAAlB;AACAI,oBAASC,MAAT;AACD,UAHD,MAGO;AACL,iCAAO,QAAP,EAAiBN,WAAWC,KAAX,CAAiB,+BAAjB,IAAoD,GAApD,GAA0D1B,KAAK4B,OAAhF;AACD;AACF,QAPD;AAQD,MAhBD;AAiBD,IAvBD;AAwBD,EAzBM;;AA2BA,KAAMI,sCAAe,SAAfA,YAAe,GAAM;AAChCjC,KAAE,MAAF,EAAUqB,EAAV,CAAa,OAAb,EAAsB,mBAAtB,EAA2C,UAAUC,GAAV,EAAe;AACxD,SAAI,CAACG,QAAQC,WAAWC,KAAX,CAAiB,2BAAjB,CAAR,CAAL,EAA6D;AAC3D;AACD;AACD3B,OAAEc,IAAF,CAAOd,EAAEsB,IAAIE,aAAN,EAAqBvB,IAArB,CAA0B,KAA1B,CAAP,EAAyC,UAAUA,IAAV,EAAgB;AACvD,WAAIA,KAAK6B,OAAT,EAAkB;AAChB,+BAAO,SAAP,EAAkBJ,WAAWC,KAAX,CAAiB,0BAAjB,CAAlB;AACA,aAAI1B,KAAKiC,QAAT,EAAmB;AACjBC,kBAAOJ,QAAP,CAAgBK,IAAhB,GAAuBnC,KAAKiC,QAA5B;AACD,UAFD,MAEM;AACJH,oBAASC,MAAT;AACD;AACF,QAPD,MAOO;AACL,+BAAO,QAAP,EAAiBN,WAAWC,KAAX,CAAiB,uBAAjB,IAA4C,GAA5C,GAAkD1B,KAAK4B,OAAxE;AACD;AACF,MAXD;AAYD,IAhBD;AAiBD,EAlBM;;AAoBA,KAAMQ,wCAAgB,SAAhBA,aAAgB,GAAM;AACjCrC,KAAE,MAAF,EAAUqB,EAAV,CAAa,OAAb,EAAsB,oBAAtB,EAA4C,UAAUC,GAAV,EAAe;AACzD,SAAI,CAACG,QAAQC,WAAWC,KAAX,CAAiB,4BAAjB,CAAR,CAAL,EAA8D;AAC5D;AACD;AACD3B,OAAEc,IAAF,CAAOd,EAAEsB,IAAIgB,MAAN,EAAcrC,IAAd,CAAmB,KAAnB,CAAP,EAAkC,UAAUA,IAAV,EAAgB;AAChD,WAAIA,KAAK6B,OAAT,EAAkB;AAChB,+BAAO,SAAP,EAAkBJ,WAAWC,KAAX,CAAiB,yCAAjB,CAAlB;AACAI,kBAASC,MAAT;AACD,QAHD,MAGO;AACL,+BAAO,QAAP,EAAiBN,WAAWC,KAAX,CAAiB,sCAAjB,IAAyD,GAAzD,GAA+D1B,KAAK4B,OAArF,EAA8F,EAACU,OAAM,IAAP,EAA9F;AACD;AACF,MAPD;AAQD,IAZD;AAaD,EAdM;;AAgBA,KAAMC,kCAAa,SAAbA,UAAa,GAAM;AAC9BxC,KAAE,MAAF,EAAUqB,EAAV,CAAa,OAAb,EAAsB,cAAtB,EAAsC,UAAUC,GAAV,EAAe;AACnD,SAAItB,EAAEsB,IAAIE,aAAN,EAAqBvB,IAArB,CAA0B,MAA1B,KAAqC,MAAzC,EAAiD;AAC/C,WAAI,CAACwB,QAAQC,WAAWC,KAAX,CAAiB,gCAAjB,CAAR,CAAL,EAAkE;AAChE;AACD;AACF,MAJD,MAIO,IAAI3B,EAAEsB,IAAIE,aAAN,EAAqBvB,IAArB,CAA0B,MAA1B,KAAqC,SAAzC,EAAoD;AACzD,WAAI,CAACwB,QAAQC,WAAWC,KAAX,CAAiB,mCAAjB,CAAR,CAAL,EAAqE;AACnE;AACD;AACF;AACD3B,OAAEc,IAAF,CAAOd,EAAEsB,IAAIE,aAAN,EAAqBvB,IAArB,CAA0B,KAA1B,CAAP,EAAyC,UAAUA,IAAV,EAAgB;AACvD,WAAIA,KAAK6B,OAAT,EAAkB;AAChB,+BAAO,SAAP,EAAkBJ,WAAWC,KAAX,CAAiB,0BAAjB,CAAlB;AACA3B,WAAEsB,IAAIgB,MAAN,EAAcG,OAAd,CAAsB,mBAAtB,EAA2CC,MAA3C;AACA7C,sBAAa,gBAAb;AACA8C,iBAAQC,GAAR,CAAY5C,EAAE,gBAAF,EAAoB6C,QAApB,CAA6B,IAA7B,EAAmClC,MAA/C;AACA,aAAGX,EAAE,gBAAF,EAAoB6C,QAApB,CAA6B,IAA7B,EAAmClC,MAAnC,GAA4C,CAA5C,IAAiDX,EAAE,gBAAF,EAAoBU,QAApB,CAA6B,QAA7B,CAApD,EAA6F;AACzFV,aAAE,gBAAF,EAAoB8C,WAApB,CAAgC,QAAhC;AACH;AACDC,kBAAShB,QAAT,CAAkBC,MAAlB;AACD,QATD,MASO;AACL,+BAAO,QAAP,EAAiBN,WAAWC,KAAX,CAAiB,uBAAjB,IAA4C,GAA5C,GAAkD1B,KAAK4B,OAAxE;AACD;AACF,MAbD;AAcD,IAxBD;AAyBD,EA1BM;;AA4BA,KAAMmB,oCAAc,SAAdA,WAAc,GAAM;AAC/BhD,KAAE,MAAF,EAAUqB,EAAV,CAAa,OAAb,EAAsB,eAAtB,EAAuC,UAAC4B,KAAD,EAAW;AAChDjD,OAAEc,IAAF,CAAOd,EAAEiD,MAAMX,MAAR,EAAgBrC,IAAhB,CAAqB,KAArB,CAAP,EAAoC,UAAUA,IAAV,EAAgB;AAClD,WAAIA,KAAK6B,OAAT,EAAkB;AAChB,aAAIoB,WAAWlD,EAAEiD,MAAMX,MAAR,EAAgBa,OAAhB,CAAwB,mBAAxB,CAAf;AACA,+BAAO,SAAP,EAAkBzB,WAAWC,KAAX,CAAiB,yCAAjB,CAAlB;AACA3B,WAAEkD,QAAF,EAAY3C,IAAZ,CAAiB,eAAjB,EAAkC6C,QAAlC,CAA2C,QAA3C;AACApD,WAAEkD,QAAF,EAAY3C,IAAZ,CAAiB,cAAjB,EAAiC6C,QAAjC,CAA0C,QAA1C;AACApD,WAAEkD,QAAF,EAAY3C,IAAZ,CAAiB,iBAAjB,EAAoCuC,WAApC,CAAgD,QAAhD;AACA9C,WAAEkD,QAAF,EAAY3C,IAAZ,CAAiB,iBAAjB,EAAoC6C,QAApC,CAA6C,QAA7C;AACD,QAPD,MAOO;AACL,+BAAO,QAAP,EAAiB1B,WAAWC,KAAX,CAAiB,sCAAjB,IAA2D,GAA3D,GAAiE1B,KAAK4B,OAAvF;AACD;AACF,MAXD;AAYD,IAbD;AAcD,EAfM;;AAiBA,KAAMwB,wCAAgB,SAAhBA,aAAgB,GAAM;AACjCrD,KAAE,MAAF,EAAUqB,EAAV,CAAa,OAAb,EAAsB,iBAAtB,EAAyC,UAAC4B,KAAD,EAAW;AAClDjD,OAAEc,IAAF,CAAOd,EAAEiD,MAAMX,MAAR,EAAgBrC,IAAhB,CAAqB,KAArB,CAAP,EAAoC,UAAUA,IAAV,EAAgB;AAClD,WAAIA,KAAK6B,OAAT,EAAkB;AAChB,aAAIoB,WAAWlD,EAAEiD,MAAMX,MAAR,EAAgBa,OAAhB,CAAwB,mBAAxB,CAAf;AACA,+BAAO,SAAP,EAAkBzB,WAAWC,KAAX,CAAiB,2CAAjB,CAAlB;AACA3B,WAAEkD,QAAF,EAAY3C,IAAZ,CAAiB,eAAjB,EAAkCuC,WAAlC,CAA8C,QAA9C;AACA9C,WAAEkD,QAAF,EAAY3C,IAAZ,CAAiB,cAAjB,EAAiCuC,WAAjC,CAA6C,QAA7C;AACA9C,WAAEkD,QAAF,EAAY3C,IAAZ,CAAiB,iBAAjB,EAAoC6C,QAApC,CAA6C,QAA7C;AACApD,WAAEkD,QAAF,EAAY3C,IAAZ,CAAiB,iBAAjB,EAAoCuC,WAApC,CAAgD,QAAhD;AACD,QAPD,MAOO;AACL,+BAAO,QAAP,EAAiBpB,WAAWC,KAAX,CAAiB,wCAAjB,IAA6D,GAA7D,GAAmE1B,KAAK4B,OAAzF;AACD;AACF,MAXD;AAYD,IAbD;AAcD,EAfM;;AAiBA,KAAMyB,sCAAe,SAAfA,YAAe,GAAM;AAChCtD,KAAE,gBAAF,EAAoBqB,EAApB,CAAuB,OAAvB,EAAgC,kBAAhC,EAAoD,UAAC4B,KAAD,EAAW;AAC7DN,aAAQC,GAAR,CAAY,OAAZ;AACA,SAAIW,QAAQvD,EAAEiD,MAAMzB,aAAR,CAAZ;AACA,SAAIgC,MAAMD,MAAMJ,OAAN,CAAc,sBAAd,CAAV;AACA,SAAIK,IAAI9C,QAAJ,CAAa,QAAb,CAAJ,EAA4B;AAC1B8C,WAAIV,WAAJ,CAAgB,QAAhB,EAA0BvC,IAA1B,CAA+B,mBAA/B,EAAoDkD,IAApD,GAA2DC,OAA3D,CAAmE,GAAnE;AACD,MAFD,MAGK;AACHF,WAAIJ,QAAJ,CAAa,QAAb,EAAuB7C,IAAvB,CAA4B,mBAA5B,EAAiDkD,IAAjD,GAAwDE,SAAxD,CAAkE,GAAlE;AACAH,WAAII,QAAJ,CAAa,6BAAb,EAA4Cd,WAA5C,CAAwD,QAAxD,EAAkEvC,IAAlE,CAAuE,mBAAvE,EAA4FsD,IAA5F;AACD;AACF,IAXD;AAYD,EAbM;;AAeA,KAAMC,gCAAY,SAAZA,SAAY,GAAM;AAC7B9D,KAAE,mBAAF,EAAuB+D,KAAvB,CAA6B,UAAUd,KAAV,EAAiB;AAC5C,SAAIM,QAAQvD,EAAE,IAAF,CAAZ;AACAA,OAAEuD,MAAMtD,IAAN,CAAW,aAAX,CAAF,EAA6B6C,WAA7B,CAAyC,QAAzC,EAAmDc,QAAnD,CAA4D,2BAA5D,EAAyFR,QAAzF,CAAkG,QAAlG;AACD,IAHD;AAID,EALM;;AAOA,KAAMY,wCAAgB,SAAhBA,aAAgB,CAACC,SAAD,EAAe;AAC1C;AACA;AACA;AACA;AACD,EALM;;AAOA,KAAMC,oDAAsB,SAAtBA,mBAAsB,GAAM;AACvC,OAAIC,UAAUnE,EAAE,sBAAF,CAAd;AACA,OAAG,CAACmE,QAAQxD,MAAZ,EAAmB;AACjB;AACD;AACD,OAAIyD,YAAYD,QAAQE,MAAR,GAAiBC,GAAjC;AACDtE,KAAEmC,MAAF,EAAUoC,MAAV,CAAiB,UAAStB,KAAT,EAAgB;AAC/B,SAAIjD,EAAEmC,MAAF,EAAUqC,SAAV,MAAyBJ,SAA7B,EAAwC;AACvCD,eAAQf,QAAR,CAAiB,OAAjB;AACA,MAFD,MAEO;AACNe,eAAQrB,WAAR,CAAoB,OAApB;AACA;AACF,IAND;AAOA,EAbM,C;;;;;;;;;;;;;;;ACvMP;;AACA;;;;;;;;AACA,KAAM2B,oBAAoB,mBAA1B;AACA,KAAMC,oBAAoB,mBAA1B;AACA,KAAMC,2BAA2B,0BAAjC;AACA,KAAMC,oBAAoB,mBAA1B;AACA,KAAMC,2BAA2B,0BAAjC;;KAEqBC,K;AACnB,oBAAc;AAAA;;AAAA;;AACZ,UAAKC,KAAL,GAAa,IAAb;AACA,UAAKC,WAAL,GAAmB,yBAAnB;AACAhF,OAAE,MAAF,EAAUqB,EAAV,CAAa,OAAb,EAAqB,UAArB,EAAgC,UAAC4B,KAAD,EAAS;AACvC,aAAK8B,KAAL,CAAWE,IAAX;AACD,MAFD;AAGD;;;;iCAEW;AACV,WAAI,KAAKC,gBAAL,EAAJ,EAA6B;AAC3B,cAAKC,uBAAL;AACA;AACD;AACD,WAAI,CAAC,KAAKC,gBAAL,EAAL,EAA8B;AAC5B,cAAKC,0BAAL;AACA;AACD;AACD,YAAKC,uBAAL;AACD;;;wCAEkB;AACjB,cAAO,CAAC,CAACtF,EAAE,qBAAF,EAAyBW,MAAlC;AACD;;;wCAEkB;AACjB,cAAO,CAAC,CAACX,EAAE,SAAF,EAAaW,MAAtB;AACD;;;6CAEuB;AACtBX,SAAE,sBAAF,EAA0BuF,IAA1B,CAA+B,cAA/B,EAA+C,QAA/C;AACA,cAAO,CAAC,CAACvF,EAAE,mBAAF,EAAuBW,MAAhC;AACD;;;gCAEU6E,K,EAAO;AAAA;;AAChB,WAAIC,YAAY,yCAAhB;AACA,YAAKV,KAAL,GAAaW,SAAb;AACA,WAAGF,MAAM7E,MAAN,GAAe,CAAlB,EAAqB;AAClB8E,qBAAW/D,WAAWC,KAAX,CAAiB,oBAAjB,CAAX;AACA,cAAKqD,WAAL,GAAmB,eAAnB;AACF,QAHD,MAGM;AACH,cAAKA,WAAL,GAAmB,yBAAnB;AACF;AACDrC,eAAQC,GAAR,CAAY4C,MAAM7E,MAAN,GAAe,CAA3B;AACAgC,eAAQC,GAAR,CAAY,KAAKoC,WAAjB;AACArC,eAAQC,GAAR,CAAY6C,SAAZ;AACA,YAAKV,KAAL,CAAWY,UAAX,CAAsB;AACpBH,gBAAOA,KADa;AAEpBI,oBAAWH,SAFS;AAGpBI,oBAAWnE,WAAWC,KAAX,CAAiB,8BAAjB,CAHS;AAIpBmE,oBAAWpE,WAAWC,KAAX,CAAiB,8BAAjB,CAJS;AAKpB8D,oBAAWA,SALS;AAMpBM,sBAAa,KANO;AAOpBC,0BAAiB,MAPG;AAQpBC,0BAAiB,KARG;AASnBC,oBAAW,KATQ;AAUpBC,6BAAoB,KAVA;AAWpBC,uBAAa,KAAKpB;AAXE,QAAtB;;AAcA,YAAKD,KAAL,CAAWsB,KAAX,GAAmBC,MAAnB,CAA0B,YAAU,CACnC,CADD,EACGC,QADH,CACY,YAAI;AACd5D,iBAAQC,GAAR,CAAY,OAAKmC,KAAjB;AACA,aAAG,OAAKA,KAAL,CAAWyB,YAAX,IAA2B,OAAKzB,KAAL,CAAW0B,WAAX,CAAuB9F,MAAvB,GAA+B,CAA7D,EAAmE;AACjEX,aAAE,qBAAF,EAAyB0G,MAAzB,CAAgC,oDAAkDhF,WAAWC,KAAX,CAAiB,oBAAjB,CAAlD,GAAyF,MAAzH;AACD,UAFD,MAGK;AACH3B,aAAE,UAAF,EAAc0C,MAAd;AACD;AACF,QATD;AAUD;;;+CAEyB;AACxB1C,SAAE,6CAAF,EAAiDa,OAAjD,CAAyD,OAAzD;AACA,WAAI,CAAC8F,MAAMxG,GAAN,CAAUsE,iBAAV,CAAD,IAAiC,CAACkC,MAAMxG,GAAN,CAAUuE,iBAAV,CAAtC,EAAoE;AAClEiC,eAAMC,GAAN,CAAUnC,iBAAV,EAA6B,IAA7B;AACAkC,eAAMC,GAAN,CAAUlC,iBAAV,EAA6B,IAA7B;AACA,cAAKmC,UAAL,CAAgB,KAAKC,YAAL,EAAhB;AACD,QAJD,MAIO,IAAI,CAACH,MAAMxG,GAAN,CAAUuE,iBAAV,CAAL,EAAmC;AACxCiC,eAAMC,GAAN,CAAUlC,iBAAV,EAA6B,IAA7B;AACA,cAAKmC,UAAL,CAAgB,KAAKE,aAAL,EAAhB;AACD;AACF;;;yCAEmB7F,O,EAAS;AAC3B,WAAI,CAACyF,MAAMxG,GAAN,CAAUwE,wBAAV,CAAL,EAA0C;AACxCgC,eAAMC,GAAN,CAAUjC,wBAAV,EAAmC,IAAnC;AACA,cAAKkC,UAAL,CAAgB,KAAKG,mBAAL,CAAyB9F,OAAzB,CAAhB;AACD;AACF;;;kDAE4B;AAC3B,WAAI,CAACyF,MAAMxG,GAAN,CAAUsE,iBAAV,CAAL,EAAmC;AACjCkC,eAAMC,GAAN,CAAUnC,iBAAV,EAA6B,IAA7B;AACA,cAAKoC,UAAL,CAAgB,KAAKI,oBAAL,EAAhB;AACD;AACF;;;8CAEwB;AACvB,WAAI,CAACN,MAAMxG,GAAN,CAAUyE,iBAAV,CAAL,EAAmC;AACjC,4BAAQgC,GAAR,CAAY/B,wBAAZ,EAAsC,IAAtC;AACD;AACF;;;+CAEyB;AAAA;;AACxB,WAAIqC,aAAalH,EAAE,qBAAF,EAAyBO,IAAzB,CAA8B,UAA9B,EAA0CI,MAA3D;;AAEA,WAAI,EAAEuG,eAAe,CAAjB,KAAuBP,MAAMxG,GAAN,CAAUyE,iBAAV,CAAvB,IAAsD,CAAC,mBAAQzE,GAAR,CAAY0E,wBAAZ,CAA3D,EAAkG;AAChG;AACD;AACD,0BAAQnC,MAAR,CAAemC,wBAAf;AACA,WAAIsC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AAC/BC,oBAAW,YAAY;AACrB,eAAIC,cAAcvH,EAAE,yBAAF,CAAlB;AACA,eAAI,CAACuH,YAAY5G,MAAjB,EAAyB;AACvByG;AACA;AACD;AACDpH,aAAE,yBAAF,EAA6B0D,OAA7B,CAAqC,YAAY;AAC/C0D;AACD,YAFD;AAGD,UATD,EASG,GATH;AAUD,QAXD,EAWGI,IAXH,CAWQ,YAAM;AACZF,oBAAW,YAAM;AACf,kBAAKG,mBAAL,CAAyB,aAAzB;AACA9E,mBAAQC,GAAR,CAAY,qBAAZ;AACD,UAHD,EAGG,GAHH;AAID,QAhBD;AAiBD;;;yCAEmB1B,O,EAAS;AAC3B,WAAI,CAACyF,MAAMxG,GAAN,CAAUyE,iBAAV,CAAL,EAAmC;AACjC+B,eAAMC,GAAN,CAAUhC,iBAAV,EAA6B,IAA7B;AACA,cAAKiC,UAAL,CAAgB,KAAKa,mBAAL,CAAyBxG,OAAzB,CAAhB;AACD;AACF;;;oCAEc;AACb,WAAIyG,OAAO,CACT;AACE5C,gBAAOrD,WAAWC,KAAX,CAAiB,gCAAjB;AADT,QADS,EAIT;AACET,kBAAS,SADX;AAEE6D,gBAAOrD,WAAWC,KAAX,CAAiB,sCAAjB;AAFT,QAJS,EAQT;AACET,kBAAS,SADX;AAEE6D,gBAAOrD,WAAWC,KAAX,CAAiB,sCAAjB;AAFT,QARS,EAYT;AACET,kBAAS,SADX;AAEE6D,gBAAOrD,WAAWC,KAAX,CAAiB,sCAAjB;AAFT,QAZS,CAAX;AAiBA;AACA,WAAI,KAAKiG,qBAAL,EAAJ,EAAkC;AAChCD,cAAKE,IAAL,CAAU;AACR3G,oBAAS,yBADD;AAER6D,kBAAOrD,WAAWC,KAAX,CAAiB,sCAAjB;AAFC,UAAV;AAIA,aAAI,CAACgF,MAAMxG,GAAN,CAAUwE,wBAAV,CAAL,EAA0C;AACxCgC,iBAAMC,GAAN,CAAUjC,wBAAV,EAAmC,IAAnC;AACD;AACF;AACD,cAAOgD,IAAP;AACD;;;4CAEsB;AACrB,cAAO,CACL;AACE5C,gBAAOrD,WAAWC,KAAX,CAAiB,gCAAjB;AADT,QADK,EAIL;AACET,kBAAS,SADX;AAEE6D,gBAAOrD,WAAWC,KAAX,CAAiB,sCAAjB;AAFT,QAJK,EAQL;AACET,kBAAS,SADX;AAEE6D,gBAAOrD,WAAWC,KAAX,CAAiB,sCAAjB;AAFT,QARK,CAAP;AAaD;;;qCAEe;AACd,WAAIgG,OAAO,CACT;AACEzG,kBAAS,SADX;AAEE6D,gBAAOrD,WAAWC,KAAX,CAAiB,sCAAjB;AAFT,QADS,CAAX;AAMA;AACA,WAAI,KAAKiG,qBAAL,EAAJ,EAAkC;AAChCD,cAAKE,IAAL,CAAU;AACR3G,oBAAS,SADD;AAER6D,kBAAOrD,WAAWC,KAAX,CAAiB,sCAAjB,CAFC;AAGRmG,qBAAU;AAHF,UAAV;AAKA,aAAI,CAACnB,MAAMxG,GAAN,CAAUwE,wBAAV,CAAL,EAA0C;AACxCgC,iBAAMC,GAAN,CAAUjC,wBAAV,EAAmC,IAAnC;AACD;AACF;;AAED,cAAOgD,IAAP;AACD;;;yCAEmBzG,O,EAAS;AAC3B,cAAO,CACL;AACEA,kBAASA,OADX;AAEE6D,gBAAOrD,WAAWC,KAAX,CAAiB,sCAAjB,CAFT;AAGEmG,mBAAU;AAHZ,QADK,CAAP;AAOD;;;yCAEmB5G,O,EAAS;AAC3B,cAAO,CACL;AACEA,kBAASA,OADX;AAEE6D,gBAAOrD,WAAWC,KAAX,CAAiB,wBAAjB;AAFT,QADK,CAAP;AAMD;;;qCACmC;AAAA,WAAtBoG,iBAAsB,uEAAJ,EAAI;;AAClC,cAAO,CACL;AACE7G,kBAAS,qBADX;AAEE6D,gBAAOrD,WAAWC,KAAX,CAAiB,gCAAjB,EAAmD,EAAE,qBAAqBoG,iBAAvB,EAAnD,CAFT;AAGED,mBAAS;AAHX,QADK,CAAP;AAOD;;;;;;mBAxOkBhD,K;;;;;;;;;;;;;;;ACRrB;;;;AACA;;AACA;;;;AACA;;;;AACA;;;;;;KAGMkD,M;AACJ,mBAAYC,MAAZ,EAAoB;AAAA;;AAClB,UAAKC,QAAL,GAAgBD,MAAhB;AACA,UAAKE,oBAAL,GAA4BnI,EAAE,sBAAF,CAA5B;AACA,UAAKoI,iBAAL,GAAyBpI,EAAE,mBAAF,CAAzB;AACA,UAAKqI,MAAL,GAAc,IAAd;AACA,UAAKC,YAAL,GAAoB,IAApB;AACA,UAAKC,aAAL,GAAqB,IAArB;AACA,UAAKC,WAAL,GAAmB,4BAAnB;AACA,UAAKC,IAAL,GAAY,KAAKL,iBAAL,CAAuBnI,IAAvB,CAA4B,YAA5B,CAAZ;AACA,UAAKyI,IAAL,GAAY,KAAKN,iBAAL,CAAuBnI,IAAvB,CAA4B,YAA5B,CAAZ;AACA,UAAK0I,IAAL,GAAY,CAAZ;AACA,UAAKC,MAAL,GAAc,KAAd;AACA,UAAKC,UAAL,GAAkB,EAAlB;AACA,UAAKC,KAAL;AACA,UAAKC,UAAL;AACD;;;;kCAEY;AAAA;;AACX/I,SAAE,sBAAF,EAA0B+D,KAA1B,CAAgC;AAAA,gBAAS,MAAKiF,OAAL,CAAa/F,KAAb,CAAT;AAAA,QAAhC;AACAjD,SAAE,oBAAF,EAAwB+D,KAAxB,CAA8B;AAAA,gBAAS,MAAKkF,OAAL,CAAahG,KAAb,CAAT;AAAA,QAA9B;AACAjD,SAAE,oBAAF,EAAwB+D,KAAxB,CAA8B;AAAA,gBAAS,MAAKmF,OAAL,CAAajG,KAAb,CAAT;AAAA,QAA9B;AACA,WAAI,KAAKwF,IAAL,IAAa,MAAjB,EAAyB;AACvBzI,WAAE,uBAAF,EAA2B+D,KAA3B,CAAiC;AAAA,kBAAS,MAAKoF,UAAL,CAAgBlG,KAAhB,CAAT;AAAA,UAAjC;AACD,QAFD,MAEO;AACLjD,WAAE,cAAF,EAAkB+D,KAAlB,CAAwB;AAAA,kBAAS,MAAKqF,SAAL,CAAenG,KAAf,CAAT;AAAA,UAAxB;AACD;AACF;;;6BAEO;AACN,YAAKoG,cAAL;AACA,YAAKC,cAAL,CAAoB,KAAKX,IAAzB;AACA,WAAI,KAAKF,IAAL,IAAa,MAAjB,EAAyB;AACvB,cAAKI,UAAL,GAAkB,KAAKT,iBAAL,CAAuBnI,IAAvB,CAA4B,gBAA5B,CAAlB;AACA,cAAK0I,IAAL,GAAY,CAAZ;AACA,cAAKY,WAAL;AACD;AACF;;;6BAEOC,C,EAAG;AACT,WAAI,KAAKb,IAAL,KAAc,CAAd,IAAmB,CAAC,KAAKc,UAAL,CAAgB,KAAKd,IAArB,CAAxB,EAAoD;AAClD;AACD;AACD,YAAKA,IAAL,IAAa,CAAb;AACA,YAAKY,WAAL;AACA,YAAKrB,QAAL,CAAcrH,OAAd,CAAsB,WAAtB;AACD;;;+BAES;AACR;AACA,WAAI,KAAK8H,IAAL,KAAc,CAAd,IAAoB,KAAKA,IAAL,IAAa,CAAb,IAAkB,CAAC,KAAKc,UAAL,CAAgB,KAAKd,IAArB,CAA3C,EAAwE;AACtE;AACD;;AAED,YAAKA,IAAL,IAAa,CAAb;AACA,YAAKY,WAAL;AACD;;;gCAEUtG,K,EAAO;AAChB,WAAIM,QAAQvD,EAAEiD,MAAMzB,aAAR,EAAuB4B,QAAvB,CAAgC,QAAhC,CAAZ;AACAG,aAAMK,QAAN,GAAiBd,WAAjB,CAA6B,QAA7B;AACA,WAAI4F,OAAOnF,MAAMtD,IAAN,CAAW,MAAX,CAAX;AACAD,SAAE,oBAAF,EAAwB0J,GAAxB,CAA4BhB,IAA5B;AACA,YAAKG,UAAL,GAAkBtF,MAAMtD,IAAN,CAAW,YAAX,CAAlB;AACA,YAAK2I,MAAL,GAAc,KAAKF,IAAL,KAAcA,IAA5B;AACA,YAAKA,IAAL,GAAYA,IAAZ;AACA,YAAKO,OAAL,CAAahG,KAAb;AACD;;;6BAEOA,K,EAAO;AAAA;;AACb,WAAI,CAAC,KAAKwG,UAAL,CAAgB,KAAKd,IAArB,CAAL,EAAiC;AAC/B;AACD;;AAED3I,SAAEiD,MAAMzB,aAAR,EAAuB+D,IAAvB,CAA4B,UAA5B,EAAwC,UAAxC,EAAoDoE,MAApD,CAA2D,SAA3D;AACA,WAAIC,WAAW5J,EAAE,aAAF,EAAiB6J,cAAjB,GACZC,MADY,CACL,KAAKxB,YAAL,CAAkB/H,IAAlB,CAAuB,aAAvB,EAAsCsJ,cAAtC,EADK,EAEZC,MAFY,CAEL,KAAKxB,YAAL,CAAkB/H,IAAlB,CAAuB,aAAvB,EAAsCsJ,cAAtC,EAFK,CAAf;;AAIA7J,SAAEc,IAAF,CAAO,KAAKsH,iBAAL,CAAuBnI,IAAvB,CAA4B,SAA5B,CAAP,EAA+C2J,QAA/C,EACGG,IADH,CACQ,UAAC/I,QAAD,EAAc;AAClB,aAAMgJ,aAAahJ,SAASiJ,MAA5B;AACA,aAAMC,OAAOlJ,SAASkJ,IAAtB;AACA,gBAAKhC,QAAL,CAAciC,KAAd,CAAoB,MAApB;AACA,aAAG,CAACnK,EAAE,gBAAF,EAAoBU,QAApB,CAA6B,QAA7B,CAAJ,EAA4C;AACxCV,aAAE,gBAAF,EAAoBoD,QAApB,CAA6B,QAA7B;AACH;AACD,aAAI4G,eAAe,KAAnB,EAA0B;AACxB;AACAjH,oBAAShB,QAAT,CAAkBC,MAAlB;AACD;;AAED,aAAIoI,YAAYR,SAASrJ,IAAT,CAAc,UAAU8J,KAAV,EAAiB;AAC7C,kBAAOA,MAAMC,IAAN,IAAc,WAArB;AACD,UAFe,CAAhB;;AAIA,aAAIC,MAAM,CAAV;AACA,aAAIC,UAAUxK,EAAE,MAAMoK,UAAUK,KAAlB,CAAd;AACA,aAAIhK,QAAQ,IAAZ;;AAEA,aAAI+J,QAAQ7J,MAAZ,EAAoB;AAClB6J,mBAAQE,OAAR,GAAkBlK,IAAlB,CAAuB,YAAY;AACjC,iBAAIR,EAAE,IAAF,EAAQU,QAAR,CAAiB,qBAAjB,CAAJ,EAA6C;AAC3CV,iBAAE,IAAF,EAAQ0G,MAAR,CAAewD,IAAf;AACAK,qBAAM,CAAN;AACA,uCAAa,gBAAb;AACA,sBAAO,KAAP;AACD;AACD,iBAAIC,QAAQ9J,QAAR,CAAiB,kBAAjB,KAAwCV,EAAE,IAAF,EAAQU,QAAR,CAAiB,kBAAjB,CAA5C,EAAkF;AAChFV,iBAAE,IAAF,EAAQ0G,MAAR,CAAewD,IAAf;AACAK,qBAAM,CAAN;AACA,uCAAa,gBAAb;AACA,sBAAO,KAAP;AACD;AACF,YAbD;AAcA,eAAIA,OAAO,CAAX,EAAc;AACZ9J,qBAAQT,EAAEkK,IAAF,CAAR;AACAlK,eAAE,gBAAF,EAAoBiK,MAApB,CAA2BxJ,KAA3B;AACA8J,mBAAM,CAAN;AACD;AACF,UApBD,MAoBO;AACL9J,mBAAQT,EAAEkK,IAAF,CAAR;AACAlK,aAAE,gBAAF,EAAoBiK,MAApB,CAA2BxJ,KAA3B;AACD;AACD,gBAAKkK,kBAAL,CAAwBlK,KAAxB;AACA,gBAAKmK,SAAL;AACA,iCAAa,gBAAb;AACD,QAhDH,EAiDGC,IAjDH,CAiDQ,UAAC7J,QAAD,EAAc;AAClB,aAAI8J,MAAM,EAAV;AACA,aAAIC,gBAAgBC,KAAKC,KAAL,CAAWjK,SAASkK,YAApB,CAApB;AACA,aAAIH,cAAcI,KAAd,IAAuBJ,cAAcI,KAAd,CAAoBtJ,OAA/C,EAAwD;AACtDiJ,iBAAMC,cAAcI,KAAd,CAAoBtJ,OAA1B;AACD;AACD,+BAAO,SAAP,EAAkBH,WAAWC,KAAX,CAAiB,6BAAjB,IAAkD,GAAlD,GAAwDmJ,GAA1E;AACA9K,WAAE,sBAAF,EAA0BuF,IAA1B,CAA+B,UAA/B,EAA2C,IAA3C;AACD,QAzDH;AA0DD;;;iCAEW;AACV+B,kBAAW,YAAW;AACpB,aAAGtH,EAAE,mBAAF,EAAuBW,MAAvB,KAAkC,CAArC,EAAwC;AACtC,eAAIoE,QAAQ,qBAAZ;AACAA,iBAAMqG,mBAAN,CAA0B,mBAA1B;AACD;AACF,QALD,EAKG,GALH;AAMD;;;0CAEgC;AAAA,WAAd3K,KAAc,uEAAN,IAAM;;AAC/B,WAAIA,SAASA,MAAMC,QAAN,CAAe,qBAAf,CAAb,EAAoD;AAClDV,WAAE,sBAAF,EAA0B8C,WAA1B,CAAsC,QAAtC,EAAgDvC,IAAhD,CAAqD,mBAArD,EAA0EmD,OAA1E,GAAoF;AACpFjD,eAAM2C,QAAN,CAAe,QAAf,EAAyB7C,IAAzB,CAA8B,mBAA9B,EAAmDoD,SAAnD;AACD;AACF;;;+BAESV,K,EAAO;AAAA;;AACf,WAAIoI,OAAOrL,EAAEiD,MAAMzB,aAAR,CAAX;AACA,WAAI8J,MAAMD,KAAKpL,IAAL,CAAU,KAAV,CAAV;AACA,WAAIqL,QAAQC,SAAZ,EAAuB;AACrB;AACD;AACD,WAAI,CAAC9J,QAAQC,WAAWC,KAAX,CAAiBD,WAAWC,KAAX,CAAiB,yBAAjB,CAAjB,CAAR,CAAL,EAA6E;AAC3E;AACD;AACD3B,SAAEc,IAAF,CAAOwK,GAAP,EACG9D,IADH,CACQ,UAACxG,QAAD,EAAc;AAClB,+BAAO,SAAP,EAAkBU,WAAWC,KAAX,CAAiB,iCAAjB,CAAlB;AACA,gBAAKuG,QAAL,CAAciC,KAAd,CAAoB,MAApB;;AAGApH,kBAAShB,QAAT,CAAkBC,MAAlB;AACD,QAPH,EAQG6I,IARH,CAQQ,iBAAS;AACb,+BAAO,SAAP,EAAkBnJ,WAAWC,KAAX,CAAiB,gCAAjB,CAAlB;AACD,QAVH;AAWD;;;mCAEa;AACZ,YAAK6J,WAAL,CAAiB,KAAK7C,IAAtB;AACA,YAAKW,cAAL,CAAoB,KAAKX,IAAzB;AACA,YAAK8C,eAAL,CAAqB,KAAK9C,IAA1B;AACA,YAAK+C,WAAL,CAAiB,KAAK/C,IAAtB;AACA,WAAI,KAAKA,IAAL,IAAa,CAAb,IAAkB,CAAC,KAAKC,MAA5B,EAAoC;AAClCjG,iBAAQC,GAAR,CAAY,EAAC,WAAU,IAAI+I,IAAJ,GAAWC,kBAAX,EAAX,EAAZ;AACA,cAAKC,WAAL;AACD;AACF;;;mCAEa;AAAA;;AACZ,WAAI3B,OAAO,oBAAoB,KAAK1B,WAAzB,GAAuC,QAAvC,GAAkD,KAAKA,WAAvD,GAAqE,UAArE,GAAkF,KAAKA,WAAvF,GAAqG,wBAArG,GAAgI,KAAKK,UAArI,GAAkJ,aAA7J;AACA,YAAKV,oBAAL,CAA0B+B,IAA1B,CAA+BA,IAA/B,EAAqC4B,IAArC;AACA,YAAKzD,MAAL,GAAcrI,EAAE,MAAM,KAAKwI,WAAb,EAA0BuD,YAA1B,EAAd;AACA,WAAIC,aAAa,SAAbA,UAAa,GAAM;AACrB,gBAAKpD,MAAL,GAAc,IAAd;AACA,aAAIqD,YAAY,EAAhB;AACA,gBAAK1D,aAAL,GAAqB,OAAKF,MAAL,CAAY,CAAZ,EAAe6D,aAAf,CAA6BlM,CAAlD;AACA,gBAAKsI,YAAL,GAAoB,OAAKD,MAAL,CAAY8D,QAAZ,GAAuB5L,IAAvB,CAA4B,MAA5B,EAAoC6C,QAApC,CAA6C,kBAA7C,CAApB;AACA,gBAAKsI,WAAL,CAAiB,CAAjB;AACA,gBAAKpD,YAAL,CAAkB/H,IAAlB,CAAuB,aAAvB,EAAsCN,IAAtC,CAA2C,WAA3C,EAAwDgM,SAAxD;AACA,gBAAK3D,YAAL,CAAkB/H,IAAlB,CAAuB,aAAvB,EAAsCN,IAAtC,CAA2C,WAA3C,EAAwDgM,SAAxD;AACAtJ,iBAAQC,GAAR,CAAY,EAAC,UAAS,IAAI+I,IAAJ,GAAWC,kBAAX,EAAV,EAAZ;AACD,QATD;AAUA,YAAKvD,MAAL,CAAY+D,IAAZ,CAAiB,6BAAcJ,UAAd,EAA0B,KAAK7D,oBAA/B,CAAjB;AACD;;;sCAEgB;AACf,WAAIkE,cAAcrM,EAAE,aAAF,CAAlB;AACA,WAAIiM,YAAYI,YAAYC,QAAZ,CAAqB;AACnCC,gBAAO;AACLC,sBAAW;AACTC,uBAAU;AADD;AADN,UAD4B;AAMnCC,mBAAU;AACRF,sBAAW9K,WAAWC,KAAX,CAAiB,8BAAjB;AADH;AANyB,QAArB,CAAhB;AAUA0K,mBAAYpM,IAAZ,CAAiB,WAAjB,EAA8BgM,SAA9B;AACD;;;gCAEUtD,I,EAAM;AACf,WAAIsD,YAAY,IAAhB;;AAEA,WAAItD,SAAS,CAAb,EAAgB;AACdsD,qBAAYjM,EAAE,aAAF,EAAiBC,IAAjB,CAAsB,WAAtB,CAAZ;AACD,QAFD,MAEO,IAAI,KAAK2I,MAAT,EAAiB;AACtB,aAAI+D,QAAQ,KAAKrE,YAAL,CAAkB/H,IAAlB,CAAuB,UAAUoI,IAAV,GAAiB,OAAxC,CAAZ;AACAsD,qBAAY,KAAK1D,aAAL,CAAmBtI,IAAnB,CAAwB0M,MAAM,CAAN,CAAxB,EAAkC,WAAlC,CAAZ;AACD;;AAED,WAAIV,aAAa,CAACA,UAAUW,IAAV,EAAlB,EAAoC;AAClC,gBAAO,KAAP;AACD;AACD,cAAO,IAAP;AACD;;;iCAEWjE,I,EAAM;AAChB,WAAIA,SAAS,CAAb,EAAgB;AACd,cAAKkE,WAAL,CAAiB,KAAjB;AACA,cAAKC,WAAL,CAAiB,KAAjB;AACA,cAAKC,WAAL,CAAiB,IAAjB;AACD,QAJD,MAIO,IAAIpE,SAAS,CAAb,EAAgB;AACrB,cAAKkE,WAAL,CAAiB,IAAjB;AACA,aAAI,KAAKpE,IAAL,KAAc,MAAlB,EAA0B;AACxB,gBAAKoE,WAAL,CAAiB,KAAjB;AACD;AACD,aAAI,CAAC,KAAKjE,MAAV,EAAkB;AAChB,gBAAKkE,WAAL,CAAiB,KAAjB;AACA,gBAAKC,WAAL,CAAiB,KAAjB;AACA;AACD;AACD,cAAKD,WAAL,CAAiB,IAAjB;AACA,cAAKC,WAAL,CAAiB,IAAjB;AACD,QAZM,MAYA,IAAIpE,SAAS,CAAb,EAAgB;AACrB,cAAKoE,WAAL,CAAiB,KAAjB;AACA,cAAKF,WAAL,CAAiB,IAAjB;AACD;AACF;;;qCAEelE,I,EAAM;AACpB,WAAI,CAAC,KAAKC,MAAN,IAAgB,CAAC,KAAKN,YAA1B,EAAwC;AACtC;AACD;AACAK,gBAAS,CAAV,GAAe,KAAKL,YAAL,CAAkB/H,IAAlB,CAAuB,gBAAvB,EAAyC6C,QAAzC,CAAkD,QAAlD,CAAf,GAA6E,KAAKkF,YAAL,CAAkB/H,IAAlB,CAAuB,gBAAvB,EAAyCuC,WAAzC,CAAqD,QAArD,CAA7E;AACC6F,gBAAS,CAAV,GAAe,KAAKL,YAAL,CAAkB/H,IAAlB,CAAuB,gBAAvB,EAAyC6C,QAAzC,CAAkD,QAAlD,CAAf,GAA6E,KAAKkF,YAAL,CAAkB/H,IAAlB,CAAuB,gBAAvB,EAAyCuC,WAAzC,CAAqD,QAArD,CAA7E;AACD;;;iCAEW6F,I,EAAM;AAChB3I,SAAE,mBAAF,EAAuBO,IAAvB,CAA4B,YAAYoI,OAAO,CAAnB,IAAwB,GAApD,EAAyDvF,QAAzD,CAAkE,OAAlE,EAA2E4J,IAA3E,GAAkF5J,QAAlF,CAA2F,MAA3F,EAAmGN,WAAnG,CAA+G,OAA/G;AACA9C,SAAE,mBAAF,EAAuBO,IAAvB,CAA4B,YAAYoI,OAAO,CAAnB,IAAwB,GAApD,EAAyDsE,IAAzD,GAAgEnK,WAAhE,CAA4E,OAA5E,EAAqFA,WAArF,CAAiG,MAAjG;AACD;;;oCAEc6F,I,EAAM;AAClBA,gBAAS,CAAV,GAAe,KAAKP,iBAAL,CAAuBtF,WAAvB,CAAmC,QAAnC,CAAf,GAA8D,KAAKsF,iBAAL,CAAuBhF,QAAvB,CAAgC,QAAhC,CAA9D;AACCuF,gBAAS,CAAV,GAAe,KAAKR,oBAAL,CAA0BrF,WAA1B,CAAsC,QAAtC,CAAf,GAAiE,KAAKqF,oBAAL,CAA0B/E,QAA1B,CAAmC,QAAnC,CAAjE;AACD;;;iCAEW0I,I,EAAM;AAChBA,cAAO9L,EAAE,oBAAF,EAAwB8C,WAAxB,CAAoC,QAApC,EAA8CoK,UAA9C,CAAyD,UAAzD,CAAP,GAA8ElN,EAAE,oBAAF,EAAwBoD,QAAxB,CAAiC,QAAjC,CAA9E;AACD;;;iCAEW0I,I,EAAM;AAChBA,cAAO9L,EAAE,oBAAF,EAAwB8C,WAAxB,CAAoC,QAApC,CAAP,GAAuD9C,EAAE,oBAAF,EAAwBoD,QAAxB,CAAiC,QAAjC,CAAvD;AACD;;;iCAEW0I,I,EAAM;AAChBA,cAAO9L,EAAE,sBAAF,EAA0B8C,WAA1B,CAAsC,QAAtC,CAAP,GAAyD9C,EAAE,sBAAF,EAA0BoD,QAA1B,CAAmC,QAAnC,CAAzD;AACD;;;;;;mBAKY4E,M;;;;;;;;;AC3Sf;;;;;;AAEA,sBAAWhI,EAAE,QAAF,CAAX,E;;;;;;;;;;;;;ACFA,KAAMmN,gBAAgB,SAAhBA,aAAgB,CAACC,EAAD,EAAKlF,QAAL,EAAkB;AACtC,OAAImF,WAAWrN,EAAE,oCAAF,CAAf;AACAqN,YAASC,SAAT,CAAmBpF,QAAnB,EAA6BwC,OAA7B,GAAuC7G,IAAvC;AACAqE,YAAS+B,MAAT;AACA,OAAIsD,MAAM,EAAV;AAAA,OAAcC,IAAIJ,GAAGzM,MAArB;AACA,UAAO,UAAC8M,CAAD,EAAO;AACZF,SAAI1F,IAAJ,CAAS4F,CAAT;AACAJ,cAASxJ,IAAT,GAAgB6G,OAAhB,GAA0BoB,IAA1B;AACA;AACA,YAAOyB,IAAI5M,MAAJ,GAAa6M,CAAb,GAAiB,WAAUE,MAA3B,GAAoCN,GAAGO,KAAH,CAAS,IAAT,EAAeJ,GAAf,CAA3C;AACA;AACD,IAND;AAOD,EAZD;;mBAceJ,a","file":"app/js/task-manage/create/index.js","sourcesContent":["import notify from 'common/notify';\nimport sortList from 'common/sortable';\n\nexport const sortablelist = (list) => {\n  let $list = $(list);\n  let data = $list.sortable(\"serialize\").get();\n\n  let lessonNum = 0,\n    chapterNum = 0,\n    unitNum = 0;\n  $list.find('.task-manage-item').each(function () {\n    let $item = $(this);\n    if ($item.hasClass('js-task-manage-item')) {\n      if ($item.find('.number').length > 0) {\n        lessonNum++;\n        $item.find('.number').text(lessonNum);\n      }\n    } else if ($item.hasClass('task-manage-unit')) {\n      unitNum++;\n      $item.find('.number').text(unitNum);\n    } else if ($item.hasClass('task-manage-chapter')) {\n      chapterNum++;\n      unitNum = 0;\n      $item.find('.number').text(chapterNum);\n    }\n  });\n\n  $list.trigger('finished');\n\n  $.post($list.data('sortUrl'), { ids: data }, (response) => {\n\n  });\n}\n\nexport const taskSortable = (list) => {\n  if ($(list).length) {\n    sortList({\n      element: list,\n      ajax: false,\n    }, (data) => {\n      sortablelist(list);\n    });\n  }\n}\n\nexport const closeCourse = () => {\n  $('body').on('click', '.js-close-course', function (evt) {\n    let $target = $(evt.currentTarget);\n    if (!confirm(Translator.trans('course.manage.close_hint'))) {\n      return;\n    }\n\n    $.post($target.data('check-url'), function (data) {\n\n      if (data.warn) {\n        if (!confirm(Translator.trans(data.message))) {\n          return;\n        }\n      }\n\n      $.post($target.data('url'), function (data) {\n        if (data.success) {\n          notify('success', Translator.trans('course.manage.close_success_hint'));\n          location.reload();\n        } else {\n          notify('danger', Translator.trans('course.manage.close_fail_hint') + ':' + data.message);\n        }\n      });\n    });\n  });\n};\n\nexport const deleteCourse = () => {\n  $('body').on('click', '.js-delete-course', function (evt) {\n    if (!confirm(Translator.trans('course.manage.delete_hint'))) {\n      return;\n    }\n    $.post($(evt.currentTarget).data('url'), function (data) {\n      if (data.success) {\n        notify('success', Translator.trans('site.delete_success_hint'));\n        if (data.redirect) {\n          window.location.href = data.redirect;\n        }else {\n          location.reload();\n        }\n      } else {\n        notify('danger', Translator.trans('site.delete_fail_hint') + ':' + data.message);\n      }\n    });\n  });\n};\n\nexport const publishCourse = () => {\n  $('body').on('click', '.js-publish-course', function (evt) {\n    if (!confirm(Translator.trans('course.manage.publish_hint'))) {\n      return;\n    }\n    $.post($(evt.target).data('url'), function (data) {\n      if (data.success) {\n        notify('success', Translator.trans('course.manage.task_publish_success_hint'));\n        location.reload();\n      } else {\n        notify('danger', Translator.trans('course.manage.task_publish_fail_hint')+':' + data.message, {delay:5000});\n      }\n    });\n  });\n};\n\nexport const deleteTask = () => {\n  $('body').on('click', '.delete-item', function (evt) {\n    if ($(evt.currentTarget).data('type') == 'task') {\n      if (!confirm(Translator.trans('course.manage.task_delete_hint'))) {\n        return;\n      }\n    } else if ($(evt.currentTarget).data('type') == 'chapter') {\n      if (!confirm(Translator.trans('course.manage.chapter_delete_hint'))) {\n        return;\n      }\n    }\n    $.post($(evt.currentTarget).data('url'), function (data) {\n      if (data.success) {\n        notify('success', Translator.trans('site.delete_success_hint'));\n        $(evt.target).parents('.task-manage-item').remove();\n        sortablelist('#sortable-list');\n        console.log($('#sortable-list').children('li').length);\n        if($('#sortable-list').children('li').length < 1 && $('.js-task-empty').hasClass('hidden') ) {\n            $('.js-task-empty').removeClass('hidden');\n        }\n        document.location.reload();\n      } else {\n        notify('danger', Translator.trans('site.delete_fail_hint') + ':' + data.message);\n      }\n    });\n  });\n};\n\nexport const publishTask = () => {\n  $('body').on('click', '.publish-item', (event) => {\n    $.post($(event.target).data('url'), function (data) {\n      if (data.success) {\n        var parentLi = $(event.target).closest('.task-manage-item');\n        notify('success', Translator.trans('course.manage.task_publish_success_hint'));\n        $(parentLi).find('.publish-item').addClass('hidden')\n        $(parentLi).find('.delete-item').addClass('hidden')\n        $(parentLi).find('.unpublish-item').removeClass('hidden')\n        $(parentLi).find('.publish-status').addClass('hidden')\n      } else {\n        notify('danger', Translator.trans('course.manage.task_publish_fail_hint') + ':' + data.message);\n      }\n    });\n  })\n};\n\nexport const unpublishTask = () => {\n  $('body').on('click', '.unpublish-item', (event) => {\n    $.post($(event.target).data('url'), function (data) {\n      if (data.success) {\n        var parentLi = $(event.target).closest('.task-manage-item');\n        notify('success', Translator.trans('course.manage.task_unpublish_success_hint'));\n        $(parentLi).find('.publish-item').removeClass('hidden')\n        $(parentLi).find('.delete-item').removeClass('hidden')\n        $(parentLi).find('.unpublish-item').addClass('hidden')\n        $(parentLi).find('.publish-status').removeClass('hidden')\n      } else {\n        notify('danger', Translator.trans('course.manage.task_unpublish_fail_hint') + ':' + data.message);\n      }\n    });\n  })\n};\n\nexport const showSettings = () => {\n  $(\"#sortable-list\").on('click', '.js-item-content', (event) => {\n    console.log('click');\n    let $this = $(event.currentTarget);\n    let $li = $this.closest('.js-task-manage-item');\n    if ($li.hasClass('active')) {\n      $li.removeClass('active').find('.js-settings-list').stop().slideUp(500);\n    }\n    else {\n      $li.addClass('active').find('.js-settings-list').stop().slideDown(500);\n      $li.siblings(\".js-task-manage-item.active\").removeClass('active').find('.js-settings-list').hide();\n    }\n  });\n};\n\nexport const TabChange = () => {\n  $('[data-role=\"tab\"]').click(function (event) {\n    let $this = $(this);\n    $($this.data('tab-content')).removeClass(\"hidden\").siblings('[data-role=\"tab-content\"]').addClass('hidden');\n  });\n};\n\nexport const updateTaskNum = (container) => {\n  // let $container = $(container);\n  // $container.on('finished',function(){\n  //   $('#task-num').text($(container).find('i[data-role=\"task\"]').length);\n  // })\n}\n\nexport const TaskListHeaderFixed = () => {\n  let $header = $('.js-task-list-header');\n  if(!$header.length){\n    return;\n  }\n  let headerTop = $header.offset().top;\n\t$(window).scroll(function(event) {\n\t\t\tif ($(window).scrollTop() >= headerTop) {\n\t\t\t\t$header.addClass('fixed')\n\t\t\t} else {\n\t\t\t\t$header.removeClass('fixed');\n\t\t\t}\n\t});\n}\n\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/course-manage/help.js","import 'store';\nimport Cookies from 'js-cookie';\nconst COURSE_BASE_INTRO = 'COURSE_BASE_INTRO';\nconst COURSE_TASK_INTRO = 'COURSE_TASK_INTRO';\nconst COURSE_TASK_DETAIL_INTRO = 'COURSE_TASK_DETAIL_INTRO';\nconst COURSE_LIST_INTRO = 'COURSE_LIST_INTRO';\nconst COURSE_LIST_INTRO_COOKIE = 'COURSE_LIST_INTRO_COOKIE';\n\nexport default class Intro {\n  constructor() {\n    this.intro = null;\n    this.customClass = \"es-intro-help multistep\";\n    $('body').on('click','.js-skip',(event)=>{\n      this.intro.exit();\n    });\n  }\n  \n  introType() {\n    if (this.isTaskCreatePage()) {\n      this.initTaskCreatePageIntro();\n      return;\n    }\n    if (!this.isCourseListPage()) {\n      this.initNotTaskCreatePageIntro();\n      return;\n    }\n    this.initCourseListPageIntro();\n  }\n\n  isCourseListPage() {\n    return !!$('#courses-list-table').length;\n  }\n\n  isTaskCreatePage() {\n    return !!$('#step-3').length;\n  }\n\n  isInitTaskDetailIntro() {\n    $('.js-task-manage-item').attr('into-step-id', 'step-5');\n    return !!$('.js-settings-list').length;\n  }\n\n  introStart(steps) {\n    let doneLabel = '<i class=\"es-icon es-icon-close01\"></i>';\n    this.intro = introJs();\n    if(steps.length < 2) {\n       doneLabel= Translator.trans('intro.confirm_hint');\n       this.customClass = \"es-intro-help\";\n    }else {\n       this.customClass = \"es-intro-help multistep\";\n    }\n    console.log(steps.length < 2);\n    console.log(this.customClass);\n    console.log(doneLabel);\n    this.intro.setOptions({\n      steps: steps,\n      skipLabel: doneLabel,\n      nextLabel: Translator.trans('course_set.manage.next_label'),\n      prevLabel: Translator.trans('course_set.manage.prev_label'),\n      doneLabel: doneLabel,\n      showBullets: false,\n      tooltipPosition: 'auto',\n      showStepNumbers: false,\n       exitOnEsc: false,\n      exitOnOverlayClick: false,\n      tooltipClass:this.customClass,\n    });\n    \n    this.intro.start().onexit(function(){\n    }).onchange(()=>{\n      console.log(this.intro);\n      if(this.intro._currentStep ==(this.intro._introItems.length -1 ) ) {\n        $('.introjs-nextbutton').before('<a class=\"introjs-button  done-button js-skip\">'+Translator.trans('intro.confirm_hint')+'<a/>');\n      }\n      else {\n        $('.js-skip').remove();\n      }\n    })\n  }\n\n  initTaskCreatePageIntro() {\n    $('.js-task-manage-item:first .js-item-content').trigger('click');\n    if (!store.get(COURSE_BASE_INTRO) && !store.get(COURSE_TASK_INTRO)) {\n      store.set(COURSE_BASE_INTRO, true);\n      store.set(COURSE_TASK_INTRO, true);\n      this.introStart(this.initAllSteps());\n    } else if (!store.get(COURSE_TASK_INTRO)) {\n      store.set(COURSE_TASK_INTRO, true);\n      this.introStart(this.initTaskSteps());\n    }\n  }\n\n  initTaskDetailIntro(element) {\n    if (!store.get(COURSE_TASK_DETAIL_INTRO)) {\n      store.set(COURSE_TASK_DETAIL_INTRO,true);\n      this.introStart(this.initTaskDetailSteps(element));\n    }\n  }\n\n  initNotTaskCreatePageIntro() {\n    if (!store.get(COURSE_BASE_INTRO)) {\n      store.set(COURSE_BASE_INTRO, true);\n      this.introStart(this.initNotTaskPageSteps());\n    }\n  }\n\n  isSetCourseListCookies() {\n    if (!store.get(COURSE_LIST_INTRO)) {\n      Cookies.set(COURSE_LIST_INTRO_COOKIE, true);\n    }\n  }\n\n  initCourseListPageIntro() {\n    let listLength = $('#courses-list-table').find('tbody tr').length;\n    \n    if (!(listLength === 2) || store.get(COURSE_LIST_INTRO)|| !Cookies.get(COURSE_LIST_INTRO_COOKIE)) {\n      return;\n    }\n    Cookies.remove(COURSE_LIST_INTRO_COOKIE);\n    new Promise((resolve, reject) => {\n      setTimeout(function () {\n        let $courseMenu = $('.js-sidenav-course-menu');\n        if (!$courseMenu.length) {\n          resolve();\n          return;\n        }\n        $('.js-sidenav-course-menu').slideUp(function () {\n          resolve();\n        });\n      }, 100);\n    }).then(() => {\n      setTimeout(() => {\n        this.initCourseListIntro('.js-sidenav');\n        console.log('initCourseListIntro');\n      }, 100);\n    });\n  }\n\n  initCourseListIntro(element) {\n    if (!store.get(COURSE_LIST_INTRO)) {\n      store.set(COURSE_LIST_INTRO, true);\n      this.introStart(this.initCourseListSteps(element));\n    }\n  }\n\n  initAllSteps() {\n    let arry = [\n      {\n        intro: Translator.trans('course_set.manage.upgrade_hint'),\n      },\n      {\n        element: '#step-1',\n        intro: Translator.trans('course_set.manage.upgrade_step1_hint'),\n      },\n      {\n        element: '#step-2',\n        intro: Translator.trans('course_set.manage.upgrade_step2_hint'),\n      },\n      {\n        element: '#step-3',\n        intro: Translator.trans('course_set.manage.upgrade_step3_hint'),\n      }\n    ];\n    //如果存在任务\n    if (this.isInitTaskDetailIntro()) {\n      arry.push({\n        element: '[into-step-id=\"step-5\"]',\n        intro: Translator.trans('course_set.manage.upgrade_step5_hint'),\n      })\n      if (!store.get(COURSE_TASK_DETAIL_INTRO)) {\n        store.set(COURSE_TASK_DETAIL_INTRO,true);\n      }\n    }\n    return arry;\n  }\n\n  initNotTaskPageSteps() {\n    return [\n      {\n        intro: Translator.trans('course_set.manage.upgrade_hint'),\n      },\n      {\n        element: '#step-1',\n        intro: Translator.trans('course_set.manage.upgrade_step1_hint'),\n      },\n      {\n        element: '#step-2',\n        intro: Translator.trans('course_set.manage.upgrade_step2_hint'),\n      }\n    ];\n  }\n\n  initTaskSteps() {\n    let arry = [\n      {\n        element: '#step-3',\n        intro: Translator.trans('course_set.manage.upgrade_step3_hint'),\n      }\n    ];\n    //如果存在任务\n    if (this.isInitTaskDetailIntro()) {\n      arry.push({\n        element: '#step-5',\n        intro: Translator.trans('course_set.manage.upgrade_step5_hint'),\n        position: 'bottom',\n      })\n      if (!store.get(COURSE_TASK_DETAIL_INTRO)) {\n        store.set(COURSE_TASK_DETAIL_INTRO,true);\n      }\n    }\n\n    return arry;\n  }\n\n  initTaskDetailSteps(element) {\n    return [\n      {\n        element: element,\n        intro: Translator.trans('course_set.manage.activity_link_hint'),\n        position: 'bottom',\n      },\n    ];\n  }\n\n  initCourseListSteps(element) {\n    return [\n      {\n        element: element,\n        intro: Translator.trans('course_set.manage.hint')\n      }\n    ];\n  }\n  initResetStep(introBtnClassName='') {\n    return [\n      {\n        element: '.js-intro-btn-group',\n        intro: Translator.trans('course_set.manage.all_tutorial', { 'introBtnClassName': introBtnClassName}),\n        position:'top'\n      }\n    ];\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/courseset-manage/intro.js","import loadAnimation from 'common/load-animation'\nimport 'jquery-sortable';\nimport notify from 'common/notify';\nimport Intro from 'app/js/courseset-manage/intro';\nimport { sortablelist } from \"app/js/course-manage/help\";\n\n\nclass Editor {\n  constructor($modal) {\n    this.$element = $modal;\n    this.$task_manage_content = $('#task-create-content');\n    this.$task_manage_type = $('#task-create-type');\n    this.$frame = null;\n    this.$iframe_body = null;\n    this.iframe_jQuery = null;\n    this.iframe_name = 'task-create-content-iframe';\n    this.mode = this.$task_manage_type.data('editorMode');\n    this.type = this.$task_manage_type.data('editorType');\n    this.step = 1;\n    this.loaded = false;\n    this.contentUrl = '';\n    this._init();\n    this._initEvent();\n  }\n\n  _initEvent() {\n    $('#course-tasks-submit').click(event => this._onSave(event));\n    $('#course-tasks-next').click(event => this._onNext(event));\n    $('#course-tasks-prev').click(event => this._onPrev(event));\n    if (this.mode != 'edit') {\n      $('.js-course-tasks-item').click(event => this._onSetType(event));\n    } else {\n      $('.delete-task').click(event => this._onDelete(event));\n    }\n  }\n\n  _init() {\n    this._inItStep1form();\n    this._renderContent(this.step);\n    if (this.mode == 'edit') {\n      this.contentUrl = this.$task_manage_type.data('editorStep2Url');\n      this.step = 2;\n      this._switchPage();\n    }\n  }\n\n  _onNext(e) {\n    if (this.step === 3 || !this._validator(this.step)) {\n      return;\n    }\n    this.step += 1;\n    this._switchPage();\n    this.$element.trigger('afterNext');\n  }\n\n  _onPrev() {\n    // 第二页可以上一步\n    if (this.step === 1 || (this.step == 3 && !this._validator(this.step))) {\n      return;\n    }\n\n    this.step -= 1;\n    this._switchPage();\n  }\n\n  _onSetType(event) {\n    let $this = $(event.currentTarget).addClass('active');\n    $this.siblings().removeClass('active');\n    let type = $this.data('type');\n    $('[name=\"mediaType\"]').val(type);\n    this.contentUrl = $this.data('contentUrl');\n    this.loaded = this.type === type;\n    this.type = type;\n    this._onNext(event);\n  }\n\n  _onSave(event) {\n    if (!this._validator(this.step)) {\n      return;\n    }\n\n    $(event.currentTarget).attr('disabled', 'disabled').button('loading');\n    let postData = $('#step1-form').serializeArray()\n      .concat(this.$iframe_body.find('#step2-form').serializeArray())\n      .concat(this.$iframe_body.find(\"#step3-form\").serializeArray());\n\n    $.post(this.$task_manage_type.data('saveUrl'), postData)\n      .done((response) => {\n        const needAppend = response.append;\n        const html = response.html;\n        this.$element.modal('hide');\n        if(!$('.js-task-empty').hasClass('hidden') ){\n            $('.js-task-empty').addClass('hidden');\n        }\n        if (needAppend === false) {\n          // @TODO这里也需要返回html,进行替换   \n          document.location.reload();\n        }\n\n        let chapterId = postData.find(function (input) {\n          return input.name == 'chapterId';\n        });\n\n        let add = 0;\n        let $parent = $('#' + chapterId.value);\n        let $item = null;\n\n        if ($parent.length) {\n          $parent.nextAll().each(function () {\n            if ($(this).hasClass('task-manage-chapter')) {\n              $(this).before(html);\n              add = 1;\n              sortablelist('#sortable-list');\n              return false;\n            }\n            if ($parent.hasClass('task-manage-unit') && $(this).hasClass('task-manage-unit')) {\n              $(this).before(html);\n              add = 1;\n              sortablelist('#sortable-list');\n              return false;\n            }\n          });\n          if (add != 1) {\n            $item = $(html);\n            $(\"#sortable-list\").append($item);\n            add = 1;\n          }\n        } else {\n          $item = $(html);\n          $(\"#sortable-list\").append($item);\n        }\n        this.showDefaultSetting($item);\n        this.initIntro();\n        sortablelist('#sortable-list');\n      })\n      .fail((response) => {\n        let msg = '';\n        let errorResponse = JSON.parse(response.responseText);\n        if (errorResponse.error && errorResponse.error.message) {\n          msg = errorResponse.error.message;\n        }\n        notify('warning', Translator.trans('task_manage.edit_error_hint') + ':' + msg);\n        $(\"#course-tasks-submit\").attr('disabled', null);\n      });\n  }\n\n  initIntro() {\n    setTimeout(function() {\n      if($('.js-settings-list').length === 1) {\n        let intro = new Intro();\n        intro.initTaskDetailIntro('.js-settings-list');\n      }\n    }, 500);\n  }\n\n  showDefaultSetting($item = null) {\n    if ($item && $item.hasClass('js-task-manage-item')) {\n      $('.js-task-manage-item').removeClass('active').find('.js-settings-list').slideUp();;\n      $item.addClass('active').find('.js-settings-list').slideDown();\n    }\n  }\n\n  _onDelete(event) {\n    let $btn = $(event.currentTarget);\n    let url = $btn.data('url');\n    if (url === undefined) {\n      return;\n    }\n    if (!confirm(Translator.trans(Translator.trans('task_manage.delete_hint')))) {\n      return;\n    }\n    $.post(url)\n      .then((response) => {\n        notify('success', Translator.trans('task_manage.delete_success_hint'));\n        this.$element.modal('hide');\n\n\n        document.location.reload();\n      })\n      .fail(error => {\n        notify('warning', Translator.trans('task_manage.delete_failed_hint'));\n      })\n  }\n\n  _switchPage() {\n    this._renderStep(this.step);\n    this._renderContent(this.step);\n    this._rendStepIframe(this.step);\n    this._rendButton(this.step);\n    if (this.step == 2 && !this.loaded) {\n      console.log({'loading':new Date().toLocaleTimeString()});\n      this._initIframe();\n    }\n  }\n\n  _initIframe() {\n    let html = '<iframe class=\"' + this.iframe_name + '\" id=\"' + this.iframe_name + '\" name=\"' + this.iframe_name + '\" scrolling=\"no\" src=\"' + this.contentUrl + '\"></iframe>';\n    this.$task_manage_content.html(html).show();\n    this.$frame = $('#' + this.iframe_name).iFrameResize();\n    let loadiframe = () => {\n      this.loaded = true;\n      let validator = {};\n      this.iframe_jQuery = this.$frame[0].contentWindow.$;\n      this.$iframe_body = this.$frame.contents().find('body').addClass('task-iframe-body');\n      this._rendButton(2);\n      this.$iframe_body.find(\"#step2-form\").data('validator', validator);\n      this.$iframe_body.find(\"#step3-form\").data('validator', validator);\n      console.log({'loaded':new Date().toLocaleTimeString()});\n    };\n    this.$frame.load(loadAnimation(loadiframe, this.$task_manage_content));\n  }\n\n  _inItStep1form() {\n    let $step1_form = $(\"#step1-form\");\n    let validator = $step1_form.validate({\n      rules: {\n        mediaType: {\n          required: true,\n        },\n      },\n      messages: {\n        mediaType: Translator.trans('validate.choose_item.message'),\n      }\n    });\n    $step1_form.data('validator', validator);\n  }\n\n  _validator(step) {\n    let validator = null;\n\n    if (step === 1) {\n      validator = $(\"#step1-form\").data('validator');\n    } else if (this.loaded) {\n      var $from = this.$iframe_body.find(\"#step\" + step + \"-form\");\n      validator = this.iframe_jQuery.data($from[0], 'validator');\n    }\n\n    if (validator && !validator.form()) {\n      return false;\n    }\n    return true;\n  }\n\n  _rendButton(step) {\n    if (step === 1) {\n      this._renderPrev(false);\n      this._rendSubmit(false);\n      this._renderNext(true);\n    } else if (step === 2) {\n      this._renderPrev(true);\n      if (this.mode === 'edit') {\n        this._renderPrev(false);\n      }\n      if (!this.loaded) {\n        this._rendSubmit(false);\n        this._renderNext(false);\n        return;\n      }\n      this._rendSubmit(true);\n      this._renderNext(true);\n    } else if (step === 3) {\n      this._renderNext(false);\n      this._renderPrev(true);\n    }\n  }\n\n  _rendStepIframe(step) {\n    if (!this.loaded || !this.$iframe_body) {\n      return;\n    }\n    (step === 2) ? this.$iframe_body.find(\".js-step2-view\").addClass('active') : this.$iframe_body.find(\".js-step2-view\").removeClass('active');\n    (step === 3) ? this.$iframe_body.find(\".js-step3-view\").addClass('active') : this.$iframe_body.find(\".js-step3-view\").removeClass('active');\n  }\n\n  _renderStep(step) {\n    $('#task-create-step').find('li:eq(' + (step - 1) + ')').addClass('doing').prev().addClass('done').removeClass('doing');\n    $('#task-create-step').find('li:eq(' + (step - 1) + ')').next().removeClass('doing').removeClass('done');\n  }\n\n  _renderContent(step) {\n    (step === 1) ? this.$task_manage_type.removeClass('hidden') : this.$task_manage_type.addClass('hidden');\n    (step !== 1) ? this.$task_manage_content.removeClass('hidden') : this.$task_manage_content.addClass('hidden');\n  }\n\n  _renderNext(show) {\n    show ? $(\"#course-tasks-next\").removeClass('hidden').removeAttr(\"disabled\") : $(\"#course-tasks-next\").addClass('hidden');\n  }\n\n  _renderPrev(show) {\n    show ? $(\"#course-tasks-prev\").removeClass('hidden') : $(\"#course-tasks-prev\").addClass('hidden');\n  }\n\n  _rendSubmit(show) {\n    show ? $(\"#course-tasks-submit\").removeClass('hidden') : $(\"#course-tasks-submit\").addClass('hidden');\n  }\n\n}\n\n\nexport default Editor;\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/task-manage/create/editor.js","import Editor from './editor';\n\nnew Editor($('#modal'));\n\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/task-manage/create/index.js","const loadAnimation = (fn, $element) => {\n  let $loading = $('<div class=\"load-animation\"></div>');\n  $loading.prependTo($element).nextAll().hide();\n  $element.append();\n  let arr = [], l = fn.length;\n  return (x) => {\n    arr.push(x);\n    $loading.hide().nextAll().show();\n    /* eslint-disable */\n    return arr.length < l ? arguments.callee : fn.apply(null, arr);\n    /* eslint-enable */\n  };\n};\n\nexport default loadAnimation;\n\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/common/load-animation.js"],"sourceRoot":""}