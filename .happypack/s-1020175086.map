{"version":3,"sources":["app/Resources/static-src/app/js/activity-manage/flash/index.js"],"names":["Flash","$mediaId","$","$select","init","initStep2Form","initStep3Form","$form","validator","validate","rules","title","required","maxlength","trim","mediaId","messages","data","$step3_form","onkeyup","finishDetail","positive_integer","max","_inItStep2form","onConditionTimeType","children","val","fileChooser","on","file","id","conditionsType","event","currentTarget","$conditionsDetail","addClass"],"mappings":";;;;AAAA;;;;AACA;;;;;;IAEMA,K;AACJ,mBAAc;AAAA;;AACZ,SAAKC,QAAL,GAAgBC,EAAE,kBAAF,CAAhB;AACA,SAAKC,OAAL,GAAeD,EAAE,mBAAF,CAAf;AACA,SAAKE,IAAL;AACD;;;;2BACM;AACL,WAAKC,aAAL;AACA,WAAKC,aAAL;AACD;;;oCAEe;AACd,UAAIC,QAAQL,EAAE,aAAF,CAAZ;AACA,UAAIM,YAAYD,MAAME,QAAN,CAAe;AAC7BC,eAAO;AACLC,iBAAO;AACLC,sBAAU,IADL;AAELC,uBAAW,EAFN;AAGLC,kBAAM;AAHD,WADF;AAMLC,mBAAS;AANJ,SADsB;AAS7BC,kBAAU;AACRD,mBAAS;AACPH,sBAAU;AADH;AADD;AATmB,OAAf,CAAhB;;AAgBAL,YAAMU,IAAN,CAAW,WAAX,EAAwBT,SAAxB;AACD;;;oCAEe;AAClB,UAAIU,cAAchB,EAAE,aAAF,CAAlB;;AAEE,UAAIM,YAAYU,YAAYT,QAAZ,CAAqB;AACnCU,iBAAS,KAD0B;AAEnCT,eAAO;AACLU,wBAAc;AACZR,sBAAU,IADE;AAEZS,8BAAkB,IAFN;AAGZC,iBAAK;AAHO;AADT,SAF4B;AASnCN,kBAAU;AACRI,wBAAc;AACZR,sBAAU;AADE;AADN;AATyB,OAArB,CAAhB;;AAgBAM,kBAAYD,IAAZ,CAAiB,WAAjB,EAA8BT,SAA9B;AACC;;;;;;AAQH,gCAAgBP,QAAhB;AACAsB;AACAC;;AAEA,SAASD,cAAT,GAA0B,CAEzB;;AAED,SAASC,mBAAT,GAA+B,CAI9B;;AAID,IAAIrB,QAAQsB,QAAR,CAAiB,iBAAjB,EAAoCC,GAApC,OAA8C,MAAlD,EAA0D;AACxDF;AACD;;AAED,IAAIG,cAAc,0BAAlB;;AAEAA,YAAYC,EAAZ,CAAe,QAAf,EAAyB,UAACC,IAAD,EAAU;AACjC;AACA5B,WAASyB,GAAT,CAAaG,KAAKC,EAAlB;AACD,CAHD;;AAKA3B,QAAQyB,EAAR,CAAW,QAAX,EAAqB,iBAAS;AAC5B,MAAIG,iBAAiB7B,EAAE8B,MAAMC,aAAR,EAAuBR,QAAvB,CAAgC,iBAAhC,EAAmDC,GAAnD,EAArB;;AAEA,MAAIQ,oBAAoBhC,EAAE,kBAAF,CAAxB;AACA,MAAI6B,mBAAmB,MAAvB,EAA+B;AAC7BG,sBAAkBC,QAAlB,CAA2B,QAA3B;AACD,GAFD,MAEO;AACLX;AACD;AACF,CATD","file":"index.js","sourceRoot":"/Users/kz/projects/edusoho","sourcesContent":["import FileChooser from '../../file-chooser/file-choose';\nimport { chooserUiOpen, chooserUiClose, showChooserType } from '../widget/chooser-ui.js';\n\nclass Flash {\n  constructor() {\n    this.$mediaId = $('[name=\"mediaId\"]');\n    this.$select = $('#condition-select');\n    this.init();\n  }\n  init() {\n    this.initStep2Form();\n    this.initStep3Form();\n  }\n\n  initStep2Form() {\n    var $form = $('#step2-form');\n    var validator = $form.validate({\n      rules: {\n        title: {\n          required: true,\n          maxlength: 50,\n          trim: true,\n        },\n        mediaId: 'required',\n      },\n      messages: {\n        mediaId: {\n          required: '请上传或选择%display%'\n        }\n      }\n    });\n\n    $form.data('validator', validator);\n  }\n\n  initStep3Form() {\nvar $step3_form = $(\"#step3-form\");\n\n  let validator = $step3_form.validate({\n    onkeyup: false,\n    rules: {\n      finishDetail: {\n        required: true,\n        positive_integer: true,\n        max: 300,\n      },\n    },\n    messages: {\n      finishDetail: {\n        required: '请输入至少观看多少分钟',\n      },\n    }\n  });\n\n  $step3_form.data('validator', validator);\n  }\n\n\n}\n\n\n\n\nshowChooserType($mediaId);\n_inItStep2form();\nonConditionTimeType();\n\nfunction _inItStep2form() {\n\n}\n\nfunction onConditionTimeType() {\n\n  \n\n};\n\n\n\nif ($select.children('option:selected').val() === 'time') {\n  onConditionTimeType();\n}\n\nlet fileChooser = new FileChooser();\n\nfileChooser.on('select', (file) => {\n  chooserUiClose();\n  $mediaId.val(file.id);\n});\n\n$select.on('change', event => {\n  let conditionsType = $(event.currentTarget).children('option:selected').val();\n\n  let $conditionsDetail = $(\"#condition-group\");\n  if (conditionsType !== 'time') {\n    $conditionsDetail.addClass('hidden');\n  } else {\n    onConditionTimeType();\n  }\n});\n"]}