{% do script(['web/component/file-choose.js']) %}
<div class="file-chooser-bar {% if not  activity.ext.media|default(null) %}hidden {% endif %}">
  <span data-role="placeholder">{{ activity.ext.media.name|default(null) }}</span>
  <button class="btn btn-link btn-sm js-choose-trigger" type="button"><i
        class="glyphicon glyphicon-edit"></i> {{ '编辑'|trans }}</button>
  <div class="alert alert-warning" data-role="waiting-tip"
       style="display:none;">{{ '正在转换视频格式，转换需要一定的时间，期间将不能播放该视频。'|trans }}<br/>{{ '转换完成后将以站内消息通知您。'|trans }}</div>
</div>

{% set mediaSource = activity.ext.mediaSource|default('self') %}
<div class="col-xs-9 controls file-chooser-main {% if  activity.ext.media|default(null) %}hidden {% endif %}">
  <ul class="nav nav-pills" id="material">
    <li role="presentation" {% if mediaSource == 'self' %}class="active" {% endif %}><a
          href="#chooser-upload-panel">上传资料</a></li>
    <li role="presentation"><a href="#chooser-material-panel">从资料库中选择</a></li>
    <li role="presentation"><a href="#chooser-course-panel">从课程中选择文件</a></li>
    {% if mediaType == 'video' %}
      <li role="presentation" {% if mediaSource != 'self' %} class="active" {% endif %}><a href="#chooser-import-panel">导入网络视频</a>
      </li>
    {% endif %}
    {% if mediaType == 'download' %}
      <li role="presentation" {% if mediaSource != 'self' %} class="active" {% endif %}><a href="#chooser-link-panel">网络连接</a>
      </li>
    {% endif %}

  </ul>
  <div class="tab-content">
    <div class="tab-pane active" id="chooser-upload-panel">
      {% include 'WebBundle:Component/Parts:upload-file.html.twig' %}
    </div>

    <div class="tab-pane" id="chooser-material-panel">
      {% include 'WebBundle:Component/Parts:materiallib-choose.html.twig' %}
    </div>

    <div class="tab-pane" id="chooser-course-panel">
      {% include 'WebBundle:Component/Parts:course-file-choose.html.twig' %}
    </div>
    {% if mediaType == 'video' %}
      <div class="tab-pane" id="chooser-import-panel">
        {% include 'WebBundle:Component/Parts:import-video.html.twig' %}
      </div>
    {% endif %}
    {% if mediaType == 'download' %}
      <div class="tab-pane" id="chooser-link-panel">
        {% include 'WebBundle:Component/Parts:import-link.html.twig' %}
      </div>
    {% endif %}
  </div>
</div>
<div class="col-xs-offset-2 col-xs-9">
  <input id="media" type="hidden" name="media" value="">
</div>
