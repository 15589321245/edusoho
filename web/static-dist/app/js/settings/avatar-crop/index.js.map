{"version":3,"sources":["webpack:///./app/Resources/static-src/app/js/settings/avatar-crop/index.js"],"names":["CoverCrop","props","element","avatarCrop","saveBtn","goBack","init","imageCrop","initEvent","$node","$","on","event","goBackEvent","stopPropagation","crop","imgs","large","medium","small","$element","currentTarget","document","location","href","data","cropedWidth","cropedHeight","afterCrop","response","$saveBtn","url","post","images"],"mappings":";;;;;;;;AAAA;;;;;;;;KAEMA,S;AACJ,sBAAYC,KAAZ,EAAmB;AAAA;;AACjB,UAAKC,OAAL,GAAeD,MAAMC,OAArB;AACA,UAAKC,UAAL,GAAkBF,MAAME,UAAxB;AACA,UAAKC,OAAL,GAAeH,MAAMG,OAArB;AACA,UAAKC,MAAL,GAAcJ,MAAMI,MAApB;AACA,UAAKC,IAAL;AACD;;;;4BAEM;AACL,WAAIC,YAAY,KAAKA,SAAL,EAAhB;AACA,YAAKC,SAAL,CAAeD,SAAf;AACD;;;+BAESA,S,EAAW;AAAA;;AACnB,WAAME,QAAQC,EAAE,KAAKR,OAAP,CAAd;AACAO,aAAME,EAAN,CAAS,OAAT,EAAkB,KAAKN,MAAvB,EAA+B,UAACO,KAAD;AAAA,gBAAW,MAAKC,WAAL,CAAiBD,KAAjB,CAAX;AAAA,QAA/B;;AAEAH,aAAME,EAAN,CAAS,OAAT,EAAkB,KAAKP,OAAvB,EAAgC,UAACQ,KAAD,EAAW;AACzCA,eAAME,eAAN;AACAP,mBAAUQ,IAAV,CAAe;AACbC,iBAAM;AACJC,oBAAO,CAAC,GAAD,EAAM,GAAN,CADH;AAEJC,qBAAQ,CAAC,GAAD,EAAM,GAAN,CAFJ;AAGJC,oBAAO,CAAC,EAAD,EAAK,EAAL;AAHH;AADO,UAAf;AAOD,QATD;AAUD;;;iCAEWP,K,EAAO;AACjB,WAAIQ,WAAWV,EAAEE,MAAMS,aAAR,CAAf;AACAC,gBAASC,QAAT,CAAkBC,IAAlB,GAAyBJ,SAASK,IAAT,CAAc,SAAd,CAAzB;AACD;;;iCAEW;AAAA;;AACV,WAAIlB,YAAY,0BAAgB;AAC9BL,kBAAS,KAAKC,UADgB;AAE9BuB,sBAAa,GAFiB;AAG9BC,uBAAc;AAHgB,QAAhB,CAAhB;;AAMApB,iBAAUqB,SAAV,GAAsB,UAACC,QAAD,EAAc;AAClC,aAAIC,WAAWpB,EAAE,OAAKN,OAAP,CAAf;;AAEA,aAAI2B,MAAMD,SAASL,IAAT,CAAc,KAAd,CAAV;;AAEAf,WAAEsB,IAAF,CAAOD,GAAP,EAAY,EAAEE,QAAQJ,QAAV,EAAZ,EAAkC,YAAM;AACtCP,oBAASC,QAAT,CAAkBC,IAAlB,GAAyBM,SAASL,IAAT,CAAc,SAAd,CAAzB;AACD,UAFD;AAGD,QARD;AASA,cAAOlB,SAAP;AACD;;;;;;AAIH,KAAIP,SAAJ,CAAc;AACZE,YAAS,mBADG;AAEZC,eAAY,cAFA;AAGZC,YAAS,oBAHG;AAIZC,WAAQ;AAJI,EAAd,E","file":"app/js/settings/avatar-crop/index.js","sourcesContent":["import EsImageCrop from 'common/es-image-crop';\n\nclass CoverCrop {\n  constructor(props) {\n    this.element = props.element;\n    this.avatarCrop = props.avatarCrop;\n    this.saveBtn = props.saveBtn;\n    this.goBack = props.goBack;\n    this.init();\n  }\n\n  init() {\n    let imageCrop = this.imageCrop();\n    this.initEvent(imageCrop);\n  }\n\n  initEvent(imageCrop) {\n    const $node = $(this.element);\n    $node.on('click', this.goBack, (event) => this.goBackEvent(event))\n\n    $node.on('click', this.saveBtn, (event) => {\n      event.stopPropagation();\n      imageCrop.crop({\n        imgs: {\n          large: [200, 200],\n          medium: [120, 120],\n          small: [48, 48]\n        }\n      });\n    });\n  }\n\n  goBackEvent(event) {\n    let $element = $(event.currentTarget);\n    document.location.href = $element.data(\"gotoUrl\");\n  }\n\n  imageCrop() {\n    let imageCrop = new EsImageCrop({\n      element: this.avatarCrop,\n      cropedWidth: 200,\n      cropedHeight: 200\n    });\n\n    imageCrop.afterCrop = (response) => {\n      let $saveBtn = $(this.saveBtn);\n      \n      let url = $saveBtn.data('url');\n      \n      $.post(url, { images: response }, () => {\n        document.location.href = $saveBtn.data(\"gotoUrl\");\n      });\n    }\n    return imageCrop\n  }\n\n}\n\nnew CoverCrop({\n  element: '#avatar-crop-form',\n  avatarCrop: '#avatar-crop',\n  saveBtn: '#upload-avatar-btn',\n  goBack: '.js-go-back'\n})\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/settings/avatar-crop/index.js"],"sourceRoot":""}