{"version":3,"sources":["webpack:///./app/Resources/static-src/app/js/auth/password-reset/index.js"],"names":["validator","$form","smsSend","$smsCode","$","length","click","hasClass","hide","makeValidator","addClass","removeClass","show","smsSender","element","url","data","smsType","preSmsSend","type","validate","rules","required","email","phone","es_remote","callback","bool","unsigned_integer","rangelength","messages","sms_code","Translator","trans"],"mappings":";;;;;;AAAA;;;;;;AACA,KAAIA,YAAY,IAAhB;AACA,KAAIC,QAAQ,IAAZ;AACA,KAAIC,UAAU,cAAd;AACA,KAAIC,WAAWC,EAAEF,OAAF,CAAf;;AAEA,KAAIE,EAAE,sBAAF,EAA0BC,MAA1B,GAAmC,CAAvC,EAA0C;AACxCD,KAAE,mBAAF,EAAuBE,KAAvB,CAA6B,YAAY;AACvC,SAAI,CAACF,EAAE,mBAAF,EAAuBG,QAAvB,CAAgC,QAAhC,CAAL,EAAgD;AAC9CH,SAAE,UAAF,EAAcI,IAAd;AACD;AACF,IAJD;AAKAJ,KAAE,oBAAF,EAAwBE,KAAxB,CAA8B,YAAY;AACxC,SAAI,CAACF,EAAE,oBAAF,EAAwBG,QAAxB,CAAiC,QAAjC,CAAL,EAAiD;AAC/CH,SAAE,UAAF,EAAcI,IAAd;AACD;AACF,IAJD;AAKD;;AAEDC,eAAc,OAAd;;AAEAL,GAAE,mBAAF,EAAuBE,KAAvB,CAA6B,YAAY;AACvCN,eAAY,IAAZ;AACAI,KAAE,mBAAF,EAAuBM,QAAvB,CAAgC,QAAhC;AACAN,KAAE,oBAAF,EAAwBO,WAAxB,CAAoC,QAApC;AACAF,iBAAc,OAAd;AACAL,KAAE,gCAAF,EAAoCI,IAApC;AACAJ,KAAE,sBAAF,EAA0BQ,IAA1B;AACD,EAPD;;AASAR,GAAE,oBAAF,EAAwBE,KAAxB,CAA8B,YAAY;AACxCN,eAAY,IAAZ;AACAI,KAAE,mBAAF,EAAuBO,WAAvB,CAAmC,QAAnC;AACAP,KAAE,oBAAF,EAAwBM,QAAxB,CAAiC,QAAjC;AACAD,iBAAc,QAAd;AACAL,KAAE,sBAAF,EAA0BI,IAA1B;AACAJ,KAAE,gCAAF,EAAoCQ,IAApC;AAED,EARD;;AAUAT,UAASG,KAAT,CAAe,YAAM;AACnB,OAAMO,YAAY,wBAAc;AAC9BC,cAASZ,OADqB;AAE9Ba,UAAKZ,SAASa,IAAT,CAAc,QAAd,CAFyB;AAG9BC,cAASd,SAASa,IAAT,CAAc,SAAd,CAHqB;AAI9BE,iBAAY,sBAAM;AAChB,cAAO,IAAP;AACD;AAN6B,IAAd,CAAlB;AAQD,EATD;;AAWA,UAAST,aAAT,CAAuBU,IAAvB,EAA6B;AAC3B,OAAI,WAAWA,IAAf,EAAqB;AACnBlB,aAAQG,EAAE,sBAAF,CAAR;AACAJ,iBAAYC,MAAMmB,QAAN,CAAe;AACzBC,cAAO;AACL,iCAAwB;AACtBC,qBAAU,IADY;AAEtBC,kBAAO;AAFe;AADnB;AADkB,MAAf,CAAZ;AAQD;;AAED,OAAI,YAAYJ,IAAhB,EAAsB;AACpBlB,aAAQG,EAAE,gCAAF,CAAR;AACAJ,iBAAYC,MAAMmB,QAAN,CAAe;AACzBC,cAAO;AACL,mBAAU;AACRC,qBAAU,IADF;AAERE,kBAAO,IAFC;AAGRC,sBAAW;AACTN,mBAAM,KADG;AAETO,uBAAU,kBAACC,IAAD,EAAU;AAClB,mBAAIA,IAAJ,EAAU;AACRvB,mBAAE,cAAF,EAAkBO,WAAlB,CAA8B,UAA9B;AACD,gBAFD,MAEO;AACLP,mBAAE,cAAF,EAAkBM,QAAlB,CAA2B,UAA3B;AACD;AACF;AARQ;AAHH,UADL;AAeL,qBAAY;AACVY,qBAAU,IADA;AAEVM,6BAAkB,IAFR;AAGVC,wBAAa,CAAC,CAAD,EAAI,CAAJ,CAHH;AAIVJ,sBAAW;AACTN,mBAAM;AADG;AAJD;AAfP,QADkB;AAyBzBW,iBAAU;AACRC,mBAAU;AACRT,qBAAUU,WAAWC,KAAX,CAAiB,4CAAjB,CADF;AAERJ,wBAAaG,WAAWC,KAAX,CAAiB,4CAAjB;AAFL;AADF;AAzBe,MAAf,CAAZ;AAgCD;AACF,G","file":"app/js/auth/password-reset/index.js","sourcesContent":["import SmsSender from 'app/common/widget/sms-sender';\nlet validator = null;\nlet $form = null;\nlet smsSend = '.js-sms-send';\nlet $smsCode = $(smsSend);\n\nif ($('.js-find-password li').length > 1) {\n  $('.js-find-by-email').click(function () {\n    if (!$('.js-find-by-email').hasClass('active')) {\n      $('#alertxx').hide();\n    }\n  });\n  $('.js-find-by-mobile').click(function () {\n    if (!$('.js-find-by-mobile').hasClass('active')) {\n      $('#alertxx').hide();\n    }\n  });\n}\n\nmakeValidator('email');\n\n$('.js-find-by-email').click(function () {\n  validator = null;\n  $('.js-find-by-email').addClass('active');\n  $('.js-find-by-mobile').removeClass('active');\n  makeValidator('email');\n  $('#password-reset-by-mobile-form').hide();\n  $('#password-reset-form').show();\n})\n\n$('.js-find-by-mobile').click(function () {\n  validator = null;\n  $('.js-find-by-email').removeClass('active');\n  $('.js-find-by-mobile').addClass('active');\n  makeValidator('mobile');\n  $('#password-reset-form').hide();\n  $('#password-reset-by-mobile-form').show();\n\n})\n\n$smsCode.click(() => {\n  const smsSender = new SmsSender({\n    element: smsSend,\n    url: $smsCode.data('smsUrl'),\n    smsType: $smsCode.data('smsType'),\n    preSmsSend: () => {\n      return true;\n    }\n  });\n})\n\nfunction makeValidator(type) {\n  if ('email' == type) {\n    $form = $('#password-reset-form');\n    validator = $form.validate({\n      rules: {\n        '[name=\"form[email]\"]': {\n          required: true,\n          email: true,\n        }\n      }\n    });\n  }\n\n  if ('mobile' == type) {\n    $form = $('#password-reset-by-mobile-form');\n    validator = $form.validate({\n      rules: {\n        'mobile': {\n          required: true,\n          phone: true,\n          es_remote: {\n            type: 'get',\n            callback: (bool) => {\n              if (bool) {\n                $('.js-sms-send').removeClass('disabled');\n              } else {\n                $('.js-sms-send').addClass('disabled');\n              }\n            }\n          }\n        },\n        'sms_code': {\n          required: true,\n          unsigned_integer: true,\n          rangelength: [6, 6],\n          es_remote: {\n            type: 'get'\n          },\n        },\n      },\n      messages: {\n        sms_code: {\n          required: Translator.trans('auth.password_reset.sms_code_required_hint'),\n          rangelength: Translator.trans('auth.password_reset.sms_code_validate_hint'),\n        }\n      }\n    })\n  }\n};\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/auth/password-reset/index.js"],"sourceRoot":""}