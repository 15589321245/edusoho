<!-- 3、加入后：任务式学习 -->
<div class="container">
  <ol class="breadcrumb breadcrumb-o">
    <li>
      <a href="/">首页</a>
    </li>
    <li class="active">{{ courseSet.title }} </li>
  </ol>
  <div class="es-section course-detail-section clearfix">
    <div class="course-detail-top">
      {{ render(controller('AppBundle:Course:headerTopPart', {id: course.id})) }}
    </div>
    <section class="row course-orderlearn-section">
      <div class="col-sm-6">
        <div class="course-progress">
          {% if taskPerDay %}
            <div class="cricle-progress" id="orderprogress-plan" data-percent="{{ planProgressProgress }}"></div>
          {% endif %}
          <div class="cricle-progress" id="orderprogress" data-percent="{{ progress }}">
            <span class="percent"></span>
          </div>
        </div>
        <ul class="progress-info">
          <li class="mb10">
            <i class="es-icon es-icon-dot color-primary"></i>
            已完成
            <span class="mhs"><span class="color-primary">{{ taskResultCount }}</span> / {{ taskCount }}</span>个任务
          </li>
          {% if taskPerDay %}
            <li class="mb10">
              <i class="es-icon es-icon-dot color-warning"></i>
              计划完成<span class="mhs">{{ planStudyTaskCount }}</span>个任务
              {% if progress -planProgressProgress > 0 %}
              ，<span class="mlm">落后计划(progress- planProgressProgress)%</span>
              {% endif %}
            </li>
          {% endif %}
          <li class="pt30 mb10 mll">学习有效期</li>
          {% if course.expiryMode == 'days' and course.expiryDays == 0 %}
            <li class="mll"> 不限</li>
          {% elseif course.expiryMode == 'date' %}
            <li class="mll">{{ course.expiryEndDate|date('Y-m-d ') }}
            <span class="mls color-warning">剩余 {{ course.expiryEndDate|time_diff }} 天</span></li>
          {% else %}
            <li class="mll">{{ member.createdTime|date_modify("+#{course.expiryDays} days")|date('Y-m-d') }}
              <span class="mls color-warning">剩余 {{ member.createdTime|time_diff(course.expiryDays) }} 天</span>
            </li>
          {% endif %}
        </ul>
      </div>
      <div class="col-sm-6 course-detail-content">
        <ul class="task-list task-list-md task-list-hover task-list-gray">
          {% for task in toLearnTasks %}
            {% set meta = activity_meta(task.activity.mediaType|default(null)) %}
            {% set task_lock =  (not  task.result|default(null)) and (not course.isDefault) and course.learnMode  == 'lockMode' %}
            <li class="task-item task-content mouse-control">
              <i class="es-icon
              {% if task_lock %}
              es-icon-lock
              {% elseif  not task.result|default(null) %}
              es-icon-undone-check
              {% elseif task.result.status == 'start' %}
              es-icon-doing
              {% elseif task.result.status == 'finish' %}
              es-icon-iccheckcircleblack24px
              {% endif %}
              left-menu"></i>
              <a class="text-overflow title" href="{{ path('course_task_show', {courseId:course.id, id:task.id}) }}">{{ task.title }}</a>
              <span class="right-menu mouse-leave">
              {{ task.activity.length|activity_length_format }} <i class="es-icon es-icon {{ meta.icon|default('') }} mlm" data-toggle="tooltip" data-placement="top" title="{{ meta.name|default(null) }}任务"></i>
            </span>
              <span class="right-menu mouse-enter">
              <a class="btn btn-primary btn-sm btn-learn" href="{{ path('course_task_show', {courseId:course.id, id:task.id}) }}">继续学习</a>
            </span>
            </li>
          {% endfor %}
        </ul>
      </div>
    </section>
  </div>
</div>