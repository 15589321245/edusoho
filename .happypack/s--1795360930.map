{"version":3,"sources":["app/Resources/static-src/app/js/file-chooser/base/coursefile-choose.js"],"names":["CourseFileChoose","$container","container","_init","_initEvent","_loadList","$","on","_paginationList","bind","_onSelectFile","_filterByFileName","$containter","url","data","get","val","html","event","stopImmediatePropagation","removeClass","$that","currentTarget","addClass","file","_onChange","value","JSON","stringify","console","log","emit","name","_fillMinuteAndSecond","length","fileLength","minute","parseInt","second","Math","round"],"mappings":";;;;;;;;AAAA;;;;;;;;;;;;IAEMA,gB;;;AAEJ,4BAAYC,UAAZ,EAAwB;AAAA;;AAAA;;AAEtB,UAAKC,SAAL,GAAiBD,UAAjB;AACA,UAAKE,KAAL;AACA,UAAKC,UAAL;AAJsB;AAKvB;;;;4BAEO;AACN,WAAKC,SAAL;AACD;;;iCAEY;AACXC,QAAE,KAAKJ,SAAP,EAAkBK,EAAlB,CAAqB,OAArB,EAA8B,eAA9B,EAA+C,KAAKC,eAAL,CAAqBC,IAArB,CAA0B,IAA1B,CAA/C;AACAH,QAAE,KAAKJ,SAAP,EAAkBK,EAAlB,CAAqB,OAArB,EAA8B,oBAA9B,EAAoD,KAAKG,aAAL,CAAmBD,IAAnB,CAAwB,IAAxB,CAApD;AACAH,QAAE,KAAKJ,SAAP,EAAkBK,EAAlB,CAAqB,OAArB,EAA8B,2BAA9B,EAA2D,KAAKI,iBAAL,CAAuBF,IAAvB,CAA4B,IAA5B,CAA3D;AACA;AACD;;;gCAEW;AACV,UAAIG,cAAcN,EAAE,sBAAF,CAAlB;AACA,UAAIO,MAAMD,YAAYE,IAAZ,CAAiB,KAAjB,CAAV;AACAR,QAAES,GAAF,CAAMF,GAAN,EAAW,EAAE,QAAQP,EAAE,kBAAF,EAAsBU,GAAtB,EAAV,EAAwC,WAAWV,EAAE,8BAAF,EAAkCU,GAAlC,EAAnD,EAAX,EAAwG,gBAAQ;AAC9GJ,oBAAYK,IAAZ,CAAiBA,IAAjB;AACD,OAFD;AAGD;;;oCAEeC,K,EAAO;AACrBA,YAAMC,wBAAN;AACA,WAAKd,SAAL;AACD;;;wCAEiB;AAChBC,QAAE,4BAAF,EAAgCU,GAAhC,CAAoCV,EAAE,sBAAF,EAA0BU,GAA1B,EAApC;AACA,WAAKX,SAAL;AACH;;;kCAEea,K,EAAO;AACnBZ,QAAE,oBAAF,EAAwBc,WAAxB,CAAoC,QAApC;AACA,UAAIC,QAAQf,EAAEY,MAAMI,aAAR,EAAuBC,QAAvB,CAAgC,QAAhC,CAAZ;AACA,UAAIF,QAAQf,EAAEY,MAAMI,aAAR,CAAZ;AACA,UAAIE,OAAOH,MAAMP,IAAN,EAAX;AACA,WAAKW,SAAL,CAAeD,IAAf;;AAEA;AACD;;;8BAESA,I,EAAM;AACd,UAAIE,QAAQF,OAAOG,KAAKC,SAAL,CAAeJ,IAAf,CAAP,GAA8B,EAA1C;AACAK,cAAQC,GAAR,CAAY,+BAAZ;AACA,WAAKC,IAAL,CAAU,QAAV,EAAoBP,IAApB;AACAlB,QAAE,2BAAF,EAA+BW,IAA/B,CAAoCO,KAAKQ,IAAzC;;AAEA,WAAKC,oBAAL,CAA0BT,KAAKU,MAA/B;AACD;;;yCAEoBC,U,EAAY;AAC/B,UAAIC,SAASC,SAASF,aAAa,EAAtB,CAAb;AACA,UAAIG,SAASC,KAAKC,KAAL,CAAWL,aAAa,EAAxB,CAAb;AACA7B,QAAE,SAAF,EAAaU,GAAb,CAAiBoB,MAAjB;AACA9B,QAAE,SAAF,EAAaU,GAAb,CAAiBsB,MAAjB;AACD;;;;;;kBAIYtC,gB","file":"coursefile-choose.js","sourceRoot":"/Users/kz/projects/edusoho","sourcesContent":["import Chooser from './chooser';\n\nclass CourseFileChoose extends Chooser {\n\n  constructor($container) {\n    super();\n    this.container = $container;\n    this._init();\n    this._initEvent();\n  }\n\n  _init() {\n    this._loadList();\n  }\n\n  _initEvent() {\n    $(this.container).on('click', '.pagination a', this._paginationList.bind(this));\n    $(this.container).on('click', '.file-browser-item', this._onSelectFile.bind(this));\n    $(this.container).on('click', '.js-course-browser-search', this._filterByFileName.bind(this))\n    // $('.js-choose-trigger').on('click', this._open.bind(this))\n  }\n\n  _loadList() {\n    let $containter = $('.course-file-browser');\n    let url = $containter.data('url');\n    $.get(url, { 'type': $(\"input[name=type]\").val() , 'keyword': $(\"input[name='searchFileName']\").val()}, html => {\n      $containter.html(html);\n    });\n  }\n\n  _paginationList(event) {\n    event.stopImmediatePropagation();\n    this._loadList();\n  }\n\n_filterByFileName() {\n    $('input[name=searchFileName]').val($('.js-course-file-name').val());\n    this._loadList();\n}\n\n  _onSelectFile(event) {\n    $('.file-browser-item').removeClass('active');\n    var $that = $(event.currentTarget).addClass('active');\n    var $that = $(event.currentTarget);\n    var file = $that.data();\n    this._onChange(file);\n    \n    // this._close();\n  }\n\n  _onChange(file) {\n    var value = file ? JSON.stringify(file) : '';\n    console.log('begin courseFileChoose:select');\n    this.emit('select', file);\n    $('[data-role=\"placeholder\"]').html(file.name);\n\n    this._fillMinuteAndSecond(file.length);\n  }\n\n  _fillMinuteAndSecond(fileLength) {\n    let minute = parseInt(fileLength / 60);\n    let second = Math.round(fileLength % 60);\n    $(\"#minute\").val(minute);\n    $(\"#second\").val(second)\n  }\n\n}\n\nexport default CourseFileChoose;\n"]}