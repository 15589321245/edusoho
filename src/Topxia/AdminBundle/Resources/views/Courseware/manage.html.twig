{% extends 'TopxiaAdminBundle:CategoryManage:layout.html.twig' %}

{% block title %}课件管理 - {{ parent() }}{% endblock %}
{% set nav = 'course' %}
{% set side_nav = 'courseware' %}

{% set script_controller = 'courseware/main' %}

{% block main %}
 <link rel="stylesheet" media="screen" href="{{ asset('bundles/topxiaweb/css/ztree.css') }}" />
  <link rel="stylesheet" media="screen" href="{{ asset('bundles/topxiaweb/css/tag-chooser2.css') }}" />
<div class="page-header clearfix">
  <h1 class="pull-left">课件管理</h1>
    <button class="btn btn-sm btn-info pull-right add-category" data-toggle="modal" data-target="#modal" data-url="{{ path('admin_courseware_create', {categoryId:category.id}) }}">添加课件</button>
</div>
<div class="well well-sm">
  <form class="form-inline" id="testpaper-search-form">
    <input type="hidden" name="categoryId" value="{{ category.id }}">
    <div class="form-group mrl" id="tags-search-group">
      <label>标签：</label>
        <a href="javascript:;" class="tag-search-trigger">
          {% for tag in tagSearchs %}
            {{tag.name}}
          {% else %}
            选择
          {% endfor %}
        </a>
    </div>
    <div class="form-group mrl" id="knowledges-search-group">
      <label>知识点：</label>
      <a href="javascript:;" class="knowledge-search-trigger">
        {% for knowledge in knowledgeSearchs %}
          {{knowledge.name}}
        {% else %}
          选择
        {% endfor %}
      </a>
    </div>

    <div class="form-group mrl">
      <input class="form-control" type="text" name="keyword" value="{{ app.request.query.get('keyword') }}" placeholder="标题关键词">
    </div>

    <button type="submit" class="btn btn-sm btn-primary">搜索</button>

    <input type="hidden" name="tagIds" value="{{ app.request.query.get('tagIds') }}">
    <input type="hidden" name="knowledgeIds" value="{{ app.request.query.get('knowledgeIds') }}">
  </form>
    {% include 'CustomWebBundle:Tag:tagchooser-overlay.html.twig' with {id: 'tags-search', type: 'question'} %}
  {% include 'CustomWebBundle:Tag:tagchooser-knowledge-overlay.html.twig' with {id: 'knowledges-search', categoryId: category.id} %}
</div>
<div class="courseware-list">
  {% block list %}{% endblock %}

  {{ web_macro.paginator(paginator) }}

  <div>
    <label class="checkbox-inline"><input type="checkbox" data-role="batch-select"> 全选</label>
    <button type="button" class="btn btn-default btn-sm mlm" data-role="batch-delete" data-url="{{ path('admin_courseware_delete')}}">删除</button>
  </div>
</div>

{% endblock %}