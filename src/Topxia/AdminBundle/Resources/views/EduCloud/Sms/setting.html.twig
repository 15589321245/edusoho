{% extends 'TopxiaAdminBundle::layout.html.twig' %}

{% set menu = 'admin_edu_cloud_setting_sms' %} 
{% set script_controller = 'educloud/sms-setting' %}

{% block main %}
  <!-- 设置 -->
{{ web_macro.flash_messages() }}
<div class="page-heading">
  云短信开关
</div>
<form class="form-horizontal" method="post" action="{{ path('admin_edu_cloud_sms_status') }}">
  <div class="form-group">
    <label for="" class="col-sm-3 control-label">启用云短信：</label>
    <div class="controls col-md-9 radios">
      <div>
        <span class="text-success">{{'已启用'|trans}}</span>
          <button class="btn btn-default btn-sm mlm" name="sms-close">
            <span class="text-muted">{{'关闭'|trans}}</span>
          </button>
      </div>
      <div class="help-block">
        教学资讯，极速送达，尽在掌握。<a href="">点击这里</a>了解详情。
      </div>
    </div>
  </div>
  <input type="hidden" name="_csrf_token" value="{{ csrf_token('site') }}">
</form>
<div class="page-heading">
  基本设置
</div>
<form class="form-horizontal" role="form">
  <div class="form-group">
    <label for="" class="col-sm-3 control-label">短信签名：</label>
    <div class="controls col-md-9 radios">
      {{smsInfo.name}}<a href="" class="plm">去设置</a>
      <div class="help-block">
        签名显示在短信内容的最前面，显示这条短信来自哪家公司/产品/网站。
      </div>
    </div>
  </div>
</form>
<div class="page-heading">
  预警设置
</div>
<form class="form-horizontal" role="form">
  <div class="form-group">
    <label for="" class="col-sm-3 control-label">单日短信发送阈值：</label>
    <div class="controls col-md-9 radios">
      {{isBinded.smsThreshold}}<a href="" class="plm">去设置</a>
      <div class="help-block">
        单日短信发送量超过此阈值时，发送通知。
      </div>
    </div>
  </div>
</form>
<div class="page-heading">
  模板设置
</div>
<form class="form-horizontal" method="post" id="sms-form" novalidate="">
<div class="table-responsive sms-table"> 
  <table class="table table-striped table-hover ">
    <thead>
      <tr>
        <th>短信类型</th>
        <th width="12%">应用场景</th>
        <th>内容示例</th>
        <th>发送方式</th>
        <th>操作</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>验证类</td>
        <td>手机绑定</td>
        <td>您的验证码是：XXXXXX(请勿泄露)，此验证码30分钟内有效。</td>
        <td>自动单发</td>
        <td><input type="hidden" name="sms_bind" value="on">默认开启</td>
      </tr>
      <tr>
        <td>验证类</td>
        <td>登录密码重置</td>
        <td>您的验证码是：XXXXXX(请勿泄露)，此验证码30分钟内有效。</td>
        <td>自动单发</td>
        <td><input type="hidden" name="sms_forget_password" value="on">默认开启</td>
      </tr>
      <tr>
        <td>验证类</td>
        <td>支付密码重置</td>
        <td>您的验证码是：XXXXXX(请勿泄露)，此验证码30分钟内有效。</td>
        <td>自动单发</td>
        <td><input type="hidden" name="sms_forget_pay_password" value="on">默认开启</td>
      </tr>
      <tr>
        <td>验证类</td>
        <td>使用网站余额支付</td>
        <td>您的验证码是：XXXXXX(请勿泄露)，此验证码30分钟内有效。</td>
        <td>自动单发</td>
        <td><input type="hidden" name="sms_user_pay" value="on">默认开启</td>
      </tr>
      <tr>
        <td>通知类</td>
        <td>新班级发布</td>
        <td>同学们，《ES网校管理学习班》现已开始报名！http://t.cn/RtHEoCs。</td>
        <td>手动群发</td>
        <td>
          <label>
            <input type="radio" name="sms_classroom_publish" value="on"
              {% if (setting('cloud_sms.sms_classroom_publish')|default('off')) == 'on' %}checked="checked"{% endif %}> {{ '开启'|trans }}
          </label>
          <label>
            <input type="radio" name="sms_classroom_publish" value="off"
              {% if (setting('cloud_sms.sms_classroom_publish')|default('off')) != 'on' %}checked="checked"{% endif %}> {{ '关闭'|trans }}
          </label>
        </td>
      </tr>
      <tr>
        <td>通知类</td>
        <td>新课程发布</td>
        <td>同学们，《如何使用EduSoho？》现已开始报名！ http://t.cn/RtH8W6c。</td>
        <td>手动群发</td>
        <td>
          <label>
            <input type="radio" name="sms_course_publish" value="on"
              {% if (setting('cloud_sms.sms_course_publish')|default('off')) == 'on' %}
              checked="checked"{% endif %}> {{ '开启'|trans }}
          </label>
          <label>
            <input type="radio" name="sms_course_publish" value="off"
              {% if (setting('cloud_sms.sms_course_publish')|default('off')) != 'on' %}
              checked="checked"{% endif %}> {{ '关闭'|trans }}
          </label>
        </td>
      </tr>
      <tr>
        <td>通知类</td>
        <td>新课时发布通知（普通课程）</td>
        <td>您的《如何使用EduSoho？》－《如何进入管理后台》已发布！http://t.cn/RtHRhF4。</td>
        <td>自动群发</td>
        <td>
          <label>
            <input type="radio" name="sms_normal_lesson_publish" value="on"
            {% if (setting('cloud_sms.sms_normal_lesson_publish')|default('off')) == 'on' %}checked="checked"{% endif %}> {{ '开启'|trans }}
          </label>
          <label>
            <input type="radio" name="sms_normal_lesson_publish" value="off"
            {% if (setting('cloud_sms.sms_normal_lesson_publish')|default('off')) != 'on' %}checked="checked"{% endif %}> {{ '关闭'|trans }}
          </label>
        </td>
      </tr>
      <tr>
        <td>通知类</td>
        <td>新课时发布通知（直播）</td>
        <td>《如何使用EduSoho？》－《如何进入管理后台》将在2016-08-28开播！http://t.cn/RtHRhF4。</td>
        <td>自动群发</td>
        <td>
          <label>
            <input type="radio" name="sms_live_lesson_publish" value="on"
            {% if (setting('cloud_sms.sms_live_lesson_publish')|default('off')) == 'on' %}checked="checked"{% endif %}> {{ '开启'|trans }}
          </label>
          <label>
            <input type="radio" name="sms_live_lesson_publish" value="off"
            {% if (setting('cloud_sms.sms_live_lesson_publish')|default('off')) != 'on' %}checked="checked"{% endif %}> {{ '关闭'|trans }}
          </label>
        </td>
      </tr>
      <tr>
        <td>通知类</td>
        <td>直播开播前通知（提前1天）</td>
        <td>《如何使用EduSoho？》－《如何进入管理后台》将在2016-08-28开播！http://t.cn/RtHRhF4。</td>
        <td>自动群发</td>
        <td>
          <label>
            <input type="radio" name="sms_live_play_one_day" value="on"
            {% if (setting('cloud_sms.sms_live_play_one_day')|default('off')) == 'on' %}checked="checked"{% endif %}> {{ '开启'|trans }}
          </label>
          <label>
            <input type="radio" name="sms_live_play_one_day" value="off"
            {% if (setting('cloud_sms.sms_live_play_one_day')|default('off')) != 'on' %}checked="checked"{% endif %}> {{ '关闭'|trans }}
          </label>
        </td>
      </tr>
      <tr>
        <td>通知类</td>
        <td>直播开播前通知（提前1小时）</td>
        <td>《如何使用EduSoho？》－《如何进入管理后台》将在2016-08-28开播！http://t.cn/RtHRhF4。</td>
        <td>自动群发</td>
        <td>
          <label>
            <input type="radio" name="sms_live_play_one_hour" value="on"
              {% if (setting('cloud_sms.sms_live_play_one_hour')|default('off')) == 'on' %}checked="checked"{% endif %}> {{ '开启'|trans }}
          </label>
          <label>
            <input type="radio" name="sms_live_play_one_hour" value="off"
              {% if (setting('cloud_sms.sms_live_play_one_hour')|default('off')) != 'on' %}checked="checked"{% endif %}> {{ '关闭'|trans }}
          </label>
        </td>
      </tr>
      <tr>
        <td>通知类</td>
        <td>作业完成批阅</td>
        <td>您的《如何使用EduSoho？》-《如何进入管理后台》的作业已被老师批阅，快来看看吧！。</td>
        <td>自动单发</td>
        <td class="radios">
          {% if (is_plugin_installed('Homework')) %}
            <label>
              <input type="radio" name="sms_homework_check" value="on"
                {% if (setting('cloud_sms.sms_homework_check')|default('off')) == 'on' %}checked="checked"{% endif %}> {{ '开启'|trans }}
            </label>
            <label>
              <input type="radio" name="sms_homework_check" value="off"
                {% if (setting('cloud_sms.sms_homework_check')|default('off')) != 'on' %}checked="checked"{% endif %}> {{ '关闭'|trans }}
            </label>
          {% else %}
            {{ '请先安装作业插件！'|trans }}
          {% endif %}
        </td>
      </tr>
      <tr>
        <td>通知类</td>
        <td>试卷完成批阅</td>
        <td>《您的《如何使用EduSoho？》-试卷：《阔知大学期末模拟考试》已被老师批阅，快来看看吧！</td>
        <td>自动单发</td>
        <td>
          <label>
            <input type="radio" name="sms_testpaper_check" value="on"
              {% if (setting('cloud_sms.sms_testpaper_check')|default('off')) == 'on' %}checked="checked"{% endif %}> {{ '开启'|trans }}
          </label>
          <label>
            <input type="radio" name="sms_testpaper_check" value="off"
              {% if (setting('cloud_sms.sms_testpaper_check')|default('off')) != 'on' %}checked="checked"{% endif %}> {{ '关闭'|trans }}
          </label>
        </td>
      </tr>
      <tr>
        <td>回执类</td>
        <td>课程购买回执</td>
        <td>你已成功购买课程《XXX课程》，支付￥20.00。</td>
        <td>自动单发</td>
        <td rowspan="4" style="vertical-align:middle;">
          <label>
            <input type="radio" name="sms_order_pay_success" value="on"
              {% if (setting('cloud_sms.sms_order_pay_success')|default('off')) == 'on' %}checked="checked"{% endif %}> {{ '开启'|trans }}
          </label>
          <label>
            <input type="radio" name="sms_order_pay_success" value="off"
              {% if (setting('cloud_sms.sms_order_pay_success')|default('off')) != 'on' %}checked="checked"{% endif %}> {{ '关闭'|trans }}
          </label>
        </td>
      </tr>
      <tr>
        <td>回执类</td>
        <td>班级购买回执</td>
        <td>你已成功购买班级《XXX班级》，支付￥20.00。</td>
        <td>自动单发</td>
      </tr>
      <tr>
        <td>回执类</td>
        <td>会员购买回执</td>
        <td>你已成功购买会员《XXX会员》，支付￥20.00。</td>
        <td>自动单发</td>
      </tr>
      <tr>
        <td>回执类</td>
        <td>虚拟币充值回执</td>
        <td>你已成功购买学币100枚，支付￥20.00。</td>
        <td>自动单发</td>
      </tr>
    </tbody>
  </table>
</div>
<input type="hidden" name="register-mode" value="{{ setting('auth.register_mode') }}">
<input type="hidden" name="_csrf_token" value="{{ csrf_token('site') }}">
<input type="hidden" name="strategy_overwrite" value="true">
<div class="form-group">
  <div class="controls col-md-offset-10">
    <button type="submit" class="btn btn-primary">提交</button>
  </div>
</div>
</form>
  {% endblock %}