{"version":3,"sources":["plugins/VipPlugin/Resources/static-src/js/vipadmin/create-modal/index.js"],"names":["$modal","$","parents","$form","validator","validate","rules","required","date","levelId","messages","boughtUnitVal","val","getBoughtUnitValidator","change","value","attr","datetimepicker","language","autoclose","format","minView","on","ev","query","execute","max","min","positive_integer","maxlength"],"mappings":";;AAAA;;;;;;AAEA,IAAIA,SAASC,EAAE,oBAAF,EAAwBC,OAAxB,CAAgC,QAAhC,CAAb;AACA,IAAIC,QAAQF,EAAE,oBAAF,CAAZ;AACA,IAAIG,YAAYD,MAAME,QAAN,CAAe;AAC3BC,WAAO;AACH,oBAAY;AACRC,sBAAU;AADF,SADT;AAIH,qBAAa;AACTA,sBAAU,IADD;AAETC,kBAAM;AAFG,SAJV;AAQHC,iBAAS;AACLF,sBAAU;AADL;AARN,KADoB;AAa3BG,cAAU;AACN,qBAAa;AACTH,sBAAU;AADD,SADP;AAIN,qBAAa;AACTA,sBAAU,YADD;AAETC,kBAAM;AAFG,SAJP;AAQNC,iBAAS;AACLF,sBAAU;AADL;AARH;AAbiB,CAAf,CAAhB;;AA2BA,IAAII,gBAAgBV,EAAE,kCAAF,EAAsCW,GAAtC,EAApB;AACAC,uBAAuBF,aAAvB,EAAsCP,SAAtC;;AAEAH,EAAE,0BAAF,EAA8Ba,MAA9B,CAAqC,YAAU;AAC3C,QAAIC,QAAQd,EAAE,IAAF,EAAQe,IAAR,CAAa,SAAb,EAAuB,IAAvB,EAA6BJ,GAA7B,EAAZ;AACAC,2BAAuBE,KAAvB,EAA8BX,SAA9B;AACH,CAHD;;AAKAH,EAAE,WAAF,EAAegB,cAAf,CAA8B;AAC1BC,cAAU,OADgB;AAE1BC,eAAW,IAFe;AAG1BC,YAAQ,YAHkB;AAI1BC,aAAS;AAJiB,CAA9B,EAKGC,EALH,CAKM,MALN,EAKc,UAASC,EAAT,EAAY;AACtBnB,cAAUoB,KAAV,CAAgB,WAAhB,EAA6BC,OAA7B;AACH,CAPD;;AASA,SAASZ,sBAAT,CAAgCF,aAAhC,EAA+CP,SAA/C,EACA;;AAEI,QAAIO,iBAAiB,OAArB,EAA8B;AAC1BV,UAAE,iBAAF,EAAqBK,KAArB,CAA2B,KAA3B,EAAkC;AAChCoB,iBAAK,GAD2B;AAEhCC,iBAAK,CAF2B;AAGhCC,8BAAiB,IAHe;AAIhClB,sBAAU,EAACmB,WAAU,UAAX,EAJsB,EAAlC;;AAMA;AACA;AACA;AACA;AACA;AACH,KAZD,MAYO;AACL5B,UAAE,iBAAF,EAAqBK,KAArB,CAA2B,KAA3B,EAAkC,EAACuB,WAAW,EAAZ,EAAgBnB,UAAU,EAACmB,WAAU,UAAX,EAA1B,EAAlC;AACE;AACA;AACA;AACA;AACA;AACH;AACJ","file":"index.js","sourceRoot":"/Users/kz/projects/edusoho","sourcesContent":["import notify from \"common/notify\";\n\nvar $modal = $('#member-modal-form').parents('.modal');\nlet $form = $('#member-modal-form');\nlet validator = $form.validate({\n    rules: {\n        'nickname': {\n            required: true\n        },\n        '#deadline': {\n            required: true,\n            date: true\n        },\n        levelId: {\n            required: true,\n        }\n    },\n    messages: {\n        '#nickname': {\n            required: '请输入昵称!'\n        },\n        '#deadline': {\n            required: '请输入会员截止日期!',\n            date: '请输入日期!'\n        },\n        levelId: {\n            required: '请选择会员等级!'\n        }\n    }\n});   \n\nvar boughtUnitVal = $('input[name=\"boughtUnit\"]:checked').val();\ngetBoughtUnitValidator(boughtUnitVal, validator);\n\n$('input[name=\"boughtUnit\"]').change(function(){\n    var value = $(this).attr('checked',true).val();\n    getBoughtUnitValidator(value, validator)\n})\n\n$(\"#deadline\").datetimepicker({\n    language: 'zh-CN',\n    autoclose: true,\n    format: 'yyyy-mm-dd',\n    minView: 'month'\n}).on('hide', function(ev){\n    validator.query('#deadline').execute();\n});\n\nfunction getBoughtUnitValidator(boughtUnitVal, validator)\n{\n\n    if (boughtUnitVal == 'month') {\n        $('#boughtDuration').rules(\"add\", {\n          max :999, \n          min :1,\n          positive_integer:true,\n          messages: {maxlength:\"长度不能大于20\"} });\n      \n        // validator.addItem({\n        //     element: '#boughtDuration',\n        //     required: true,\n        //     rule: 'positive_integer max{max:999} min{min:1}'\n        // });\n    } else {\n      $('#boughtDuration').rules(\"add\", {maxlength :20, messages: {maxlength:\"长度不能大于20\"} });\n        // validator.addItem({\n        //     element: '#boughtDuration',\n        //     required: true,\n        //     rule: 'positive_integer max{max:99} min{min:1}'\n        // });\n    }\n}\n\n\n\n"]}