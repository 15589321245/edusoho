webpackJsonp(["web/activity/ppt/index"],{0:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var l=n("5741c9570ffa69f0dd1a"),r=i(l),a=n("28860cd00ad0bed1aef1"),s=i(a),o=new s.default,c=$("#activity-ppt-content"),u=c.data("watermarkUrl"),f=parseInt(c.data("finishDetail")),d=function(e){var t=new r.default({element:"#activity-ppt-content",slides:c.data("slides").split(","),watermark:e});return"end"===c.data("finishType")?t.once("end",function(){o.emit("finish")}):o.receive("doing",function(e){e.learnedTime>=f&&o.emit("finish")}),t};if(void 0===u){d()}else $.get(u).then(function(e){d(e)}).fail(function(e){})},"5741c9570ffa69f0dd1a":function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n("e3c46672cecffb62cb73"),c=i(o),u=n("8449e985991260ad09f7"),f=i(u),d=function(e){function t(e){var n=e.element,i=e.slides,a=e.watermark;l(this,t);var s=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return s.element=$(n),s.slides=i||[],s.watermark=a||"",s._KEY_ACTION_MAP={37:s._onPrev,39:s._onNext,35:s._onLast,36:s._onFirst},s.total=0,s._page=0,s.placeholder="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC",s._bindEvents(),s._init(),s}return a(t,e),s(t,[{key:"_init",value:function(){var e=this;this.total=this.slides.length,this.element.find(".total").text(this.total);var t=this.slides.reduce(function(e,t,n){return e+='<img data-src="'+t+'" class="slide" data-page="'+(n+1)+'">'},"");this.element.find(".slide-player-body").html(t),this.watermark&&this.element.append('<div class="slide-player-watermark">'+this.watermark+"</div>"),$(document).on("keydown",function(t){e._KEY_ACTION_MAP[t.keyCode]&&e._KEY_ACTION_MAP[t.keyCode].call(e)}),this._onFirst()}},{key:"_lazyLoad",value:function(e){for(var t=e;t<e+4&&!(t>this.total);t++){var n=this._getSlide(t);n.attr("src")||n.attr("src",n.data("src"))}}},{key:"_getSlide",value:function(e){return this.element.find(".slide-player-body .slide").eq(e-1)}},{key:"_bindEvents",value:function(){this.element.on("click",".goto-next",this._onNext.bind(this)),this.element.on("click",".goto-prev",this._onPrev.bind(this)),this.element.on("click",".goto-first",this._onFirst.bind(this)),this.element.on("click",".goto-last",this._onLast.bind(this)),this.element.on("click",".fullscreen",this._onFullScreen.bind(this)),this.element.on("change",".goto-page",this._onChangePage.bind(this));var e=this;this.on("change",function(t){var n=t.current;t.before;n==e.total&&e.trigger("end")})}},{key:"_onNext",value:function(){return this.page===this.total?void this.trigger("end"):void this.page++}},{key:"_onPrev",value:function(){1!=this.page&&this.page--}},{key:"_onFirst",value:function(){this.page=1}},{key:"_onLast",value:function(){this.page=this.total}},{key:"_onFullScreen",value:function(e){f.default.enabled&&(f.default.isFullscreen?f.default.toggle():f.default.request())}},{key:"_onChangePage",value:function(e){this.page=$(e.target).val()}},{key:"page",get:function(){return this._page},set:function(e){var t=this,n=this.page,i=e;i>this.total&&(this.element.find(".goto-page").val(i),this._page=i),i<1&&(this.element.find(".goto-page").val(n),this._page=n),n&&this.element.find(".slide-player-body .slide").eq(n-1).removeClass("active");var l=this._getSlide(i);l.attr("src")?l.addClass("active"):(l.load(function(){t._page==l.data("page")&&l.addClass("active")}),l.attr("src",l.data("src"))),this._lazyLoad(i),this.element.find(".goto-page").val(i),this._page=i,this.trigger("change",{current:i,before:n})}}]),t}(c.default);t.default=d},"8449e985991260ad09f7":function(e,t){"use strict";!function(){var t="undefined"!=typeof e&&e.exports,n="undefined"!=typeof Element&&"ALLOW_KEYBOARD_INPUT"in Element,i=function(){for(var e,t,n=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],i=0,l=n.length,r={};i<l;i++)if(e=n[i],e&&e[1]in document){for(i=0,t=e.length;i<t;i++)r[n[0][i]]=e[i];return r}return!1}(),l={request:function e(t){var e=i.requestFullscreen;t=t||document.documentElement,/5\.1[\.\d]* Safari/.test(navigator.userAgent)?t[e]():t[e](n&&Element.ALLOW_KEYBOARD_INPUT)},exit:function(){document[i.exitFullscreen]()},toggle:function(e){this.isFullscreen?this.exit():this.request(e)},raw:i};return i?(Object.defineProperties(l,{isFullscreen:{get:function(){return Boolean(document[i.fullscreenElement])}},element:{enumerable:!0,get:function(){return document[i.fullscreenElement]}},enabled:{enumerable:!0,get:function(){return Boolean(document[i.fullscreenEnabled])}}}),void(t?e.exports=l:window.screenfull=l)):void(t?e.exports=!1:window.screenfull=!1)}()}});