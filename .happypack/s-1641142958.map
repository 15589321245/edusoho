{"version":3,"sources":["app/Resources/static-src/app/common/watermark.js"],"names":["$","fn","WaterMark","options","settings","extend","showTimer","$thiz","minTopOffset","minLeftOffset","topOffset","leftOffset","$watermarkDiv","genereateDiv","IEversion","getInternetExplorerVersion","rotate","addClass","css","opacity","style","parseFloat","html","contents","alwaysShow","displayWaterMark","getOffset","show","timeingShow","setInterval","setTimeout","hide","duringTime","interval","isUseRandomPos","setOffsetRandom","setOffsetByPosition","maxTopOffset","height","maxLeftOffset","width","Math","random","xPosition","yPosition","startShow","isAlwaysShow","rv","navigator","appName","ua","userAgent","re","RegExp","exec","$1","init","append"],"mappings":";;AAAA,CAAC,UAASA,CAAT,EAAY;AACXA,IAAEC,EAAF,CAAKC,SAAL,GAAiB,UAASC,OAAT,EAAkB;AACjC,QAAIC,WAAWJ,EAAEK,MAAF,CAAS;AACtB,oBAAc,IAAI,EAAJ,GAAS,IADD;AAEtB,kBAAY,KAAK,EAAL,GAAU,IAFA;AAGtB,sBAAgB,IAHM;AAItB,mBAAa,QAJS;AAKtB,mBAAa,KALS;AAMtB,wBAAkB,KANI;AAOtB,iBAAW,GAPW;AAQtB,gBAAU,EARY;AAStB,eAAS,EATa;AAUtB,kBAAY;AAVU,KAAT,EAWZF,OAXY,CAAf;;AAaA,QAAIG,SAAJ;AACA,QAAIC,QAAQP,EAAE,IAAF,CAAZ;AACA,QAAIQ,eAAe,EAAnB;AACA,QAAIC,gBAAgB,EAApB;AACA,QAAIC,YAAYF,YAAhB;AACA,QAAIG,aAAaF,aAAjB;AACA,QAAIG,gBAAgB,IAApB;;AAEA,aAASC,YAAT,GAAwB;AACtB,UAAIC,YAAYC,4BAAhB;AACAH,sBAAgBZ,EAAE,8CAAF,CAAhB;AACA,UAAIgB,SAAS,YAAYZ,SAASY,MAArB,GAA8B,MAA3C;AACAJ,oBAAcK,QAAd,CAAuB,QAAvB;AACAL,oBAAcM,GAAd,CAAkB;AAChBC,iBAASf,SAASe,OADF;AAEhB,6BAAqBH,MAFL;AAGhB,0BAAkBA,MAHF;AAIhB,yBAAiBA,MAJD;AAKhB,wBAAgBA,MALA;AAMhB,qBAAaA,MANG;AAOhB,kBAAU;AAPM,OAAlB;AASAJ,oBAAcM,GAAd,CAAkBd,SAASgB,KAA3B;AACA,UAAIN,aAAa,CAAb,IAAkBA,YAAY,CAAlC,EAAqC;AACnCF,sBAAcM,GAAd,CAAkB;AAChB,oBAAU,EADM;AAEhB,oBAAU,0LAA2LG,WAAWjB,SAASe,OAApB,IAA+B,GAA1N,GAAiO;AAF3N,SAAlB;AAID;AACDP,oBAAcU,IAAd,CAAmBlB,SAASmB,QAA5B;AACA,aAAOX,aAAP;AACD;;AAED,aAASY,UAAT,GAAsB;AACpBC;AACD;;AAED,aAASA,gBAAT,GAA4B;AAC1BC;AACAd,oBAAcM,GAAd,CAAkB;AAChB,eAAOR,SADS;AAEhB,gBAAQC;AAFQ,OAAlB;AAIAC,oBAAce,IAAd;AACD;;AAED,aAASC,WAAT,GAAuB;AACrBH;AACAnB,kBAAYuB,YAAY,YAAW;AACjCJ;AACAK,mBAAW,YAAW;AACpBlB,wBAAcmB,IAAd;AACD,SAFD,EAEG3B,SAAS4B,UAFZ;AAID,OANW,EAMT5B,SAAS6B,QANA,CAAZ;AAOD;;AAED,aAASP,SAAT,GAAqB;AACnB,UAAItB,SAAS8B,cAAb,EAA6B;AAC3BC;AACD,OAFD,MAEO;AACLC;AACD;AACF;;AAED,aAASD,eAAT,GAA2B;AACzB,UAAIE,eAAgB9B,MAAM+B,MAAN,KAAiB1B,cAAc0B,MAAd,EAAjB,GAA0C9B,YAA9D;AACA,UAAI+B,gBAAiBhC,MAAMiC,KAAN,KAAgB5B,cAAc4B,KAAd,EAAhB,GAAwC/B,aAA7D;;AAEAC,kBAAY+B,KAAKC,MAAL,KAAgBL,YAAhB,GAA+B7B,YAA3C;AACAG,mBAAa8B,KAAKC,MAAL,KAAgBH,aAA7B;AACD;;AAED,aAASH,mBAAT,GAA+B;AAC7B,UAAIhC,SAASuC,SAAT,IAAsB,MAA1B,EAAkC;AAChChC,qBAAaF,aAAb;AACD;AACD,UAAIL,SAASuC,SAAT,IAAsB,QAA1B,EAAoC;AAClChC,qBAAa,CAACJ,MAAMiC,KAAN,KAAgB5B,cAAc4B,KAAd,EAAjB,IAA0C,CAAvD;AACD;AACD,UAAIpC,SAASuC,SAAT,IAAsB,OAA1B,EAAmC;AACjChC,qBAAcJ,MAAMiC,KAAN,KAAgB5B,cAAc4B,KAAd,EAAjB,GAA0C/B,aAAvD;AACD;AACD,UAAIL,SAASwC,SAAT,IAAsB,KAA1B,EAAiC;AAC/BlC,oBAAYF,YAAZ;AACD;AACD,UAAIJ,SAASwC,SAAT,IAAsB,QAA1B,EAAoC;AAClClC,oBAAY,CAACH,MAAM+B,MAAN,KAAiB1B,cAAc0B,MAAd,EAAlB,IAA4C,CAA5C,GAAgD9B,YAA5D;AACD;AACD,UAAIJ,SAASwC,SAAT,IAAsB,QAA1B,EAAoC;AAClClC,oBAAaH,MAAM+B,MAAN,KAAiB1B,cAAc0B,MAAd,EAAjB,GAA0C9B,YAAvD;AACD;AACF;;AAED,aAASqC,SAAT,GAAqB;AACnB,UAAIzC,SAAS0C,YAAb,EAA2B;AACzBtB;AACD,OAFD,MAEO;AACLI;AAED;AACF;;AAED,aAASb,0BAAT,GAAsC;AACpC,UAAIgC,KAAK,CAAC,CAAV,CADoC,CACvB;AACb,UAAIC,UAAUC,OAAV,IAAqB,6BAAzB,EAAwD;AACtD,YAAIC,KAAKF,UAAUG,SAAnB;AACA,YAAIC,KAAK,IAAIC,MAAJ,CAAW,6BAAX,CAAT;AACA,YAAID,GAAGE,IAAH,CAAQJ,EAAR,KAAe,IAAnB,EACEH,KAAK1B,WAAWgC,OAAOE,EAAlB,CAAL;AACH;AACD,aAAOR,EAAP;AACD;;AAED,aAASS,IAAT,GAAgB;AACdjD,YAAMkD,MAAN,CAAa5C,cAAb;;AAEAgC;AACD;;AAEDW;AACD,GAvID;AAwID,CAzID,EAyIGxD,CAzIH","file":"watermark.js","sourceRoot":"/Users/kz/projects/edusoho","sourcesContent":["(function($) {\n  $.fn.WaterMark = function(options) {\n    var settings = $.extend({\n      'duringTime': 5 * 60 * 1000,\n      'interval': 10 * 60 * 1000,\n      'isAlwaysShow': true,\n      'xPosition': 'center',\n      'yPosition': 'top',\n      'isUseRandomPos': false,\n      'opacity': 0.8,\n      'rotate': 45,\n      'style': {},\n      'contents': ''\n    }, options);\n\n    var showTimer;\n    var $thiz = $(this);\n    var minTopOffset = 40;\n    var minLeftOffset = 15;\n    var topOffset = minTopOffset;\n    var leftOffset = minLeftOffset;\n    var $watermarkDiv = null;\n\n    function genereateDiv() {\n      var IEversion = getInternetExplorerVersion();\n      $watermarkDiv = $('<div id=\"waterMark\" class=\"watermark\"></div>');\n      var rotate = 'rotate(' + settings.rotate + 'deg)';\n      $watermarkDiv.addClass('active');\n      $watermarkDiv.css({\n        opacity: settings.opacity,\n        '-webkit-transform': rotate,\n        '-moz-transform': rotate,\n        '-ms-transform': rotate,\n        '-o-transform': rotate,\n        'transform': rotate,\n        'filter': \"progid:DXImageTransform.Microsoft.Matrix(M11=0.70710678, M12=0.70710678, M21=-0.70710678, M22=0.70710678, sizingMethod='auto expand')\"\n      });\n      $watermarkDiv.css(settings.style);\n      if (IEversion >= 8 && IEversion < 9) {\n        $watermarkDiv.css({\n          'height': 60,\n          'filter': \"progid:DXImageTransform.Microsoft.Matrix(M11=0.70710678, M12=0.70710678, M21=-0.70710678, M22=0.70710678, sizingMethod='auto expand')progid:DXImageTransform.Microsoft.Alpha(opacity=\" + (parseFloat(settings.opacity) * 100) + \")\"\n        });\n      }\n      $watermarkDiv.html(settings.contents);\n      return $watermarkDiv;\n    }\n\n    function alwaysShow() {\n      displayWaterMark();\n    }\n\n    function displayWaterMark() {\n      getOffset();\n      $watermarkDiv.css({\n        'top': topOffset,\n        'left': leftOffset\n      });\n      $watermarkDiv.show();\n    }\n\n    function timeingShow() {\n      displayWaterMark();\n      showTimer = setInterval(function() {\n        displayWaterMark();\n        setTimeout(function() {\n          $watermarkDiv.hide();\n        }, settings.duringTime);\n\n      }, settings.interval);\n    }\n\n    function getOffset() {\n      if (settings.isUseRandomPos) {\n        setOffsetRandom();\n      } else {\n        setOffsetByPosition();\n      }\n    }\n\n    function setOffsetRandom() {\n      var maxTopOffset = ($thiz.height() - $watermarkDiv.height() - minTopOffset);\n      var maxLeftOffset = ($thiz.width() - $watermarkDiv.width() - minLeftOffset);\n\n      topOffset = Math.random() * maxTopOffset + minTopOffset;\n      leftOffset = Math.random() * maxLeftOffset;\n    }\n\n    function setOffsetByPosition() {\n      if (settings.xPosition == \"left\") {\n        leftOffset = minLeftOffset;\n      }\n      if (settings.xPosition == \"center\") {\n        leftOffset = ($thiz.width() - $watermarkDiv.width()) / 2;\n      }\n      if (settings.xPosition == \"right\") {\n        leftOffset = ($thiz.width() - $watermarkDiv.width()) - minLeftOffset;\n      }\n      if (settings.yPosition == \"top\") {\n        topOffset = minTopOffset;\n      }\n      if (settings.yPosition == \"center\") {\n        topOffset = ($thiz.height() - $watermarkDiv.height()) / 2 + minTopOffset;\n      }\n      if (settings.yPosition == \"bottom\") {\n        topOffset = ($thiz.height() - $watermarkDiv.height() - minTopOffset);\n      }\n    }\n\n    function startShow() {\n      if (settings.isAlwaysShow) {\n        alwaysShow();\n      } else {\n        timeingShow();\n\n      }\n    }\n\n    function getInternetExplorerVersion() {\n      var rv = -1; // Return value assumes failure.\n      if (navigator.appName == 'Microsoft Internet Explorer') {\n        var ua = navigator.userAgent;\n        var re = new RegExp(\"MSIE ([0-9]{1,}[\\.0-9]{0,})\");\n        if (re.exec(ua) != null)\n          rv = parseFloat(RegExp.$1);\n      }\n      return rv;\n    }\n\n    function init() {\n      $thiz.append(genereateDiv());\n\n      startShow();\n    }\n\n    init();\n  };\n})($);"]}