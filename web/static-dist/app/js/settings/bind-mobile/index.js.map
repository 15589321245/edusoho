{"version":3,"sources":["webpack:///./app/Resources/static-src/app/js/settings/bind-mobile/index.js"],"names":["$form","$","smsSend","$smsCode","validate","currentDom","ajax","rules","password","required","es_remote","type","mobile","phone","callback","bool","removeAttr","attr","sms_code","unsigned_integer","messages","Translator","trans","submitSuccess","data","message","modal","window","location","reload","submitError","responseJSON","on","element","url","smsType"],"mappings":";;;;;;AAAA;;;;AACA;;;;;;AAEA,KAAIA,QAAQC,EAAE,mBAAF,CAAZ;AACA,KAAIC,UAAU,cAAd;AACA,KAAIC,WAAWF,EAAEC,OAAF,CAAf;;AAEAF,OAAMI,QAAN,CAAe;AACbC,eAAY,aADC;AAEbC,SAAM,IAFO;AAGbC,UAAO;AACLC,eAAU;AACRC,iBAAU,IADF;AAERC,kBAAW;AACTC,eAAM;AADG;AAFH,MADL;AAOLC,aAAQ;AACNH,iBAAU,IADJ;AAENI,cAAO,IAFD;AAGNH,kBAAW;AACTC,eAAM,KADG;AAETG,mBAAU,kBAACC,IAAD,EAAU;AAClB,eAAIA,IAAJ,EAAU;AACRZ,sBAASa,UAAT,CAAoB,UAApB;AACD,YAFD,MAEO;AACLb,sBAASc,IAAT,CAAc,UAAd,EAA0B,IAA1B;AACD;AACF;AARQ;AAHL,MAPH;AAqBLC,eAAU;AACRT,iBAAU,IADF;AAERU,yBAAkB,IAFV;AAGRT,kBAAW;AACTC,eAAM;AADG;AAHH;AArBL,IAHM;AAgCbS,aAAU;AACRF,eAAU;AACRT,iBAAUY,WAAWC,KAAX,CAAiB,4BAAjB;AADF;AADF,IAhCG;AAqCbC,gBArCa,yBAqCCC,IArCD,EAqCO;AAClB,2BAAO,SAAP,EAAkBH,WAAWC,KAAX,CAAiBE,KAAKC,OAAtB,CAAlB;AACAxB,OAAE,QAAF,EAAYyB,KAAZ,CAAkB,MAAlB;AACAC,YAAOC,QAAP,CAAgBC,MAAhB;AACD,IAzCY;AA0CbC,cA1Ca,uBA0CDN,IA1CC,EA0CK;AAChB,2BAAO,QAAP,EAAkBH,WAAWC,KAAX,CAAiBE,KAAKO,YAAL,CAAkBN,OAAnC,CAAlB;AACD;AA5CY,EAAf;;AA+CAtB,UAAS6B,EAAT,CAAY,OAAZ,EAAqB,YAAW;AAC9B,2BAAc;AACZC,cAAS/B,OADG;AAEZgC,UAAK/B,SAASqB,IAAT,CAAc,KAAd,CAFO;AAGZW,cAAS;AAHG,IAAd;AAKD,EAND,E","file":"app/js/settings/bind-mobile/index.js","sourcesContent":["import SmsSender from 'app/common/widget/sms-sender';\nimport notify from 'common/notify';\n\nlet $form = $('#bind-mobile-form');\nlet smsSend = '.js-sms-send';\nlet $smsCode = $(smsSend);\n\n$form.validate({\n  currentDom: '#submit-btn',\n  ajax: true,\n  rules: {\n    password: {\n      required: true,\n      es_remote: {\n        type: 'post'\n      },\n    },\n    mobile: {\n      required: true,\n      phone: true,\n      es_remote: {\n        type: 'get',\n        callback: (bool) => {\n          if (bool) {\n            $smsCode.removeAttr('disabled');\n          } else {\n            $smsCode.attr('disabled', true);\n          }\n        }\n      },\n    },\n    sms_code: {\n      required: true,\n      unsigned_integer: true,\n      es_remote: {\n        type: 'get',\n      },\n    },\n  },\n  messages: {\n    sms_code: {\n      required: Translator.trans('site.captcha_code.required')\n    }\n  },\n  submitSuccess(data) {\n    notify('success', Translator.trans(data.message));\n    $('.modal').modal('hide');\n    window.location.reload();\n  },\n  submitError(data) {\n    notify('danger',  Translator.trans(data.responseJSON.message));\n  }\n});\n\n$smsCode.on('click', function() {\n  new SmsSender({\n    element: smsSend,\n    url: $smsCode.data('url'),\n    smsType: 'sms_bind',\n  })\n})\n\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/settings/bind-mobile/index.js"],"sourceRoot":""}