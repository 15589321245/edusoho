{"version":3,"sources":["app/Resources/static-src/app/js/course-manage/students/index.js"],"names":["Students","initTooltips","initDeleteActions","initFollowActions","initExportActions","$","popover","html","trigger","placement","content","on","evt","confirm","Translator","trans","post","target","data","success","location","reload","message","$this","hide","hasClass","parent","find","show","button","self","get","start","response","status","exportStudents","fileName","href"],"mappings":";;;;AAAA;;;;;;;;IAEMA,Q;AACJ,sBAAc;AAAA;;AACZ,SAAKC,YAAL;AACA,SAAKC,iBAAL;AACA,SAAKC,iBAAL;AACA,SAAKC,iBAAL;AACD;;;;mCAEa;AACZC,QAAE,mBAAF,EAAuBC,OAAvB,CAA+B;AAC3BC,cAAM,IADqB;AAE3BC,iBAAS,OAFkB,EAEV;AACjBC,mBAAW,MAHgB,EAGT;AAClBC,iBAASL,EAAE,wBAAF,EAA4BE,IAA5B;AAJkB,OAA/B;AAMD;;;wCAEkB;AACjBF,QAAE,MAAF,EAAUM,EAAV,CAAa,OAAb,EAAsB,oBAAtB,EAA4C,UAASC,GAAT,EAAc;AACxD,YAAI,CAACC,QAAQC,WAAWC,KAAX,CAAiB,YAAjB,CAAR,CAAL,EAA8C;AAC5C;AACD;AACDV,UAAEW,IAAF,CAAOX,EAAEO,IAAIK,MAAN,EAAcC,IAAd,CAAmB,KAAnB,CAAP,EAAkC,UAASA,IAAT,EAAe;AAC/C,cAAIA,KAAKC,OAAT,EAAkB;AAChB,kCAAO,SAAP,EAAkB,MAAlB;AACAC,qBAASC,MAAT;AACD,WAHD,MAGO;AACL,kCAAO,QAAP,EAAiB,UAAUH,KAAKI,OAAhC;AACD;AACF,SAPD;AAQD,OAZD;AAaD;;;wCAEkB;AACjBjB,QAAE,sBAAF,EAA0BM,EAA1B,CAA6B,OAA7B,EAAsC,4CAAtC,EAAoF,YAAW;AAC3F,YAAIY,QAAQlB,EAAE,IAAF,CAAZ;AACAA,UAAEW,IAAF,CAAOO,MAAML,IAAN,CAAW,KAAX,CAAP,EAA0B,YAAU;AAChCK,gBAAMC,IAAN;AACA,cAAID,MAAME,QAAN,CAAe,oBAAf,CAAJ,EAA0C;AACtCF,kBAAMG,MAAN,GAAeC,IAAf,CAAoB,uBAApB,EAA6CC,IAA7C;AACA,kCAAO,SAAP,EAAkB,MAAlB;AACH,WAHD,MAGO;AACHL,kBAAMG,MAAN,GAAeC,IAAf,CAAoB,qBAApB,EAA2CC,IAA3C;AACA,kCAAO,SAAP,EAAkB,QAAlB;AACH;AACJ,SATD;AAWH,OAbD;AAcD;;;wCAEkB;AACjBvB,QAAE,sBAAF,EAA0BM,EAA1B,CAA6B,OAA7B,EAAsC,YAAU;AAC5CN,UAAE,IAAF,EAAQwB,MAAR,CAAe,SAAf;AACA,YAAIC,OAAOzB,EAAE,IAAF,CAAX;AACAA,UAAE0B,GAAF,CAAM1B,EAAE,IAAF,EAAQa,IAAR,CAAa,UAAb,CAAN,EAAgC,EAACc,OAAM,CAAP,EAAhC,EAA2C,UAASC,QAAT,EAAmB;AAC1D,cAAIA,SAASC,MAAT,KAAoB,SAAxB,EAAmC;AAC/BC,2BAAeF,SAASD,KAAxB,EAA+BC,SAASG,QAAxC;AACH,WAFD,MAEO;AACHN,iBAAKD,MAAL,CAAY,OAAZ;AACAT,qBAASiB,IAAT,GAAgBP,KAAKZ,IAAL,CAAU,KAAV,IAAiB,YAAjB,GAA8Be,SAASG,QAAvD;AACH;AACJ,SAPD;AAQH,OAXD;AAYD;;;;;;AAGH,IAAIpC,QAAJ","file":"index.js","sourceRoot":"/Users/kz/projects/edusoho","sourcesContent":["import notify from 'common/notify';\n\nclass Students {\n  constructor() {\n    this.initTooltips();\n    this.initDeleteActions();\n    this.initFollowActions();\n    this.initExportActions();\n  }\n\n  initTooltips(){\n    $(\"#refund-coin-tips\").popover({\n        html: true,\n        trigger: 'hover',//'hover','click'\n        placement: 'left',//'bottom',\n        content: $(\"#refund-coin-tips-html\").html()\n    });\n  }\n\n  initDeleteActions(){\n    $('body').on('click', '.js-remove-student', function(evt) {\n      if (!confirm(Translator.trans('是否确定删除该学员？'))) {\n        return;\n      }\n      $.post($(evt.target).data('url'), function(data) {\n        if (data.success) {\n          notify('success', '移除成功');\n          location.reload();\n        } else {\n          notify('danger', '移除失败：' + data.message);\n        }\n      });\n    });\n  }\n\n  initFollowActions(){\n    $(\"#course-student-list\").on('click', '.follow-student-btn, .unfollow-student-btn', function() {\n        var $this = $(this);\n        $.post($this.data('url'), function(){\n            $this.hide();\n            if ($this.hasClass('follow-student-btn')) {\n                $this.parent().find('.unfollow-student-btn').show();\n                notify('success', '关注成功');\n            } else {\n                $this.parent().find('.follow-student-btn').show();\n                notify('success', '取消关注成功');\n            }\n        });\n        \n    });\n  }\n\n  initExportActions(){\n    $('#export-students-btn').on('click', function(){\n        $(this).button('loading');\n        var self = $(this);\n        $.get($(this).data('datasUrl'), {start:0}, function(response) {\n            if (response.status === 'getData') {\n                exportStudents(response.start, response.fileName);\n            } else {\n                self.button('reset');\n                location.href = self.data('url')+'?fileName='+response.fileName;\n            }\n        });\n    });\n  }\n}\n\nnew Students();\n"]}