{"version":3,"sources":["webpack:///./app/Resources/static-src/app/js/settings/user-profile/index.js"],"names":["editor","CKEDITOR","replace","toolbar","filebrowserImageUploadUrl","$","data","uploader","element","onUploadSuccess","file","response","url","get","html","modal","validator","validate","rules","required","chinese_limit","ajax","submitSuccess","Translator","trans","setTimeout","window","location","reload","on","event","$this","currentTarget","updateElement","form","button","submit"],"mappings":";;;;;;AAAA;;;;AACA;;;;;;AAEA,KAAIA,SAASC,SAASC,OAAT,CAAiB,eAAjB,EAAkC;AAC7CC,YAAS,QADoC;AAE7CC,8BAA2BC,EAAE,gBAAF,EAAoBC,IAApB,CAAyB,gBAAzB;AAFkB,EAAlC,CAAb;;AAKA,KAAIC,WAAW,4BAAkB;AAC/BC,YAAS,qBADsB;AAE/BC,oBAAiB,yBAASC,IAAT,EAAeC,QAAf,EAAyB;AACxC,SAAIC,MAAMP,EAAE,qBAAF,EAAyBC,IAAzB,CAA8B,SAA9B,CAAV;AACAD,OAAEQ,GAAF,CAAMD,GAAN,EAAW,UAASE,IAAT,EAAe;AACxBT,SAAE,QAAF,EAAYU,KAAZ,CAAkB,MAAlB,EAA0BD,IAA1B,CAA+BA,IAA/B;AACD,MAFD;AAGD;AAP8B,EAAlB,CAAf;;AAUA,KAAIE,YAAYX,EAAE,oBAAF,EAAwBY,QAAxB,CAAiC;AAC/CC,UAAO;AACL,uBAAkB,UADb;AAEL,uBAAkB;AAChBC,iBAAU,IADM;AAEhBC,sBAAe;AAFC,MAFb;AAML,uBAAkB;AANb,IADwC;AAS/CC,SAAM,IATyC;AAU/CC,gBAV+C,yBAUjChB,IAViC,EAU3B;AAClB,2BAAO,SAAP,EAAkBiB,WAAWC,KAAX,CAAiB,yCAAjB,CAAlB;;AAEAC,gBAAW,YAAW;AACpBC,cAAOC,QAAP,CAAgBC,MAAhB;AACD,MAFD,EAEG,IAFH;AAGD;AAhB8C,EAAjC,CAAhB;;AAmBAvB,GAAE,mBAAF,EAAuBwB,EAAvB,CAA0B,OAA1B,EAAmC,UAACC,KAAD,EAAW;AAC5C,OAAMC,QAAQ1B,EAAEyB,MAAME,aAAR,CAAd;;AAEA,OAAIhC,OAAOiC,aAAP,MAA0BjB,UAAUkB,IAAV,EAA9B,EAAgD;AAC9CH,WAAMI,MAAN,CAAa,SAAb;AACA9B,OAAE,oBAAF,EAAwB+B,MAAxB;AACD;AACF,EAPD,E","file":"app/js/settings/user-profile/index.js","sourcesContent":["import EsWebUploader from 'common/es-webuploader.js';\nimport notify from 'common/notify';\n\nlet editor = CKEDITOR.replace('profile_about', {\n  toolbar: 'Simple',\n  filebrowserImageUploadUrl: $('#profile_about').data('imageUploadUrl')\n});\n\nlet uploader = new EsWebUploader({\n  element: '#upload-picture-btn',\n  onUploadSuccess: function(file, response) {\n    let url = $(\"#upload-picture-btn\").data(\"gotoUrl\");\n    $.get(url, function(html) {\n      $(\"#modal\").modal('show').html(html);\n    })\n  }\n});\n\nlet validator = $('#user-profile-form').validate({\n  rules: {\n    'profile[about]': 'required',\n    'profile[title]': {\n      required: true,\n      chinese_limit: 24\n    },\n    'profile_avatar': 'required'\n  },\n  ajax: true,\n  submitSuccess(data) {\n    notify('success', Translator.trans('settings.user_profile.save_success_hint'));\n    \n    setTimeout(function() {\n      window.location.reload();\n    }, 1000);\n  }\n})\n\n$('#profile-save-btn').on('click', (event) => {\n  const $this = $(event.currentTarget);\n\n  if (editor.updateElement() && validator.form()) {\n    $this.button('loading');\n    $('#user-profile-form').submit();\n  }\n})\n\n\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/settings/user-profile/index.js"],"sourceRoot":""}