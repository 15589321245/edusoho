{"version":3,"sources":["app/Resources/static-src/app/common/component/persona-multi-input/index.js"],"names":["initItem","dataSourceUi","data","index","props","obj","itemId","Math","random","nickname","isVisible","avatar","seq","outputValue","id","push","updateChecked","map","item","PersonaMultiInput","onChecked","event","currentTarget","value","state","setState","addItem","length","dataSource","removeItem","sortItem","listClassName","sortable","propTypes","PropTypes","string","defaultProps","type","childContextTypes","func"],"mappings":"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","file":"index.js","sourceRoot":"/Users/kz/projects/edusoho","sourcesContent":["import React, { Component } from 'react';\nimport MultiInput from '../multi-input';\nimport List from './list';\n\nfunction initItem(dataSourceUi,data,index,props) {\n  let obj = {\n    itemId:Math.random(),\n    nickname: data[props.nickname],\n    isVisible: data[props.isVisible] == 1 ? true : false,\n    avatar: data[props.avatar],\n    seq: index,\n    outputValue: {\n      [props.id]: data[props.id],\n      [props.isVisible]: data[props.isVisible] ,\n    }\n  }\n  dataSourceUi.push(obj);\n}\n\nfunction updateChecked(dataSourceUi,id) {\n  dataSourceUi.map((item,index)=>{\n    if(item.itemId == id) {\n      dataSourceUi[index].isVisible = !dataSourceUi[index].isVisible;\n      dataSourceUi[index].outputValue.isVisible = dataSourceUi[index].isVisible ? 1 : 0\n    }\n  })\n}\n\nexport default class PersonaMultiInput extends MultiInput {\n  constructor(props) {\n    super(props);\n  }\n\n  componentWillMount() {\n    this.state = {\n      dataSourceUi: [],\n    }\n    this.props.dataSource.map((item,index)=>{\n      initItem(this.state.dataSourceUi,item,index+1,this.props);\n    })\n  }\n\n  getChildContext() {\n    return {\n      removeItem: this.removeItem,\n      sortItem: this.sortItem,\n      addItem: this.addItem,\n      onChecked:this.onChecked,\n    }\n  }\n\n  onChecked=(event)=> {\n    let id = event.currentTarget.value;\n    updateChecked(this.state.dataSourceUi,id);\n    this.setState({\n      dataSourceUi: this.state.dataSourceUi,\n    });\n  }\n\n  addItem = (value,data) =>{\n    if(!data)  {\n      return;\n    }\n    //@TODO重复添加提示\n    initItem(this.state.dataSourceUi,data,this.state.dataSourceUi.length+1,this.props);\n    this.setState({\n      dataSourceUi: this.state.dataSourceUi,\n    });\n  }\n\n  getList() {\n    return (<List listClassName={this.props.listClassName}  dataSourceUi = {this.state.dataSourceUi}  sortable={this.props.sortable}></List>);\n  }\n}\n\nPersonaMultiInput.propTypes = {\n  ...MultiInput.propTypes,\n  id:React.PropTypes.string,\n  nickname:React.PropTypes.string,\n  avatar: React.PropTypes.string,\n  isVisible:React.PropTypes.string,\n};\n\nPersonaMultiInput.defaultProps = {\n  ...MultiInput.defaultProps,\n  id: 'id',\n  nickname:'nickname',\n  avatar: 'avatar',\n  isVisible:'isVisible',\n  type: 'add',\n};\n\nPersonaMultiInput.childContextTypes = {\n  ...MultiInput.childContextTypes,\n  onChecked: React.PropTypes.func\n};\n\n"]}