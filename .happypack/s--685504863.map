{"version":3,"sources":["node_modules/.1.2.7@core-js/modules/$.microtask.js"],"names":["global","require","macrotask","set","Observer","MutationObserver","WebKitMutationObserver","process","Promise","isNode","head","last","notify","flush","parent","domain","fn","exit","enter","next","undefined","nextTick","toggle","node","document","createTextNode","observe","characterData","data","resolve","then","call","module","exports","asap","task"],"mappings":";;AAAA,IAAIA,SAAYC,QAAQ,YAAR,CAAhB;AAAA,IACIC,YAAYD,QAAQ,UAAR,EAAoBE,GADpC;AAAA,IAEIC,WAAYJ,OAAOK,gBAAP,IAA2BL,OAAOM,sBAFlD;AAAA,IAGIC,UAAYP,OAAOO,OAHvB;AAAA,IAIIC,UAAYR,OAAOQ,OAJvB;AAAA,IAKIC,SAAYR,QAAQ,SAAR,EAAmBM,OAAnB,KAA+B,SAL/C;AAAA,IAMIG,IANJ;AAAA,IAMUC,IANV;AAAA,IAMgBC,MANhB;;AAQA,IAAIC,QAAQ,SAARA,KAAQ,GAAU;AACpB,MAAIC,MAAJ,EAAYC,MAAZ,EAAoBC,EAApB;AACA,MAAGP,WAAWK,SAASP,QAAQQ,MAA5B,CAAH,EAAuC;AACrCR,YAAQQ,MAAR,GAAiB,IAAjB;AACAD,WAAOG,IAAP;AACD;AACD,SAAMP,IAAN,EAAW;AACTK,aAASL,KAAKK,MAAd;AACAC,SAASN,KAAKM,EAAd;AACA,QAAGD,MAAH,EAAUA,OAAOG,KAAP;AACVF,SAJS,CAIH;AACN,QAAGD,MAAH,EAAUA,OAAOE,IAAP;AACVP,WAAOA,KAAKS,IAAZ;AACD,GAACR,OAAOS,SAAP;AACF,MAAGN,MAAH,EAAUA,OAAOI,KAAP;AACX,CAfD;;AAiBA;AACA,IAAGT,MAAH,EAAU;AACRG,WAAS,kBAAU;AACjBL,YAAQc,QAAR,CAAiBR,KAAjB;AACD,GAFD;AAGF;AACC,CALD,MAKO,IAAGT,QAAH,EAAY;AACjB,MAAIkB,SAAS,CAAb;AAAA,MACIC,OAASC,SAASC,cAAT,CAAwB,EAAxB,CADb;AAEA,MAAIrB,QAAJ,CAAaS,KAAb,EAAoBa,OAApB,CAA4BH,IAA5B,EAAkC,EAACI,eAAe,IAAhB,EAAlC,EAHiB,CAGyC;AAC1Df,WAAS,kBAAU;AACjBW,SAAKK,IAAL,GAAYN,SAAS,CAACA,MAAtB;AACD,GAFD;AAGF;AACC,CARM,MAQA,IAAGd,WAAWA,QAAQqB,OAAtB,EAA8B;AACnCjB,WAAS,kBAAU;AACjBJ,YAAQqB,OAAR,GAAkBC,IAAlB,CAAuBjB,KAAvB;AACD,GAFD;AAGF;AACA;AACA;AACA;AACA;AACA;AACC,CAVM,MAUA;AACLD,WAAS,kBAAU;AACjB;AACAV,cAAU6B,IAAV,CAAe/B,MAAf,EAAuBa,KAAvB;AACD,GAHD;AAID;;AAEDmB,OAAOC,OAAP,GAAiB,SAASC,IAAT,CAAclB,EAAd,EAAiB;AAChC,MAAImB,OAAO,EAACnB,IAAIA,EAAL,EAASG,MAAMC,SAAf,EAA0BL,QAAQN,UAAUF,QAAQQ,MAApD,EAAX;AACA,MAAGJ,IAAH,EAAQA,KAAKQ,IAAL,GAAYgB,IAAZ;AACR,MAAG,CAACzB,IAAJ,EAAS;AACPA,WAAOyB,IAAP;AACAvB;AACD,GAACD,OAAOwB,IAAP;AACH,CAPD","file":"$.microtask.js","sourceRoot":"/Users/kz/projects/edusoho","sourcesContent":["var global    = require('./$.global')\n  , macrotask = require('./$.task').set\n  , Observer  = global.MutationObserver || global.WebKitMutationObserver\n  , process   = global.process\n  , Promise   = global.Promise\n  , isNode    = require('./$.cof')(process) == 'process'\n  , head, last, notify;\n\nvar flush = function(){\n  var parent, domain, fn;\n  if(isNode && (parent = process.domain)){\n    process.domain = null;\n    parent.exit();\n  }\n  while(head){\n    domain = head.domain;\n    fn     = head.fn;\n    if(domain)domain.enter();\n    fn(); // <- currently we use it only for Promise - try / catch not required\n    if(domain)domain.exit();\n    head = head.next;\n  } last = undefined;\n  if(parent)parent.enter();\n};\n\n// Node.js\nif(isNode){\n  notify = function(){\n    process.nextTick(flush);\n  };\n// browsers with MutationObserver\n} else if(Observer){\n  var toggle = 1\n    , node   = document.createTextNode('');\n  new Observer(flush).observe(node, {characterData: true}); // eslint-disable-line no-new\n  notify = function(){\n    node.data = toggle = -toggle;\n  };\n// environments with maybe non-completely correct, but existent Promise\n} else if(Promise && Promise.resolve){\n  notify = function(){\n    Promise.resolve().then(flush);\n  };\n// for other environments - macrotask based on:\n// - setImmediate\n// - MessageChannel\n// - window.postMessag\n// - onreadystatechange\n// - setTimeout\n} else {\n  notify = function(){\n    // strange IE + webpack dev server bug - use .call(global)\n    macrotask.call(global, flush);\n  };\n}\n\nmodule.exports = function asap(fn){\n  var task = {fn: fn, next: undefined, domain: isNode && process.domain};\n  if(last)last.next = task;\n  if(!head){\n    head = task;\n    notify();\n  } last = task;\n};"]}