{"version":3,"sources":["webpack:///./app/Resources/static-src/app/common/component/question-operate/index.js?5280","webpack:///./app/Resources/static-src/app/common/component/question-subjective/index.js?1160","webpack:///./app/Resources/static-src/app/js/activity-manage/homework/create.js","webpack:///./app/Resources/static-src/app/js/activity-manage/homework/index.js"],"names":["QuestionOperate","$form","$modal","initEvent","on","deleteQuestion","event","replaceQuestion","previewQuestion","batchDelete","initSortList","find","sortable","containerPath","containerSelector","itemSelector","placeholder","exclude","onDrop","item","container","_super","hasClass","$tbody","parents","each","$tr","$","data","detach","insertAfter","refreshSeqs","$target","currentTarget","excludeIds","push","val","modal","get","join","type","html","stopPropagation","id","closest","remove","length","$redmine","text","Translator","trans","show","setTimeout","slideUp","self","index","questionId","preventDefault","window","open","seq","questionSubjectiveRemask","$element","hasSubjective","$subjectiveRemask","console","log","removeClass","Homework","$iframeContent","$homeworkModal","parent","document","$questionPickedModal","$step2_form","$step3_form","validator2","init","setValidateRule","inItStep2form","showPickQuestion","hide","form","validator","editor","CKEDITOR","replace","toolbar","filebrowserImageUploadUrl","getData","$btn","validate","onkeyup","rules","title","required","maxlength","trim","course_title","description","content","messages","questionLength","initCkeditor","addMethod","value","element","optional","test","format","reg","$from"],"mappings":"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","file":"app/js/activity-manage/homework/index.js","sourcesContent":["import notify from 'common/notify';\nimport { questionSubjectiveRemask } from '../question-subjective'\n\nexport default class QuestionOperate {\n  constructor($form, $modal) {\n    this.$form = $form;\n    this.$modal = $modal;\n    this.initEvent();\n  }\n\n  initEvent() { \n    this.$form.on('click','[data-role=\"item-delete-btn\"]',event=>this.deleteQuestion(event));\n    this.$form.on('click','[data-role=\"replace-item\"]',event=>this.replaceQuestion(event));\n    this.$form.on('click','[data-role=\"preview-btn\"]',event=>this.previewQuestion(event));\n    this.$form.on('click','[data-role=\"batch-delete-btn\"]',event=>this.batchDelete(event));\n    this.initSortList();\n  }\n\n  initSortList() {\n    this.$form.find('tbody').sortable({\n      containerPath: '> tr',\n      containerSelector:'tbody',\n      itemSelector: 'tr.is-question',\n      placeholder: '<tr class=\"placeholder\"/>',\n      exclude: '.notMoveHandle',\n      onDrop: (item, container, _super) => {\n        _super(item, container);\n        if (item.hasClass('have-sub-questions')) {\n            let $tbody = item.parents('tbody');\n            $tbody.find('tr.is-question').each(function() {\n                let $tr = $(this);\n                $tbody.find('[data-parent-id=' + $tr.data('id') + ']').detach().insertAfter($tr);\n            });\n        }\n        this.refreshSeqs();\n      }\n    });\n  }\n\n  replaceQuestion(event) {\n    let $target = $(event.currentTarget);\n    let excludeIds = [];\n    let $tbody = this.$form.find(\"tbody:visible\");\n\n    $tbody.find('[name=\"questionIds[]\"]').each(function(){\n      excludeIds.push($(this).val());\n    })\n\n    this.$modal.data('manager', this).modal();\n    $.get($target.data('url'), {excludeIds: excludeIds.join(','), type: $tbody.data('type')}, html => {\n      this.$modal.html(html);\n    });\n  }\n\n  deleteQuestion(event) {\n    event.stopPropagation();\n    let $target = $(event.currentTarget);\n    let id = $target.closest('tr').data('id');\n    let $tbody =  $target.closest('tbody');\n    $tbody.find('[data-parent-id=\"'+id+'\"]').remove();\n    $target.closest('tr').remove();\n    questionSubjectiveRemask(this.$form);\n    this.refreshSeqs();\n  }\n\n  batchDelete(event) {\n    if (this.$form.find('[data-role=\"batch-item\"]:checked').length == 0) {\n      let $redmine = this.$form.find('.js-help-redmine');\n      if($redmine) {\n        $redmine.text(Translator.trans('activity.testpaper_manage.question_required_error_hint')).show();;\n        setTimeout(function() {\n          $redmine.slideUp();\n        }, 3000);\n      }else {\n       notify('danger', Translator.trans('activity.testpaper_manage.question_required_error_hint'));\n      }\n    }\n    let self = this;\n\n    this.$form.find('[data-role=\"batch-item\"]:checked').each(function(index,item){\n      let questionId = $(this).val();\n\n      if ($(this).closest('tr').data('type') == 'material') {\n        self.$form.find('[data-parent-id=\"'+questionId+'\"]').remove();\n      }\n      $(this).closest('tr').remove();\n      \n    })\n    questionSubjectiveRemask(this.$form);\n  }\n\n  previewQuestion(event) {\n    event.preventDefault();\n    window.open($(event.currentTarget).data('url'), '_blank', \"directories=0,height=580,width=820,scrollbars=1,toolbar=0,status=0,menubar=0,location=0\");\n  }\n\n  refreshSeqs() {\n    let seq = 1;\n    this.$form.find(\"tbody tr\").each(function(){\n      let $tr = $(this);\n                  \n      if (!$tr.hasClass('have-sub-questions')) { \n        $tr.find('td.seq').html(seq);\n        seq ++;\n      }\n    });  \n\n    this.$form.find('[name=\"questionLength\"]').val((seq - 1) > 0 ? (seq - 1 ) : null );       \n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/common/component/question-operate/index.js","export let questionSubjectiveRemask = ($element) => {\n  let hasSubjective = false;\n   let html = '';\n  let $subjectiveRemask = $(\".js-subjective-remask\");\n\n  $element.find('tbody tr').each(function() {\n    let type = $(this).data('type');\n    console.log(type);\n    if (type == 'essay') {\n      hasSubjective = true;\n    }\n  });\n  console.log(hasSubjective);\n  if(hasSubjective || $element.find('tbody tr').length == 0) {\n    $subjectiveRemask.html('');\n    return;\n  }\n\n  console.log($subjectiveRemask);\n\n  if($subjectiveRemask.data('type') == 'homework') {\n    html = Translator.trans('activity.homework_manage.objective_question_hint');\n  }\n  else {\n    html = Translator.trans('activity.homework_manage.pass_objective_question_hint');\n  }\n  $subjectiveRemask.html(html).removeClass('hidden');\n}\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/common/component/question-subjective/index.js","export default class Homework {\n  constructor($iframeContent) {\n    this.$homeworkModal = $('#modal', window.parent.document);\n    this.$questionPickedModal = $('#attachment-modal', window.parent.document);\n    this.$element = $iframeContent;\n    this.$step2_form = this.$element.find('#step2-form');\n    this.$step3_form = this.$element.find('#step3-form');\n    this.validator2 = null;\n    this.init();\n  }\n\n  init() {\n    this.initEvent();\n    this.setValidateRule();\n    this.inItStep2form();\n  }\n\n  initEvent() {\n    this.$element.on('click', '[data-role=\"pick-item\"]', event => this.showPickQuestion(event));\n    this.$questionPickedModal.on('shown.bs.modal', () => {\n      this.$homeworkModal.hide();\n    });\n    this.$questionPickedModal.on('hidden.bs.modal', () => {\n      this.$homeworkModal.show();\n      this.$questionPickedModal.html('');\n      if(this.validator2) {\n        this.validator2.form();\n      }\n    });\n  }\n\n  initCkeditor(validator) {\n    let editor = CKEDITOR.replace('homework-about-field', {\n      toolbar: 'Task',\n      filebrowserImageUploadUrl: $('#homework-about-field').data('imageUploadUrl'),\n    });\n    editor.on('change', () => {\n      $('#homework-about-field').val(editor.getData());\n    });\n    editor.on('blur', () => {\n      validator.form();\n    });\n  }\n\n  showPickQuestion(event) {\n    event.preventDefault();\n    let $btn = $(event.currentTarget);\n    let excludeIds = [];\n    $(\"#question-table-tbody\").find('[name=\"questionIds[]\"]').each(function () {\n      excludeIds.push($(this).val());\n    });\n    this.$questionPickedModal.modal().data('manager', this);\n    $.get($btn.data('url'), {\n      excludeIds: excludeIds.join(',')\n    }, html => {\n      this.$questionPickedModal.html(html);\n    });\n  }\n\n  inItStep2form() {\n    var validator = this.$step2_form.validate({\n      onkeyup: false,\n      rules: {\n        title: {\n          required: true,\n          maxlength: 50,\n          trim: true,\n          course_title: true,\n        },\n        description: {\n          required: true\n        },\n        content: 'required',\n        'questionLength': {\n          required: true\n        },\n      },\n      messages: {\n        description: Translator.trans(\"activity.homework_manage.question_homework_hint\"),\n        questionLength: Translator.trans(\"activity.homework_manage.question_required_error_hint\"),\n      },\n    });\n    this.validator2 = validator;\n    this.initCkeditor(validator);\n    this.$step2_form.data('validator', validator);\n\n  }\n\n  setValidateRule() {\n    $.validator.addMethod(\"arithmeticFloat\", function (value, element) {\n      return this.optional(element) || /^[0-9]+(\\.[0-9]?)?$/.test(value);\n    }, $.validator.format(Translator.trans(\"activity.homework_manage.arithmetic_float_error_hint\")));\n\n    $.validator.addMethod(\"positiveInteger\", function (value, element) {\n      return this.optional(element) || /^[1-9]\\d*$/.test(value);\n    }, $.validator.format(Translator.trans(\"activity.homework_manage.positive_integer_error_hint\")));\n\n    $.validator.addMethod(\"DateAndTime\", function (value, element) {\n      let reg = /^(?:(?!0000)[0-9]{4}-(?:(?:0[1-9]|1[0-2])-(?:0[1-9]|1[0-9]|2[0-8])|(?:0[13-9]|1[0-2])-(?:29|30)|(?:0[13578]|1[02])-31)|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)-02-29) ([0-1]{1}[0-9]{1})|(2[0-4]{1}):[0-5]{1}[0-9]{1}$/;\n      return this.optional(element) || reg.test(value);\n    }, $.validator.format(Translator.trans(\"activity.homework_manage.date_and_time_error_hint:mm\")));\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/activity-manage/homework/create.js","import BatchSelect from 'app/common/widget/batch-select';\nimport QuestionOperate from 'app/common/component/question-operate';\nimport Create from './create';\n\nlet $from = $('#step2-form');\nnew Create($('#iframe-content'));\nnew BatchSelect($from);\nnew QuestionOperate($from,$(\"#attachment-modal\",window.parent.document));\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/activity-manage/homework/index.js"],"sourceRoot":""}