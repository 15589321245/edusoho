{"version":3,"sources":["app/Resources/static-src/common/sortable.js"],"names":["sortList","options","callback","data","defaultOptions","element","distance","itemSelector","ajax","settings","Object","assign","$list","$","sortable","onDrop","item","container","_super","get","post","ids","response","success","document","location","reload","serialize","parent","children","isContainer","attr"],"mappings":";;;;;;AAAA;;AAEA,IAAMA,WAAW,SAAXA,QAAW,CAACC,OAAD,EAAoC;AAAA,MAA3BC,QAA2B,uEAAhB,UAACC,IAAD,EAAQ,CAAE,CAAM;;AACnD,MAAIC,iBAAiB;AACnBC,aAAS,gBADU;AAEnBC,cAAU,EAFS;AAGnBC,kBAAc,SAHK;AAInB;AACAC,UAAM;AALa,GAArB;;AAQA,MAAIC,WAAWC,OAAOC,MAAP,CAAc,EAAd,EAAkBP,cAAlB,EAAkCH,OAAlC,CAAf;AACA,MAAIW,QAAQC,EAAEJ,SAASJ,OAAX,EAAoBS,QAApB,CAA6BJ,OAAOC,MAAP,CAAc,EAAd,EAAkBF,QAAlB,EAA4B;AACnEM,YAAQ,gBAAUC,IAAV,EAAgBC,SAAhB,EAA2BC,MAA3B,EAAmC;AACzCA,aAAOF,IAAP,EAAaC,SAAb;AACA,UAAId,OAAOS,MAAME,QAAN,CAAe,WAAf,EAA4BK,GAA5B,EAAX;AACAjB,eAASC,IAAT;AACA,UAAGM,SAASD,IAAZ,EAAkB;AAChBK,UAAEO,IAAF,CAAOR,MAAMT,IAAN,CAAW,SAAX,CAAP,EAA8B,EAACkB,KAAKlB,IAAN,EAA9B,EAA2C,UAACmB,QAAD,EAAc;AACvDb,mBAASc,OAAT,GAAmBd,SAASc,OAAT,CAAiBD,QAAjB,CAAnB,GAAgDE,SAASC,QAAT,CAAkBC,MAAlB,EAAhD;AACD,SAFD;AAGD;AACF,KAVkE;;AAYnEC,eAAW,mBAASC,MAAT,EAAiBC,QAAjB,EAA2BC,WAA3B,EAAwC;AACjD,aAAOA,cAAcD,QAAd,GAAyBD,OAAOG,IAAP,CAAY,IAAZ,CAAhC;AACD;;AAdkE,GAA5B,CAA7B,CAAZ;AAiBD,CA3BD;;kBA8Be/B,Q","file":"sortable.js","sourceRoot":"/Users/kz/projects/edusoho","sourcesContent":["import 'jquery-sortable';\n\nconst sortList = (options,callback = (data)=>{} ) => {\n  let defaultOptions = {\n    element: '#sortable-list',\n    distance: 20,\n    itemSelector: \"li.drag\",\n    // success: (response) => {},\n    ajax: true,\n  }\n\n  let settings = Object.assign({}, defaultOptions, options);\n  let $list = $(settings.element).sortable(Object.assign({}, settings, {\n    onDrop: function (item, container, _super) {\n      _super(item, container);\n      let data = $list.sortable(\"serialize\").get();\n      callback(data);\n      if(settings.ajax) {\n        $.post($list.data('sortUrl'), {ids: data}, (response) => {\n          settings.success ? settings.success(response) : document.location.reload();\n        });\n      }\n    },\n\n    serialize: function(parent, children, isContainer) {\n      return isContainer ? children : parent.attr('id');\n    }\n\n  }))\n}\n\n\nexport default sortList;"]}