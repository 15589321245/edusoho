function getFileName(a){var b=a.indexOf("#"),c=a.indexOf("?"),d=Math.min(b>0?b:a.length,c>0?c:a.length);return a.substring(a.lastIndexOf("/",d)+1,d)}function getFileUrl(){return DEFAULT_URL}function setFileName(a){DEFAULT_URL=a}function getOutputScale(a){var b=window.devicePixelRatio||1,c=a.webkitBackingStorePixelRatio||a.mozBackingStorePixelRatio||a.msBackingStorePixelRatio||a.oBackingStorePixelRatio||a.backingStorePixelRatio||1,d=b/c;return{sx:d,sy:d,scaled:1!==d}}function scrollIntoView(a,b){var c=a.offsetParent,d=a.offsetTop+a.clientTop,e=a.offsetLeft+a.clientLeft;if(!c)return console.error("offsetParent is not set -- cannot scroll"),void 0;for(;c.clientHeight===c.scrollHeight;)if(c.dataset._scaleY&&(d/=c.dataset._scaleY,e/=c.dataset._scaleX),d+=c.offsetTop,e+=c.offsetLeft,c=c.offsetParent,!c)return;b&&(void 0!==b.top&&(d+=b.top),void 0!==b.left&&(e+=b.left,c.scrollLeft=e)),c.scrollTop=d}function watchScroll(a,b){var c=function(){e||(e=window.requestAnimationFrame(function(){var c,f;e=null,c=a.scrollTop,f=d.lastY,c>f?d.down=!0:f>c&&(d.down=!1),d.lastY=c,b(d)}))},d={down:!0,lastY:a.scrollTop,_eventHandler:c},e=null;return a.addEventListener("scroll",c,!0),d}function getVisibleElements(a,b,c){var i,j,k,l,m,n,o,p,q,r,s,d=a.scrollTop,e=d+a.clientHeight,f=a.scrollLeft,g=f+a.clientWidth,h=[];for(p=0,q=b.length;q>p;++p)if(i=b[p],j=i.el.offsetTop+i.el.clientTop,k=i.el.clientHeight,!(d>j+k)){if(j>e)break;n=i.el.offsetLeft+i.el.clientLeft,o=i.el.clientWidth,f>n+o||n>g||(l=Math.max(0,d-j)+Math.max(0,j+k-e),m=0|100*(k-l)/k,h.push({id:i.id,x:n,y:j,view:i,percent:m}))}return r=h[0],s=h[h.length-1],c&&h.sort(function(a,b){var c=a.percent-b.percent;return Math.abs(c)>.001?-c:a.id-b.id}),{first:r,last:s,views:h}}function noContextMenuHandler(a){a.preventDefault()}function getPDFFileNameFromURL(a){var b=/^(?:([^:]+:)?\/\/[^\/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,c=/[^\/?#=]+\.pdf\b(?!.*\.pdf\b)/i,d=b.exec(a),e=c.exec(d[1])||c.exec(d[2])||c.exec(d[3]);if(e&&(e=e[0],-1!==e.indexOf("%")))try{e=c.exec(decodeURIComponent(e))[0]}catch(f){}return e||"document.pdf"}function isAllWhitespace(a){return!NonWhitespaceRegexp.test(a)}function webViewerLoad(){PDFViewerApplication.initialize().then(webViewerInitialized)}function webViewerInitialized(){var e,f,g,h,i,j,k,l,m,a=document.location.search.substring(1),b=PDFViewerApplication.parseQueryString(a),c="file"in b?b.file:DEFAULT_URL,d=document.createElement("input");if(d.id="fileInput",d.className="fileInput",d.setAttribute("type","file"),d.oncontextmenu=noContextMenuHandler,document.body.appendChild(d),window.File&&window.FileReader&&window.FileList&&window.Blob&&(document.getElementById("fileInput").value=null),e=PDFJS.locale||navigator.language,PDFViewerApplication.preferencePdfBugEnabled){if(f=document.location.hash.substring(1),g=PDFViewerApplication.parseQueryString(f),"disableworker"in g&&(PDFJS.disableWorker="true"===g["disableworker"]),"disablerange"in g&&(PDFJS.disableRange="true"===g["disablerange"]),"disablestream"in g&&(PDFJS.disableStream="true"===g["disablestream"]),"disableautofetch"in g&&(PDFJS.disableAutoFetch="true"===g["disableautofetch"]),"disablefontface"in g&&(PDFJS.disableFontFace="true"===g["disablefontface"]),"disablehistory"in g&&(PDFJS.disableHistory="true"===g["disablehistory"]),"webgl"in g&&(PDFJS.disableWebGL="true"!==g["webgl"]),"useonlycsszoom"in g&&(PDFJS.useOnlyCssZoom="true"===g["useonlycsszoom"]),"verbosity"in g&&(PDFJS.verbosity=0|g["verbosity"]),"ignorecurrentpositiononzoom"in g&&(IGNORE_CURRENT_POSITION_ON_ZOOM="true"===g["ignorecurrentpositiononzoom"]),"locale"in g&&(e=g["locale"]),"textlayer"in g)switch(g["textlayer"]){case"off":PDFJS.disableTextLayer=!0;break;case"visible":case"shadow":case"hover":h=document.getElementById("viewer"),h.classList.add("textLayer-"+g["textlayer"])}"pdfbug"in g&&(PDFJS.pdfBug=!0,i=g["pdfbug"],j=i.split(","),PDFBug.enable(j),PDFBug.init())}if(mozL10n.setLanguage(e),!PDFViewerApplication.supportsPrinting,PDFViewerApplication.supportsFullscreen||(document.getElementById("presentationMode").classList.add("hidden"),document.getElementById("secondaryPresentationMode").classList.add("hidden")),PDFViewerApplication.supportsIntegratedFind&&document.getElementById("viewFind").classList.add("hidden"),PDFJS.UnsupportedManager.listen(PDFViewerApplication.fallback.bind(PDFViewerApplication)),document.getElementById("scaleSelect").oncontextmenu=noContextMenuHandler,k=document.getElementById("mainContainer"),l=document.getElementById("outerContainer"),k.addEventListener("transitionend",function(a){if(a.target===k){var b=document.createEvent("UIEvents");b.initUIEvent("resize",!1,!1,window,0),window.dispatchEvent(b),l.classList.remove("sidebarMoving")}},!0),document.getElementById("sidebarToggle").addEventListener("click",function(){this.classList.toggle("toggled"),l.classList.add("sidebarMoving"),l.classList.toggle("sidebarOpen"),PDFViewerApplication.sidebarOpen=l.classList.contains("sidebarOpen"),PDFViewerApplication.forceRendering()}),document.getElementById("viewThumbnail").addEventListener("click",function(){PDFViewerApplication.switchSidebarView("thumbs")}),document.getElementById("viewOutline").addEventListener("click",function(){PDFViewerApplication.switchSidebarView("outline")}),document.getElementById("viewAttachments").addEventListener("click",function(){PDFViewerApplication.switchSidebarView("attachments")}),document.getElementById("previous").addEventListener("click",function(){PDFViewerApplication.page--}),document.getElementById("next").addEventListener("click",function(){PDFViewerApplication.page++}),document.getElementById("zoomIn").addEventListener("click",function(){PDFViewerApplication.zoomIn()}),document.getElementById("zoomOut").addEventListener("click",function(){PDFViewerApplication.zoomOut()}),document.getElementById("pageNumber").addEventListener("click",function(){this.select()}),document.getElementById("pageNumber").addEventListener("change",function(){PDFViewerApplication.page=0|this.value,this.value!==(0|this.value).toString()&&(this.value=PDFViewerApplication.page)}),document.getElementById("scaleSelect").addEventListener("change",function(){PDFViewerApplication.setScale(this.value,!1)}),document.getElementById("presentationMode").addEventListener("click",SecondaryToolbar.presentationModeClick.bind(SecondaryToolbar)),c&&0===c.lastIndexOf("file:",0)){PDFViewerApplication.setTitleUsingUrl(c),m=new XMLHttpRequest,m.onload=function(){PDFViewerApplication.open(new Uint8Array(m.response),0)};try{m.open("GET",c),m.responseType="arraybuffer",m.send()}catch(n){PDFViewerApplication.error(mozL10n.get("loading_error",null,"An error occurred while loading the PDF."),n)}}else c&&PDFViewerApplication.open(c,0)}function updateViewarea(){PDFViewerApplication.initialized&&PDFViewerApplication.pdfViewer.update()}function selectScaleOption(a){var d,e,b=document.getElementById("scaleSelect").options,c=!1;for(d=0;d<b.length;d++)e=b[d],e.value===a?(e.selected=!0,c=!0):e.selected=!1;return c}function handleMouseWheel(a){var b=40,c="DOMMouseScroll"===a.type?-a.detail:a.wheelDelta/b,d=0>c?"zoomOut":"zoomIn";PresentationMode.active?(a.preventDefault(),PDFViewerApplication.mouseScroll(c*b)):a.ctrlKey&&(a.preventDefault(),PDFViewerApplication[d](Math.abs(c)))}var mozL10n,CSS_UNITS,DEFAULT_SCALE,UNKNOWN_SCALE,MAX_AUTO_SCALE,SCROLLBAR_PADDING,VERTICAL_PADDING,DEFAULT_CACHE_SIZE,CustomStyle,ProgressBar,Cache,DEFAULT_PREFERENCES,SidebarView,Preferences,DownloadManager,ViewHistory,PDFFindBar,FindStates,PDFFindController,PDFHistory,SecondaryToolbar,DELAY_BEFORE_HIDING_CONTROLS,SELECTOR,DELAY_BEFORE_RESETTING_SWITCH_IN_PROGRESS,PresentationMode,GrabToPan,HandTool,OverlayManager,PasswordPrompt,DocumentProperties,PresentationModeState,IGNORE_CURRENT_POSITION_ON_ZOOM,CLEANUP_TIMEOUT,RenderingStates,PDFRenderingQueue,PageView,FIND_SCROLL_OFFSET_TOP,FIND_SCROLL_OFFSET_LEFT,MAX_TEXT_DIVS_TO_RENDER,RENDER_DELAY,NonWhitespaceRegexp,TextLayerBuilder,PDFViewer,SimpleLinkService,PDFPageSource,PDFViewerApplication,THUMBNAIL_SCROLL_MARGIN,ThumbnailView,PDFThumbnailViewer,DocumentOutlineView,DocumentAttachmentsView,DEFAULT_URL="",DEFAULT_SCALE_DELTA=1.1,MIN_SCALE=.25,MAX_SCALE=10,VIEW_HISTORY_MEMORY=20,SCALE_SELECT_CONTAINER_PADDING=8,SCALE_SELECT_PADDING=22,PAGE_NUMBER_LOADING_INDICATOR="visiblePageIsLoading",DISABLE_AUTO_FETCH_LOADING_BAR_TIMEOUT=5e3;PDFJS.imageResourcesPath="./images/",PDFJS.workerSrc="pdf.worker-min.js",PDFJS.cMapUrl="../pdfjs/cmaps/",PDFJS.cMapPacked=!0,mozL10n=document.mozL10n||document.webL10n,CSS_UNITS=96/72,DEFAULT_SCALE="auto",UNKNOWN_SCALE=0,MAX_AUTO_SCALE=1.25,SCROLLBAR_PADDING=40,VERTICAL_PADDING=5,DEFAULT_CACHE_SIZE=10,CustomStyle=function(){function c(){}var a=["ms","Moz","Webkit","O"],b={};return c.getProp=function(c,d){var f,g,e,h,i;if(1===arguments.length&&"string"==typeof b[c])return b[c];if(d=d||document.documentElement,e=d.style,"string"==typeof e[c])return b[c]=c;for(g=c.charAt(0).toUpperCase()+c.slice(1),h=0,i=a.length;i>h;h++)if(f=a[h]+g,"string"==typeof e[f])return b[c]=f;return b[c]="undefined"},c.setProp=function(a,b,c){var d=this.getProp(a);"undefined"!==d&&(b.style[d]=c)},c}(),ProgressBar=function(){function a(a,b,c){return Math.min(Math.max(a,b),c)}function b(a,b){this.visible=!0,this.div=document.querySelector(a+" .progress"),this.bar=this.div.parentNode,this.height=b.height||100,this.width=b.width||100,this.units=b.units||"%",this.div.style.height=this.height+this.units,this.percent=0}return b.prototype={updateBar:function(){if(this._indeterminate)return this.div.classList.add("indeterminate"),this.div.style.width=this.width+this.units,void 0;this.div.classList.remove("indeterminate");var a=this.width*this._percent/100;this.div.style.width=a+this.units},get percent(){return this._percent},set percent(b){this._indeterminate=isNaN(b),this._percent=a(b,0,100),this.updateBar()},setWidth:function(a){var b,c;a&&(b=a.parentNode,c=b.offsetWidth-a.offsetWidth,c>0&&this.bar.setAttribute("style","width: calc(100% - "+c+"px);"))},hide:function(){this.visible&&(this.visible=!1,this.bar.classList.add("hidden"),document.body.classList.remove("loadingInProgress"))},show:function(){this.visible||(this.visible=!0,document.body.classList.add("loadingInProgress"),this.bar.classList.remove("hidden"))}},b}(),Cache=function(a){var b=[];this.push=function(c){var d=b.indexOf(c);d>=0&&b.splice(d,1),b.push(c),b.length>a&&b.shift().destroy()},this.resize=function(c){for(a=c;b.length>a;)b.shift().destroy()}},DEFAULT_PREFERENCES={showPreviousViewOnLoad:!0,defaultZoomValue:"",sidebarViewOnLoad:0,enableHandToolOnLoad:!1,enableWebGL:!1,pdfBugEnabled:!1,disableRange:!1,disableStream:!1,disableAutoFetch:!1,disableFontFace:!1,disableTextLayer:!1,useOnlyCssZoom:!1},SidebarView={NONE:0,THUMBS:1,OUTLINE:2,ATTACHMENTS:3},Preferences={prefs:Object.create(DEFAULT_PREFERENCES),isInitializedPromiseResolved:!1,initializedPromise:null,initialize:function(){return this.initializedPromise=this._readFromStorage(DEFAULT_PREFERENCES).then(function(a){this.isInitializedPromiseResolved=!0,a&&(this.prefs=a)}.bind(this))},_writeToStorage:function(){return Promise.resolve()},_readFromStorage:function(){return Promise.resolve()},reset:function(){return this.initializedPromise.then(function(){return this.prefs=Object.create(DEFAULT_PREFERENCES),this._writeToStorage(DEFAULT_PREFERENCES)}.bind(this))},reload:function(){return this.initializedPromise.then(function(){this._readFromStorage(DEFAULT_PREFERENCES).then(function(a){a&&(this.prefs=a)}.bind(this))}.bind(this))},set:function(a,b){return this.initializedPromise.then(function(){var c,d;if(void 0===DEFAULT_PREFERENCES[a])throw new Error("preferencesSet: '"+a+"' is undefined.");if(void 0===b)throw new Error("preferencesSet: no value is specified.");if(c=typeof b,d=typeof DEFAULT_PREFERENCES[a],c!==d){if("number"!==c||"string"!==d)throw new Error("Preferences_set: '"+b+"' is a \""+c+'", expected "'+d+'".');b=b.toString()}else if("number"===c&&(0|b)!==b)throw new Error("Preferences_set: '"+b+'\' must be an "integer".');return this.prefs[a]=b,this._writeToStorage(this.prefs)}.bind(this))},get:function(a){return this.initializedPromise.then(function(){var c,b=DEFAULT_PREFERENCES[a];if(void 0===b)throw new Error("preferencesGet: '"+a+"' is undefined.");return c=this.prefs[a],void 0!==c?c:b}.bind(this))}},Preferences._writeToStorage=function(a){return new Promise(function(b){localStorage.setItem("pdfjs.preferences",JSON.stringify(a)),b()})},Preferences._readFromStorage=function(){return new Promise(function(a){var b=JSON.parse(localStorage.getItem("pdfjs.preferences"));a(b)})},function(){function d(a){var b=document.createEvent("CustomEvent");b.initCustomEvent(a,!1,!1,"custom"),window.dispatchEvent(b)}function e(){if(a)if(g(),++b<a.length){var d=a[b];"function"==typeof d.mozPrintCallback?d.mozPrintCallback({context:d.getContext("2d"),abort:f,done:e}):e()}else g(),c.call(window),setTimeout(f,20)}function f(){a&&(a=null,g(),d("afterprint"))}function g(){var d,e,g,c=document.getElementById("mozPrintCallback-shim");a?(d=Math.round(100*b/a.length),e=c.querySelector("progress"),g=c.querySelector(".relative-progress"),e.value=d,g.textContent=d+"%",c.removeAttribute("hidden"),c.onclick=f):c.setAttribute("hidden","")}var a,b,c,h,i;"mozPrintCallback"in document.createElement("canvas")||(HTMLCanvasElement.prototype.mozPrintCallback=void 0,c=window.print,window.print=function(){if(a)return console.warn("Ignored window.print() because of a pending print job."),void 0;try{d("beforeprint")}finally{a=document.querySelectorAll("canvas"),b=-1,e()}},h=!!document.attachEvent,window.addEventListener("keydown",function(b){if(80===b.keyCode&&(b.ctrlKey||b.metaKey)&&!b.altKey&&(!b.shiftKey||window.chrome||window.opera)){if(window.print(),h)return;return b.preventDefault(),b.stopImmediatePropagation?b.stopImmediatePropagation():b.stopPropagation(),void 0}27===b.keyCode&&a&&f()},!0),h&&document.attachEvent("onkeydown",function(a){return a=a||window.event,80===a.keyCode&&a.ctrlKey?(a.keyCode=0,!1):void 0}),"onbeforeprint"in window&&(i=function(a){"custom"!==a.detail&&a.stopImmediatePropagation&&a.stopImmediatePropagation()},window.addEventListener("beforeprint",i,!1),window.addEventListener("afterprint",i,!1)))}(),DownloadManager=function(){function a(a,b){var d,c=document.createElement("a");c.click?(c.href=a,c.target="_parent","download"in c&&(c.download=b),(document.body||document.documentElement).appendChild(c),c.click(),c.parentNode.removeChild(c)):(window.top===window&&a.split("#")[0]===window.location.href.split("#")[0]&&(d=-1===a.indexOf("?")?"?":"&",a=a.replace(/#|$/,d+"$&")),window.open(a,"_parent"))}function b(){}return b.prototype={downloadUrl:function(b,c){PDFJS.isValidUrl(b,!0)&&a(b+"#pdfjs.action=download",c)},downloadData:function(b,c,d){if(navigator.msSaveBlob)return navigator.msSaveBlob(new Blob([b],{type:d}),c);var e=PDFJS.createObjectURL(b,d);a(e,c)},download:function(b,c,d){if(!URL)return this.downloadUrl(c,d),void 0;if(navigator.msSaveBlob)return navigator.msSaveBlob(b,d)||this.downloadUrl(c,d),void 0;var e=URL.createObjectURL(b);a(e,d)}},b}(),ViewHistory=function(){function a(a){this.fingerprint=a,this.isInitializedPromiseResolved=!1,this.initializedPromise=this._readFromStorage().then(function(a){var b,c,d,e,f;this.isInitializedPromiseResolved=!0,b=JSON.parse(a||"{}"),"files"in b||(b.files=[]),b.files.length>=VIEW_HISTORY_MEMORY&&b.files.shift();for(d=0,e=b.files.length;e>d;d++)if(f=b.files[d],f.fingerprint===this.fingerprint){c=d;break}"number"!=typeof c&&(c=b.files.push({fingerprint:this.fingerprint})-1),this.file=b.files[c],this.database=b}.bind(this))}return a.prototype={_writeToStorage:function(){return new Promise(function(a){var b=JSON.stringify(this.database);localStorage.setItem("database",b),a()}.bind(this))},_readFromStorage:function(){return new Promise(function(a){a(localStorage.getItem("database"))})},set:function(a,b){return this.isInitializedPromiseResolved?(this.file[a]=b,this._writeToStorage()):void 0},setMultiple:function(a){if(this.isInitializedPromiseResolved){for(var b in a)this.file[b]=a[b];return this._writeToStorage()}},get:function(a,b){return this.isInitializedPromiseResolved?this.file[a]||b:b}},a}(),PDFFindBar=function(){function a(a){if(this.opened=!1,this.bar=a.bar||null,this.toggleButton=a.toggleButton||null,this.findField=a.findField||null,this.highlightAll=a.highlightAllCheckbox||null,this.caseSensitive=a.caseSensitiveCheckbox||null,this.findMsg=a.findMsg||null,this.findStatusIcon=a.findStatusIcon||null,this.findPreviousButton=a.findPreviousButton||null,this.findNextButton=a.findNextButton||null,this.findController=a.findController||null,null===this.findController)throw new Error("PDFFindBar cannot be used without a PDFFindController instance.");var b=this;this.toggleButton.addEventListener("click",function(){b.toggle()}),this.findField.addEventListener("input",function(){b.dispatchEvent("")}),this.bar.addEventListener("keydown",function(a){switch(a.keyCode){case 13:a.target===b.findField&&b.dispatchEvent("again",a.shiftKey);break;case 27:b.close()}}),this.findPreviousButton.addEventListener("click",function(){b.dispatchEvent("again",!0)}),this.findNextButton.addEventListener("click",function(){b.dispatchEvent("again",!1)}),this.highlightAll.addEventListener("click",function(){b.dispatchEvent("highlightallchange")}),this.caseSensitive.addEventListener("click",function(){b.dispatchEvent("casesensitivitychange")})}return a.prototype={dispatchEvent:function(a,b){var c=document.createEvent("CustomEvent");return c.initCustomEvent("find"+a,!0,!0,{query:this.findField.value,caseSensitive:this.caseSensitive.checked,highlightAll:this.highlightAll.checked,findPrevious:b}),window.dispatchEvent(c)},updateUIState:function(a,b){var c=!1,d="",e="";switch(a){case FindStates.FIND_FOUND:break;case FindStates.FIND_PENDING:e="pending";break;case FindStates.FIND_NOTFOUND:d=mozL10n.get("find_not_found",null,"Phrase not found"),c=!0;break;case FindStates.FIND_WRAPPED:d=b?mozL10n.get("find_reached_top",null,"Reached top of document, continued from bottom"):mozL10n.get("find_reached_bottom",null,"Reached end of document, continued from top")}c?this.findField.classList.add("notFound"):this.findField.classList.remove("notFound"),this.findField.setAttribute("data-status",e),this.findMsg.textContent=d},open:function(){this.opened||(this.opened=!0,this.toggleButton.classList.add("toggled"),this.bar.classList.remove("hidden")),this.findField.select(),this.findField.focus()},close:function(){this.opened&&(this.opened=!1,this.toggleButton.classList.remove("toggled"),this.bar.classList.add("hidden"),this.findController.active=!1)},toggle:function(){this.opened?this.close():this.open()}},a}(),FindStates={FIND_FOUND:0,FIND_NOTFOUND:1,FIND_WRAPPED:2,FIND_PENDING:3},PDFFindController=function(){function a(a){var b,c,d,e;for(this.startedTextExtraction=!1,this.extractTextPromises=[],this.pendingFindMatches={},this.active=!1,this.pageContents=[],this.pageMatches=[],this.selected={pageIdx:-1,matchIdx:-1},this.offset={pageIdx:null,matchIdx:null},this.pagesToSearch=null,this.resumePageIdx=null,this.state=null,this.dirtyMatch=!1,this.findTimeout=null,this.pdfViewer=a.pdfViewer||null,this.integratedFind=a.integratedFind||!1,this.charactersToNormalize={"‘":"'","’":"'","‚":"'","‛":"'","“":'"',"”":'"',"„":'"',"‟":'"',"¼":"1/4","½":"1/2","¾":"3/4"},this.findBar=a.findBar||null,b=Object.keys(this.charactersToNormalize).join(""),this.normalizationRegex=new RegExp("["+b+"]","g"),c=["find","findagain","findhighlightallchange","findcasesensitivitychange"],this.firstPagePromise=new Promise(function(a){this.resolveFirstPage=a}.bind(this)),this.handleEvent=this.handleEvent.bind(this),d=0,e=c.length;e>d;d++)window.addEventListener(c[d],this.handleEvent)}return a.prototype={setFindBar:function(a){this.findBar=a},reset:function(){this.startedTextExtraction=!1,this.extractTextPromises=[],this.active=!1},normalize:function(a){var b=this;return a.replace(this.normalizationRegex,function(a){return b.charactersToNormalize[a]})},calcFindMatch:function(a){var f,g,b=this.normalize(this.pageContents[a]),c=this.normalize(this.state.query),d=this.state.caseSensitive,e=c.length;if(0!==e){for(d||(b=b.toLowerCase(),c=c.toLowerCase()),f=[],g=-e;;){if(g=b.indexOf(c,g+e),-1===g)break;f.push(g)}this.pageMatches[a]=f,this.updatePage(a),this.resumePageIdx===a&&(this.resumePageIdx=null,this.nextPageMatch())}},extractText:function(){function e(b){d.pdfViewer.getPageTextContent(b).then(function(c){var h,i,f=c.items,g=[];for(h=0,i=f.length;i>h;h++)g.push(f[h].str);d.pageContents.push(g.join("")),a[b](b),b+1<d.pdfViewer.pagesCount&&e(b+1)})}var a,b,c,d;if(!this.startedTextExtraction){for(this.startedTextExtraction=!0,this.pageContents=[],a=[],b=this.pdfViewer.pagesCount,c=0;b>c;c++)this.extractTextPromises.push(new Promise(function(b){a.push(b)}));d=this,e(0)}},handleEvent:function(a){(null===this.state||"findagain"!==a.type)&&(this.dirtyMatch=!0),this.state=a.detail,this.updateUIState(FindStates.FIND_PENDING),this.firstPagePromise.then(function(){this.extractText(),clearTimeout(this.findTimeout),"find"===a.type?this.findTimeout=setTimeout(this.nextMatch.bind(this),250):this.nextMatch()}.bind(this))},updatePage:function(a){var b=this.pdfViewer.getPageView(a);this.selected.pageIdx===a&&this.pdfViewer.scrollPageIntoView(a+1),b.textLayer&&b.textLayer.updateMatches()},nextMatch:function(){var d,e,f,g,a=this.state.findPrevious,b=this.pdfViewer.currentPageNumber-1,c=this.pdfViewer.pagesCount;if(this.active=!0,this.dirtyMatch)for(this.dirtyMatch=!1,this.selected.pageIdx=this.selected.matchIdx=-1,this.offset.pageIdx=b,this.offset.matchIdx=null,this.hadMatch=!1,this.resumePageIdx=null,this.pageMatches=[],d=this,e=0;c>e;e++)this.updatePage(e),e in this.pendingFindMatches||(this.pendingFindMatches[e]=!0,this.extractTextPromises[e].then(function(a){delete d.pendingFindMatches[a],d.calcFindMatch(a)}));if(""===this.state.query)return this.updateUIState(FindStates.FIND_FOUND),void 0;if(!this.resumePageIdx){if(f=this.offset,this.pagesToSearch=c,null!==f.matchIdx){if(g=this.pageMatches[f.pageIdx].length,!a&&f.matchIdx+1<g||a&&f.matchIdx>0)return this.hadMatch=!0,f.matchIdx=a?f.matchIdx-1:f.matchIdx+1,this.updateMatch(!0),void 0;this.advanceOffsetPage(a)}this.nextPageMatch()}},matchesReady:function(a){var b=this.offset,c=a.length,d=this.state.findPrevious;return c?(this.hadMatch=!0,b.matchIdx=d?c-1:0,this.updateMatch(!0),!0):(this.advanceOffsetPage(d),b.wrapped&&(b.matchIdx=null,this.pagesToSearch<0)?(this.updateMatch(!1),!0):!1)},nextPageMatch:function(){var a,b;null!==this.resumePageIdx&&console.error("There can only be one pending page.");do if(a=this.offset.pageIdx,b=this.pageMatches[a],!b){this.resumePageIdx=a;break}while(!this.matchesReady(b))},advanceOffsetPage:function(a){var b=this.offset,c=this.extractTextPromises.length;b.pageIdx=a?b.pageIdx-1:b.pageIdx+1,b.matchIdx=null,this.pagesToSearch--,(b.pageIdx>=c||b.pageIdx<0)&&(b.pageIdx=a?c-1:0,b.wrapped=!0)},updateMatch:function(a){var d,b=FindStates.FIND_NOTFOUND,c=this.offset.wrapped;this.offset.wrapped=!1,a&&(d=this.selected.pageIdx,this.selected.pageIdx=this.offset.pageIdx,this.selected.matchIdx=this.offset.matchIdx,b=c?FindStates.FIND_WRAPPED:FindStates.FIND_FOUND,-1!==d&&d!==this.selected.pageIdx&&this.updatePage(d)),this.updateUIState(b,this.state.findPrevious),-1!==this.selected.pageIdx&&this.updatePage(this.selected.pageIdx)},updateUIState:function(a,b){if(this.integratedFind)return FirefoxCom.request("updateFindControlState",{result:a,findPrevious:b}),void 0;if(null===this.findBar)throw new Error("PDFFindController is not initialized with a PDFFindBar instance.");this.findBar.updateUIState(a,b)}},a}(),PDFHistory={initialized:!1,initialDestination:null,initialize:function(a,b){function e(){var b,a=d._getPreviousParams(null,!0);a&&(b=!d.current.dest&&d.current.hash!==d.previousHash,d._pushToHistory(a,!1,b),d._updatePreviousBookmark()),window.removeEventListener("beforeunload",e,!1)}var c,d;this.initialized=!0,this.reInitialized=!1,this.allowHashChange=!0,this.historyUnlocked=!0,this.previousHash=window.location.hash.substring(1),this.currentBookmark="",this.currentPage=0,this.updatePreviousBookmark=!1,this.previousBookmark="",this.previousPage=0,this.nextHashParam="",this.fingerprint=a,this.linkService=b,this.currentUid=this.uid=0,this.current={},c=window.history.state,this._isStateObjectDefined(c)?(c.target.dest?this.initialDestination=c.target.dest:b.setHash(c.target.hash),this.currentUid=c.uid,this.uid=c.uid+1,this.current=c.target):(c&&c.fingerprint&&this.fingerprint!==c.fingerprint&&(this.reInitialized=!0),this._pushOrReplaceState({fingerprint:this.fingerprint},!0)),d=this,window.addEventListener("popstate",function(a){if(a.preventDefault(),a.stopPropagation(),d.historyUnlocked)if(a.state)d._goTo(a.state);else{if(d.previousHash=window.location.hash.substring(1),0===d.uid){var b=d.previousHash&&d.currentBookmark&&d.previousHash!==d.currentBookmark?{hash:d.currentBookmark,page:d.currentPage}:{page:1};d.historyUnlocked=!1,d.allowHashChange=!1,window.history.back(),d._pushToHistory(b,!1,!0),window.history.forward(),d.historyUnlocked=!0}d._pushToHistory({hash:d.previousHash},!1,!0),d._updatePreviousBookmark()}},!1),window.addEventListener("beforeunload",e,!1),window.addEventListener("pageshow",function(){window.addEventListener("beforeunload",e,!1)},!1)},_isStateObjectDefined:function(a){return a&&a.uid>=0&&a.fingerprint&&this.fingerprint===a.fingerprint&&a.target&&a.target.hash?!0:!1},_pushOrReplaceState:function(a,b){b?window.history.replaceState(a,"",document.URL):window.history.pushState(a,"",document.URL)},get isHashChangeUnlocked(){if(!this.initialized)return!0;var a=this.allowHashChange;return this.allowHashChange=!0,a},_updatePreviousBookmark:function(){this.updatePreviousBookmark&&this.currentBookmark&&this.currentPage&&(this.previousBookmark=this.currentBookmark,this.previousPage=this.currentPage,this.updatePreviousBookmark=!1)},updateCurrentBookmark:function(a,b){this.initialized&&(this.currentBookmark=a.substring(1),this.currentPage=0|b,this._updatePreviousBookmark())},updateNextHashParam:function(a){this.initialized&&(this.nextHashParam=a)},push:function(a,b){if(this.initialized&&this.historyUnlocked){if(a.dest&&!a.hash&&(a.hash=this.current.hash&&this.current.dest&&this.current.dest===a.dest?this.current.hash:this.linkService.getDestinationHash(a.dest).split("#")[1]),a.page&&(a.page|=0),b){var c=window.history.state.target;return c||(this._pushToHistory(a,!1),this.previousHash=window.location.hash.substring(1)),this.updatePreviousBookmark=this.nextHashParam?!1:!0,c&&this._updatePreviousBookmark(),void 0}if(this.nextHashParam){if(this.nextHashParam===a.hash)return this.nextHashParam=null,this.updatePreviousBookmark=!0,void 0;this.nextHashParam=null}a.hash?this.current.hash?this.current.hash!==a.hash?this._pushToHistory(a,!0):(!this.current.page&&a.page&&this._pushToHistory(a,!1,!0),this.updatePreviousBookmark=!0):this._pushToHistory(a,!0):this.current.page&&a.page&&this.current.page!==a.page&&this._pushToHistory(a,!0)}},_getPreviousParams:function(a,b){if(!this.currentBookmark||!this.currentPage)return null;if(this.updatePreviousBookmark&&(this.updatePreviousBookmark=!1),this.uid>0&&(!this.previousBookmark||!this.previousPage))return null;if(!this.current.dest&&!a||b){if(this.previousBookmark===this.currentBookmark)return null}else{if(!this.current.page&&!a)return null;if(this.previousPage===this.currentPage)return null}var c={hash:this.currentBookmark,page:this.currentPage};return PresentationMode.active&&(c.hash=null),c},_stateObj:function(a){return{fingerprint:this.fingerprint,uid:this.uid,target:a}},_pushToHistory:function(a,b,c){var d,e;this.initialized&&(!a.hash&&a.page&&(a.hash="page="+a.page),b&&!c&&(d=this._getPreviousParams(),d&&(e=!this.current.dest&&this.current.hash!==this.previousHash,this._pushToHistory(d,!1,e))),this._pushOrReplaceState(this._stateObj(a),c||0===this.uid),this.currentUid=this.uid++,this.current=a,this.updatePreviousBookmark=!0)},_goTo:function(a){var b,c;if(this.initialized&&this.historyUnlocked&&this._isStateObjectDefined(a)){if(!this.reInitialized&&a.uid<this.currentUid&&(b=this._getPreviousParams(!0)))return this._pushToHistory(this.current,!1),this._pushToHistory(b,!1),this.currentUid=a.uid,window.history.back(),void 0;this.historyUnlocked=!1,a.target.dest?this.linkService.navigateTo(a.target.dest):this.linkService.setHash(a.target.hash),this.currentUid=a.uid,a.uid>this.uid&&(this.uid=a.uid),this.current=a.target,this.updatePreviousBookmark=!0,c=window.location.hash.substring(1),this.previousHash!==c&&(this.allowHashChange=!1),this.previousHash=c,this.historyUnlocked=!0}},back:function(){this.go(-1)},forward:function(){this.go(1)},go:function(a){if(this.initialized&&this.historyUnlocked){var b=window.history.state;-1===a&&b&&b.uid>0?window.history.back():1===a&&b&&b.uid<this.uid-1&&window.history.forward()}}},SecondaryToolbar={opened:!1,previousContainerHeight:null,newContainerHeight:null,initialize:function(a){var b,c,d;this.toolbar=a.toolbar,this.presentationMode=a.presentationMode,this.documentProperties=a.documentProperties,this.buttonContainer=this.toolbar.firstElementChild,this.toggleButton=a.toggleButton,this.presentationModeButton=a.presentationModeButton,this.print=a.print,this.download=a.download,this.viewBookmark=a.viewBookmark,this.firstPage=a.firstPage,this.lastPage=a.lastPage,this.pageRotateCw=a.pageRotateCw,this.pageRotateCcw=a.pageRotateCcw,this.documentPropertiesButton=a.documentPropertiesButton,b=[{element:this.toggleButton,handler:this.toggle},{element:this.presentationModeButton,handler:this.presentationModeClick},{element:this.print,handler:this.printClick},{element:this.download,handler:this.downloadClick},{element:this.viewBookmark,handler:this.viewBookmarkClick},{element:this.firstPage,handler:this.firstPageClick},{element:this.lastPage,handler:this.lastPageClick},{element:this.pageRotateCw,handler:this.pageRotateCwClick},{element:this.pageRotateCcw,handler:this.pageRotateCcwClick},{element:this.documentPropertiesButton,handler:this.documentPropertiesClick}];for(c in b)d=b[c].element,d&&d.addEventListener("click",b[c].handler.bind(this))},presentationModeClick:function(){this.presentationMode.request(),this.close()},openFileClick:function(){document.getElementById("fileInput").click(),this.close()},printClick:function(){window.print(),this.close()},downloadClick:function(){PDFViewerApplication.download(),this.close()},viewBookmarkClick:function(){this.close()},firstPageClick:function(){PDFViewerApplication.page=1,this.close()},lastPageClick:function(){PDFViewerApplication.pdfDocument&&(PDFViewerApplication.page=PDFViewerApplication.pagesCount),this.close()},pageRotateCwClick:function(){PDFViewerApplication.rotatePages(90)},pageRotateCcwClick:function(){PDFViewerApplication.rotatePages(-90)},documentPropertiesClick:function(){this.documentProperties.open(),this.close()},setMaxHeight:function(a){a&&this.buttonContainer&&(this.newContainerHeight=a.clientHeight,this.previousContainerHeight!==this.newContainerHeight&&(this.buttonContainer.setAttribute("style","max-height: "+(this.newContainerHeight-SCROLLBAR_PADDING)+"px;"),this.previousContainerHeight=this.newContainerHeight))},open:function(){this.opened||(this.opened=!0,this.toggleButton.classList.add("toggled"),this.toolbar.classList.remove("hidden"))},close:function(a){this.opened&&(!a||this.toolbar.contains(a))&&(this.opened=!1,this.toolbar.classList.add("hidden"),this.toggleButton.classList.remove("toggled"))},toggle:function(){this.opened?this.close():this.open()}},DELAY_BEFORE_HIDING_CONTROLS=3e3,SELECTOR="presentationControls",DELAY_BEFORE_RESETTING_SWITCH_IN_PROGRESS=1e3,PresentationMode={active:!1,args:null,contextMenuOpen:!1,prevCoords:{x:null,y:null},initialize:function(a){this.container=a.container,this.secondaryToolbar=a.secondaryToolbar,this.viewer=this.container.firstElementChild,this.firstPage=a.firstPage,this.lastPage=a.lastPage,this.pageRotateCw=a.pageRotateCw,this.pageRotateCcw=a.pageRotateCcw,this.firstPage.addEventListener("click",function(){this.contextMenuOpen=!1,this.secondaryToolbar.firstPageClick()
}.bind(this)),this.lastPage.addEventListener("click",function(){this.contextMenuOpen=!1,this.secondaryToolbar.lastPageClick()}.bind(this)),this.pageRotateCw.addEventListener("click",function(){this.contextMenuOpen=!1,this.secondaryToolbar.pageRotateCwClick()}.bind(this)),this.pageRotateCcw.addEventListener("click",function(){this.contextMenuOpen=!1,this.secondaryToolbar.pageRotateCcwClick()}.bind(this))},get isFullscreen(){return document.fullscreenElement||document.mozFullScreen||document.webkitIsFullScreen||document.msFullscreenElement},_setSwitchInProgress:function(){this.switchInProgress&&clearTimeout(this.switchInProgress),this.switchInProgress=setTimeout(function(){delete this.switchInProgress,this._notifyStateChange()}.bind(this),DELAY_BEFORE_RESETTING_SWITCH_IN_PROGRESS)},_resetSwitchInProgress:function(){this.switchInProgress&&(clearTimeout(this.switchInProgress),delete this.switchInProgress)},request:function(){if(!PDFViewerApplication.supportsFullscreen||this.isFullscreen||!this.viewer.hasChildNodes())return!1;if(this._setSwitchInProgress(),this._notifyStateChange(),this.container.requestFullscreen)this.container.requestFullscreen();else if(this.container.mozRequestFullScreen)this.container.mozRequestFullScreen();else if(this.container.webkitRequestFullScreen)this.container.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT);else{if(!this.container.msRequestFullscreen)return!1;this.container.msRequestFullscreen()}return this.args={page:PDFViewerApplication.page,previousScale:PDFViewerApplication.currentScaleValue},!0},_notifyStateChange:function(){var a=document.createEvent("CustomEvent");a.initCustomEvent("presentationmodechanged",!0,!0,{active:PresentationMode.active,switchInProgress:!!PresentationMode.switchInProgress}),window.dispatchEvent(a)},enter:function(){this.active=!0,this._resetSwitchInProgress(),this._notifyStateChange(),setTimeout(function(){PDFViewerApplication.page=this.args.page,PDFViewerApplication.setScale("page-fit",!0)}.bind(this),0),window.addEventListener("mousemove",this.mouseMove,!1),window.addEventListener("mousedown",this.mouseDown,!1),window.addEventListener("contextmenu",this.contextMenu,!1),this.showControls(),HandTool.enterPresentationMode(),this.contextMenuOpen=!1,this.container.setAttribute("contextmenu","viewerContextMenu"),window.getSelection().removeAllRanges()},exit:function(){var a=PDFViewerApplication.page;setTimeout(function(){this.active=!1,this._notifyStateChange(),PDFViewerApplication.setScale(this.args.previousScale,!0),PDFViewerApplication.page=a,this.args=null}.bind(this),0),window.removeEventListener("mousemove",this.mouseMove,!1),window.removeEventListener("mousedown",this.mouseDown,!1),window.removeEventListener("contextmenu",this.contextMenu,!1),this.hideControls(),PDFViewerApplication.clearMouseScrollState(),HandTool.exitPresentationMode(),this.container.removeAttribute("contextmenu"),this.contextMenuOpen=!1,scrollIntoView(document.getElementById("thumbnailContainer"+a))},showControls:function(){this.controlsTimeout?clearTimeout(this.controlsTimeout):this.container.classList.add(SELECTOR),this.controlsTimeout=setTimeout(function(){this.container.classList.remove(SELECTOR),delete this.controlsTimeout}.bind(this),DELAY_BEFORE_HIDING_CONTROLS)},hideControls:function(){this.controlsTimeout&&(this.container.classList.remove(SELECTOR),clearTimeout(this.controlsTimeout),delete this.controlsTimeout)},mouseMove:function(a){var b={x:a.clientX,y:a.clientY},c=PresentationMode.prevCoords;PresentationMode.prevCoords=b,(b.x!==c.x||b.y!==c.y)&&PresentationMode.showControls()},mouseDown:function(a){var c,b=PresentationMode;return b.contextMenuOpen?(b.contextMenuOpen=!1,a.preventDefault(),void 0):(0===a.button&&(c=a.target.href&&a.target.classList.contains("internalLink"),c||(a.preventDefault(),PDFViewerApplication.page+=a.shiftKey?-1:1)),void 0)},contextMenu:function(){PresentationMode.contextMenuOpen=!0}},function(){function a(){PresentationMode.isFullscreen?PresentationMode.enter():PresentationMode.exit()}window.addEventListener("fullscreenchange",a,!1),window.addEventListener("mozfullscreenchange",a,!1),window.addEventListener("webkitfullscreenchange",a,!1),window.addEventListener("MSFullscreenChange",a,!1)}(),GrabToPan=function(){function a(a){this.element=a.element,this.document=a.element.ownerDocument,"function"==typeof a.ignoreTarget&&(this.ignoreTarget=a.ignoreTarget),this.onActiveChanged=a.onActiveChanged,this.activate=this.activate.bind(this),this.deactivate=this.deactivate.bind(this),this.toggle=this.toggle.bind(this),this._onmousedown=this._onmousedown.bind(this),this._onmousemove=this._onmousemove.bind(this),this._endPan=this._endPan.bind(this);var b=this.overlay=document.createElement("div");b.className="grab-to-pan-grabbing"}function g(a){return"buttons"in a&&c?!(1|a.buttons):e||f?0===a.which:void 0}var b,c,d,e,f;return a.prototype={CSS_CLASS_GRAB:"grab-to-pan-grab",activate:function(){this.active||(this.active=!0,this.element.addEventListener("mousedown",this._onmousedown,!0),this.element.classList.add(this.CSS_CLASS_GRAB),this.onActiveChanged&&this.onActiveChanged(!0))},deactivate:function(){this.active&&(this.active=!1,this.element.removeEventListener("mousedown",this._onmousedown,!0),this._endPan(),this.element.classList.remove(this.CSS_CLASS_GRAB),this.onActiveChanged&&this.onActiveChanged(!1))},toggle:function(){this.active?this.deactivate():this.activate()},ignoreTarget:function(a){return a[b]("a[href], a[href] *, input, textarea, button, button *, select, option")},_onmousedown:function(a){if(0===a.button&&!this.ignoreTarget(a.target)){if(a.originalTarget)try{a.originalTarget.tagName}catch(b){return}this.scrollLeftStart=this.element.scrollLeft,this.scrollTopStart=this.element.scrollTop,this.clientXStart=a.clientX,this.clientYStart=a.clientY,this.document.addEventListener("mousemove",this._onmousemove,!0),this.document.addEventListener("mouseup",this._endPan,!0),this.element.addEventListener("scroll",this._endPan,!0),a.preventDefault(),a.stopPropagation(),this.document.documentElement.classList.add(this.CSS_CLASS_GRABBING);var c=document.activeElement;c&&!c.contains(a.target)&&c.blur()}},_onmousemove:function(a){var b,c;return this.element.removeEventListener("scroll",this._endPan,!0),g(a)?(this._endPan(),void 0):(b=a.clientX-this.clientXStart,c=a.clientY-this.clientYStart,this.element.scrollTop=this.scrollTopStart-c,this.element.scrollLeft=this.scrollLeftStart-b,this.overlay.parentNode||document.body.appendChild(this.overlay),void 0)},_endPan:function(){this.element.removeEventListener("scroll",this._endPan,!0),this.document.removeEventListener("mousemove",this._onmousemove,!0),this.document.removeEventListener("mouseup",this._endPan,!0),this.overlay.parentNode&&this.overlay.parentNode.removeChild(this.overlay)}},["webkitM","mozM","msM","oM","m"].some(function(a){var c=a+"atches";return c in document.documentElement&&(b=c),c+="Selector",c in document.documentElement&&(b=c),b}),c=!document.documentMode||document.documentMode>9,d=window.chrome,e=d&&(d.webstore||d.app),f=/Apple/.test(navigator.vendor)&&/Version\/([6-9]\d*|[1-5]\d+)/.test(navigator.userAgent),a}(),HandTool={initialize:function(a){var b=a.toggleHandTool;this.handTool=new GrabToPan({element:a.container,onActiveChanged:function(a){b&&(a?(b.title=mozL10n.get("hand_tool_disable.title",null,"Disable hand tool"),b.firstElementChild.textContent=mozL10n.get("hand_tool_disable_label",null,"Disable hand tool")):(b.title=mozL10n.get("hand_tool_enable.title",null,"Enable hand tool"),b.firstElementChild.textContent=mozL10n.get("hand_tool_enable_label",null,"Enable hand tool")))}}),b&&(b.addEventListener("click",this.toggle.bind(this),!1),window.addEventListener("localized",function(){Preferences.get("enableHandToolOnLoad").then(function(a){a&&this.handTool.activate()}.bind(this),function(){})}.bind(this)))},toggle:function(){this.handTool.toggle(),SecondaryToolbar.close()},enterPresentationMode:function(){this.handTool.active&&(this.wasActive=!0,this.handTool.deactivate())},exitPresentationMode:function(){this.wasActive&&(this.wasActive=null,this.handTool.activate())}},OverlayManager={overlays:{},active:null,register:function(a,b,c){return new Promise(function(d){var e,f;if(!(a&&(e=document.getElementById(a))&&(f=e.parentNode)))throw new Error("Not enough parameters.");if(this.overlays[a])throw new Error("The overlay is already registered.");this.overlays[a]={element:e,container:f,callerCloseMethod:b||null,canForceClose:c||!1},d()}.bind(this))},unregister:function(a){return new Promise(function(b){if(!this.overlays[a])throw new Error("The overlay does not exist.");if(this.active===a)throw new Error("The overlay cannot be removed while it is active.");delete this.overlays[a],b()}.bind(this))},open:function(a){return new Promise(function(b){if(!this.overlays[a])throw new Error("The overlay does not exist.");if(this.active){if(!this.overlays[a].canForceClose)throw this.active===a?new Error("The overlay is already active."):new Error("Another overlay is currently active.");this._closeThroughCaller()}this.active=a,this.overlays[this.active].element.classList.remove("hidden"),this.overlays[this.active].container.classList.remove("hidden"),window.addEventListener("keydown",this._keyDown),b()}.bind(this))},close:function(a){return new Promise(function(b){if(!this.overlays[a])throw new Error("The overlay does not exist.");if(!this.active)throw new Error("The overlay is currently not active.");if(this.active!==a)throw new Error("Another overlay is currently active.");this.overlays[this.active].container.classList.add("hidden"),this.overlays[this.active].element.classList.add("hidden"),this.active=null,window.removeEventListener("keydown",this._keyDown),b()}.bind(this))},_keyDown:function(a){var b=OverlayManager;b.active&&27===a.keyCode&&(b._closeThroughCaller(),a.preventDefault())},_closeThroughCaller:function(){this.overlays[this.active].callerCloseMethod&&this.overlays[this.active].callerCloseMethod(),this.active&&this.close(this.active)}},PasswordPrompt={overlayName:null,updatePassword:null,reason:null,passwordField:null,passwordText:null,passwordSubmit:null,passwordCancel:null,initialize:function(a){this.overlayName=a.overlayName,this.passwordField=a.passwordField,this.passwordText=a.passwordText,this.passwordSubmit=a.passwordSubmit,this.passwordCancel=a.passwordCancel,this.passwordSubmit.addEventListener("click",this.verifyPassword.bind(this)),this.passwordCancel.addEventListener("click",this.close.bind(this)),this.passwordField.addEventListener("keydown",function(a){13===a.keyCode&&this.verifyPassword()}.bind(this)),OverlayManager.register(this.overlayName,this.close.bind(this),!0)},open:function(){OverlayManager.open(this.overlayName).then(function(){this.passwordField.focus();var a=mozL10n.get("password_label",null,"Enter the password to open this PDF file.");this.reason===PDFJS.PasswordResponses.INCORRECT_PASSWORD&&(a=mozL10n.get("password_invalid",null,"Invalid password. Please try again.")),this.passwordText.textContent=a}.bind(this))},close:function(){OverlayManager.close(this.overlayName).then(function(){this.passwordField.value=""}.bind(this))},verifyPassword:function(){var a=this.passwordField.value;return a&&a.length>0?(this.close(),this.updatePassword(a)):void 0}},DocumentProperties={overlayName:null,rawFileSize:0,fileNameField:null,fileSizeField:null,titleField:null,authorField:null,subjectField:null,keywordsField:null,creationDateField:null,modificationDateField:null,creatorField:null,producerField:null,versionField:null,pageCountField:null,url:null,pdfDocument:null,initialize:function(a){this.overlayName=a.overlayName,this.fileNameField=a.fileNameField,this.fileSizeField=a.fileSizeField,this.titleField=a.titleField,this.authorField=a.authorField,this.subjectField=a.subjectField,this.keywordsField=a.keywordsField,this.creationDateField=a.creationDateField,this.modificationDateField=a.modificationDateField,this.creatorField=a.creatorField,this.producerField=a.producerField,this.versionField=a.versionField,this.pageCountField=a.pageCountField,a.closeButton&&a.closeButton.addEventListener("click",this.close.bind(this)),this.dataAvailablePromise=new Promise(function(a){this.resolveDataAvailable=a}.bind(this)),OverlayManager.register(this.overlayName,this.close.bind(this))},getProperties:function(){OverlayManager.active&&(this.pdfDocument.getDownloadInfo().then(function(a){a.length!==this.rawFileSize&&(this.setFileSize(a.length),this.updateUI(this.fileSizeField,this.parseFileSize()))}.bind(this)),this.pdfDocument.getMetadata().then(function(a){var c,d,b=[{field:this.fileNameField,content:getPDFFileNameFromURL(this.url)},{field:this.fileSizeField,content:this.parseFileSize()},{field:this.titleField,content:a.info.Title},{field:this.authorField,content:a.info.Author},{field:this.subjectField,content:a.info.Subject},{field:this.keywordsField,content:a.info.Keywords},{field:this.creationDateField,content:this.parseDate(a.info.CreationDate)},{field:this.modificationDateField,content:this.parseDate(a.info.ModDate)},{field:this.creatorField,content:a.info.Creator},{field:this.producerField,content:a.info.Producer},{field:this.versionField,content:a.info.PDFFormatVersion},{field:this.pageCountField,content:this.pdfDocument.numPages}];for(c in b)d=b[c],this.updateUI(d.field,d.content)}.bind(this)))},updateUI:function(a,b){a&&void 0!==b&&""!==b&&(a.textContent=b)},setFileSize:function(a){a>0&&(this.rawFileSize=a)},parseFileSize:function(){var a=this.rawFileSize,b=a/1024;return b?1024>b?mozL10n.get("document_properties_kb",{size_kb:(+b.toPrecision(3)).toLocaleString(),size_b:a.toLocaleString()},"{{size_kb}} KB ({{size_b}} bytes)"):mozL10n.get("document_properties_mb",{size_mb:(+(b/1024).toPrecision(3)).toLocaleString(),size_b:a.toLocaleString()},"{{size_mb}} MB ({{size_b}} bytes)"):void 0},open:function(){Promise.all([OverlayManager.open(this.overlayName),this.dataAvailablePromise]).then(function(){this.getProperties()}.bind(this))},close:function(){OverlayManager.close(this.overlayName)},parseDate:function(a){var c,d,e,f,g,h,i,j,k,l,m,n,b=a;return void 0===b?"":("D:"===b.substring(0,2)&&(b=b.substring(2)),c=parseInt(b.substring(0,4),10),d=parseInt(b.substring(4,6),10)-1,e=parseInt(b.substring(6,8),10),f=parseInt(b.substring(8,10),10),g=parseInt(b.substring(10,12),10),h=parseInt(b.substring(12,14),10),i=b.substring(14,15),j=parseInt(b.substring(15,17),10),k=parseInt(b.substring(18,20),10),"-"===i?(f+=j,g+=k):"+"===i&&(f-=j,g-=k),l=new Date(Date.UTC(c,d,e,f,g,h)),m=l.toLocaleDateString(),n=l.toLocaleTimeString(),mozL10n.get("document_properties_date_string",{date:m,time:n},"{{date}}, {{time}}"))}},PresentationModeState={UNKNOWN:0,NORMAL:1,CHANGING:2,FULLSCREEN:3},IGNORE_CURRENT_POSITION_ON_ZOOM=!1,CLEANUP_TIMEOUT=3e4,RenderingStates={INITIAL:0,RUNNING:1,PAUSED:2,FINISHED:3},PDFRenderingQueue=function(){function a(){this.pdfViewer=null,this.pdfThumbnailViewer=null,this.onIdle=null,this.highestPriorityPage=null,this.idleTimeout=null,this.printing=!1,this.isThumbnailViewEnabled=!1}return a.prototype={setViewer:function(a){this.pdfViewer=a},setThumbnailViewer:function(a){this.pdfThumbnailViewer=a},isHighestPriority:function(a){return this.highestPriorityPage===a.renderingId},renderHighestPriority:function(a){this.idleTimeout&&(clearTimeout(this.idleTimeout),this.idleTimeout=null),this.pdfViewer.forceRendering(a)||this.pdfThumbnailViewer&&this.isThumbnailViewEnabled&&this.pdfThumbnailViewer.forceRendering()||this.printing||this.onIdle&&(this.idleTimeout=setTimeout(this.onIdle.bind(this),CLEANUP_TIMEOUT))},getHighestPriority:function(a,b,c){var f,g,h,i,d=a.views,e=d.length;if(0===e)return!1;for(f=0;e>f;++f)if(g=d[f].view,!this.isViewFinished(g))return g;if(c){if(h=a.last.id,b[h]&&!this.isViewFinished(b[h]))return b[h]}else if(i=a.first.id-2,b[i]&&!this.isViewFinished(b[i]))return b[i];return null},isViewFinished:function(a){return a.renderingState===RenderingStates.FINISHED},renderView:function(a){var b=a.renderingState;switch(b){case RenderingStates.FINISHED:return!1;case RenderingStates.PAUSED:this.highestPriorityPage=a.renderingId,a.resume();break;case RenderingStates.RUNNING:this.highestPriorityPage=a.renderingId;break;case RenderingStates.INITIAL:this.highestPriorityPage=a.renderingId,a.draw(this.renderHighestPriority.bind(this))}return!0}},a}(),PageView=function(a,b,c,d,e,f,g,h,i){function m(a,b,c){function d(a,b){a.href=e.getDestinationHash(b),a.onclick=function(){return b&&e.navigateTo(b),!1},b&&(a.className="internalLink")}function f(a,b){a.href=e.getAnchorUrl(""),a.onclick=function(){return e.executeNamedAction(b),!1},a.className="internalLink"}b.getAnnotations().then(function(e){var g,h,i,j,k,m,n,o,p,q,r;if(c=c.clone({dontFlip:!0}),g=c.transform,h="matrix("+g.join(",")+")",l.annotationLayer){for(k=0,m=e.length;m>k;k++)i=e[k],j=l.annotationLayer.querySelector('[data-annotation-id="'+i.id+'"]'),j&&CustomStyle.setProp("transform",j,h);l.annotationLayer.removeAttribute("hidden")}else for(k=0,m=e.length;m>k;k++)i=e[k],i&&i.hasHtml&&(j=PDFJS.AnnotationUtils.getHtmlElement(i,b.commonObjs),j.setAttribute("data-annotation-id",i.id),mozL10n.translate(j),n=i.rect,o=b.view,n=PDFJS.Util.normalizeRect([n[0],o[3]-n[1]+o[1],n[2],o[3]-n[3]+o[1]]),j.style.left=n[0]+"px",j.style.top=n[1]+"px",j.style.position="absolute",CustomStyle.setProp("transform",j,h),p=-n[0]+"px "+-n[1]+"px",CustomStyle.setProp("transformOrigin",j,p),"Link"!==i.subtype||i.url||(q=j.getElementsByTagName("a")[0],q&&(i.action?f(q,i.action):d(q,"dest"in i?i.dest:null))),l.annotationLayer||(r=document.createElement("div"),r.className="annotationLayer",a.appendChild(r),l.annotationLayer=r),l.annotationLayer.appendChild(j))})}var j,k,l;this.id=b,this.renderingId="page"+b,this.rotation=0,this.scale=c||1,this.viewport=d,this.pdfPageRotate=d.rotation,this.hasRestrictedScaling=!1,this.linkService=e,this.renderingQueue=f,this.cache=g,this.pageSource=h,this.viewer=i,this.renderingState=RenderingStates.INITIAL,this.resume=null,this.textLayer=null,this.zoomLayer=null,this.annotationLayer=null,j=document.createElement("a"),j.name=""+this.id,k=this.el=document.createElement("div"),k.id="pageContainer"+this.id,k.className="page",k.style.width=Math.floor(this.viewport.width)+"px",k.style.height=Math.floor(this.viewport.height)+"px",a.appendChild(j),a.appendChild(k),this.setPdfPage=function(a){this.pdfPage=a,this.pdfPageRotate=a.rotate;var b=(this.rotation+this.pdfPageRotate)%360;this.viewport=a.getViewport(this.scale*CSS_UNITS,b),this.stats=a.stats,this.reset()},this.destroy=function(){this.zoomLayer=null,this.reset(),this.pdfPage&&this.pdfPage.destroy()},this.reset=function(a){var b,c,d;for(this.renderTask&&this.renderTask.cancel(),this.resume=null,this.renderingState=RenderingStates.INITIAL,k.style.width=Math.floor(this.viewport.width)+"px",k.style.height=Math.floor(this.viewport.height)+"px",b=k.childNodes,c=k.childNodes.length-1;c>=0;c--)d=b[c],this.zoomLayer&&this.zoomLayer===d||a&&this.annotationLayer===d||k.removeChild(d);k.removeAttribute("data-loaded"),a?this.annotationLayer&&this.annotationLayer.setAttribute("hidden","true"):this.annotationLayer=null,this.canvas&&(this.canvas.width=0,this.canvas.height=0,delete this.canvas),this.loadingIconDiv=document.createElement("div"),this.loadingIconDiv.className="loadingIcon",k.appendChild(this.loadingIconDiv)},this.update=function(a,b){var c,d,e,f,g;return this.scale=a||this.scale,"undefined"!=typeof b&&(this.rotation=b),c=(this.rotation+this.pdfPageRotate)%360,this.viewport=this.viewport.clone({scale:this.scale*CSS_UNITS,rotation:c}),d=!1,this.canvas&&PDFJS.maxCanvasPixels>0&&(e=this.canvas.getContext("2d"),f=getOutputScale(e),g=this.viewport.width*this.viewport.height,Math.sqrt(PDFJS.maxCanvasPixels/g),(0|Math.floor(this.viewport.width)*f.sx)*(0|Math.floor(this.viewport.height)*f.sy)>PDFJS.maxCanvasPixels&&(d=!0)),this.canvas&&(PDFJS.useOnlyCssZoom||this.hasRestrictedScaling&&d)?(this.cssTransform(this.canvas,!0),void 0):(this.canvas&&!this.zoomLayer&&(this.zoomLayer=this.canvas.parentNode,this.zoomLayer.style.position="absolute"),this.zoomLayer&&this.cssTransform(this.zoomLayer.firstChild),this.reset(!0),void 0)},this.cssTransform=function(a,b){var e,f,g,h,i,j,l,n,o,p,q,r,c=this.viewport.width,d=this.viewport.height;if(a.style.width=a.parentNode.style.width=k.style.width=Math.floor(c)+"px",a.style.height=a.parentNode.style.height=k.style.height=Math.floor(d)+"px",e=this.viewport.rotation-a._viewport.rotation,f=Math.abs(e),g=1,h=1,(90===f||270===f)&&(g=d/c,h=c/d),i="rotate("+e+"deg) "+"scale("+g+","+h+")",CustomStyle.setProp("transform",a,i),this.textLayer){switch(j=this.textLayer.viewport,l=this.viewport.rotation-j.rotation,n=Math.abs(l),o=c/j.width,(90===n||270===n)&&(o=c/j.height),p=this.textLayer.textLayerDiv,n){case 0:q=r=0;break;case 90:q=0,r="-"+p.style.height;break;case 180:q="-"+p.style.width,r="-"+p.style.height;break;case 270:q="-"+p.style.width,r=0;break;default:console.error("Bad rotation value.")}CustomStyle.setProp("transform",p,"rotate("+n+"deg) "+"scale("+o+", "+o+") "+"translate("+q+", "+r+")"),CustomStyle.setProp("transformOrigin",p,"0% 0%")}b&&this.annotationLayer&&m(k,this.pdfPage,this.viewport)},Object.defineProperty(this,"width",{get:function(){return this.viewport.width},enumerable:!0}),Object.defineProperty(this,"height",{get:function(){return this.viewport.height},enumerable:!0}),l=this,this.getPagePoint=function(a,b){return this.viewport.convertToPdfPoint(a,b)},this.draw=function(a){function r(c){if(t===q.renderTask&&(q.renderTask=null),"cancelled"!==c){q.renderingState=RenderingStates.FINISHED,q.loadingIconDiv&&(k.removeChild(q.loadingIconDiv),delete q.loadingIconDiv),q.zoomLayer&&(k.removeChild(q.zoomLayer),q.zoomLayer=null),q.error=c,q.stats=b.stats,q.updateStats(),q.onAfterDraw&&q.onAfterDraw();var d=document.createEvent("CustomEvent");d.initCustomEvent("pagerender",!0,!0,{pageNumber:b.pageNumber}),k.dispatchEvent(d),a()}}var c,d,e,f,h,i,j,l,n,o,p,q,s,t,b=this.pdfPage;if(!this.pagePdfPromise){if(!b)return c=this.pageSource.getPage(),c.then(function(b){delete this.pagePdfPromise,this.setPdfPage(b),this.draw(a)}.bind(this)),this.pagePdfPromise=c,void 0;this.renderingState!==RenderingStates.INITIAL&&console.error("Must be in new state before drawing"),this.renderingState=RenderingStates.RUNNING,d=this.viewport,e=document.createElement("div"),e.style.width=k.style.width,e.style.height=k.style.height,e.classList.add("canvasWrapper"),f=document.createElement("canvas"),f.id="page"+this.id,e.appendChild(f),this.annotationLayer?k.insertBefore(e,this.annotationLayer):k.appendChild(e),this.canvas=f,h=f.getContext("2d"),i=getOutputScale(h),PDFJS.useOnlyCssZoom&&(j=d.clone({scale:CSS_UNITS}),i.sx*=j.width/d.width,i.sy*=j.height/d.height,i.scaled=!0),PDFJS.maxCanvasPixels>0&&(l=d.width*d.height,n=Math.sqrt(PDFJS.maxCanvasPixels/l),i.sx>n||i.sy>n?(i.sx=n,i.sy=n,i.scaled=!0,this.hasRestrictedScaling=!0):this.hasRestrictedScaling=!1),f.width=0|Math.floor(d.width)*i.sx,f.height=0|Math.floor(d.height)*i.sy,f.style.width=Math.floor(d.width)+"px",f.style.height=Math.floor(d.height)+"px",f._viewport=d,o=null,p=null,PDFJS.disableTextLayer||(o=document.createElement("div"),o.className="textLayer",o.style.width=f.style.width,o.style.height=f.style.height,this.annotationLayer?k.insertBefore(o,this.annotationLayer):k.appendChild(o),p=this.viewer.createTextLayerBuilder(o,this.id-1,this.viewport)),this.textLayer=p,h._scaleX=i.sx,h._scaleY=i.sy,i.scaled&&h.scale(i.sx,i.sy),q=this,s={canvasContext:h,viewport:this.viewport,continueCallback:function(a){return q.renderingQueue.isHighestPriority(q)?(a(),void 0):(q.renderingState=RenderingStates.PAUSED,q.resume=function(){q.renderingState=RenderingStates.RUNNING,a()},void 0)}},t=this.renderTask=this.pdfPage.render(s),this.renderTask.promise.then(function(){r(null),p&&q.pdfPage.getTextContent().then(function(a){p.setTextContent(a)})},function(a){r(a)}),m(k,b,this.viewport),k.setAttribute("data-loaded",!0),g.push(this)}},this.beforePrint=function(){var e,f,g,a=this.pdfPage,b=a.getViewport(1),c=2,d=document.createElement("canvas");d.width=Math.floor(b.width)*c,d.height=Math.floor(b.height)*c,d.style.width=c*b.width+"pt",d.style.height=c*b.height+"pt",e="scale("+1/c+", "+1/c+")",CustomStyle.setProp("transform",d,e),CustomStyle.setProp("transformOrigin",d,"0% 0%"),f=document.getElementById("printContainer"),g=document.createElement("div"),g.style.width=b.width+"pt",g.style.height=b.height+"pt",g.appendChild(d),f.appendChild(g),d.mozPrintCallback=function(e){var g,f=e.context;f.save(),f.fillStyle="rgb(255, 255, 255)",f.fillRect(0,0,d.width,d.height),f.restore(),f.scale(c,c),g={canvasContext:f,viewport:b,intent:"print"},a.render(g).promise.then(function(){e.done()},function(a){console.error(a),"abort"in e?e.abort():e.done()})}},this.updateStats=function(){if(this.stats&&PDFJS.pdfBug&&Stats.enabled){var a=this.stats;Stats.add(this.id,a)}}},FIND_SCROLL_OFFSET_TOP=-50,FIND_SCROLL_OFFSET_LEFT=-400,MAX_TEXT_DIVS_TO_RENDER=1e5,RENDER_DELAY=200,NonWhitespaceRegexp=/\S/,TextLayerBuilder=function(){function a(a){this.textLayerDiv=a.textLayerDiv,this.layoutDone=!1,this.divContentDone=!1,this.pageIdx=a.pageIndex,this.matches=[],this.lastScrollSource=a.lastScrollSource||null,this.viewport=a.viewport,this.isViewerInPresentationMode=a.isViewerInPresentationMode,this.textDivs=[],this.findController=a.findController||null}return a.prototype={renderLayer:function(){var f,g,h,i,j,k,l,m,n,o,a=document.createDocumentFragment(),b=this.textDivs,c=b.length,d=document.createElement("canvas"),e=d.getContext("2d");if(!(c>MAX_TEXT_DIVS_TO_RENDER)){for(h=0;c>h;h++)i=b[h],void 0===i.dataset.isWhitespace&&(j=i.style.fontSize,k=i.style.fontFamily,(j!==f||k!==g)&&(e.font=j+" "+k,f=j,g=k),l=e.measureText(i.textContent).width,l>0&&(a.appendChild(i),void 0!==i.dataset.canvasWidth?(n=i.dataset.canvasWidth/l,m="scaleX("+n+")"):m="",o=i.dataset.angle,o&&(m="rotate("+o+"deg) "+m),m&&CustomStyle.setProp("transform",i,m)));this.textLayerDiv.appendChild(a),this.renderingDone=!0,this.updateMatches()}},setupRenderLayoutTimer:function(){var a=this,b=null===this.lastScrollSource?0:this.lastScrollSource.lastScroll;Date.now()-b>RENDER_DELAY?this.renderLayer():(this.renderTimer&&clearTimeout(this.renderTimer),this.renderTimer=setTimeout(function(){a.setupRenderLayoutTimer()},RENDER_DELAY))},appendText:function(a,b){var e,f,g,h,i,j,c=b[a.fontName],d=document.createElement("div");return this.textDivs.push(d),isAllWhitespace(a.str)?(d.dataset.isWhitespace=!0,void 0):(e=PDFJS.Util.transform(this.viewport.transform,a.transform),f=Math.atan2(e[1],e[0]),c.vertical&&(f+=Math.PI/2),g=Math.sqrt(e[2]*e[2]+e[3]*e[3]),h=g,c.ascent?h=c.ascent*h:c.descent&&(h=(1+c.descent)*h),0===f?(i=e[4],j=e[5]-h):(i=e[4]+h*Math.sin(f),j=e[5]-h*Math.cos(f)),d.style.left=i+"px",d.style.top=j+"px",d.style.fontSize=g+"px",d.style.fontFamily=c.fontFamily,d.textContent=a.str,PDFJS.pdfBug&&(d.dataset.fontName=a.fontName),0!==f&&(d.dataset.angle=f*(180/Math.PI)),d.textContent.length>1&&(d.dataset.canvasWidth=c.vertical?a.height*this.viewport.scale:a.width*this.viewport.scale),void 0)},setTextContent:function(a){var b,c,d;for(this.textContent=a,b=a.items,c=0,d=b.length;d>c;c++)this.appendText(b[c],a.styles);this.divContentDone=!0,this.setupRenderLayoutTimer()},convertMatches:function(a){var h,i,j,k,b=0,c=0,d=this.textContent.items,e=d.length-1,f=null===this.findController?0:this.findController.state.query.length,g=[];for(h=0,i=a.length;i>h;h++){for(j=a[h];b!==e&&j>=c+d[b].str.length;)c+=d[b].str.length,b++;for(b===d.length&&console.error("Could not find a matching mapping"),k={begin:{divIdx:b,offset:j-c}},j+=f;b!==e&&j>c+d[b].str.length;)c+=d[b].str.length,b++;k.end={divIdx:b,offset:j-c},g.push(k)}return g},renderMatches:function(a){function i(a,b){var d=a.divIdx;c[d].textContent="",j(d,0,a.offset,b)}function j(a,d,e,f){var j,g=c[a],h=b[a].str.substring(d,e),i=document.createTextNode(h);return f?(j=document.createElement("span"),j.className=f,j.appendChild(i),g.appendChild(j),void 0):(g.appendChild(i),void 0)}var b,c,d,e,f,g,h,k,l,m,n,o,p,q,r,s,t;if(0!==a.length){if(b=this.textContent.items,c=this.textDivs,d=null,e=null===this.findController?!1:this.pageIdx===this.findController.selected.pageIdx,f=null===this.findController?-1:this.findController.selected.matchIdx,g=null===this.findController?!1:this.findController.state.highlightAll,h={divIdx:-1,offset:void 0},k=f,l=k+1,g)k=0,l=a.length;else if(!e)return;for(m=k;l>m;m++){if(n=a[m],o=n.begin,p=n.end,q=e&&m===f,r=q?" selected":"",q&&!this.isViewerInPresentationMode&&scrollIntoView(c[o.divIdx],{top:FIND_SCROLL_OFFSET_TOP,left:FIND_SCROLL_OFFSET_LEFT}),d&&o.divIdx===d.divIdx?j(d.divIdx,d.offset,o.offset):(null!==d&&j(d.divIdx,d.offset,h.offset),i(o)),o.divIdx===p.divIdx)j(o.divIdx,o.offset,p.offset,"highlight"+r);else{for(j(o.divIdx,o.offset,h.offset,"highlight begin"+r),s=o.divIdx+1,t=p.divIdx;t>s;s++)c[s].className="highlight middle"+r;i(p,"highlight end"+r)}d=p}d&&j(d.divIdx,d.offset,h.offset)}},updateMatches:function(){var a,b,c,d,e,f,g,h,i,j,k;if(this.renderingDone){for(a=this.matches,b=this.textDivs,c=this.textContent.items,d=-1,e=0,f=a.length;f>e;e++){for(g=a[e],h=Math.max(d,g.begin.divIdx),i=h,j=g.end.divIdx;j>=i;i++)k=b[i],k.textContent=c[i].str,k.className="";d=g.end.divIdx+1}null!==this.findController&&this.findController.active&&(this.matches=this.convertMatches(null===this.findController?[]:this.findController.pageMatches[this.pageIdx]||[]),this.renderMatches(this.matches))}}},a}(),PDFViewer=function(){function a(a){this.container=a.container,this.viewer=a.viewer||a.container.firstElementChild,this.linkService=a.linkService||new SimpleLinkService(this),this.defaultRenderingQueue=!a.renderingQueue,this.defaultRenderingQueue?(this.renderingQueue=new PDFRenderingQueue,this.renderingQueue.setViewer(this)):this.renderingQueue=a.renderingQueue,this.scroll=watchScroll(this.container,this._scrollUpdate.bind(this)),this.lastScroll=0,this.updateInProgress=!1,this.presentationModeState=PresentationModeState.UNKNOWN,this._resetView()}return a.prototype={get pagesCount(){return this.pages.length},getPageView:function(a){return this.pages[a]},get currentPageNumber(){return this._currentPageNumber},set currentPageNumber(a){if(!this.pdfDocument)return this._currentPageNumber=a,void 0;var b=document.createEvent("UIEvents");return b.initUIEvent("pagechange",!0,!0,window,0),b.updateInProgress=this.updateInProgress,a>0&&a<=this.pagesCount?(this.pages[a-1].updateStats(),b.previousPageNumber=this._currentPageNumber,this._currentPageNumber=a,b.pageNumber=a,this.container.dispatchEvent(b),void 0):(b.pageNumber=this._currentPageNumber,b.previousPageNumber=a,this.container.dispatchEvent(b),void 0)},get currentScale(){return this._currentScale},set currentScale(a){if(isNaN(a))throw new Error("Invalid numeric scale");return this.pdfDocument?(this._setScale(a,!1),void 0):(this._currentScale=a,this._currentScaleValue=a.toString(),void 0)},get currentScaleValue(){return this._currentScaleValue},set currentScaleValue(a){return this.pdfDocument?(this._setScale(a,!1),void 0):(this._currentScale=isNaN(a)?UNKNOWN_SCALE:a,this._currentScaleValue=a,void 0)},get pagesRotation(){return this._pagesRotation},set pagesRotation(a){var b,c,d;for(this._pagesRotation=a,b=0,c=this.pages.length;c>b;b++)d=this.pages[b],d.update(d.scale,a);this._setScale(this._currentScaleValue,!0)},setDocument:function(a){var b,c,d,e,f,g,h,i,j,k;return this.pdfDocument&&this._resetView(),this.pdfDocument=a,a?(b=a.numPages,c=this.pagesRefMap={},d=this,f=new Promise(function(a){e=a}),this.pagesPromise=f,f.then(function(){var a=document.createEvent("CustomEvent");a.initCustomEvent("pagesloaded",!0,!0,{pagesCount:b}),d.container.dispatchEvent(a)}),g=!1,h=null,i=new Promise(function(a){h=a}),this.onePageRendered=i,j=function(a){a.onAfterDraw=function(){g||(g=!0,h());var b=document.createEvent("CustomEvent");b.initCustomEvent("pagerendered",!0,!0,{pageNumber:a.id}),d.container.dispatchEvent(b)
}},k=a.getPage(1),this.firstPagePromise=k,k.then(function(f){var k,l,m,n,g=this._currentScale||1,h=f.getViewport(g*CSS_UNITS);for(k=1;b>=k;++k)l=new PDFPageSource(a,k),m=new PageView(this.viewer,k,g,h.clone(),this.linkService,this.renderingQueue,this.cache,l,this),j(m),this.pages.push(m);i.then(function(){var f,g;if(PDFJS.disableAutoFetch)e();else for(f=b,g=1;b>=g;++g)a.getPage(g).then(function(a,b){var h,g=d.pages[a-1];g.pdfPage||g.setPdfPage(b),h=b.ref.num+" "+b.ref.gen+" R",c[h]=a,f--,f||e()}.bind(null,g))}),n=document.createEvent("CustomEvent"),n.initCustomEvent("pagesinit",!0,!0,null),d.container.dispatchEvent(n),this.defaultRenderingQueue&&this.update()}.bind(this))):void 0},_resetView:function(){this.cache=new Cache(DEFAULT_CACHE_SIZE),this.pages=[],this._currentPageNumber=1,this._currentScale=UNKNOWN_SCALE,this._currentScaleValue=null,this.location=null,this._pagesRotation=0;for(var a=this.viewer;a.hasChildNodes();)a.removeChild(a.lastChild)},_scrollUpdate:function(){this.lastScroll=Date.now(),0!==this.pagesCount&&this.update()},_setScaleUpdatePages:function(a,b,c,d){var e,f,h,g,i,j;if(this._currentScaleValue=b,a!==this._currentScale){for(e=0,f=this.pages.length;f>e;e++)this.pages[e].update(a);this._currentScale=a,c||(g=this._currentPageNumber,i=this.presentationModeState===PresentationModeState.CHANGING||this.presentationModeState===PresentationModeState.FULLSCREEN,!this.location||i||IGNORE_CURRENT_POSITION_ON_ZOOM||(g=this.location.pageNumber,h=[null,{name:"XYZ"},this.location.left,this.location.top,null]),this.scrollPageIntoView(g,h)),j=document.createEvent("UIEvents"),j.initUIEvent("scalechange",!0,!0,window,0),j.scale=a,d&&(j.presetValue=b),this.container.dispatchEvent(j)}},_setScale:function(a,b){var c,d,e,f,g,h,i,j,k;if("custom"!==a)if(c=parseFloat(a),c>0)this._setScaleUpdatePages(c,a,b,!1);else{if(d=this.pages[this._currentPageNumber-1],!d)return;switch(e=this.presentationModeState===PresentationModeState.FULLSCREEN,f=e?0:SCROLLBAR_PADDING,g=e?0:VERTICAL_PADDING,h=(this.container.clientWidth-f)/d.width*d.scale,i=(this.container.clientHeight-g)/d.height*d.scale,a){case"page-actual":c=1;break;case"page-width":c=h;break;case"page-height":c=i;break;case"page-fit":c=Math.min(h,i);break;case"auto":j=d.width>d.height,k=j?Math.min(i,h):h,c=Math.min(MAX_AUTO_SCALE,k);break;default:return console.error("pdfViewSetScale: '"+a+"' is an unknown zoom value."),void 0}this._setScaleUpdatePages(c,a,b,!0)}},scrollPageIntoView:function(a,b){var e,f,i,j,g,h,k,l,m,n,o,p,q,r,c=this.pages[a-1],d=c.el;if(this.presentationModeState===PresentationModeState.FULLSCREEN){if(this.linkService.page!==c.id)return this.linkService.page=c.id,void 0;b=null,this._setScale(this.currentScaleValue,!0)}if(!b)return scrollIntoView(d),void 0;switch(e=0,f=0,g=0,h=0,k=0===c.rotation%180?!1:!0,l=(k?c.height:c.width)/c.scale/CSS_UNITS,m=(k?c.width:c.height)/c.scale/CSS_UNITS,n=0,b[1].name){case"XYZ":e=b[2],f=b[3],n=b[4],e=null!==e?e:0,f=null!==f?f:m;break;case"Fit":case"FitB":n="page-fit";break;case"FitH":case"FitBH":f=b[2],n="page-width";break;case"FitV":case"FitBV":e=b[2],g=l,h=m,n="page-height";break;case"FitR":e=b[2],f=b[3],g=b[4]-e,h=b[5]-f,o=this.container,i=(o.clientWidth-SCROLLBAR_PADDING)/g/CSS_UNITS,j=(o.clientHeight-SCROLLBAR_PADDING)/h/CSS_UNITS,n=Math.min(Math.abs(i),Math.abs(j));break;default:return}return n&&n!==this.currentScale?this.currentScaleValue=n:this.currentScale===UNKNOWN_SCALE&&(this.currentScaleValue=DEFAULT_SCALE),"page-fit"!==n||b[4]?(p=[c.viewport.convertToViewportPoint(e,f),c.viewport.convertToViewportPoint(e+g,f+h)],q=Math.min(p[0][0],p[1][0]),r=Math.min(p[0][1],p[1][1]),scrollIntoView(d,{left:q,top:r}),void 0):(scrollIntoView(d),void 0)},_updateLocation:function(a){var g,h,i,j,k,b=this._currentScale,c=this._currentScaleValue,d=parseFloat(c)===b?Math.round(1e4*b)/100:c,e=a.id,f="#page="+e;f+="&zoom="+d,g=this.pages[e-1],h=this.container,i=g.getPagePoint(h.scrollLeft-a.x,h.scrollTop-a.y),j=Math.round(i[0]),k=Math.round(i[1]),f+=","+j+","+k,this.location={pageNumber:e,scale:d,top:k,left:j,pdfOpenParams:f}},update:function(){var c,d,e,f,g,h,i,j,a=this._getVisiblePages(),b=a.views;if(0!==b.length){for(this.updateInProgress=!0,c=Math.max(DEFAULT_CACHE_SIZE,2*b.length+1),this.cache.resize(c),this.renderingQueue.renderHighestPriority(a),d=this.currentPageNumber,e=a.first,f=0,g=b.length,h=!1;g>f&&(i=b[f],!(i.percent<100));++f)if(i.id===d){h=!0;break}h||(d=b[0].id),this.presentationModeState!==PresentationModeState.FULLSCREEN&&(this.currentPageNumber=d),this._updateLocation(e),this.updateInProgress=!1,j=document.createEvent("UIEvents"),j.initUIEvent("updateviewarea",!0,!0,window,0),this.container.dispatchEvent(j)}},containsElement:function(a){return this.container.contains(a)},focus:function(){this.container.focus()},blur:function(){this.container.blur()},get isHorizontalScrollbarEnabled(){return this.presentationModeState===PresentationModeState.FULLSCREEN?!1:this.container.scrollWidth>this.container.clientWidth},_getVisiblePages:function(){var a,b;return this.presentationModeState!==PresentationModeState.FULLSCREEN?getVisibleElements(this.container,this.pages,!0):(a=[],b=this.pages[this._currentPageNumber-1],a.push({id:b.id,view:b}),{first:b,last:b,views:a})},cleanup:function(){for(var a=0,b=this.pages.length;b>a;a++)this.pages[a]&&this.pages[a].renderingState!==RenderingStates.FINISHED&&this.pages[a].reset()},forceRendering:function(a){var b=a||this._getVisiblePages(),c=this.renderingQueue.getHighestPriority(b,this.pages,this.scroll.down);return c?(this.renderingQueue.renderView(c),!0):!1},getPageTextContent:function(a){return this.pdfDocument.getPage(a+1).then(function(a){return a.getTextContent()})},createTextLayerBuilder:function(a,b,c){var d=this.presentationModeState===PresentationModeState.FULLSCREEN;return new TextLayerBuilder({textLayerDiv:a,pageIndex:b,viewport:c,lastScrollSource:this,isViewerInPresentationMode:d,findController:this.findController})},setFindController:function(a){this.findController=a}},a}(),SimpleLinkService=function(){function a(a){this.pdfViewer=a}return a.prototype={get page(){return this.pdfViewer.currentPageNumber},set page(a){this.pdfViewer.currentPageNumber=a},navigateTo:function(){},getDestinationHash:function(){return"#"},getAnchorUrl:function(){return"#"},setHash:function(){},executeNamedAction:function(){}},a}(),PDFPageSource=function(){function a(a,b){this.pdfDocument=a,this.pageNumber=b}return a.prototype={getPage:function(){return this.pdfDocument.getPage(this.pageNumber)}},a}(),PDFViewerApplication={initialBookmark:document.location.hash.substring(1),initialized:!1,fellback:!1,pdfDocument:null,sidebarOpen:!1,printing:!1,pdfViewer:null,pdfThumbnailViewer:null,pdfRenderingQueue:null,pageRotation:0,updateScaleControls:!0,isInitialViewSet:!1,animationStartedPromise:null,mouseScrollTimeStamp:0,mouseScrollDelta:0,preferenceSidebarViewOnLoad:SidebarView.NONE,preferencePdfBugEnabled:!1,isViewerEmbedded:window.parent!==window,url:"",initialize:function(){var b,c,d,e,f,a=new PDFRenderingQueue;return a.onIdle=this.cleanup.bind(this),this.pdfRenderingQueue=a,b=document.getElementById("viewerContainer"),c=document.getElementById("viewer"),this.pdfViewer=new PDFViewer({container:b,viewer:c,renderingQueue:a,linkService:this}),a.setViewer(this.pdfViewer),d=document.getElementById("thumbnailView"),this.pdfThumbnailViewer=new PDFThumbnailViewer({container:d,renderingQueue:a,linkService:this}),a.setThumbnailViewer(this.pdfThumbnailViewer),Preferences.initialize(),this.findController=new PDFFindController({pdfViewer:this.pdfViewer,integratedFind:this.supportsIntegratedFind}),this.pdfViewer.setFindController(this.findController),this.findBar=new PDFFindBar({bar:document.getElementById("findbar"),toggleButton:document.getElementById("viewFind"),findField:document.getElementById("findInput"),highlightAllCheckbox:document.getElementById("findHighlightAll"),caseSensitiveCheckbox:document.getElementById("findMatchCase"),findMsg:document.getElementById("findMsg"),findStatusIcon:document.getElementById("findStatusIcon"),findPreviousButton:document.getElementById("findPrevious"),findNextButton:document.getElementById("findNext"),findController:this.findController}),this.findController.setFindBar(this.findBar),HandTool.initialize({container:b,toggleHandTool:document.getElementById("toggleHandTool")}),SecondaryToolbar.initialize({toolbar:document.getElementById("secondaryToolbar"),presentationMode:PresentationMode,toggleButton:document.getElementById("secondaryToolbarToggle"),presentationModeButton:document.getElementById("secondaryPresentationMode"),openFile:document.getElementById("secondaryOpenFile"),print:document.getElementById("secondaryPrint"),download:document.getElementById("secondaryDownload"),viewBookmark:document.getElementById("secondaryViewBookmark"),firstPage:document.getElementById("firstPage"),lastPage:document.getElementById("lastPage"),pageRotateCw:document.getElementById("pageRotateCw"),pageRotateCcw:document.getElementById("pageRotateCcw"),documentProperties:DocumentProperties,documentPropertiesButton:document.getElementById("documentProperties")}),PresentationMode.initialize({container:b,secondaryToolbar:SecondaryToolbar,firstPage:document.getElementById("contextFirstPage"),lastPage:document.getElementById("contextLastPage"),pageRotateCw:document.getElementById("contextPageRotateCw"),pageRotateCcw:document.getElementById("contextPageRotateCcw")}),PasswordPrompt.initialize({overlayName:"passwordOverlay",passwordField:document.getElementById("password"),passwordText:document.getElementById("passwordText"),passwordSubmit:document.getElementById("passwordSubmit"),passwordCancel:document.getElementById("passwordCancel")}),DocumentProperties.initialize({overlayName:"documentPropertiesOverlay",closeButton:document.getElementById("documentPropertiesClose"),fileNameField:document.getElementById("fileNameField"),fileSizeField:document.getElementById("fileSizeField"),titleField:document.getElementById("titleField"),authorField:document.getElementById("authorField"),subjectField:document.getElementById("subjectField"),keywordsField:document.getElementById("keywordsField"),creationDateField:document.getElementById("creationDateField"),modificationDateField:document.getElementById("modificationDateField"),creatorField:document.getElementById("creatorField"),producerField:document.getElementById("producerField"),versionField:document.getElementById("versionField"),pageCountField:document.getElementById("pageCountField")}),e=this,f=Promise.all([Preferences.get("enableWebGL").then(function(a){PDFJS.disableWebGL=!a}),Preferences.get("sidebarViewOnLoad").then(function(a){e.preferenceSidebarViewOnLoad=a}),Preferences.get("pdfBugEnabled").then(function(a){e.preferencePdfBugEnabled=a}),Preferences.get("disableTextLayer").then(function(a){PDFJS.disableTextLayer!==!0&&(PDFJS.disableTextLayer=a)}),Preferences.get("disableRange").then(function(a){PDFJS.disableRange!==!0&&(PDFJS.disableRange=a)}),Preferences.get("disableAutoFetch").then(function(a){PDFJS.disableAutoFetch=a}),Preferences.get("disableFontFace").then(function(a){PDFJS.disableFontFace!==!0&&(PDFJS.disableFontFace=a)}),Preferences.get("useOnlyCssZoom").then(function(a){PDFJS.useOnlyCssZoom=a})]).catch(function(){}),f.then(function(){PDFViewerApplication.initialized=!0})},zoomIn:function(a){var b=this.pdfViewer.currentScale;do b=(b*DEFAULT_SCALE_DELTA).toFixed(2),b=Math.ceil(10*b)/10,b=Math.min(MAX_SCALE,b);while(--a&&MAX_SCALE>b);this.setScale(b,!0)},zoomOut:function(a){var b=this.pdfViewer.currentScale;do b=(b/DEFAULT_SCALE_DELTA).toFixed(2),b=Math.floor(10*b)/10,b=Math.max(MIN_SCALE,b);while(--a&&b>MIN_SCALE);this.setScale(b,!0)},get currentScaleValue(){return this.pdfViewer.currentScaleValue},get pagesCount(){return this.pdfDocument.numPages},set page(a){this.pdfViewer.currentPageNumber=a},get page(){return this.pdfViewer.currentPageNumber},get supportsPrinting(){var a=document.createElement("canvas"),b="mozPrintCallback"in a;return Object.defineProperty(this,"supportsPrinting",{value:b,enumerable:!0,configurable:!0,writable:!1}),b},get supportsFullscreen(){var a=document.documentElement,b=a.requestFullscreen||a.mozRequestFullScreen||a.webkitRequestFullScreen||a.msRequestFullscreen;return(document.fullscreenEnabled===!1||document.mozFullScreenEnabled===!1||document.webkitFullscreenEnabled===!1||document.msFullscreenEnabled===!1)&&(b=!1),Object.defineProperty(this,"supportsFullscreen",{value:b,enumerable:!0,configurable:!0,writable:!1}),b},get supportsIntegratedFind(){var a=!1;return Object.defineProperty(this,"supportsIntegratedFind",{value:a,enumerable:!0,configurable:!0,writable:!1}),a},get supportsDocumentFonts(){var a=!0;return Object.defineProperty(this,"supportsDocumentFonts",{value:a,enumerable:!0,configurable:!0,writable:!1}),a},get supportsDocumentColors(){var a=!0;return Object.defineProperty(this,"supportsDocumentColors",{value:a,enumerable:!0,configurable:!0,writable:!1}),a},get loadingBar(){var a=new ProgressBar("#loadingBar",{});return Object.defineProperty(this,"loadingBar",{value:a,enumerable:!0,configurable:!0,writable:!1}),a},setTitleUsingUrl:function(a){this.url=a;try{this.setTitle(decodeURIComponent(getFileName(a))||a)}catch(b){this.setTitle(a)}},setTitle:function(a){document.title=a},close:function(){var a=document.getElementById("errorWrapper");a.setAttribute("hidden","true"),this.pdfDocument&&(this.pdfDocument.destroy(),this.pdfDocument=null,this.pdfThumbnailViewer.setDocument(null),this.pdfViewer.setDocument(null),"undefined"!=typeof PDFBug&&PDFBug.cleanup())},open:function(a,b,c,d,e){function j(a){h.progress(a.loaded/a.total)}var f,g,h,i;if(this.pdfDocument&&Preferences.reload(),this.close(),f={password:c},"string"==typeof a?(this.setTitleUsingUrl(a),f.url=a):a&&"byteLength"in a?f.data=a:a.url&&a.originalUrl&&(this.setTitleUsingUrl(a.originalUrl),f.url=a.url),e)for(g in e)f[g]=e[g];h=this,h.loading=!0,h.downloadComplete=!1,i=function(a,b){PasswordPrompt.updatePassword=a,PasswordPrompt.reason=b,PasswordPrompt.open()},PDFJS.getDocument(f,d,i,j).then(function(a){h.load(a,b),h.loading=!1},function(a){var d,b=a&&a.message,c=mozL10n.get("loading_error",null,"An error occurred while loading the PDF.");a instanceof PDFJS.InvalidPDFException?c=mozL10n.get("invalid_file_error",null,"Invalid or corrupted PDF file."):a instanceof PDFJS.MissingPDFException?c=mozL10n.get("missing_file_error",null,"Missing PDF file."):a instanceof PDFJS.UnexpectedResponseException&&(c=mozL10n.get("unexpected_response_error",null,"Unexpected server response.")),d={message:b},h.error(c,d),h.loading=!1}),e&&e.length&&DocumentProperties.setFileSize(e.length)},download:function(){function a(){d.downloadUrl(b,c)}var b=this.url.split("#")[0],c=getPDFFileNameFromURL(b),d=new DownloadManager;return d.onerror=function(){PDFViewerApplication.error("PDF failed to download.")},this.pdfDocument?this.downloadComplete?(this.pdfDocument.getData().then(function(a){var e=PDFJS.createBlob(a,"application/pdf");d.download(e,b,c)},a).then(null,a),void 0):(a(),void 0):(a(),void 0)},fallback:function(){},navigateTo:function(a){var e,b="",c=this,d=function(e){c.pendingRefStr=null;var f=e instanceof Object?c.pagesRefMap[e.num+" "+e.gen+" R"]:e+1;f?(f>c.pagesCount&&(f=c.pagesCount),c.pdfViewer.scrollPageIntoView(f,a),PDFHistory.push({dest:a,hash:b,page:f})):c.pdfDocument.getPageIndex(e).then(function(a){var b=a+1;c.pagesRefMap[e.num+" "+e.gen+" R"]=b,d(e)})};"string"==typeof a?(b=a,e=this.pdfDocument.getDestination(a)):e=Promise.resolve(a),e.then(function(b){a=b,b instanceof Array&&d(b[0])})},executeNamedAction:function(a){switch(a){case"GoToPage":document.getElementById("pageNumber").focus();break;case"GoBack":PDFHistory.back();break;case"GoForward":PDFHistory.forward();break;case"Find":this.supportsIntegratedFind||this.findBar.toggle();break;case"NextPage":this.page++;break;case"PrevPage":this.page--;break;case"LastPage":this.page=this.pagesCount;break;case"FirstPage":this.page=1}},getDestinationHash:function(a){var b,c,d,e,f,g;return"string"==typeof a?this.getAnchorUrl("#"+escape(a)):a instanceof Array&&(b=a[0],c=b instanceof Object?this.pagesRefMap[b.num+" "+b.gen+" R"]:b+1)?(d=this.getAnchorUrl("#page="+c),e=a[1],"object"==typeof e&&"name"in e&&"XYZ"===e.name&&(f=a[4]||this.currentScaleValue,g=parseFloat(f),g&&(f=100*g),d+="&zoom="+f,(a[2]||a[3])&&(d+=","+(a[2]||0)+","+(a[3]||0))),d):""},getAnchorUrl:function(a){return a},error:function(a,b){var d,e,f,g,h,i,c=mozL10n.get("error_version_info",{version:PDFJS.version||"?",build:PDFJS.build||"?"},"PDF.js v{{version}} (build: {{build}})")+"\n";b&&(c+=mozL10n.get("error_message",{message:b.message},"Message: {{message}}"),b.stack?c+="\n"+mozL10n.get("error_stack",{stack:b.stack},"Stack: {{stack}}"):(b.filename&&(c+="\n"+mozL10n.get("error_file",{file:b.filename},"File: {{file}}")),b.lineNumber&&(c+="\n"+mozL10n.get("error_line",{line:b.lineNumber},"Line: {{line}}")))),d=document.getElementById("errorWrapper"),d.removeAttribute("hidden"),e=document.getElementById("errorMessage"),e.textContent=a,f=document.getElementById("errorClose"),f.onclick=function(){d.setAttribute("hidden","true")},g=document.getElementById("errorMoreInfo"),h=document.getElementById("errorShowMore"),i=document.getElementById("errorShowLess"),h.onclick=function(){g.removeAttribute("hidden"),h.setAttribute("hidden","true"),i.removeAttribute("hidden"),g.style.height=g.scrollHeight+"px"},i.onclick=function(){g.setAttribute("hidden","true"),h.removeAttribute("hidden"),i.setAttribute("hidden","true")},h.oncontextmenu=noContextMenuHandler,i.oncontextmenu=noContextMenuHandler,f.oncontextmenu=noContextMenuHandler,h.removeAttribute("hidden"),i.setAttribute("hidden","true"),g.value=c},progress:function(a){var b=Math.round(100*a);(b>this.loadingBar.percent||isNaN(b))&&(this.loadingBar.percent=b,PDFJS.disableAutoFetch&&b&&(this.disableAutoFetchLoadingBarTimeout&&(clearTimeout(this.disableAutoFetchLoadingBarTimeout),this.disableAutoFetchLoadingBarTimeout=null),this.loadingBar.show(),this.disableAutoFetchLoadingBarTimeout=setTimeout(function(){this.loadingBar.hide(),this.disableAutoFetchLoadingBarTimeout=null}.bind(this),DISABLE_AUTO_FETCH_LOADING_BAR_TIMEOUT)))},load:function(a,b){var d,e,f,g,h,i,j,k,l,m,n,o,p,q,c=this;b=b||UNKNOWN_SCALE,this.findController.reset(),this.pdfDocument=a,DocumentProperties.url=this.url,DocumentProperties.pdfDocument=a,DocumentProperties.resolveDataAvailable(),d=a.getDownloadInfo().then(function(){c.downloadComplete=!0,c.loadingBar.hide()}),e=a.numPages,document.getElementById("numPages").textContent=mozL10n.get("page_of",{pageCount:e},"of {{pageCount}}"),document.getElementById("pageNumber").max=e,f=this.documentFingerprint=a.fingerprint,g=this.store=new ViewHistory(f),h=this.pdfViewer,h.currentScale=b,h.setDocument(a),i=h.firstPagePromise,j=h.pagesPromise,k=h.onePageRendered,this.pageRotation=0,this.isInitialViewSet=!1,this.pagesRefMap=h.pagesRefMap,this.pdfThumbnailViewer.setDocument(a),i.then(function(){d.then(function(){var a=document.createEvent("CustomEvent");a.initCustomEvent("documentload",!0,!0,{}),window.dispatchEvent(a)}),c.loadingBar.setWidth(document.getElementById("viewer")),c.findController.resolveFirstPage(),PDFJS.disableHistory||c.isViewerEmbedded||PDFHistory.initialize(c.documentFingerprint,c)}),m=Preferences.get("showPreviousViewOnLoad").then(function(a){l=a}),o=Preferences.get("defaultZoomValue").then(function(a){n=a}),p=g.initializedPromise,Promise.all([i,p,m,o]).then(function(){var d,e,f,h,a=null;l&&g.get("exists",!1)?(d=g.get("page","1"),e=n||g.get("zoom",c.pdfViewer.currentScale),f=g.get("scrollLeft","0"),h=g.get("scrollTop","0"),a="page="+d+"&zoom="+e+","+f+","+h):n&&(a="page=1&zoom="+n),c.setInitialView(a,b),c.isViewerEmbedded||c.pdfViewer.focus()},function(a){console.error(a),i.then(function(){c.setInitialView(null,b)})}),j.then(function(){c.supportsPrinting&&a.getJavaScript().then(function(a){var b,d,e,f;for(a.length&&(console.warn("Warning: JavaScript is not supported"),c.fallback(PDFJS.UNSUPPORTED_FEATURES.javaScript)),b=/\bprint\s*\(/g,d=0,e=a.length;e>d;d++)if(f=a[d],f&&b.test(f))return setTimeout(function(){window.print()}),void 0})}),q=[j,this.animationStartedPromise],Promise.all(q).then(function(){a.getOutline().then(function(a){var b=document.getElementById("outlineView");c.outline=new DocumentOutlineView({outline:a,outlineView:b,linkService:c}),document.getElementById("viewOutline").disabled=!a,a||b.classList.contains("hidden")||c.switchSidebarView("thumbs"),a&&c.preferenceSidebarViewOnLoad===SidebarView.OUTLINE&&c.switchSidebarView("outline",!0)}),a.getAttachments().then(function(a){var b=document.getElementById("attachmentsView");c.attachments=new DocumentAttachmentsView({attachments:a,attachmentsView:b}),document.getElementById("viewAttachments").disabled=!a,a||b.classList.contains("hidden")||c.switchSidebarView("thumbs"),a&&c.preferenceSidebarViewOnLoad===SidebarView.ATTACHMENTS&&c.switchSidebarView("attachments",!0)})}),c.preferenceSidebarViewOnLoad===SidebarView.THUMBS&&Promise.all([i,k]).then(function(){c.switchSidebarView("thumbs",!0)}),a.getMetadata().then(function(b){var f,g,d=b.info,e=b.metadata;c.documentInfo=d,c.metadata=e,console.log("PDF "+a.fingerprint+" ["+d.PDFFormatVersion+" "+(d.Producer||"-").trim()+" / "+(d.Creator||"-").trim()+"]"+" (PDF.js: "+(PDFJS.version||"-")+(PDFJS.disableWebGL?"":" [WebGL]")+")"),e&&e.has("dc:title")&&(g=e.get("dc:title"),"Untitled"!==g&&(f=g)),!f&&d&&d["Title"]&&(f=d["Title"]),f&&c.setTitle(f+" - "+document.title),d.IsAcroFormPresent&&(console.warn("Warning: AcroForm/XFA is not supported"),c.fallback(PDFJS.UNSUPPORTED_FEATURES.forms))})},setInitialView:function(a,b){this.isInitialViewSet=!0,document.getElementById("pageNumber").value=this.pdfViewer.currentPageNumber=1,PDFHistory.initialDestination?(this.navigateTo(PDFHistory.initialDestination),PDFHistory.initialDestination=null):this.initialBookmark?(this.setHash(this.initialBookmark),PDFHistory.push({hash:this.initialBookmark},!!this.initialBookmark),this.initialBookmark=null):a?this.setHash(a):b&&(this.setScale(b,!0),this.page=1),this.pdfViewer.currentScale===UNKNOWN_SCALE&&this.setScale(DEFAULT_SCALE,!0)},cleanup:function(){this.pdfViewer.cleanup(),this.pdfThumbnailViewer.cleanup(),this.pdfDocument.cleanup()},forceRendering:function(){this.pdfRenderingQueue.printing=this.printing,this.pdfRenderingQueue.isThumbnailViewEnabled=this.sidebarOpen,this.pdfRenderingQueue.renderHighestPriority()},setHash:function(a){var b,c,d,e,f,g,h,i;if(!this.isInitialViewSet)return this.initialBookmark=a,void 0;if(b=["Fit","FitB","FitH","FitBH","FitV","FitBV","FitR"],a)if(a.indexOf("=")>=0){if(c=this.parseQueryString(a),"nameddest"in c)return PDFHistory.updateNextHashParam(c.nameddest),this.navigateTo(c.nameddest),void 0;"page"in c&&(d=0|c.page||1),"zoom"in c&&(f=c.zoom.split(","),g=f[0],h=parseFloat(g),i="XYZ",h?g=h/100:b.indexOf(g)>=0&&(i=g),e=[null,{name:i},f.length>1?0|f[1]:null,f.length>2?0|f[2]:null,g]),e?this.pdfViewer.scrollPageIntoView(d||this.page,e):d&&(this.page=d),"pagemode"in c&&("thumbs"===c.pagemode||"bookmarks"===c.pagemode||"attachments"===c.pagemode?this.switchSidebarView("bookmarks"===c.pagemode?"outline":c.pagemode,!0):"none"===c.pagemode&&this.sidebarOpen&&document.getElementById("sidebarToggle").click())}else/^\d+$/.test(a)?this.page=a:(PDFHistory.updateNextHashParam(unescape(a)),this.navigateTo(unescape(a)))},switchSidebarView:function(a,b){var c,d,e,f,g,h,i;switch(b&&!this.sidebarOpen&&document.getElementById("sidebarToggle").click(),c=document.getElementById("thumbnailView"),d=document.getElementById("outlineView"),e=document.getElementById("attachmentsView"),f=document.getElementById("viewThumbnail"),g=document.getElementById("viewOutline"),h=document.getElementById("viewAttachments"),a){case"thumbs":i=c.classList.contains("hidden"),f.classList.add("toggled"),g.classList.remove("toggled"),h.classList.remove("toggled"),c.classList.remove("hidden"),d.classList.add("hidden"),e.classList.add("hidden"),this.forceRendering(),i&&this.pdfThumbnailViewer.ensureThumbnailVisible(this.page);break;case"outline":if(f.classList.remove("toggled"),g.classList.add("toggled"),h.classList.remove("toggled"),c.classList.add("hidden"),d.classList.remove("hidden"),e.classList.add("hidden"),g.getAttribute("disabled"))return;break;case"attachments":if(f.classList.remove("toggled"),g.classList.remove("toggled"),h.classList.add("toggled"),c.classList.add("hidden"),d.classList.add("hidden"),e.classList.remove("hidden"),h.getAttribute("disabled"))return}},parseQueryString:function(a){var d,e,f,g,h,b=a.split("&"),c={};for(d=0,e=b.length;e>d;++d)f=b[d].split("="),g=f[0].toLowerCase(),h=f.length>1?f[1]:null,c[decodeURIComponent(g)]=decodeURIComponent(h);return c},beforePrint:function(){var a,b,c,d,e,f;if(!this.supportsPrinting)return a=mozL10n.get("printing_not_supported",null,"Warning: Printing is not fully supported by this browser."),this.error(a),void 0;if(b=!1,this.pagesCount){for(c=0,d=this.pagesCount;d>c;++c)if(!this.pdfViewer.getPageView(c).pdfPage){b=!0;break}}else b=!0;if(b)return e=mozL10n.get("printing_not_ready",null,"Warning: The PDF is not fully loaded for printing."),window.alert(e),void 0;for(this.printing=!0,this.forceRendering(),f=document.querySelector("body"),f.setAttribute("data-mozPrintCallback",!0),c=0,d=this.pagesCount;d>c;++c)this.pdfViewer.getPageView(c).beforePrint()},afterPrint:function(){for(var a=document.getElementById("printContainer");a.hasChildNodes();)a.removeChild(a.lastChild);this.printing=!1,this.forceRendering()},setScale:function(a,b){this.updateScaleControls=!!b,this.pdfViewer.currentScaleValue=a,this.updateScaleControls=!0},rotatePages:function(a){var b=this.page;this.pageRotation=(this.pageRotation+360+a)%360,this.pdfViewer.pagesRotation=this.pageRotation,this.pdfThumbnailViewer.pagesRotation=this.pageRotation,this.forceRendering(),this.pdfViewer.scrollPageIntoView(b)},mouseScroll:function(a){var e,f,g,h,b=50,c=(new Date).getTime(),d=this.mouseScrollTimeStamp;if(!(c>d&&b>c-d)&&((this.mouseScrollDelta>0&&0>a||this.mouseScrollDelta<0&&a>0)&&this.clearMouseScrollState(),this.mouseScrollDelta+=a,e=120,Math.abs(this.mouseScrollDelta)>=e)){if(f={UP:-1,DOWN:1},g=this.mouseScrollDelta>0?f.UP:f.DOWN,this.clearMouseScrollState(),h=this.page,1===h&&g===f.UP||h===this.pagesCount&&g===f.DOWN)return;this.page+=g,this.mouseScrollTimeStamp=c}},clearMouseScrollState:function(){this.mouseScrollTimeStamp=0,this.mouseScrollDelta=0}},window.PDFView=PDFViewerApplication,THUMBNAIL_SCROLL_MARGIN=-19,ThumbnailView=function(a,b,c,d,e,f){function j(a,b){var c=ThumbnailView.tempImageCache;return c||(c=document.createElement("canvas"),ThumbnailView.tempImageCache=c),c.width=a,c.height=b,c}var h,i,g=document.createElement("a");g.href=d.getAnchorUrl("#page="+b),g.title=mozL10n.get("thumb_page_title",{page:b},"Page {{page}}"),g.onclick=function(){return d.page=b,!1},this.pdfPage=void 0,this.viewport=c,this.pdfPageRotate=c.rotation,this.rotation=0,this.pageWidth=this.viewport.width,this.pageHeight=this.viewport.height,this.pageRatio=this.pageWidth/this.pageHeight,this.id=b,this.renderingId="thumbnail"+b,this.canvasWidth=98,this.canvasHeight=this.canvasWidth/this.pageWidth*this.pageHeight,this.scale=this.canvasWidth/this.pageWidth,h=this.el=document.createElement("div"),h.id="thumbnailContainer"+b,h.className="thumbnail",1===b&&h.classList.add("selected"),i=document.createElement("div"),i.className="thumbnailSelectionRing",i.style.width=this.canvasWidth+"px",i.style.height=this.canvasHeight+"px",h.appendChild(i),g.appendChild(h),a.appendChild(g),this.hasImage=!1,this.renderingState=RenderingStates.INITIAL,this.renderingQueue=e,this.pageSource=f,this.setPdfPage=function(a){this.pdfPage=a,this.pdfPageRotate=a.rotate;var b=(this.rotation+this.pdfPageRotate)%360;this.viewport=a.getViewport(1,b),this.update()},this.update=function(a){void 0!==a&&(this.rotation=a);var b=(this.rotation+this.pdfPageRotate)%360;this.viewport=this.viewport.clone({scale:1,rotation:b}),this.pageWidth=this.viewport.width,this.pageHeight=this.viewport.height,this.pageRatio=this.pageWidth/this.pageHeight,this.canvasHeight=this.canvasWidth/this.pageWidth*this.pageHeight,this.scale=this.canvasWidth/this.pageWidth,h.removeAttribute("data-loaded"),i.textContent="",i.style.width=this.canvasWidth+"px",i.style.height=this.canvasHeight+"px",this.hasImage=!1,this.renderingState=RenderingStates.INITIAL,this.resume=null},this.getPageDrawContext=function(){var c,a=document.createElement("canvas");return a.id="thumbnail"+b,a.width=this.canvasWidth,a.height=this.canvasHeight,a.className="thumbnailImage",a.setAttribute("aria-label",mozL10n.get("thumb_page_canvas",{page:b},"Thumbnail of Page {{page}}")),h.setAttribute("data-loaded",!0),i.appendChild(a),c=a.getContext("2d"),c.save(),c.fillStyle="rgb(255, 255, 255)",c.fillRect(0,0,this.canvasWidth,this.canvasHeight),c.restore(),c},this.drawingRequired=function(){return!this.hasImage},this.draw=function(a){var b,c,d,e,f;return this.pdfPage?(this.renderingState!==RenderingStates.INITIAL&&console.error("Must be in new state before drawing"),this.renderingState=RenderingStates.RUNNING,this.hasImage?(a(),void 0):(c=this,d=this.getPageDrawContext(),e=this.viewport.clone({scale:this.scale}),f={canvasContext:d,viewport:e,continueCallback:function(a){return c.renderingQueue.isHighestPriority(c)?(a(),void 0):(c.renderingState=RenderingStates.PAUSED,c.resume=function(){c.renderingState=RenderingStates.RUNNING,a()},void 0)}},this.pdfPage.render(f).promise.then(function(){c.renderingState=RenderingStates.FINISHED,a()},function(){c.renderingState=RenderingStates.FINISHED,a()}),this.hasImage=!0,void 0)):(b=this.pageSource.getPage(this.id),b.then(function(b){this.setPdfPage(b),this.draw(a)}.bind(this)),void 0)},this.setImage=function(a){var b,c,d,e,f,g,h;if(!this.pdfPage)return b=this.pageSource.getPage(),b.then(function(b){this.setPdfPage(b),this.setImage(a)}.bind(this)),void 0;if(!this.hasImage&&a){if(this.renderingState=RenderingStates.FINISHED,c=this.getPageDrawContext(),d=a,e=a.width,f=a.height,g=2,Math.max(a.width/c.canvas.width,a.height/c.canvas.height)>g)for(e>>=1,f>>=1,d=j(e,f),h=d.getContext("2d"),h.drawImage(a,0,0,a.width,a.height,0,0,e,f);Math.max(e/c.canvas.width,f/c.canvas.height)>g;)h.drawImage(d,0,0,e,f,0,0,e>>1,f>>1),e>>=1,f>>=1;c.drawImage(d,0,0,e,f,0,0,c.canvas.width,c.canvas.height),this.hasImage=!0}}},ThumbnailView.tempImageCache=null,PDFThumbnailViewer=function(){function a(a){this.container=a.container,this.renderingQueue=a.renderingQueue,this.linkService=a.linkService,this.scroll=watchScroll(this.container,this._scrollUpdated.bind(this)),this._resetView()}return a.prototype={_scrollUpdated:function(){this.renderingQueue.renderHighestPriority()},getThumbnail:function(a){return this.thumbnails[a]},_getVisibleThumbs:function(){return getVisibleElements(this.container,this.thumbnails)},scrollThumbnailIntoView:function(a){var c,d,e,f,g,b=document.querySelector(".thumbnail.selected");b&&b.classList.remove("selected"),c=document.getElementById("thumbnailContainer"+a),c.classList.add("selected"),d=this._getVisibleThumbs(),e=d.views.length,e>0&&(f=d.first.id,g=e>1?d.last.id:f,(f>=a||a>=g)&&scrollIntoView(c,{top:THUMBNAIL_SCROLL_MARGIN}))},get pagesRotation(){return this._pagesRotation},set pagesRotation(a){var b,c,d;for(this._pagesRotation=a,b=0,c=this.thumbnails.length;c>b;b++)d=this.thumbnails[b],d.update(a)},cleanup:function(){ThumbnailView.tempImageCache=null},_resetView:function(){this.thumbnails=[],this._pagesRotation=0},setDocument:function(a){if(this.pdfDocument){for(var b=this.container;b.hasChildNodes();)b.removeChild(b.lastChild);this._resetView()}return this.pdfDocument=a,a?a.getPage(1).then(function(b){var e,f,g,c=a.numPages,d=b.getViewport(1);for(e=1;c>=e;++e)f=new PDFPageSource(a,e),g=new ThumbnailView(this.container,e,d.clone(),this.linkService,this.renderingQueue,f),this.thumbnails.push(g)
}.bind(this)):Promise.resolve()},ensureThumbnailVisible:function(a){scrollIntoView(document.getElementById("thumbnailContainer"+a))},forceRendering:function(){var a=this._getVisibleThumbs(),b=this.renderingQueue.getHighestPriority(a,this.thumbnails,this.scroll.down);return b?(this.renderingQueue.renderView(b),!0):!1}},a}(),DocumentOutlineView=function(a){function e(a,b){a.href=d.getDestinationHash(b.dest),a.onclick=function(){return d.navigateTo(b.dest),!1}}for(var d,f,g,h,i,j,k,l,m,b=a.outline,c=a.outlineView;c.firstChild;)c.removeChild(c.firstChild);if(b)for(d=a.linkService,f=[{parent:c,items:b}];f.length>0;)for(g=f.shift(),i=g.items.length,h=0;i>h;h++)j=g.items[h],k=document.createElement("div"),k.className="outlineItem",l=document.createElement("a"),e(l,j),l.textContent=j.title,k.appendChild(l),j.items.length>0&&(m=document.createElement("div"),m.className="outlineItems",k.appendChild(m),f.push({parent:m,items:j.items})),g.parent.appendChild(k)},DocumentAttachmentsView=function(a){function d(a,b){a.onclick=function(){var c=new DownloadManager;return c.downloadData(b.content,getFileName(b.filename),""),!1}}for(var e,f,g,h,i,j,b=a.attachments,c=a.attachmentsView;c.firstChild;)c.removeChild(c.firstChild);if(b)for(e=Object.keys(b).sort(function(a,b){return a.toLowerCase().localeCompare(b.toLowerCase())}),f=0,g=e.length;g>f;f++)h=b[e[f]],i=document.createElement("div"),i.className="attachmentsItem",j=document.createElement("button"),d(j,h),j.textContent=getFileName(h.filename),i.appendChild(j),c.appendChild(i)},document.addEventListener("pagerendered",function(a){var e,b=a.detail.pageNumber-1,c=PDFViewerApplication.pdfViewer.getPageView(b),d=PDFViewerApplication.pdfThumbnailViewer.getThumbnail(b);d.setImage(c.canvas),c.error&&PDFViewerApplication.error(mozL10n.get("rendering_error",null,"An error occurred while rendering the page."),c.error),b+1===PDFViewerApplication.page&&(e=document.getElementById("pageNumber"),e.classList.remove(PAGE_NUMBER_LOADING_INDICATOR))},!0),window.addEventListener("presentationmodechanged",function(a){var b=a.detail.active,c=a.detail.switchInProgress;PDFViewerApplication.pdfViewer.presentationModeState=c?PresentationModeState.CHANGING:b?PresentationModeState.FULLSCREEN:PresentationModeState.NORMAL}),window.addEventListener("updateviewarea",function(){var a,c,d;PDFViewerApplication.initialized&&(a=PDFViewerApplication.pdfViewer.location,PDFViewerApplication.store.initializedPromise.then(function(){PDFViewerApplication.store.setMultiple({exists:!0,page:a.pageNumber,zoom:a.scale,scrollLeft:a.left,scrollTop:a.top}).catch(function(){})}),PDFViewerApplication.getAnchorUrl(a.pdfOpenParams),PDFHistory.updateCurrentBookmark(a.pdfOpenParams,a.pageNumber),c=document.getElementById("pageNumber"),d=PDFViewerApplication.pdfViewer.getPageView(PDFViewerApplication.page-1),d.renderingState===RenderingStates.FINISHED?c.classList.remove(PAGE_NUMBER_LOADING_INDICATOR):c.classList.add(PAGE_NUMBER_LOADING_INDICATOR))},!0),window.addEventListener("resize",function(){if(PDFViewerApplication.initialized&&(document.getElementById("pageWidthOption").selected||document.getElementById("pageFitOption").selected||document.getElementById("pageAutoOption").selected)){var b=document.getElementById("scaleSelect").value;PDFViewerApplication.setScale(b,!1)}updateViewarea(),SecondaryToolbar.setMaxHeight(document.getElementById("viewerContainer"))}),window.addEventListener("hashchange",function(){PDFHistory.isHashChangeUnlocked&&PDFViewerApplication.setHash(document.location.hash.substring(1))}),window.addEventListener("change",function(a){var c,d,b=a.target.files;b&&0!==b.length&&(c=b[0],!PDFJS.disableCreateObjectURL&&"undefined"!=typeof URL&&URL.createObjectURL?PDFViewerApplication.open(URL.createObjectURL(c),0):(d=new FileReader,d.onload=function(a){var b=a.target.result,c=new Uint8Array(b);PDFViewerApplication.open(c,0)},d.readAsArrayBuffer(c)),PDFViewerApplication.setTitleUsingUrl(c.name),document.getElementById("viewBookmark").setAttribute("hidden","true"),document.getElementById("secondaryViewBookmark").setAttribute("hidden","true"),document.getElementById("download").setAttribute("hidden","true"),document.getElementById("secondaryDownload").setAttribute("hidden","true"))},!0),window.addEventListener("localized",function(){document.getElementsByTagName("html")[0].dir=mozL10n.getDirection(),PDFViewerApplication.animationStartedPromise.then(function(){var b,c,a=document.getElementById("scaleSelectContainer");0===a.clientWidth&&a.setAttribute("style","display: inherit;"),a.clientWidth>0&&(b=document.getElementById("scaleSelect"),b.setAttribute("style","min-width: inherit;"),c=b.clientWidth+SCALE_SELECT_CONTAINER_PADDING,b.setAttribute("style","min-width: "+(c+SCALE_SELECT_PADDING)+"px;"),a.setAttribute("style","min-width: "+c+"px; "+"max-width: "+c+"px;")),SecondaryToolbar.setMaxHeight(document.getElementById("viewerContainer"))})},!0),window.addEventListener("scalechange",function(a){var b,c,d;return document.getElementById("zoomOut").disabled=a.scale===MIN_SCALE,document.getElementById("zoomIn").disabled=a.scale===MAX_SCALE,b=document.getElementById("customScaleOption"),b.selected=!1,!PDFViewerApplication.updateScaleControls&&(document.getElementById("pageWidthOption").selected||document.getElementById("pageFitOption").selected||document.getElementById("pageAutoOption").selected)?(updateViewarea(),void 0):a.presetValue?(selectScaleOption(a.presetValue),updateViewarea(),void 0):(c=selectScaleOption(""+a.scale),c||(d=Math.round(1e4*a.scale)/100,b.textContent=mozL10n.get("page_scale_percent",{scale:d},"{{scale}}%"),b.selected=!0),updateViewarea(),void 0)},!0),window.addEventListener("pagechange",function(a){var c,b=a.pageNumber;a.previousPageNumber!==b&&(document.getElementById("pageNumber").value=b,PDFViewerApplication.pdfThumbnailViewer.scrollThumbnailIntoView(b)),c=PDFViewerApplication.pagesCount,document.getElementById("previous").disabled=1>=b,document.getElementById("next").disabled=b>=c,document.getElementById("firstPage").disabled=1>=b,document.getElementById("lastPage").disabled=b>=c,a.updateInProgress||this.loading&&1===b||PDFViewerApplication.pdfViewer.scrollPageIntoView(b)},!0),window.addEventListener("DOMMouseScroll",handleMouseWheel),window.addEventListener("mousewheel",handleMouseWheel),window.addEventListener("click",function(a){PresentationMode.active?0===a.button&&a.preventDefault():SecondaryToolbar.opened&&PDFViewerApplication.pdfViewer.containsElement(a.target)&&SecondaryToolbar.close()},!1),window.addEventListener("keydown",function(a){var b,c,d,e,f,g;if(!OverlayManager.active){if(b=!1,c=(a.ctrlKey?1:0)|(a.altKey?2:0)|(a.shiftKey?4:0)|(a.metaKey?8:0),1===c||8===c||5===c||12===c)switch(d=PDFViewerApplication.pdfViewer,e=d&&(d.presentationModeState===PresentationModeState.CHANGING||d.presentationModeState===PresentationModeState.FULLSCREEN),a.keyCode){case 70:PDFViewerApplication.supportsIntegratedFind||(PDFViewerApplication.findBar.open(),b=!0);break;case 71:PDFViewerApplication.supportsIntegratedFind||(PDFViewerApplication.findBar.dispatchEvent("again",5===c||12===c),b=!0);break;case 61:case 107:case 187:case 171:e||PDFViewerApplication.zoomIn(),b=!0;break;case 173:case 109:case 189:e||PDFViewerApplication.zoomOut(),b=!0;break;case 48:case 96:e||(setTimeout(function(){PDFViewerApplication.setScale(DEFAULT_SCALE,!0)}),b=!1)}if(1===c||8===c)switch(a.keyCode){case 83:PDFViewerApplication.download(),b=!0}if(3===c||10===c)switch(a.keyCode){case 80:SecondaryToolbar.presentationModeClick(),b=!0;break;case 71:document.getElementById("pageNumber").select(),b=!0}if(b)return a.preventDefault(),void 0;if(f=document.activeElement||document.querySelector(":focus"),g=f&&f.tagName.toUpperCase(),"INPUT"!==g&&"TEXTAREA"!==g&&"SELECT"!==g||27===a.keyCode){if(0===c)switch(a.keyCode){case 38:case 33:case 8:if(!PresentationMode.active&&"page-fit"!==PDFViewerApplication.currentScaleValue)break;case 37:if(PDFViewerApplication.pdfViewer.isHorizontalScrollbarEnabled)break;case 75:case 80:PDFViewerApplication.page--,b=!0;break;case 27:SecondaryToolbar.opened&&(SecondaryToolbar.close(),b=!0),!PDFViewerApplication.supportsIntegratedFind&&PDFViewerApplication.findBar.opened&&(PDFViewerApplication.findBar.close(),b=!0);break;case 40:case 34:case 32:if(!PresentationMode.active&&"page-fit"!==PDFViewerApplication.currentScaleValue)break;case 39:if(PDFViewerApplication.pdfViewer.isHorizontalScrollbarEnabled)break;case 74:case 78:PDFViewerApplication.page++,b=!0;break;case 36:(PresentationMode.active||PDFViewerApplication.page>1)&&(PDFViewerApplication.page=1,b=!0);break;case 35:(PresentationMode.active||PDFViewerApplication.pdfDocument&&PDFViewerApplication.page<PDFViewerApplication.pagesCount)&&(PDFViewerApplication.page=PDFViewerApplication.pagesCount,b=!0);break;case 72:PresentationMode.active||HandTool.toggle();break;case 82:PDFViewerApplication.rotatePages(90)}if(4===c)switch(a.keyCode){case 32:if(!PresentationMode.active&&"page-fit"!==PDFViewerApplication.currentScaleValue)break;PDFViewerApplication.page--,b=!0;break;case 82:PDFViewerApplication.rotatePages(-90)}if(b||PresentationMode.active||(a.keyCode>=33&&a.keyCode<=40&&!PDFViewerApplication.pdfViewer.containsElement(f)&&PDFViewerApplication.pdfViewer.focus(),32===a.keyCode&&"BUTTON"!==g&&(PDFViewerApplication.pdfViewer.containsElement(f)||PDFViewerApplication.pdfViewer.focus())),2===c)switch(a.keyCode){case 37:PresentationMode.active&&(PDFHistory.back(),b=!0);break;case 39:PresentationMode.active&&(PDFHistory.forward(),b=!0)}b&&(a.preventDefault(),PDFViewerApplication.clearMouseScrollState())}}}),window.addEventListener("beforeprint",function(){PDFViewerApplication.beforePrint()}),window.addEventListener("afterprint",function(){PDFViewerApplication.afterPrint()}),function(){PDFViewerApplication.animationStartedPromise=new Promise(function(a){window.requestAnimationFrame(a)})}();