{"version":3,"sources":["webpack:///./app/Resources/static-src/app/js/activity-manage/video/subtitle/dialog.js","webpack:///./app/Resources/static-src/app/js/open-course-manage/lesson-modal/index.js","webpack:///./app/Resources/static-src/app/js/open-course-manage/lesson-modal/lesson-modal.js","webpack:///./app/Resources/static-src/common/load-animation.js?a182"],"names":["SubtitleDialog","element","upload_id","inited","$","length","init","$container","closest","find","val","render","id","self","on","$elem","post","data","Translator","trans","parent","remove","show","media","html","get","mediaId","initUploader","globalId","uploader","_destroyUploader","UploaderSDK","initUrl","finishUrl","ui","multi","accept","extensions","mimeTypes","type","process","videoNo","locale","document","documentElement","lang","err","error","file","name","success","convertStatus","waiting","doing","none","append","hide","responseJSON","message","removeClass","addClass","__events","destroy","e","form","LessonModal","options","$element","$form","validator","initfileChooser","validate","currentDom","ajax","groups","date","rules","title","required","maxlength","trim","course_title","minute","second","messages","second_range","submitSuccess","res","location","reload","submitError","msg","errorRes","JSON","parse","responseText","click","event","submit","blur","parseInt","fileChooser","subtitleDialog","onSelectFile","closeUI","Math","round","source","uri","openUI","loadAnimation","fn","$loading","prependTo","nextAll","arr","l","x","push","callee","apply"],"mappings":"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","file":"app/js/open-course-manage/lesson-modal/index.js","sourcesContent":["import notify from 'common/notify';\n\nclass SubtitleDialog {\n\n  upload_id = 'subtitle-uploader';\n  inited = false;\n\n  constructor(element) {\n    this.element = $(element);\n\n    if (this.element.length > 0) {\n      this.init();\n      this.inited = true;\n    }\n\n    let $container = this.element.closest('#video-subtitle-form-group');\n    if ($container.find('#ext_mediaId_for_subtitle').val() > 0) {\n      this.render({id: $container.find('#ext_mediaId_for_subtitle').val()});\n    }\n  }\n\n  init() {\n\n    let self = this;\n    //删除字幕\n    this.element.on('click', '.js-subtitle-delete', function () {\n      let $elem = $(this);\n      $.post($elem.data('subtitleDeleteUrl'), function (data) {\n        if (data) {\n          notify('success', Translator.trans('activity.video_manage.delete_success_hint'));\n          $elem.parent().remove();\n          $('#' + self.upload_id).show();\n        }\n      });\n    });\n  }\n\n\n  render(media) {\n    if (!this.inited) {\n      return;\n    }\n\n    if (media && 'id' in media && media.id > 0) {\n      this.media = media;\n      this.element.html(Translator.trans('activity.video_manage.subtitle_load_hint'));\n      let self = this;\n      $.get(this.element.data('dialogUrl'), {mediaId: this.media.id}, function (html) {\n        self.element.html(html);\n        self.initUploader();\n      });\n    }\n  }\n\n  initUploader() {\n    let self = this;\n    let $elem = $('#' + this.upload_id);\n    let mediaId = $('.js-subtitle-dialog').data('mediaId');\n    let globalId = $elem.data('mediaGlobalId');\n\n    if (this.uploader) {\n      this._destroyUploader();\n    }\n    let uploader = new UploaderSDK({\n      initUrl: $elem.data('initUrl'),\n      finishUrl: $elem.data('finishUrl'),\n      id: this.upload_id,\n      ui: 'simple',\n      multi: true,\n      accept: {\n        extensions: ['srt'],\n        mimeTypes: ['text/srt']\n      },\n      type: 'sub',\n      process: {\n        videoNo: globalId,\n      },\n      locale: document.documentElement.lang\n    });\n\n    uploader.on('error', function (err) {\n      if (err.error === 'Q_TYPE_DENIED') {\n        notify('danger', Translator.trans('activity.video_manage.subtitle_upload_error_hint'));\n      }\n    });\n\n    uploader.on('file.finish', function (file) {\n      $.post($elem.data('subtitleCreateUrl'), {\n        \"name\": file.name,\n        \"subtitleId\": file.id,\n        \"mediaId\": mediaId\n      }).success(function (data) {\n        let convertStatus = {\n          waiting: Translator.trans('activity.video_manage.convert_status_waiting'),\n          doing: Translator.trans('activity.video_manage.convert_status_doing'),\n          success: Translator.trans('activity.video_manage.convert_status_success'),\n          error: Translator.trans('activity.video_manage.convert_status_error'),\n          none: Translator.trans('activity.video_manage.convert_status_none')\n        };\n        $('.js-media-subtitle-list').append('<li class=\"pvs\">' +\n          '<span class=\"subtitle-name prl\">' + data.name + '</span>' +\n          '<span class=\"subtitle-transcode-status ' + data.convertStatus + '\">' + convertStatus[data.convertStatus] + '</span>' +\n          '<a href=\"javascript:;\" class=\"btn-link pll color-primary js-subtitle-delete\" data-subtitle-delete-url=\"/media/' + mediaId + '/subtitle/' + data.id + '/delete\">'+Translator.trans('activity.video_manage.subtitle_delete_hint')+'</a>' +\n          '</li>');\n        if ($('.js-media-subtitle-list li').length > 3) {\n          $('#' + self.upload_id).hide();\n        }\n        notify('success', Translator.trans('activity.video_manage.subtitle_upload_success_hint'));\n      }).error(function (data) {\n        notify('danger', data.responseJSON.error.message);\n      });\n    });\n\n    this.uploader = uploader;\n  }\n\n  show() {\n    let parent = this.element.parent('.form-group');\n    if (parent.length > 0) {\n      parent.removeClass('hide');\n    }\n  }\n\n  hide() {\n    let parent = this.element.parent('.form-group');\n    if (parent.length > 0) {\n      parent.addClass('hide');\n    }\n  }\n\n  _destroyUploader() {\n    if (!this.uploader) {\n      return;\n    }\n    this.uploader.__events = null;\n    try {\n      this.uploader.destroy();\n    } catch (e) {\n      //忽略destroy异常\n    }\n    this.uploader = null;\n  }\n\n  destroy() {\n    if (!this.inited) {\n      return;\n    }\n    this._destroyUploader();\n  }\n}\n\nexport default SubtitleDialog;\n\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/activity-manage/video/subtitle/dialog.js","import LessonModal from './lesson-modal';\n\nnew LessonModal({\n  element: '#modal',\n  form: '#lesson-create-form'\n})\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/open-course-manage/lesson-modal/index.js","import loadAnimation from 'common/load-animation';\nimport notify from 'common/notify';\nimport FileChooser from 'app/js/file-chooser/file-choose';\nimport SubtitleDialog from 'app/js/activity-manage/video/subtitle/dialog';\n\nclass LessonModal {\n  constructor(options) {\n    this.$element = $(options.element);\n    this.$form = $(options.form);\n    this.validator();\n    this.initfileChooser();\n  }\n\n  validator() {\n    let validator = this.$form.validate({\n      currentDom: '#form-submit',\n      ajax: true,\n      groups: {\n        date: 'minute second'\n      },\n      rules: {\n        title: {\n          required: true,\n          maxlength: 50,\n          trim: true,\n          course_title: true,\n        },\n        minute: 'required unsigned_integer',\n        second: 'required second_range',\n        'mediaSource': 'required',\n      },\n      messages: {\n        minute: {\n          required: Translator.trans('activity.video_manage.length_required_error_hint'),\n        },\n        second: {\n          required: Translator.trans('activity.video_manage.length_required_error_hint'),\n          second_range: Translator.trans('validate.second_range.message'),\n        },\n        'mediaSource': Translator.trans('activity.video_manage.media_error_hint'),\n      },\n      submitSuccess(res) {\n        notify('success', Translator.trans('open_course.lesson.create_success'));\n        document.location.reload();\n      },\n      submitError(res) {\n        let msg = '';\n        let errorRes = JSON.parse(res.responseText);\n        if (errorRes.error && errorRes.error.message) {\n          msg = errorRes.error.message;\n        }\n        notify('warning', Translator.trans('open_course.lesson.create_error') + ':' + msg);\n      }\n    })\n\n    $('#form-submit').click((event) => {\n      if(validator.form()) {\n        this.$form.submit();\n      }\n    });\n\n    $(\".js-length\").blur(function () {\n      if (validator && validator.form()) {\n        const minute = parseInt($('#minute').val()) | 0;\n        const second = parseInt($('#second').val()) | 0;\n        $(\"#length\").val(minute * 60 + second);\n      }\n    });\n  }\n\n  initfileChooser() {\n    const fileChooser = new FileChooser();\n    //字幕组件\n    const subtitleDialog = new SubtitleDialog('.js-subtitle-list');\n    const onSelectFile = file => {\n      FileChooser.closeUI();\n      if (file.length && file.length > 0) {\n        let minute = parseInt(file.length / 60);\n        let second = Math.round(file.length % 60);\n        $(\"#minute\").val(minute);\n        $(\"#second\").val(second);\n        $(\"#length\").val(minute * 60 + second);\n      }\n      $('#mediaSource').val(file.source);\n      if (file.source == 'self') {\n        $(\"#mediaId\").val(file.id);\n        $(\"#mediaUri\").val('');\n        $(\"#mediaName\").val(file.name);\n      } else {\n        $(\"#mediaUri\").val(file.uri);\n        $(\"#mediaId\").val(0);\n        $(\"#mediaName\").val(file.name);\n      }\n      //渲染字幕\n      subtitleDialog.render(file);\n    };\n\n    this.$element.on('click', '.js-choose-trigger', (event) => {\n      FileChooser.openUI();\n      $('[name=\"mediaSource').val(null);\n    });\n\n    fileChooser.on('select', onSelectFile);\n  }\n}\n\nexport default LessonModal;\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/open-course-manage/lesson-modal/lesson-modal.js","const loadAnimation = (fn, $element) => {\n  let $loading = $('<div class=\"load-animation\"></div>');\n  $loading.prependTo($element).nextAll().hide();\n  $element.append();\n  let arr = [], l = fn.length;\n  return (x) => {\n    arr.push(x);\n    $loading.hide().nextAll().show();\n    /* eslint-disable */\n    return arr.length < l ? arguments.callee : fn.apply(null, arr);\n    /* eslint-enable */\n  };\n};\n\nexport default loadAnimation;\n\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/common/load-animation.js"],"sourceRoot":""}