{% extends 'TopxiaWebBundle:Question:question-base-layout.html.twig' %}

{% block heading %}
  {{ question.stem|fill_question_stem_html|bbCode2Html|raw }}
{% endblock %}

{% block body %}

{% if itemResult.status == 'right' %}
  
  {% set itemResultStatus = '你答对了' %}
  
{% elseif itemResult.status == 'wrong' %}

  {% set itemResultStatus = '回答错误' %}

{% elseif itemResult.status == 'partRight' %}

  {% set itemResultStatus = '部分回答正确' %}

{% elseif itemResult.status == 'noAnswer' %}

  {% set itemResultStatus = '你未回答' %}

{% endif %}
  <div class="question-fill-inputs ">
    <div class="">
      <div class="homework-question-fill">
        <ul>
          {% for index,rightAnswer in question.answer %}
            <li>
              填空({{index+1}})： 正确答案
              <strong class="question-text-success">{{ rightAnswer|join(' 或 ') }}</strong>
              {% if itemResult.answer[index] or itemResult.answer[index] is same as(0) or itemResult.answer[index] is same as('0') %}
                回答是
                <strong class="question-text-danger">{{ itemResult.answer[index] }}</strong>。
              {% else %}
                未回答
              {% endif %}
              
              </li>
          {% endfor %}
        </ul>
        <br/>
        {% if itemResult.score|default(null) %}
          得分：
          <p class="text-primary">{{ itemResult.score }} 分</p>
        {% endif %}
        {% if itemResult.teacherSay|default(null) %}
          <div  class="question-eassy-form-control question-teacher-say-input">
            <div class="teacher-say-text">老师评语:</div>
            {{ itemResult.teacherSay }}
          </div>
        {% endif %}

        {% if homework.type == 'evaluate' and behavior|default('view') == 'view' %}
          {% if itemsEvaluateGroup[itemResult.id]|default(null) %}
            <div class="quetion-eassy-form-control question-evaluate-score-input">
              <table class="question-evaluate-table table">
                <thead>
                <tr>
                  <th class="width-4">评价人</th>
                  {% if itemResult.score|default(null) %}
                    <th class="width-2">分数</th>
                  {% endif %}
                  <th>评价</th>
                </tr>
                </thead>
                {% for itemsEvaluate in itemsEvaluateGroup[itemResult.id] %}
                <tr>
                  {% if app.user.isTeacher() %}
                  <th class="width-4">{{ users[evaluates[itemsEvaluate.evaluateId].fromUserId].nickname }}</th>
                  <th class="width-2">{{ itemsEvaluate.score }}</th>
                  <th>{{ itemsEvaluate.comment }}</th>
                </tr>
                {% else %}
                <th class="width-4">用户{{ loop.index }}</th>
                <th class="width-2">{{ itemsEvaluate.score }}</th>
                <th>{{ itemsEvaluate.comment }}</th>

                {% endif %}
                {% endfor %}
              </table>
            </div>
          {% endif %}
        {% endif %}
      </div>
    </div>
  </div>
{% endblock %}

{% block footer %}

{% endblock %}