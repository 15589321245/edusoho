{"version":3,"sources":["webpack:///./app/Resources/static-src/app/common/doc-player.js","webpack:///./app/Resources/static-src/app/js/material-lib/document-player/index.js"],"names":["DocPlayer","element","swfUrl","pdfUrl","watermarkOptions","canCopy","$","swfPlayerWidth","swfPlayerHeight","swfPlayerUrl","init","console","log","isSupportHtml5","isIE9","initPDFJSViewer","initSwfViewer","onFullScreen","docPlayer","alert","window","onmessage","e","data","undefined","isPageFullScreen","docContent","parent","document","removeClass","width","addClass","body","offsetWidth","navigator","appVersion","indexOf","support","leadingWhitespace","attr","src","$iframe","append","addWatermark","html","Translator","trans","flashVars","doc_url","decodeURI","value","params","bgcolor","allowFullScreen","wmode","allowNetworking","allowscriptaccess","autoPlay","attributes","id","embedSWF","WaterMark","$player","swf","pdf"],"mappings":";;;;;;;;;;;;;AAAA;;;;AACA;;;;;;KAEMA,S;AACJ,4BAAoE;AAAA,SAAtDC,OAAsD,QAAtDA,OAAsD;AAAA,SAA7CC,MAA6C,QAA7CA,MAA6C;AAAA,SAArCC,MAAqC,QAArCA,MAAqC;AAAA,SAA7BC,gBAA6B,QAA7BA,gBAA6B;AAAA,SAAXC,OAAW,QAAXA,OAAW;;AAAA;;AAClE,UAAKJ,OAAL,GAAeK,EAAEL,OAAF,CAAf;AACA,UAAKC,MAAL,GAAcA,UAAU,EAAxB;AACA,UAAKC,MAAL,GAAcA,UAAU,EAAxB;AACA,UAAKI,cAAL,GAAsB,MAAtB;AACA,UAAKC,eAAL,GAAuB,MAAvB;AACA,UAAKC,YAAL,GAAoB,EAApB;AACA,UAAKL,gBAAL,GAAwBA,oBAAoB,EAA5C;AACA,UAAKC,OAAL,GAAeA,WAAW,KAA1B;AACA,UAAKK,IAAL;;AAEAC,aAAQC,GAAR,CAAYR,gBAAZ;AACD;;;;4BAEM;AACL,WAAI,KAAKS,cAAL,MAAyB,CAAC,KAAKC,KAAL,EAA9B,EAA4C;AAC1C,cAAKC,eAAL;AACD,QAFD,MAEO;AACL,cAAKC,aAAL;AACD;AACD,YAAKC,YAAL;AACD;;;kCAEYC,S,EAAW;AACtBC,aAAM,CAAN;AACCC,cAAOC,SAAP,GAAiB,UAASC,CAAT,EAAW;AAC3BH,eAAM,CAAN;AACCR,iBAAQC,GAAR,CAAYU,EAAEC,IAAd;AACC,aAAGD,KAAK,IAAL,IAAaA,KAAKE,SAArB,EAAgC;AAC5B;AACH;AACD,aAAIC,mBAAmBH,EAAEC,IAAzB;AACA,aAAG,OAAOE,gBAAP,IAA4B,SAA/B,EAAyC;AACrC;AACH;AACA,aAAIC,aAAcpB,EAAE,sBAAF,EAA0Bc,OAAOO,MAAP,CAAcC,QAAxC,CAAlB;AACD,aAAIH,gBAAJ,EAAsB;AACpBC,sBAAWG,WAAX,CAAuB,aAAvB;AACAH,sBAAWI,KAAX,CAAiB,MAAjB;AACD,UAHD,MAGK;AACHJ,sBAAWK,QAAX,CAAoB,aAApB;AACAL,sBAAWI,KAAX,CAAkBV,OAAOQ,QAAP,CAAgBI,IAAhB,CAAqBC,WAArB,GAAiC,IAAnD;AACD;AACJ,QAlBA;AAmBF;;;6BAEO;AACN,cAAOC,UAAUC,UAAV,CAAqBC,OAArB,CAA6B,SAA7B,KAA2C,CAAC,CAAnD;AACD;;;sCAEgB;AACf,cAAO9B,EAAE+B,OAAF,CAAUC,iBAAjB;AACD;;;uCAEiB;AAChBhC,SAAE,MAAF,EAAUiC,IAAV,CAAe,KAAf,EAAsB,KAAtB;;AAEA,WAAIC,MAAM,sEAAsE,KAAKrC,MAArF;;AAEA,WAAI,CAAC,KAAKE,OAAV,EAAmB;AACjBmC,gBAAO,QAAP;AACD;;AAED,WAAIC,mFACID,GADJ,qHAAJ;AAIC,YAAKvC,OAAL,CAAayC,MAAb,CAAoBD,OAApB;;AAED,YAAKE,YAAL;AACD;;;qCAEe;AACdrC,SAAEsC,IAAF,yDAA6DC,WAAWC,KAAX,CAAiB,6BAAjB,CAA7D;;AAEA,WAAIC,YAAY;AACdC,kBAASC,UAAU,KAAK/C,MAAL,CAAYgD,KAAtB;AADK,QAAhB;;AAIA,WAAIC,SAAS;AACXC,kBAAS,SADE;AAEXC,0BAAiB,IAFN;AAGXC,gBAAO,QAHI;AAIXC,0BAAiB,KAJN;AAKXC,4BAAmB,QALR;AAMXC,mBAAU;AANC,QAAb;;AASA,WAAIC,aAAa;AACfC,aAAI;AADW,QAAjB;;AAIA,6BAAUC,QAAV,CACE,KAAKnD,YADP,EAEE,SAFF,EAGE,KAAKF,cAHP,EAIE,KAAKC,eAJP,EAKE,QALF,EAME,IANF,EAOEuC,SAPF,EAQEI,MARF,EASEO,UATF;;AAYA,YAAKf,YAAL;AACD;;;oCAEc;AACb,YAAKvC,gBAAL,IAAyB,KAAKH,OAAL,CAAa4D,SAAb,CAAuB,KAAKzD,gBAA5B,CAAzB;AACD;;;;;;mBAIYJ,S;;;;;;;;;ACrHf;;;;;;AAEA,KAAI8D,UAAUxD,EAAE,kBAAF,CAAd;AACA,KAAI6C,SAASW,QAAQvC,IAAR,CAAa,QAAb,CAAb;AACA,yBAAc;AACZtB,YAAS,kBADG;AAEZC,WAAQiD,OAAOY,GAFH;AAGZ5D,WAAQgD,OAAOa;AAHH,EAAd,E","file":"app/js/material-lib/document-player/index.js","sourcesContent":["import swfobject from 'es-swfobject';\nimport 'app/common/watermark';\n\nclass DocPlayer {\n  constructor({ element, swfUrl, pdfUrl, watermarkOptions, canCopy }) {\n    this.element = $(element);\n    this.swfUrl = swfUrl || '';\n    this.pdfUrl = pdfUrl || '';\n    this.swfPlayerWidth = '100%';\n    this.swfPlayerHeight = '100%';\n    this.swfPlayerUrl = '';\n    this.watermarkOptions = watermarkOptions || '';\n    this.canCopy = canCopy || false;\n    this.init();\n\n    console.log(watermarkOptions);\n  }\n\n  init() {\n    if (this.isSupportHtml5() && !this.isIE9()) {\n      this.initPDFJSViewer();\n    } else {\n      this.initSwfViewer();\n    }\n    this.onFullScreen();\n  }\n\n  onFullScreen(docPlayer) {\n    alert(1)\n     window.onmessage=function(e){\n\t     alert(2)\n       console.log(e.data)\n        if(e == null || e == undefined ){\n            return;\n        }\n        var isPageFullScreen = e.data;\n        if(typeof(isPageFullScreen) != \"boolean\"){\n            return ;\n        }\n         var docContent =  $('#task-content-iframe', window.parent.document);\n        if (isPageFullScreen) {\n          docContent.removeClass('screen-full');\n          docContent.width('100%');\n        }else{\n          docContent.addClass('screen-full');\n          docContent.width( window.document.body.offsetWidth+\"px\");\n        }\n    };\n  }\n\n  isIE9() {\n    return navigator.appVersion.indexOf(\"MSIE 9.\") != -1;\n  }\n\n  isSupportHtml5() {\n    return $.support.leadingWhitespace;\n  }\n\n  initPDFJSViewer() {\n    $(\"html\").attr('dir', 'ltr');\n\n    let src = '//service-cdn.qiqiuyun.net/js-sdk/document-player/v7/viewer.html#' + this.pdfUrl;\n\n    if (!this.canCopy) {\n      src += '#false';\n    }\n\n    let $iframe = `<iframe id=\"doc-pdf-player\" class=\"task-content-iframe\" \n     src=\"${src}\" style=\"width:100%;height:100%;border:0px\" \n     allowfullscreen=\"\" webkitallowfullscreen=\"\">\n      </iframe>`;\n     this.element.append($iframe);\n\n    this.addWatermark();\n  }\n\n  initSwfViewer() {\n    $.html(`<div id=\"website\"><p align=\"center\" class=\"style1\">${Translator.trans('site.flash_not_install_hint')}</p></div>`);\n\n    let flashVars = {\n      doc_url: decodeURI(this.swfUrl.value)\n    };\n\n    let params = {\n      bgcolor: '#efefef',\n      allowFullScreen: true,\n      wmode: 'window',\n      allowNetworking: 'all',\n      allowscriptaccess: 'always',\n      autoPlay: false\n    };\n\n    let attributes = {\n      id: 'website'\n    };\n\n    swfobject.embedSWF(\n      this.swfPlayerUrl,\n      'website',\n      this.swfPlayerWidth,\n      this.swfPlayerHeight,\n      \"9.0.45\",\n      null,\n      flashVars,\n      params,\n      attributes\n    );\n\n    this.addWatermark();\n  }\n\n  addWatermark() {\n    this.watermarkOptions && this.element.WaterMark(this.watermarkOptions);\n  }\n}\n\n\nexport default DocPlayer;\n\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/common/doc-player.js","import DocPlayer from 'app/common/doc-player';\n\nlet $player = $(\"#document-player\");\nlet params = $player.data('params');\nnew DocPlayer({\n  element: '#document-player',\n  swfUrl: params.swf,\n  pdfUrl: params.pdf\n});\n\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/material-lib/document-player/index.js"],"sourceRoot":""}