{"version":3,"sources":["webpack:///./app/Resources/static-src/app/common/widget/btn-util.js?c114","webpack:///./app/Resources/static-src/app/common/widget/cancel-refund.js","webpack:///./app/Resources/static-src/app/common/widget/qrcode.js","webpack:///./app/Resources/static-src/app/common/widget/sign.js","webpack:///./app/Resources/static-src/app/js/classroom/index.js"],"names":["buyBtn","$element","on","$","post","event","currentTarget","data","resp","window","location","href","url","modal","html","confirm","Translator","trans","reload","$this","hasClass","removeClass","ajax","type","dataType","success","find","attr","img","addClass","Sing","selectedDate","inited","daysInMonth","signedRecordsUrl","signUrl","initEvent","setup","sign","signedIn","signedOut","keep","remove","previousMonth","nextMonth","hiddenSignTable","month","year","day","Date","getDay","today","getDate","keepDays","showSignTable","initTable","error","xhr","e","setTimeout","signedToday","split","parseInt","days","getDaysInMonth","$tbody","newtr","append","row","week","getWeekByDate","async","i","records","length","todayRank","signedNum","$signbtn","currentDate","currentYear","currentMonth","nextYear","getMonth","getFullYear","userSign","popover","trigger","placement","container","animation","_this"],"mappings":"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","file":"app/js/classroom/index.js","sourcesContent":["export const buyBtn  = ($element) => {\n  $element.on('click', event => {\n    $.post($(event.currentTarget).data('url'), resp => {\n      if (typeof resp === 'object') {\n        window.location.href = resp.url;\n      } else {\n        $('#modal').modal('show').html(resp);\n      }\n\n    });\n  });\n};\n\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/common/widget/btn-util.js","import notify from 'common/notify';\n\n$(\".cancel-refund\").on('click', function () {\n  if (!confirm(Translator.trans('classroom.cancel_refund_hint'))) {\n    return false;\n  }\n\n  $.post($(this).data('url'), function () {\n    notify('success', Translator.trans('退款申请已取消成功！'));\n    window.location.reload();\n  });\n});\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/common/widget/cancel-refund.js","$(\"body\").on(\"click\", \".es-qrcode\", function () {\n  var $this = $(this);\n  if ($this.hasClass('open')) {\n    $this.removeClass('open');\n  } else {\n    $.ajax({\n      type: \"post\",\n      url: $this.data(\"url\"),\n      dataType: \"json\",\n      success: function (data) {\n        $this.find(\".qrcode-popover img\").attr(\"src\", data.img);\n        $this.addClass('open');\n      }\n    });\n  }\n})\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/common/widget/qrcode.js","export default  class Sing {\n  constructor($element) {\n    this.$element = $element;\n    this.selectedDate = null;\n    this.inited = false;\n    this.daysInMonth = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];\n    this.signedRecordsUrl = null;\n    this.signUrl = null;\n    this.initEvent();\n    this.setup();\n  }\n\n  initEvent() {\n    this.$element.on('click', '[data-role=sign]', () => this.sign());\n    this.$element.on('mouseenter', '[data-role=\"signed\"]', () => this.signedIn());\n    this.$element.on('mouseleave', '[data-role=\"signed\"]', () => this.signedOut(event));\n    this.$element.on('mouseenter', '.sign_main', () => this.keep());\n    this.$element.on('mouseleave', '.sign_main', () => this.remove());\n    this.$element.on('click', '[data-role=previous]', () => this.previousMonth());\n    this.$element.on('click', '[data-role=next]', () => this.nextMonth())\n  }\n\n  setup() {\n    this.selectedDate = this.$element.find('#title-month').data('time');\n    var signedRecordsUrl = this.$element.data('records');\n    var signUrl = this.$element.data('signurl');\n    this.signedRecordsUrl = signedRecordsUrl;\n    this.signUrl = signUrl;\n  }\n  keep() {\n    this.$element.find('.sign_main').addClass('keepShow');\n  }\n  remove() {\n    this.$element.find('.sign_main').removeClass('keepShow');\n    this.hiddenSignTable();\n  }\n  getDaysInMonth(month, year) {\n    if ((month == 1) && (year % 4 == 0) && ((year % 100 != 0) || (year % 400 == 0))) {\n      return 29;\n    } else {\n      return this.daysInMonth[month];\n    }\n  }\n  getWeekByDate(year, month, day) {\n    return new Date(year + '/' + month + '/' + day).getDay();\n  }\n  sign() {\n    var today = new Date().getDate();\n    $.ajax({\n      url: this.signUrl,\n      dataType: 'json',\n      success:  (data) => {\n\n        $('#sign').html('<div  class=\"sign-area\" data-role=\"signed\" onclick=\"return false;\" >' + '<a class=\"btn-signin after\" >' + Translator.trans('classroom.member_signed') + '<br>' + Translator.trans('classroom.sign_keep_days', {'keepDays' : data.keepDays}) +  '</a></div>');\n       this.showSignTable();\n       this.initTable(true);\n       this.$element.find('.d-' + today).addClass('signed_anime_day');\n        // window.location.reload();\n      },\n      error:  (xhr)=> {\n      }\n    });\n  }\n  signedIn() {\n    if (!this.inited) {\n      this.initTable();\n    }\n    this.showSignTable();\n  }\n  signedOut(e) {\n    this.$element.find('.sign_main').removeClass('keepShow');\n    setTimeout( () =>{\n      if (this.$element.find('.sign_main').hasClass('keepShow')) {\n        return;\n      } else {\n        this.hiddenSignTable();\n      }\n    }, 1000);\n  }\n  showSignTable() {\n    this.$element.find('.sign_main').addClass('keepShow');\n    this.$element.find('.sign_main').attr('style', 'display:block');\n  }\n  hiddenSignTable() {\n    this.$element.find('.sign_main').removeClass('keepShow');\n    this.$element.find('.sign_main').attr('style', 'display:none');\n  }\n  initTable(signedToday) {\n    var selectedDate = this.selectedDate;\n    selectedDate = selectedDate.split('/');\n    var year = parseInt(selectedDate[0]);\n    var month = parseInt(selectedDate[1]);\n    var days = this.getDaysInMonth(month - 1, year);\n    var $tbody = this.$element.find('tbody');\n    var newtr = \"<tr><td class='t-1-0 '></td><td class='t-1-1 '></td><td class='t-1-2 '></td><td class='t-1-3 '></td><td class='t-1-4 '></td><td class='t-1-5 '></td><td class='t-1-6 '></td></tr>\";\n\n    var url = this.signedRecordsUrl + '?startDay=' + year + '-' + month + '-1' + '&endDay=' + year + '-' + month + '-' + days;\n\n    $tbody.append(newtr);\n    var row = 1;\n    var today = new Date().getDate();\n    for (var day = 1; day <= days; day++) {\n      var week = this.getWeekByDate(year, month, day);\n      $tbody.find(\".t-\" + row + '-' + week).html(day);\n      $tbody.find(\".t-\" + row + '-' + week).addClass('d-' + day);\n\n      if (week == 6 && day != days) {\n        row++;\n        newtr = '<tr><td class=\"day t-' + row + '-0 \"></td><td class=\"day t-' + row + '-1 \"></td><td class=\"day t-' + row + '-2 \"></td><td class=\"day t-' + row + '-3 \"></td><td class=\"day t-' + row + '-4 \"></td><td class=\"day t-' + row + '-5 \"></td><td class=\"day t-' + row + '-6 \"></td></tr>';\n        $tbody.append(newtr);\n      }\n    }\n\n    $.ajax({\n      url: url,\n      dataType: 'json',\n      async: true,//(默认: true) 默认设置下，所有请求均为异步请求。如果需要发送同步请求，请将此选项设置为 false。注意，同步请求将锁住浏览器，用户其它操作必须等待请求完成才可以执行。\n      success: (data)=> {\n        for (var i = 0; i < data.records.length; i++) {\n          var day = parseInt(data.records[i]['day']);\n          $tbody.find(\".d-\" + day).addClass('signed_day').attr('title', Translator.trans('classroom.sign_rank_hint', {'time' : data.records[i]['time'], 'rank' : data.records[i]['rank']}));\n        }\n        this.$element.find('.today-rank').html(data.todayRank);\n        this.$element.find('.signed-number').html(data.signedNum);\n        this.$element.find('.keep-days').html(data.keepDays);\n      }\n    });\n\n    this.inited = true;\n    if (signedToday) {\n      var $signbtn = this.$element.find('[data-role=sign]');\n      $signbtn.data('role', 'signed');\n      $signbtn.on('mouseenter', function () {\n        this.signedIn();\n      });\n      $signbtn.on('mouseleave', function () {\n        this.signedOut();\n      });\n      $signbtn.on('click', false);\n      $signbtn.addClass('sign-btn');\n      $signbtn.find('.sign-text').html(Translator.trans('classroom.member_signed'));\n    }\n\n  }\n  previousMonth() {\n    var currentDate = this.selectedDate;\n    currentDate = currentDate.split('/');\n    var currentYear = parseInt(currentDate[0]);\n    var currentMonth = parseInt(currentDate[1]);\n    var nextMonth = 0;\n    var nextYear = currentYear;\n    if (currentMonth == 1) {\n      nextMonth = 12\n      nextYear = currentYear - 1;\n    } else {\n      nextMonth = currentMonth - 1;\n    }\n    nextMonth = nextMonth < 10 ? '0' + nextMonth : nextMonth;\n    this.selectedDate = nextYear + '/' + nextMonth;\n    this.$element.find('tbody').html('');\n    this.$element.find('[data-role=next]').removeClass('disabled-next');\n    this.$element.find('#title-month').html(nextYear + Translator.trans('site.date.year') + nextMonth + Translator.trans('site.date.month'));\n    this.initTable();\n  }\n  nextMonth() {\n    var currentDate = this.selectedDate;\n    currentDate = currentDate.split('/');\n    var currentYear = parseInt(currentDate[0]);\n    var currentMonth = parseInt(currentDate[1]);\n    var nextMonth = 0;\n    var nextYear = currentYear;\n    if (currentMonth == (new Date().getMonth() + 1) && currentYear == (new Date().getFullYear())) {\n      return;\n    } else if (currentMonth == 12) {\n      nextMonth = 1;\n      nextYear = currentYear + 1;\n    } else {\n      nextMonth = currentMonth + 1;\n    }\n    if (nextMonth == (new Date().getMonth() + 1) && currentYear == (new Date().getFullYear())) {\n      this.$element.find('[data-role=next]').addClass('disabled-next');\n    }\n    nextMonth = nextMonth < 10 ? '0' + nextMonth : nextMonth;\n    this.selectedDate = nextYear + '/' + nextMonth;\n    this.$element.find('tbody').html('');\n    this.$element.find('#title-month').html(nextYear + Translator.trans('site.date.year') + nextMonth + Translator.trans('site.date.month'));\n    this.initTable();\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/common/widget/sign.js","import Sign from 'app/common/widget/sign';\nimport 'app/common/widget/qrcode';\nimport 'app/common/widget/cancel-refund';\nimport { buyBtn } from 'app/common/widget/btn-util';\n\nbuyBtn($('.js-classroom-buy-btn'));\n\nif ($('#classroom-sign').length > 0) {\n  let userSign = new Sign($('#classroom-sign'));\n}\n\nif ($('.icon-vip').length > 0) {\n  $(\".icon-vip\").popover({\n    trigger: 'manual',\n    placement: 'auto top',\n    html: 'true',\n    container: 'body',\n    animation: false\n  }).on(\"mouseenter\", function () {\n    let _this = $(this);\n    _this.popover(\"show\");\n\n  }).on(\"mouseleave\", function () {\n    let _this = $(this);\n    setTimeout(function () {\n      if (!$(\".popover:hover\").length) {\n        _this.popover(\"hide\")\n      }\n    }, 100);\n  });\n}\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/classroom/index.js"],"sourceRoot":""}