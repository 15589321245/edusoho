{"version":3,"sources":["webpack:///./app/Resources/static-src/app/js/auth/register/index.js","webpack:///./app/Resources/static-src/app/js/auth/register/register.js"],"names":["Register","initDate","initValidator","inEventMobile","initCaptchaCode","initRegisterTypeRule","initInviteCodeRule","intiUserTermsRule","validator","$","validate","rules","nickname","required","byte_minlength","byte_maxlength","chinese_alphanumeric","es_remote","type","password","minlength","maxlength","addMethod","value","element","params","reg_email","reg_mobile","result","isEmail","test","isMobile","removeClass","addClass","messages","email_or_mobile_check","Translator","trans","optional","blur","emailOrMobile","val","emSmsCodeValidate","mobile","datetimepicker","autoclose","format","minView","language","document","documentElement","lang","$getCodeNum","length","click","attr","data","Math","random","initCaptchaCodeRule","$email","email","$emailOrMobile","callback","bool","$verifiedMobile","phone","$invitecode","reg_inviteCode","alphanumeric","rangelength","initSmsCodeRule"],"mappings":"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","file":"app/js/auth/register/index.js","sourcesContent":["import Register from './register';\nnew Register();\n\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/auth/register/index.js","export default class Register {\n  constructor() {\n    this.initDate();\n    this.initValidator();\n    this.inEventMobile();\n    this.initCaptchaCode();\n    this.initRegisterTypeRule();\n    this.initInviteCodeRule();\n    this.intiUserTermsRule();\n  }\n\n  initValidator() {\n    let validator = $('#register-form').validate({\n      rules: {\n        nickname: {\n          required: true,\n          byte_minlength: 4,\n          byte_maxlength: 18,\n          nickname: true,\n          chinese_alphanumeric: true,\n          es_remote: {\n            type: 'get',\n          }\n        },\n        password: {\n          minlength: 5,\n          maxlength: 20,\n        }\n      },\n    });\n\n    $.validator.addMethod(\"email_or_mobile_check\", function (value, element, params) {\n      let reg_email = /^([a-zA-Z0-9_\\.\\-\\+])+\\@(([a-zA-Z0-9\\-])+\\.)+([a-zA-Z0-9]{2,4})+$/;\n      var reg_mobile = /^1\\d{10}$/;\n      var result = false;\n      var isEmail = reg_email.test(value);\n      var isMobile = reg_mobile.test(value);\n      if (isMobile) {\n        $(\".email_mobile_msg\").removeClass('hidden');\n        $('.js-captcha').addClass('hidden');\n      } else {\n        $(\".email_mobile_msg\").addClass('hidden');\n        $('.js-captcha').removeClass('hidden');\n      }\n      if (isEmail || isMobile) {\n        result = true;\n      }\n      $.validator.messages.email_or_mobile_check = Translator.trans('请输入正确的手机／邮箱');\n      return this.optional(element) || result;\n    }, Translator.trans('validate.email_or_mobile_check.message'));\n  }\n\n  inEventMobile() {\n    $(\"#register_emailOrMobile\").blur(() => {\n      let emailOrMobile = $(\"#register_emailOrMobile\").val();\n      this.emSmsCodeValidate(emailOrMobile);\n    });\n\n    $(\"#register_mobile\").blur(() => {\n      let mobile = $(\"#register_mobile\").val();\n      this.emSmsCodeValidate(mobile);\n    });\n  }\n\n  initDate() {\n    $(\".date\").datetimepicker({\n      autoclose: true,\n      format: 'yyyy-mm-dd',\n      minView: 'month',\n      language: document.documentElement.lang\n    });\n  }\n\n  initCaptchaCode() {\n    let $getCodeNum = $('#getcode_num');\n    if ($getCodeNum.length > 0) {\n      $getCodeNum.click(function () {\n        $(this).attr(\"src\", $getCodeNum.data(\"url\") + \"?\" + Math.random());\n      });\n      this.initCaptchaCodeRule();\n    }\n  }\n\n  initRegisterTypeRule() {\n    let $email = $('input[name=\"email\"]');\n    if ($email.length > 0) {\n      $email.rules('add', {\n        required: true,\n        email: true,\n        es_remote: {\n          type: 'get'\n        },\n        messages: {\n          required: Translator.trans('validate.valid_email_input.message'),\n        }\n      })\n    }\n\n    let $emailOrMobile = $('input[name=\"emailOrMobile\"]');\n    if ($emailOrMobile.length > 0) {\n      $emailOrMobile.rules('add', {\n        required: true,\n        email_or_mobile_check: true,\n        es_remote: {\n          type: 'get',\n          callback: function (bool) {\n            if (bool) {\n              $('.js-sms-send').removeClass('disabled');\n            } else {\n              $('.js-sms-send').addClass('disabled');\n            }\n          }\n        },\n        messages: {\n          required: Translator.trans('validate.phone_and_email_input.message')\n        },\n      });\n    }\n\n    let $verifiedMobile = $('input[name=\"verifiedMobile\"]');\n    if ($verifiedMobile.length > 0) {\n      $('.email_mobile_msg').removeClass('hidden');\n      $verifiedMobile.rules('add', {\n        required: true,\n        phone: true,\n        es_remote: {\n          type: 'get',\n          callback: function (bool) {\n            if (bool) {\n              $('.js-sms-send').removeClass('disabled');\n            } else {\n              $('.js-sms-send').addClass('disabled');\n            }\n          }\n        },\n        messages: {\n          required: Translator.trans('validate.phone.message')\n        },\n      })\n    }\n  }\n\n  initInviteCodeRule() {\n    let $invitecode = $('.invitecode');\n    if ($invitecode.length > 0) {\n      $invitecode.rules('add', {\n        required: false,\n        reg_inviteCode: true,\n        es_remote: {\n          type: 'get'\n        }\n      })\n    }\n  }\n\n  intiUserTermsRule() {\n    if ($('#user_terms').length) {\n      $('#user_terms').rules('add', {\n        required: true,\n        messages: {\n          required: Translator.trans('validate.user_terms.message')\n        }\n      })\n    }\n  }\n  initCaptchaCodeRule() {\n    $('[name=\"captcha_code\"]').rules('add', {\n      required: true,\n      alphanumeric: true,\n      es_remote: {\n        type: 'get',\n        callback: function (bool) {\n          if (!bool) {\n            $('#getcode_num').attr(\"src\", $('#getcode_num').data(\"url\") + \"?\" + Math.random());\n          }\n        }\n      },\n    })\n  }\n  initSmsCodeRule() {\n    $('[name=\"sms_code\"]').rules('add', {\n      required: true,\n      rangelength: [6, 6],\n      es_remote: {\n        type: 'get',\n      },\n      messages: {\n        rangelength: Translator.trans('validate.sms_code.message')\n      }\n    })\n  }\n\n  emSmsCodeValidate(mobile) {\n    let reg_mobile = /^1\\d{10}$/;\n    let isMobile = reg_mobile.test(mobile);\n    if (isMobile) {\n      this.initSmsCodeRule();\n      $('[name=\"captcha_code\"]').rules('remove');\n    } else {\n      this.initCaptchaCodeRule();\n      $('[name=\"sms_code\"]').rules('remove');\n    }\n  }\n\n}\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/auth/register/register.js"],"sourceRoot":""}