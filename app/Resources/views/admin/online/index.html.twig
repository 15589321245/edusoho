{% extends 'admin/layout.html.twig' %}

{% set menu = 'admin_jobs' %}

{% block main %}

    <form id="message-search-form" class="form-inline well well-sm" action="" method="get" novalidate>

        <div class="form-group">
            <input class="form-control" type="text" placeholder="{{'用户名'|trans}}" name="name" value="{{ app.request.get('user') }}">
        </div>

        <div class="form-group">
            <input class="form-control" type="text" placeholder="{{'来源'|trans}}" name="source" value="{{ app.request.get('source') }}">
        </div>

        <button class="btn btn-primary">{{'搜索'|trans}}</button>

    </form>
    {% if onlines %}
        <table id="table" class="table table-striped table-hover">
            <thead>
            <tr>
                <th>{{'用户名'|trans}}</th>
                <th>{{'来源'|trans}}</th>
                <th>{{'最后访问时间'|trans}}</th>
            </tr>
            </thead>
            <tbody>
            {% for online in onlines %}
                <tr id="job-table-tr-{{ job.id }}">
                    <td>
                        {{ users[online.user_id]['nickname']|default('--') }}
                    </td>
                    <td>
                        {{ online.source }}
                    </td>
                    <td>
                        {{ online.access_time }}
                    </td>
                </tr>
            {% endfor %}
            </tbody>

        </table>
    {% else %}
        <div class="empty">{{'暂无在线信息!'|trans}}</div>
    {% endif %}
    {{ admin_macro.paginator(paginator) }}
{% endblock %}