{% extends 'TopxiaWebBundle:Settings:layout.html.twig' %}

{% set script_controller = 'my/orders' %}

{% set side_nav = 'my-bill' %}

{% block main %}
<div class="panel panel-default panel-col">
  <div class="panel-heading">我的现金消费账单</div>
    <div class="panel-body">
      
    <form id="user-search-form" class="form-inline well well-sm" action="" method="get" novalidate>
      <div class="form-group">
        <select class="form-control" name="lastHowManyMonths"  onchange="submit();">
          {% set options = {'oneWeek':'最近一周','twoWeeks':'最近两周','oneMonth':'最近一个月','twoMonths':'最近两个月','threeMonths':'最近三个月','':'全部记录'} %}
          {{ select_options(options, request.get('lastHowManyMonths')) }}
        </select>
      </div>

      {#<button class="btn btn-primary">搜索</button>#}

    </form>

    <table class="table table-striped table-hover" id="orders-table">
      <thead>
        <th>名称</th>
        <th>成交时间</th>
        <th>消费金额</th>
        <th>付款方式</th>
      </thead>
      <tbody>
        {% for order in orders %}
          <tr>
            <td>
              {% if order.targetType == 'course' %}
                <a href="{{ path('course_show', {id:order.targetId}) }}" target="_blank">{{ order.title }}</a>
              {% elseif order.targetType == 'vip' %}
                <a href="{{ path('vip', {id:order.targetId}) }}" target="_blank">{{ order.title }}</a>
              {% else %}
                {{ order.title }}
              {% endif %}
              <div class="text-sm text-muted">
                订单号：{{ order.sn }}
                {% if order.payment == 'coin'%}
              <span style="color:#428bca;">
                虚拟币订单
                </span>
                {% endif %}
              </div>
            </td>
            <td>{{ order.createdTime|date('Y-n-d H:i') }}</td>
            {% if order.payment == 'coin'%}
              <td>{{ order.amount }} {{setting('coin.coin_name')}}</td>
                {% else %}
            <td class="text-danger">{{ order.amount }}元</td>
                {% endif %}
            <td>
              {{ order.payment }}
            </td>
          </tr>
        {% else %}
          <tr>
            <td colspan="20" class="empty">无订单记录</td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>

{% endblock %}