{"version":3,"sources":["webpack:///./app/Resources/static-src/app/js/course-manage/question-marker/modal/index.js"],"names":["QuestionMarkerStats","init","myChart","echarts","document","getElementById","type","$","data","indexOf","setOption","getPeiOptions","getBarOptions","on","addClass","removeClass","siblings","stats","getStats","legendData","each","index","stat","key","String","fromCharCode","push","tooltip","trigger","formatter","color","legend","orient","right","top","itemWidth","itemHeight","series","name","radius","center","labelLine","normal","show","label","position","questionType","xData","seriesData","seriesName","xAxis","yAxis","max"],"mappings":"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","file":"app/js/course-manage/question-marker/modal/index.js","sourcesContent":["class QuestionMarkerStats {\n  constructor() {\n    this.init();\n  }\n\n  init() {\n    let myChart = echarts.init(document.getElementById('main'));\n    let type = $('.popup-topic').data('type');\n    if (type.indexOf('single_choice') >= 0) {\n      myChart.setOption(this.getPeiOptions());\n    } else {\n      myChart.setOption(this.getBarOptions(type));\n    }\n\n    $('[data-toggle=\"tab\"]').on('click', function () {\n      $(this).addClass('btn-primary').removeClass('btn-default')\n        .siblings().removeClass('btn-primary').addClass('btn-default');\n    });\n  }\n\n  getPeiOptions() {\n    let stats = this.getStats();\n    let legendData = [], data = [];\n\n    $.each(stats, function(index, stat) {\n      let key = String.fromCharCode(index+65);\n      legendData.push(key);\n\n      data.push({\n        'name': key,\n        'value': stat['pct']\n      });\n    });\n\n    return {\n      tooltip: {\n        trigger: 'item',\n        formatter: \"{a} <br/>{b} : {c} ({d}%)\"\n      },\n      color: ['#4653BE', '#72CC59', '#4DA8E6', '#F8AB60'],\n      legend: {\n        orient: 'vertical',\n        right: 'right',\n        top: 'center',\n        itemWidth: 8,\n        itemHeight: 8,\n        data: legendData\n      },\n      series: [{\n        name: '',\n        type: 'pie',\n        radius: '55%',\n        center: ['50%', '60%'],\n        labelLine: {\n          normal: {\n            show: false\n          }\n        },\n        label: {\n          normal: {\n            show: false,\n            position: 'center'\n          }\n\n        },\n        data: data\n      }]\n    };\n  }\n\n  getBarOptions(questionType) {\n    let stats = this.getStats();\n\n    let xData = [],\n        seriesData = [],\n        seriesName = '选择率';\n\n    $.each(stats, function(index, stat) {\n\n      if (questionType === 'fill') {\n        xData.push('填空'+(index+1));\n        seriesName = '正确率';\n      } else {\n        let key = String.fromCharCode(index+65);\n        xData.push(key);\n      }\n\n      seriesData.push(stat['pct']);\n    });\n\n    return {\n      color: ['#5586db'],\n      tooltip: {\n        formatter: '{a}<br />{b}：{c}%'\n      },\n      xAxis: {\n        data: xData\n      },\n      yAxis: {\n        max: 100\n      },\n      series: [{\n        name: seriesName,\n        type: 'bar',\n        data: seriesData\n      }]\n    };\n\n  }\n\n  getStats() {\n    return $('#figure').data('stats');\n  }\n}\n\nnew QuestionMarkerStats();\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/course-manage/question-marker/modal/index.js"],"sourceRoot":""}