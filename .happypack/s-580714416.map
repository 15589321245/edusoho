{"version":3,"sources":["app/Resources/static-src/app/js/activity-manage/testpaper/index.js"],"names":["Testpaper","$element","$step2_form","find","$step3_form","$parentiframe","$","window","parent","document","scoreSlider","_init","setValidateRule","initEvent","initStepForm2","on","changeTestpaper","event","showRedoInterval","startTimeCheck","changeEndTime","changeCondition","initSelectTestpaper","val","validator","addMethod","value","element","optional","test","format","reg","validate","onkeyup","rules","title","required","mediaId","digits","limitedTime","startTime","DateAndTime","redoInterval","arithmeticFloat","max","messages","data","$option","passScore","getItemsTable","closest","score","Math","ceil","text","initScoreSlider","parseInt","hide","$target","currentTarget","$this","show","dateTimePicker","removeClass","addClass","getElementById","option","start","connect","tooltips","step","range","updateOptions","noUiSlider","create","values","handle","toFixed","css","html","append","url","testpaperId","post","Date","$starttime","is","Format","datetimepicker","autoclose","language","minView","endDate","now","height","form","date","valueOf"],"mappings":"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","file":"index.js","sourceRoot":"/Users/kz/projects/edusoho","sourcesContent":["import { dateFormat } from '../../../common/unit';\n\nclass Testpaper {\n\tconstructor($element) {\n\t\tthis.$element = $element;\n    this.$step2_form  = this.$element.find('#step2-form');\n    this.$step3_form  = this.$element.find('#step3-form');\n    this.$parentiframe = $(window.parent.document).find('#task-create-content-iframe');\n    this.scoreSlider = null;\n    this._init();\n  }\n\n  _init() {\n    dateFormat();\n    this.setValidateRule();\n    this.initEvent();\n    this.initStepForm2();\n  }\n\n  initEvent() {\n  \tthis.$element.find('#testpaper-media').on('change', event=>this.changeTestpaper(event));\n  \tthis.$element.find('input[name=doTimes]').on('change', event=>this.showRedoInterval(event));\n  \tthis.$element.find('input[name=\"testMode\"]').on('change',event=>this.startTimeCheck(event))\n    this.$element.find('input[name=\"length\"]').on('blur',event=>this.changeEndTime(event));\n    this.$element.find('#condition-select').on('change',event=>this.changeCondition(event));\n    this.initSelectTestpaper(this.$element.find('#testpaper-media').find('option:selected'),$('[name=\"finishScore\"]').val());\n  }\n\n  setValidateRule() {\n    $.validator.addMethod(\"arithmeticFloat\",function(value,element){  \n      return this.optional( element ) || /^[0-9]+(\\.[0-9]?)?$/.test(value);\n    }, $.validator.format(\"必须为正数，保留一位小数\"));\n\n    $.validator.addMethod(\"positiveInteger\",function(value,element){  \n      return this.optional( element ) || /^[1-9]\\d*$/.test(value);\n    }, $.validator.format(\"必须为正整数\"));\n\n    $.validator.addMethod(\"DateAndTime\",function(value,element){  \n      let reg = /^(?:(?!0000)[0-9]{4}-(?:(?:0[1-9]|1[0-2])-(?:0[1-9]|1[0-9]|2[0-8])|(?:0[13-9]|1[0-2])-(?:29|30)|(?:0[13578]|1[02])-31)|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)-02-29) ([0-1]{1}[0-9]{1})|(2[0-4]{1}):[0-5]{1}[0-9]{1}$/;\n      return this.optional( element ) || reg.test(value);\n    }, $.validator.format(\"请输入正确的日期和时间,格式如XXXX-MM-DD hh:mm\"));\n  }\n\n  initStepForm2() {\n    var validator = this.$step2_form.validate({\n        onkeyup: false,\n        rules: {\n            title: {\n              required:true\n            },\n            mediaId: {\n              required: true,\n              digits:true\n            },\n            limitedTime:{\n              required:true,\n              digits:true\n            },\n            startTime:{\n              required:function(){\n                return ($('[name=\"doTimes\"]:checked').val() == 1) && ($('[name=\"testMode\"]:checked').val() == 'realTime');\n              },\n              DateAndTime:function(){\n                return ($('[name=\"doTimes\"]:checked').val() == 1) && ($('[name=\"testMode\"]:checked').val() == 'realTime');\n              }\n            },\n            redoInterval:{\n              required:function(){\n                return $('[name=\"doTimes\"]:checked').val() == 0;\n              },\n              arithmeticFloat:true,\n              max:1000000000\n            }\n        },\n        messages: {\n          mediaId: {\n            required:'请选择%display%',\n          },\n          redoInterval: {\n            max: \"最大值不能超过1000000000\"\n          },\n        }\n    });\n    this.$step2_form.data('validator',validator);\n  }\n\n  initSelectTestpaper($option, passScore='') {\n    let mediaId = $option.val();\n    if (mediaId != '') {\n      this.getItemsTable($option.closest('select').data('getTestpaperItems'), mediaId);\n      let score = $option.data('score');\n      if (passScore == '') {\n        passScore = Math.ceil(score * 0.6);\n      }\n      $('#score-single-input').val(passScore);\n      $('.js-score-total').text(score);\n      this.initScoreSlider(parseInt(passScore),parseInt(score));\n    } else {\n      $('#questionItemShowDiv').hide();\n    }\n  }\n\n  changeTestpaper(event) {\n    let $target = $(event.currentTarget);\n    let $option = $target.find('option:selected');\n    this.initSelectTestpaper($option);\n  }\n\n  showRedoInterval(event) {\n    let $this = $(event.currentTarget);\n    if ($this.val() == 1) {\n      $('#lesson-redo-interval-field').closest('.form-group').hide();\n      $('.starttime-check-div').show();\n      this.dateTimePicker();\n    } else {\n      $('#lesson-redo-interval-field').closest('.form-group').show();\n      $('.starttime-check-div').hide();\n    }\n  }\n\n  startTimeCheck(event) {\n    var $this = $(event.currentTarget);\n\n    if ($this.val() == 'realTime') {\n      $('.starttime-input').removeClass('hidden');\n      this.dateTimePicker();\n    } else {\n      $('.starttime-input').addClass('hidden');\n      //$('input[name=\"startTime\"]').val('0');\n    }\n  }\n\n  changeEndTime(event) {\n    let startTime = $('input[name=\"startTime\"]:visible').val();\n    // if (startTime) {\n    //   this.showEndTime(Date.parse(startTime));\n    // }\n  }\n\n  changeCondition(event) {\n    let $this = $(event.currentTarget);\n    let value = $this.find('option:selected').val();\n    value!='score' ? $('.js-score-form-group').addClass('hidden') : $('.js-score-form-group').removeClass('hidden');\n  }\n\n  initScoreSlider(passScore,score) {\n    let scoreSlider = document.getElementById('score-slider');\n    let option = {\n      start: passScore,\n      connect: [true, false],\n      tooltips: [true],\n      step: 1,\n      range: {\n        'min': 0,\n        'max': score\n      }\n    }\n    if(this.scoreSlider) {\n      this.scoreSlider.updateOptions(option);\n    }else {\n      this.scoreSlider = noUiSlider.create(scoreSlider,option);\n      scoreSlider.noUiSlider.on('update', function( values, handle ){\n        $('.noUi-tooltip').text(`${(values[handle]/score*100).toFixed(0)}%`);\n        $('.js-score-tooltip').css('left',`${(values[handle]/score*100).toFixed(0)}%`);\n        $('.js-passScore').text(parseInt(values[handle]));\n        $('input[name=\"finishScore\"]').val(parseInt(values[handle]));\n      });\n    }\n    let html = `<div class=\"score-tooltip js-score-tooltip\"><div class=\"tooltip top\" role=\"tooltip\" style=\"\">\n      <div class=\"tooltip-arrow\"></div>\n      <div class=\"tooltip-inner \">\n      达标分数：<span class=\"js-passScore\">${passScore}</span>分\n      </div>\n      </div></div>`;\n    $('.noUi-handle').append(html);\n    $('.noUi-tooltip').text(`${(passScore/score*100).toFixed(0)}%`);\n    $('.js-score-tooltip').css('left',`${(passScore/score*100).toFixed(0)}%`);\n  }\n\n  getItemsTable(url, testpaperId) {\n  \t$.post(url, {testpaperId:testpaperId},function(html){\n      $('#questionItemShowTable').html(html);\n      $('#questionItemShowDiv').show();\n    });\n  }\n\n  dateTimePicker() {\n    let data = new Date();\n    let $starttime = $('input[name=\"startTime\"]');\n\n    if ($starttime.is(':visible') && ($starttime.val() == '' || $starttime.val() == '0')) {\n      $starttime.val(data.Format('yyyy-MM-dd hh:mm'));\n    }\n   \n    $starttime.datetimepicker({\n      autoclose: true,\n      format: 'yyyy-mm-dd hh:ii',\n      language:\"zh\",\n      minView: 'hour',\n      endDate: new Date(Date.now() + 86400*365*100*1000)\n    })\n    .on('show', event => {\n      this.$parentiframe.height($('body').height() + 240);\n    })\n    .on('hide', event => {\n      this.$step2_form.data('validator').form();\n      this.$parentiframe.height($('body').height());\n    })\n    .on('changeDate',event =>{\n      let date = event.date.valueOf();\n      // this.showEndTime(date);\n    });\n    $starttime.datetimepicker('setStartDate',data);\n    // this.showEndTime(Date.parse($starttime.val()));\n  }\n\n  // showEndTime(date) {\n  //   let limitedTime = $('input[name=\"limitedTime\"]').val();\n  //   if (limitedTime != 0) {\n  //     let endTime = new Date(date + limitedTime * 60 * 1000);\n  //     let endDate = endTime.Format(\"yyyy-MM-dd hh:mm\");\n  //     $('#starttime-show').html(endDate);\n  //     $('.endtime-input').removeClass('hidden');\n  //     $('input[name=\"endTime\"]').val(endDate);\n  //   }else {\n  //     $('.endtime-input').addClass('hidden');\n  //   }\n  // }\n}\n\nnew Testpaper($('#iframe-content'));"]}