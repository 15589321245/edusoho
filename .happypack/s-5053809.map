{"version":3,"sources":["app/Resources/static-src/app/js/courseset-manage/base/index.js"],"names":["Base","init","initValidator","initSelect2","$form","$","validator","validate","rules","title","required","depends","val","trim","open_live_course_title","subtitle","messages","click","form","event","currentTarget","button","submit","select2","ajax","url","dataType","quietMillis","data","term","page","q","page_limit","results","each","index","item","push","id","name","initSelection","element","callback","split","formatSelection","formatResult","formatSearching","width","multiple","maximumSelectionSize","placeholder","Translator","trans"],"mappings":";;;;AAAA;;;;;;IACMA,I;AACJ,kBAAc;AAAA;;AACZ,SAAKC,IAAL;AACD;;;;2BAEM;AACL,WAAKC,aAAL;AACA,WAAKC,WAAL;AACD;;;oCAEe;AACd,UAAIC,QAAQC,EAAE,iBAAF,CAAZ;AACA,UAAIC,YAAYF,MAAMG,QAAN,CAAe;AAC7BC,eAAO;AACLC,iBAAO;AACLC,sBAAU;AACRC,uBAAS,mBAAY;AACnBN,kBAAE,IAAF,EAAQO,GAAR,CAAYP,EAAEQ,IAAF,CAAOR,EAAE,IAAF,EAAQO,GAAR,EAAP,CAAZ;AACA,uBAAO,IAAP;AACD;AAJO,aADL;AAOLE,oCAAwB;AAPnB,WADF;AAULC,oBAAU;AACRL,sBAAU;AACRC,uBAAS,mBAAY;AACnBN,kBAAE,IAAF,EAAQO,GAAR,CAAYP,EAAEQ,IAAF,CAAOR,EAAE,IAAF,EAAQO,GAAR,EAAP,CAAZ;AACA,uBAAO,KAAP;AACD;AAJO;AADF;AAVL,SADsB;AAoB7BI,kBAAU;AACRP,iBAAO;AADC;AApBmB,OAAf,CAAhB;AAwBAJ,QAAE,wBAAF,EAA4BY,KAA5B,CAAkC,iBAAS;AACzC,YAAIX,UAAUY,IAAV,EAAJ,EAAsB;AACpBb,YAAEc,MAAMC,aAAR,EAAuBC,MAAvB,CAA8B,SAA9B;AACAjB,gBAAMkB,MAAN;AACD;AACF,OALD;AAMD;;;kCAEa;AAAA;;AACZjB,QAAE,OAAF,EAAWkB,OAAX;AACEC,cAAM;AACJC,eAAK,mBADD;AAEJC,oBAAU,MAFN;AAGJC,uBAAa,GAHT;AAIJC,gBAAM,cAAUC,IAAV,EAAgBC,IAAhB,EAAsB;AAC1B,mBAAO;AACLC,iBAAGF,IADE;AAELG,0BAAY;AAFP,aAAP;AAID,WATG;AAUJC,mBAAS,iBAAUL,IAAV,EAAgB;AACvB,gBAAIK,UAAU,EAAd;AACA5B,cAAE6B,IAAF,CAAON,IAAP,EAAa,UAAUO,KAAV,EAAiBC,IAAjB,EAAuB;AAClCH,sBAAQI,IAAR,CAAa;AACXC,oBAAIF,KAAKG,IADE;AAEXA,sBAAMH,KAAKG;AAFA,eAAb;AAID,aALD;AAMA,mBAAO;AACLN,uBAASA;AADJ,aAAP;AAGD;AArBG,SADR;AAwBEO,uBAAe,uBAAUC,OAAV,EAAmBC,QAAnB,EAA6B;AAC1C,cAAId,OAAO,EAAX;AACAvB,YAAEoC,QAAQ7B,GAAR,GAAc+B,KAAd,CAAoB,GAApB,CAAF,EAA4BT,IAA5B,CAAiC,YAAY;AAC3CN,iBAAKS,IAAL,CAAU;AACRC,kBAAI,IADI;AAERC,oBAAM;AAFE,aAAV;AAID,WALD;AAMAG,mBAASd,IAAT;AACD,SAjCH;AAkCEgB,yBAAiB,yBAAUR,IAAV,EAAgB;AAC/B,iBAAOA,KAAKG,IAAZ;AACD,SApCH;AAqCEM,sBAAc,sBAAUT,IAAV,EAAgB;AAC5B,iBAAOA,KAAKG,IAAZ;AACD,SAvCH;AAwCEO,yBAAiB,QAxCnB;AAyCEC,eAAO,KAzCT;AA0CEC,kBAAU,IA1CZ;AA2CEC,8BAAsB,EA3CxB;AA4CEC,qBAAaC,WAAWC,KAAX,CAAiB,OAAjB;AA5Cf,6CA6CS,KA7CT,0CA8CY,IA9CZ,oDA+CsB,8BAAY;AAC9B,eAAO,IAAP;AACD,OAjDH,sDAkDwB,EAlDxB;AAoDD;;;;;;AAGH,IAAIpD,IAAJ","file":"index.js","sourceRoot":"/Users/kz/projects/edusoho","sourcesContent":["import 'select2';\nclass Base {\n  constructor() {\n    this.init();\n  }\n\n  init() {\n    this.initValidator();\n    this.initSelect2();\n  }\n\n  initValidator() {\n    let $form = $('#courseset-form');\n    let validator = $form.validate({\n      rules: {\n        title: {\n          required: {\n            depends: function () {\n              $(this).val($.trim($(this).val()));\n              return true;\n            }\n          },\n          open_live_course_title: true\n        },\n        subtitle: {\n          required: {\n            depends: function () {\n              $(this).val($.trim($(this).val()));\n              return false;\n            }\n          }\n        }\n      },\n      messages: {\n        title: \"请输入有效的课程标题（直播公开课标题暂不支持<、>、\\\"、&、‘、’、”、“字符）\"\n      }\n    });\n    $('#courseset-base-submit').click(event => {\n      if (validator.form()) {\n        $(event.currentTarget).button('loading');\n        $form.submit();\n      }\n    });\n  }\n\n  initSelect2() {\n    $('#tags').select2({\n      ajax: {\n        url: '/tag/match_jsonp#',\n        dataType: 'json',\n        quietMillis: 100,\n        data: function (term, page) {\n          return {\n            q: term,\n            page_limit: 10\n          };\n        },\n        results: function (data) {\n          var results = [];\n          $.each(data, function (index, item) {\n            results.push({\n              id: item.name,\n              name: item.name\n            });\n          });\n          return {\n            results: results\n          };\n        }\n      },\n      initSelection: function (element, callback) {\n        var data = [];\n        $(element.val().split(\",\")).each(function () {\n          data.push({\n            id: this,\n            name: this\n          });\n        });\n        callback(data);\n      },\n      formatSelection: function (item) {\n        return item.name;\n      },\n      formatResult: function (item) {\n        return item.name;\n      },\n      formatSearching: '搜索中...',\n      width: 'off',\n      multiple: true,\n      maximumSelectionSize: 20,\n      placeholder: Translator.trans('请输入标签'),\n      width: 'off',\n      multiple: true,\n      createSearchChoice: function () {\n        return null;\n      },\n      maximumSelectionSize: 20\n    });\n  }\n}\n\nnew Base();\n"]}