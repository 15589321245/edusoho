{% import _self as paginator_macro %}
<div class="toolbar toolbar-open toolbar-question-marker" 
	data-marker-metas-url="
	{{path('course_lesson_marker_metas',{'mediaId':lesson.mediaId})}}"
	data-queston-marker-add-url="{{path('course_lesson_question_marker_add',{'courseId':course.id,'lessonId':lesson.id})}}" 
	data-queston-marker-delete-url="{{path('course_lesson_question_marker_delete',{'courseId':course.id,'lessonId':lesson.id})}}" 
	data-marker-merge-url="{{path('course_lesson_marker_merge',{'courseId':course.id,'lessonId':lesson.id})}}" 
	data-marker-update-url="{{path('course_lesson_marker_update',{'courseId':course.id,'lessonId':lesson.id})}}"
	data-queston-marker-sort-url="{{path('course_lesson_question_marker_sort',{'courseId':course.id,'lessonId':lesson.id})}}"
	>
	<form class="form-inline mark-from" action="{{path('course_lesson_question_marker_search',{courseId:course.id,lessonId:lesson.id})}}" method="post" novalidate>
		<input type="hidden" name="_csrf_token" value="{{ csrf_token('site') }}">	
		<div class="form-group">
			<select class="form-control" name="target" >
				{{ select_options(targetChoices, app.request.request.get('target'))}}
			</select>
		</div>

		<div class="form-group">
			<input type="text" id="keyword" name="keyword" class="form-control" value="{{ app.request.query.get('keyword') }}" placeholder="关键词"></div>

		<button class="btn btn-primary btn-md">搜索</button>
	</form>
	<div class="row list-title">
	  <div class="col-md-6">题干</div>
	  <div class="col-md-2">题型</div>
	  <div class="col-md-2">难度</div>
	  <div class="col-md-2">操作</div>
	</div>


	<ul class="lesson-list gruop-lesson-list" id="subject-lesson-list">
	{% include 'TopxiaWebBundle:Marker:question-tr.html.twig' %}
	{{ paginator_macro.paginator(paginator) }}
	</ul>

</div>

{% macro paginator(paginator, class) %}
  {% if paginator.lastPage > 1 %}
    <div class="pagination {{ class }}">
      {% if paginator.currentPage != paginator.firstPage %}
        <div><a  href="{{ paginator.getPageUrl(paginator.firstPage) }}">首页</a></div>
        <div><a  href="{{ paginator.getPageUrl(paginator.previousPage) }}"><i class="es-icon es-icon-chevronleft"></i></a></div>
      {% endif %}
      {% for page in paginator.pages %}
        <div {% if page == paginator.currentPage %}class="active"{% endif %}><a href="{{ paginator.getPageUrl(page) }}">{{ page }}</a></div>
      {% endfor %}

      {% if paginator.currentPage != paginator.lastPage %}
        <div><a  href="{{ paginator.getPageUrl(paginator.nextPage) }}"><i class="es-icon es-icon-chevronright"></i></a></div>
        <div><a  href="{{ paginator.getPageUrl(paginator.getLastPage()) }}">尾页</a></div>
      {% endif %}
    </div>
  {% endif %}
{% endmacro %}

<script>app.load('marker/question')</script>
