{% extends 'TopxiaWebBundle::bootstrap-modal-layout.html.twig' %}

{% block title %} {{'短信验证码'|trans}} {% endblock %}

{% block body %}
    <form id = "js-sms-modal-form" method="post" action="">
      <div class = "form-group">
        <div class = "controls row" >
          <div class = "col-md-2 col-md-offset-2" >
            <label class="control-label">{{'手机号码'|trans}} </label>
          </div>
          {% if app.user and app.user.verifiedMobile %}
            <div class = "col-md-3">
              <input type="text" class="form-control" name="mobile" value="{{ app.user.verifiedMobile }}" readonly="readonly" />
            </div>
            <div class = "col-md-3" >
              <a class="text-sm text-muted" href="{{path('settings_bind_mobile')}}" target="_blank">{{'修改手机号码'|trans}}</a>
            </div>
          {% else %}
            <div class = "col-md-3">
              <input type="text" class="form-control" name="mobile" />
            </div>
          {% endif %}
        </div>
        <br>
        <div class="controls row" >
          <div class = "col-md-5 col-md-offset-2" >
            <input type="text" class="form-control" id="sms-code-modal" name="sms_code_modal"  required="required" placeholder="{{'输入短信验证码'|trans}}" data-url="{{path('edu_cloud_sms_check',{type:'sms_open_course_member_notify'})}}">
          </div>
          <div class="col-md-5">
            <span class="btn btn-default btn-sm js-sms-send" data-url="{{ path('edu_cloud_sms_send') }}">
              <span id="js-time-left"></span>
              <span id="js-fetch-btn-text">{{'获取短信验证码'|trans}}{# 秒后重新获取 #}</span>
           </span>
          </div>
          <div class="col-md-12 col-md-offset-2">
            <div class="help-block"></div>
          </div>
        </div>

      </div>
    </form>

{% endblock %}

{% block footer %}
  <button class="btn btn-primary pull-right js-confirm">{{'确定'|trans}}</button>
  <script>app.load('open-course/member-create-sms');</script>
{% endblock %}