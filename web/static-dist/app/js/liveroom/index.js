webpackJsonp(["app/js/liveroom/index"],[function(r,a){function e(r,a){if(!(r instanceof a))throw new TypeError("Cannot call a class as a function")}var t=function(){function r(r,a){for(var e=0;e<a.length;e++){var t=a[e];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(r,t.key,t)}}return function(a,e,t){return e&&r(a.prototype,e),t&&r(a,t),a}}(),n=function(){function r(){e(this,r),this.init()}return t(r,[{key:"init",value:function(){var r=this;this.isLiveRoomOpened=!1;var a=0,e=1;a=setInterval(function(){if(e>10){clearInterval(a);var t=Translator.trans("进入直播教室错误，请联系管理员，")+"<a href='javascript:document.location.reload()'>"+Translator.trans("重试")+"</a>"+Translator.trans("或")+"<a href='javascript:window.close();'>"+Translator.trans("关闭")+"</a>";return void $("#entry").html(t)}$.ajax({url:$("#entry").data("url"),success:function(t){if(t.error){clearInterval(a);var n=t.error+Translator.trans("，")+"<a href='javascript:document.location.reload()'>"+Translator.trans("重试")+"</a>或<a href='javascript:window.close();'>"+Translator.trans("关闭")+"</a>";return void $("#entry").html(n)}if(t.roomUrl){clearInterval(a),r.isLiveRoomOpened=!0;var o='<iframe name="classroom" src="'+t.roomUrl+'" style="position:absolute; left:0; top:0; height:100%; width:100%; border:0px;" scrolling="no"></iframe>';$("body").html(o)}e++},error:function(){var r="进入直播教室错误，请联系管理员，<a href='javascript:document.location.reload()'>重试</a>或<a href='javascript:window.close();'>关闭</a>";$("#entry").html(r)}})},3e3),this.triggerLiveEvent()}},{key:"triggerLiveEvent",value:function(){var r=this,a=null,e=setInterval(function(){r.isLiveRoomOpened&&0!=$('meta[name="trigger_url"]').length&&(a=a?"doing":"start",$.ajax({url:$('meta[name="trigger_url"]').attr("content"),type:"GET",data:{eventName:a},success:function(r){r.live_end&&clearInterval(e)}}))},6e4)}}]),r}();new n}]);