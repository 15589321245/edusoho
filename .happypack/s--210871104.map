{"version":3,"sources":["app/Resources/static-src/app/js/classroom/set-picture-crop/index.js"],"names":["CoverCrop","init","imageCrop","element","cropedWidth","cropedHeight","afterCrop","response","url","$","data","post","images","JSON","stringify","document","location","href","click","e","stopPropagation","crop","imgs","large","middle","small","history","go","define","require","exports","module","Notify","ImageCrop","run","group","on"],"mappings":";;;;AAAA;;;;;;;;IAEMA,S;AACJ,uBAAc;AAAA;;AACZ,SAAKC,IAAL;AACD;;;;2BAEM;AACL,UAAIC,YAAY,0BAAgB;AAC9BC,iBAAS,yBADqB;AAE9B;AACAC,qBAAa,GAHiB;AAI9BC,sBAAc;AAJgB,OAAhB,CAAhB;AAMAH,gBAAUI,SAAV,GAAsB,UAASC,QAAT,EAAmB;AACvC,YAAIC,MAAMC,EAAE,qBAAF,EAAyBC,IAAzB,CAA8B,KAA9B,CAAV;AACAD,UAAEE,IAAF,CAAOH,GAAP,EAAY,EAAEI,QAAQC,KAAKC,SAAL,CAAeP,QAAf,CAAV,EAAZ,EAAkD,YAAW;AAC3DQ,mBAASC,QAAT,CAAkBC,IAAlB,GAAyBR,EAAE,qBAAF,EAAyBC,IAAzB,CAA8B,SAA9B,CAAzB;AACD,SAFD;AAGD,OALD;;AAOAD,QAAE,qBAAF,EAAyBS,KAAzB,CAA+B,UAASC,CAAT,EAAY;AACzCA,UAAEC,eAAF;;AAEAlB,kBAAUmB,IAAV,CAAe;AACbC,gBAAM;AACJC,mBAAO,CAAC,GAAD,EAAM,GAAN,CADH;AAEJC,oBAAQ,CAAC,GAAD,EAAM,GAAN,CAFJ;AAGJC,mBAAO,CAAC,EAAD,EAAK,EAAL;AAHH;AADO,SAAf;AAQD,OAXD;;AAaAhB,QAAE,UAAF,EAAcS,KAAd,CAAoB,YAAW;AAC7BQ,gBAAQC,EAAR,CAAW,CAAC,CAAZ;AACD,OAFD;AAGD;;;;;;AAIH,IAAI3B,SAAJ;;AAIA4B,OAAO,UAASC,OAAT,EAAkBC,OAAlB,EAA2BC,MAA3B,EAAmC;AACtCF,UAAQ,kBAAR;AACAA,UAAQ,cAAR;AACA,MAAIG,SAASH,QAAQ,yBAAR,CAAb;AACA,MAAII,YAAYJ,QAAQ,mBAAR,CAAhB;;AAEAC,UAAQI,GAAR,GAAc,YAAW;;AAErB,QAAIhC,YAAY,IAAI+B,SAAJ,CAAc;AAC1B9B,eAAS,yBADiB;AAE1BgC,aAAO,QAFmB;AAG1B/B,mBAAa,GAHa;AAI1BC,oBAAc;AAJY,KAAd,CAAhB;;AAOAH,cAAUkC,EAAV,CAAa,WAAb,EAA0B,UAAS7B,QAAT,EAAkB;AACxC,UAAIC,MAAMC,EAAE,qBAAF,EAAyBC,IAAzB,CAA8B,KAA9B,CAAV;AACAD,QAAEE,IAAF,CAAOH,GAAP,EAAY,EAACI,QAAQL,QAAT,EAAZ,EAAgC,YAAU;AACtCQ,iBAASC,QAAT,CAAkBC,IAAlB,GAAuBR,EAAE,qBAAF,EAAyBC,IAAzB,CAA8B,SAA9B,CAAvB;AACH,OAFD;AAGH,KALD;;AAOAD,MAAE,qBAAF,EAAyBS,KAAzB,CAA+B,UAASC,CAAT,EAAW;AACtCA,QAAEC,eAAF;;AAEAlB,gBAAUmB,IAAV,CAAe;AACXC,cAAM;AACFC,iBAAO,CAAC,GAAD,EAAM,GAAN,CADL;AAEFC,kBAAQ,CAAC,GAAD,EAAM,GAAN,CAFN;AAGFC,iBAAO,CAAC,GAAD,EAAM,GAAN;AAHL;AADK,OAAf;AAQH,KAXD;;AAaAhB,MAAE,UAAF,EAAcS,KAAd,CAAoB,YAAU;AAC1BQ,cAAQC,EAAR,CAAW,CAAC,CAAZ;AACH,KAFD;AAIH,GAjCD;AAmCH,CAzCD","file":"index.js","sourceRoot":"/Users/kz/projects/edusoho","sourcesContent":["import EsImageCrop from 'libs/js/es-image-crop.js';\n\nclass CoverCrop {\n  constructor() {\n    this.init();\n  }\n\n  init() {\n    let imageCrop = new EsImageCrop({\n      element: \"#courseset-picture-crop\",\n      // group: \"course_set\",\n      cropedWidth: 480,\n      cropedHeight: 270\n    });\n    imageCrop.afterCrop = function(response) {\n      let url = $(\"#upload-picture-btn\").data(\"url\");\n      $.post(url, { images: JSON.stringify(response) }, function() {\n        document.location.href = $(\"#upload-picture-btn\").data(\"gotoUrl\");\n      });\n    };\n\n    $(\"#upload-picture-btn\").click(function(e) {\n      e.stopPropagation();\n\n      imageCrop.crop({\n        imgs: {\n          large: [480, 270],\n          middle: [304, 171],\n          small: [96, 54],\n        }\n      });\n\n    })\n\n    $('.go-back').click(function() {\n      history.go(-1);\n    });\n  }\n}\n\n\nnew CoverCrop();\n\n\n\ndefine(function(require, exports, module) {\n    require(\"jquery.jcrop-css\");\n    require(\"jquery.jcrop\");\n    var Notify = require('common/bootstrap-notify');\n    var ImageCrop = require('edusoho.imagecrop');\n\n    exports.run = function() {\n\n        var imageCrop = new ImageCrop({\n            element: \"#classroom-picture-crop\",\n            group: \"course\",\n            cropedWidth: 525,\n            cropedHeight: 350\n        });\n\n        imageCrop.on(\"afterCrop\", function(response){\n            var url = $(\"#upload-picture-btn\").data(\"url\");\n            $.post(url, {images: response}, function(){\n                document.location.href=$(\"#upload-picture-btn\").data(\"gotoUrl\");\n            });\n        });\n\n        $(\"#upload-picture-btn\").click(function(e){\n            e.stopPropagation();\n\n            imageCrop.crop({\n                imgs: {\n                    large: [525, 350],\n                    middle: [345, 230],\n                    small: [213, 142],\n                }\n            });\n\n        })\n\n        $('.go-back').click(function(){\n            history.go(-1);\n        });\n\n    };\n  \n});"]}