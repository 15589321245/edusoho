{% import "TopxiaAdminBundle::macro.html.twig" as admin_macro %}

{% set orderCount = refererLog.orderCount|default(0) %}
{% set hitNum = refererLog.hitNum|default(0) %}
{% if refererLog.orderCount is null %}
  {% set orderCount = 0 %}
{% endif %}
{% if refererLog.hitNum is null %}
  {% set hitNum = 0 %}
{% endif %}
<tr id="course-tr-{{ course.id }}">
  <td>
    <a href="{{ path('open_course_show', {courseId:course.id}) }}" target="_blank"><strong>{{ course.title }}</strong></a>
    {% if course.type == 'live' or course.type == 'liveOpen' %}
      <span class="label label-success live-label mls">{{ '直播'|trans }}</span>
    {% endif %}
  </td>
  
  <td>
    {{ orderCount }} 次
    <a href="#modal" title="{{ '购买转化详情'|trans }}" data-toggle="modal" data-url="{{ path('admin_opencourse_analysis_conversion_result',{courseId:course.id,startTime:dateRange.startTime,endTime:dateRange.endTime}) }}">{{ '购买转化详情'|trans }}</a>
  </td>
  <td>{{ hitNum }} 次</td>
  <td>
    {% if refererLog and orderCount and hitNum %}{{ (orderCount / hitNum * 100)|number_format(2,'.') }} {% else %} 0 {% endif %} %
  </td>
</tr>
