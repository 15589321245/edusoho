{% import "macro.html.twig" as web_macro %}
{% do script(['app/js/course-manage/header/index.js']) %}
{% set basepath = path('course_show', {id: course.id}) %}

<div class="course-manage-header clearfix">

  {% if course.status=='closed' %}
    <span class="course-publish-status course-publish-status--closed">{{'course.status.closed'|trans}}</span>
  {% elseif course.status=='draft' %}
    <span class="course-publish-status course-publish-status--unpublished">{{'course.status.unpublished'|trans}}</span>
  {% elseif course.status=='published' %}
    <span class="course-publish-status course-publish-status--published">{{'course.status.published'|trans}}</span>
  {% endif %}

  <div class="course-manage-header-info">
    <h1 class="title course-manage-header-info__title">
      <a class="cd-link-major" href="{{basepath}}">{{ courseSet.title ~ ' - ' ~ course.title }}</a>
    </h1>
    <div class="course-manage-header-info__type">解锁式学习模式</div>
  </div>

  <div class="course-manage-header-data">
    <span class="course-manage-header-data__icon"><i class="es-icon es-icon-person"></i>25</span>
    <span class="course-manage-header-data__icon"><i class="es-icon es-icon-person"></i>623</span>
    <span class="course-manage-header-data__price color-danger">￥99.00</span>
  </div>

  <div class="pull-right hidden-xs">
    <a class="btn cd-btn cd-btn-primary" href="{{ path('course_set_manage_base', {id: courseSet.id}) }}">
      {{'course.btn.back_course_edit'|trans}}
    </a>
    {# 发布状态 #}
    {% if course.status == 'published' %}
      <div class="btn-group">
        <a class="btn cd-btn cd-btn-primary" href="{{basepath}}">{{'course.btn.back_course_homepage'|trans}}</a>
      </div>
    {% endif %}

    {# 未发布状态 #}
    {% if course.status != 'published' %}

      <div class="btn-group">
        <a class="btn cd-btn cd-btn-primary" target="_blank" href="{{ path('course_show', {id: course.id, 'previewAs':'guest'}) }}">{{'course.btn.preview'|trans}}</a>
      </div>
      <div class="btn-group">
        <button class="btn cd-btn cd-btn-primary course-publish-btn" data-url="{{ path('course_set_manage_course_publish', {courseSetId: courseSet.id, courseId: course.id}) }}">{{'course.btn.publish_task'|trans}}</button>
      </div>
      <button class="btn cd-btn cd-btn-primary"><i class="es-icon es-icon-morehoriz"></i></button>
    {% endif %}
  </div>
</div>
