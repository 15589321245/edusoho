{% extends 'TopxiaWebBundle::bootstrap-modal-layout.html.twig' %}
{% set block = block|default(null) %}

{% block title %}编辑内容{% endblock %}

{% block body %}
    
<div>
  <p><strong>编辑区名称：{{block.title}}</strong></p>
</div>

<form id="block-form" action="{{ path('admin_block_update', {block:block.id}) }}" method="post">

<div class="form-group">
    <div class="controls">
      <textarea class="form-control" id="blockContent" rows="16" name="content" data-role="editor-field" >
        {{block.content}}
      </textarea>
    </div>
</div>

</form>

<div class="mbm mtl"><strong>变更记录</strong></div>
  <table id="block-history-table" class="table table-striped">
  <tbody>
     {% for blockHistory in blockHistorys %}
    <tr id="{{ blockHistory.id }}">
      <td>{{ blockHistory.createdTime |date('Y-n-d H:i:s') }}</td>
      <td>{{ historyUsers[blockHistory.userId].nickname }}</td>
      <td>
        <a class="btn btn-mini btn-default edit-btn" 
        href="{{ path('admin_blockhistory_preview', {id:blockHistory.id}) }}" target="_blank"> 预览 </a>
      </td>
      <td>
        <button class="btn-recover-content btn btn-mini btn-default edit-btn">恢复此内容</button>
        <div class="data-role-content" style="display:none" > {{ blockHistory.content}} </div>
      </td>
    </tr>
    {% endfor %}
   </tbody>
</table>

  <script type="text/javascript">app.load('block/update')</script>
   {{ web_macro.paginator(paginator) }} 
{% endblock %}

{% block footer %}
  <button type="button" class="btn btn-link" data-dismiss="modal">取消</button>
  <button type="submit" class="btn btn-primary" data-toggle="form-submit" data-target="#block-form">保存</button>
{% endblock %}
