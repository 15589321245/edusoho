{# 
  mode的取值有：
    full：该模式下显示折扣价、原价、打折
    price: 该模式下如有打折活动则显示折扣价，没有打折活动就显示为原价
    originPrice：该模式下只显示原价
    discount：该模式下只显示折扣
#}

{% set shows = shows|default(['full']) %}
{% set priceType = (setting('coin.coin_enabled') and setting('coin.price_type') == 'Coin') ? 'coin' : 'default'  %}

<div class="course-item">
  <div class="course-img">
    {% if course.discountId %}
      {% if 'full' in shows or 'discount' in shows %}

          {% if (course.discount == 0) or (priceType == 'coin' and course.originCoinPrice == 0) or (priceType == 'default' and course.originPrice == 0) %}
            <span class="tag-discount free"></span>
          {% else  %}
            <span class="tag-discount"></span>
          {% endif %}

      {% endif %}
    {% endif %}
    <a href="{{ path('course_show', {id:course.id}) }}">
      {{ lazy_img(default_path('coursePicture', course.middlePicture, 'large'), 'transform img-responsive') }}
  </div>

    <div class="course-info">
      <div class="title"><a href="{{ path('course_show', {id:course.id}) }}">{{ course.title }}</a></div>
      <div class="metas clearfix">
        <span class="num"><i class="iconfont icon-group"></i>{{ course.studentNum }}</span>
        <span class="comment"><i class="iconfont icon-comment"></i>{{ course.ratingNum }}</span>
        {% if course.discountId %}

          {% if 'full' in shows or 'price' in shows %}
            {% if priceType == 'coin' %}
              <span class="price">{{ course.coinPrice }} {{setting('coin.coin_name', '虚拟币')}}</span>
            {% else %}
              <span class="price">{{ course.price }} 元</span>
            {% endif %}
          {% endif %}

          {% if 'full' in shows or 'originPrice' in shows %}
            {% if priceType == 'coin' %}
              <span class="origin-price"><del>{{course.originCoinPrice}}</del></span>
            {% else %}
              <span class="origin-price"><del>{{course.originPrice}}</del></span>
            {% endif %}
          {% endif %}

        {% else %}

          {% if 'full' in shows or 'price' in shows %}
            <span class="price">
              {% if setting('coin.coin_enabled') and setting('coin.price_type') == 'Coin' %}
                {% if course.coinPrice > 0 %} {{ course.coinPrice }} {{setting('coin.coin_name', '虚拟币')}} {% else %} 免费 {% endif %}
              {% else %}
                {% if course.price > 0 %}{{ course.price }} 元{% else %} 免费 {% endif %}
              {% endif %}
            </span>
          {% endif %}

        {% endif %}
       </div>
    </div>
</div>