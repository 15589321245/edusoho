{% if isMobile|default(false) %}
  {% for nav in navigations if nav.isOpen %}
    {% include 'TopxiaWebBundle:Default:navigation-li.html.twig' %}
  {% endfor %}
{% else %}
  <div class="nav-left clearfix">
    <ul class="nav navbar-nav qs-nav">
      {% for nav in navigations if nav.isOpen %}
        {% if loop.index < 5 %}
          {% include 'TopxiaWebBundle:Default:navigation-li.html.twig' %}
        {% endif %}
      {% endfor %}
    </ul>
  </div>
  <div class="nav-right clearfix">
    <ul class="nav navbar-nav qs-nav user-nav">
      {% for nav in navigations if nav.isOpen %}
        {% if loop.index >= 5 and loop.index < 8 %}
          {% include 'TopxiaWebBundle:Default:navigation-li.html.twig' %}
        {% endif %}
      {% endfor %}

      {% if app.user %}
        <li class="dropdown user-li">
          <a href="javascript:;" class="dropdown-toggle" data-toggle="dropdown">
            <img class="avatar-xs" src="{{ filepath(app.user.smallAvatar, 'avatar.png') }}">
          </a>
          <ul class="dropdown-menu" role="menu">
            <li role="presentation" class="dropdown-header">{{ app.user.nickname }}</li>
            <li><a href="{{ path('user_show', {id:app.user.id}) }}"><i class="es-icon es-icon-person"></i>个人主页</a></li>
            <li><a href="{{ path('settings') }}"><i class="es-icon es-icon-setting"></i>个人设置</a></li>
            <li>
              <a href="{{ path('my') }}">
                <i class="es-icon es-icon-eventnote"></i>{% if 'ROLE_TEACHER' in app.user.roles %}我的教学{% else %}我的学习{% endif %}
              </a>
            </li>
            <li><a href="{% if setting('coin.coin_enabled') %}{{path('my_coin')}}{% else %}{{path('my_bill')}}{% endif %}"><i class="es-icon es-icon-accountwallet"></i>账户中心</a></li>
            {% if is_granted('ROLE_BACKEND') %}<li><a href="{{ path('admin') }}"><i class="es-icon es-icon-dashboard"></i>管理后台</a></li>
            {% endif %}

            <li><a href="{{ path('notification') }}"><span class="pull-right num">{% if app.user.newNotificationNum > 0 %}{{ app.user.newNotificationNum }}{% endif %}</span><i class="es-icon es-icon-notificationson"></i>通知</a></li>
            <li><a href="{{ path('message') }}"><span class="pull-right num">{% if app.user.newMessageNum > 0 %}{{ app.user.newMessageNum }}{% endif %}</span><i class="es-icon es-icon-mail"></i>私信</a></li>
            <li><a href="{{ path('logout') }}"><i class="es-icon es-icon-power"></i>退出登录</a></li>
          </ul>
        </li>
      {% else %}
        <li><a href="{{ path('login', {goto:_target_path|default(app.request.server.get('REQUEST_URI'))}) }}">登录/注册</a></li>
      {% endif %}
    </ul>
  </div>
{% endif %}