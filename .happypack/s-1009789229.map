{"version":3,"sources":["app/Resources/static-src/app/common/component/persona-multi-input/list.js"],"names":["List","props","listId","$list","$item","sortId","$","sortable","element","itemSelector","ajax","data","children","remove","append","context","sortItem","onChange","on","dataSourceUi","listClassName","showCheckbox","showDeleteBtn","checkBoxName","inputName","name","length","map","item","i","itemId","seq","avatar","nickname","id","isVisible","onChecked","event","removeItem","contextTypes","PropTypes","func","bool","string","array","isRequired"],"mappings":"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","file":"list.js","sourceRoot":"/Users/kz/projects/edusoho","sourcesContent":["import React, { Component } from 'react';\nimport sortList from 'common/sortable';\nimport { getRandomString } from '../multi-input/part';\nimport MultiInputList from 'app/common/multi-input/list';\n\nexport default class List extends Component {\n  constructor(props) {\n    super(props);\n    this.listId = getRandomString();\n    this.$list = null;\n    this.$item = null;\n  }\n\n  componentDidMount() {\n    let sortId = `#${this.listId}`;\n    this.$list = $(sortId);\n    if (this.props.sortable) {\n      sortList({\n        element: sortId,\n        itemSelector: \"li\",\n        ajax: false,\n      }, (data) => {\n        //@TODO需优化成React的组件\n        $(sortId).children().remove();\n        $(sortId).append(this.$item);\n        this.context.sortItem(data);\n      });\n      this.onChange(sortId);\n    }\n  }\n\n  onChange(sortId) {\n    //sortList操作了真实的DOM需要还原；\n    this.$list.on('mousedown', 'li', () => {\n      this.$item = $(sortId).children('.list-group-item');\n    })\n  }\n\n  render() {\n    const {\n      dataSourceUi,\n      listClassName,\n      sortable,\n      showCheckbox,\n      showDeleteBtn,\n      checkBoxName,\n      inputName\n    } = this.context;\n    let name = '';\n    if (dataSourceUi.length > 0) {\n      name = 'list-group';\n    }\n    return (\n      <ul id={this.listId} className={`multi-list sortable-list ${name} ${listClassName}`}>\n        {\n          dataSourceUi.map((item, i) => {\n            return (\n              <li className=\"list-group-item\" id={item.itemId} key={i} data-seq={item.seq}>\n                {sortable && <i className=\"es-icon es-icon-yidong mrl color-gray inline-block vertical-middle\"></i>}\n                <img className=\"avatar-sm avatar-sm-square mrm\" src={item.avatar} />\n                <span className=\"label-name text-overflow inline-block vertical-middle\">{item.nickname}</span>\n                <label className={showCheckbox ? '' : 'hidden'}><input type=\"checkbox\" name={checkBoxName + item.id} checked={item.isVisible} onChange={event => this.context.onChecked(event)} value={item.itemId} />显示</label>\n                <a className={showDeleteBtn ? 'pull-right link-gray mtm' : 'hidden'} onClick={event => this.context.removeItem(event)} data-item-id={item.itemId}>\n                  <i className=\"es-icon es-icon-close01 text-12\"></i>\n                </a>\n                <input type=\"hidden\" name={inputName} value={item.id} />\n              </li>\n            )\n          })\n        }\n      </ul>\n    )\n  }\n};\n\nList.contextTypes = {\n  removeItem: React.PropTypes.func,\n  sortItem: React.PropTypes.func,\n  sortable: React.PropTypes.bool,\n  listClassName: React.PropTypes.string,\n  inputName: React.PropTypes.string,\n  dataSourceUi: React.PropTypes.array.isRequired,\n  showCheckbox: React.PropTypes.bool,\n  showDeleteBtn: React.PropTypes.bool,\n  checkBoxName: React.PropTypes.string,\n  onChecked: React.PropTypes.func,\n};"]}