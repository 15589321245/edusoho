{% extends 'TopxiaWebBundle::layout.html.twig' %}

{% set bodyClass = "testpaper-activity-show-body" %}

{% block title %}{{ paper.name }} - {{ parent() }}{% endblock %}

{% do script(['libs/es-ckeditor/ckeditor.js','libs/jquery-timer.js','libs/perfect-scrollbar.js','web/testpaper/do-test/index.js']) %}

{% block header %}{% if showHeader|default(1) %}{{ parent() }}{% endif %}{% endblock %}

{% block body %}
   <div class="testpaper-activity-show">
   <div class="container">
  {% block paper_header %}
    {#<div class="es-section testpaper-heading">
      <div class="testpaper-titlebar clearfix">
        <h1 class="testpaper-title">
          {{ paper.name }} <br>
          <small class="text-sm">
            {% if paperResult.status|default('doing') in ['reviewing','finished'] %}
              {{'答题人：'|trans}}{{ student.nickname }} 
              {{'交卷时间：'|trans}}{{ paperResult.endTime|date('Y-n-d H:i') }} 
              {{'用时：'|trans}}{{ paperResult.usedTime|duration }}
            {% endif %}
          </small>
        </h1>
        <div class="testpaper-status">
          {% if paperResult.status|default('doing') == 'doing' %}
            <div class="label label-primary">{{'答题中'|trans}}</div>
          {% elseif paperResult.status|default('doing') == 'reviewing' %}
            <div class="label label-info">{{'批阅中'|trans}}</div>
          {% else %}
            <div class="label label-success">{{'批阅完成'|trans}}</div>
          {% endif %}
        </div>
      </div>

      {% block paper_description %}{% endblock %}
      {% block paper_result_bar %}{% endblock %}
      {% block paper_warning %}{% endblock %}
      {% block paper_question_type_bar %}{% endblock %}
    </div>#}
  {% endblock %}

  {% block paper_content %}
    <div class="row">
      <div class="col-md-9 prevent-copy">
        <div class="testpaper-body" >
          {% block paper_body %}
            {% include 'WebBundle:Testpaper:do-test.html.twig' %}
          {% endblock %}
        </div>
      </div>
      <div class="col-md-3">
        {% block paper_sidebar %}{% endblock %}
      </div>
    </div>
  {% endblock %}

  {% block testpaperFinishedDialog %}
    <div id="testpaper-finished-dialog" class="modal in" aria-hidden="false" style="display: none;">
      <div class="modal-dialog modal-dialog-small">
        <div class="modal-content">
          <div class="modal-header">
            <h4 class="modal-title">{{'确认交卷'|trans}}</h4>
          </div>
          <div class="modal-body">
            <h4 class="text-primary">{{'您真的要交卷吗？'|trans}}</h4>
          </div>
          <div class="modal-footer">
            <a href="javascript:;" class="btn btn-link" data-dismiss="modal">{{'取消'|trans}}</a>
            {% block finish_dialog_btn %}
              <button class="btn btn-primary" id="testpaper-finish-btn" data-loading-text="{{'正在交卷, 请稍等'|trans}}..." data-role="paper-submit" data-url="{{ path('testpaper_finish', { resultId: paperResult.id|default(0) }) }}" data-goto="{{ path('testpaper_result_show', { resultId: paperResult.id|default(0) }) }}">{{'确认交卷'|trans}}</button>
            {% endblock %}
          </div>
        </div>
      </div>
    </div>
  {% endblock %}

  {% block timeoutDialog %}
    <div id="timeout-dialog" class="modal in" aria-hidden="false" style="display: none;">
      <div class="modal-dialog modal-dialog-small">
        <div class="modal-content">
          <div class="modal-header">
            <h4 class="modal-title">{{'考试结束'|trans}}</h4>
          </div>
          <div class="modal-body">
            <div class="well well-lg">
              <div class="empty">{{'考试已结束，请点击下面的按钮查看结果'|trans}}~</div>
            </div>
          </div>
          <div class="modal-footer">
            <a href="{{ path('course_manage_test_results', {id:paperResult.id|default(0)} ) }}" id="show_testpaper_result" class="btn btn-info">{{'查看结果'|trans}}</a>
          </div>
        </div>
      </div>
    </div>
  {% endblock %}

  {% block testpaperCheckedDialog %}{% endblock %}
  </div>
  </div>

{% endblock %}



{% block footer %}{% if showHeader|default(1) %}{{ parent() }}{% endif %}{% endblock %}

