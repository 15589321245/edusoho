{"version":3,"sources":["webpack:///./app/Resources/static-src/app/js/classroom/thread-form/index.js"],"names":["$form","$","validator","validate","rules","required","trim","editor","CKEDITOR","replace","toolbar","filebrowserImageUploadUrl","data","on","val","getData","form","threadType","find","positive_integer","visible_character","DateAndTime","datetimepicker","language","document","documentElement","lang","autoclose","format","minView","ev","Date","element","onUploadSuccess","file","response","url","Translator","trans"],"mappings":";;;;;;AAAA;;;;AACA;;;;AACA;;;;;;AAEA,KAAIA,QAAQC,EAAE,cAAF,CAAZ;AACA,KAAIC,YAAYF,MAAMG,QAAN,CAAe;AAC7BC,UAAO;AACL,cAAS;AACPC,iBAAU,IADH;AAEPC,aAAM;AAFC,MADJ;AAKL,gBAAW;AACTD,iBAAU;AADD;AALN;AADsB,EAAf,CAAhB;;AAYA,KAAIE,SAASC,SAASC,OAAT,CAAiB,gBAAjB,EAAmC;AAC9CC,YAAS,QADqC;AAE9CC,8BAA2BV,EAAE,iBAAF,EAAqBW,IAArB,CAA0B,gBAA1B;AAFmB,EAAnC,CAAb;;AAKAL,QAAOM,EAAP,CAAU,QAAV,EAAoB,YAAM;AACxBZ,KAAE,iBAAF,EAAqBa,GAArB,CAAyBP,OAAOQ,OAAP,EAAzB;AACAb,aAAUc,IAAV;AACD,EAHD;AAIAT,QAAOM,EAAP,CAAU,MAAV,EAAkB,YAAM;AACtBZ,KAAE,iBAAF,EAAqBa,GAArB,CAAyBP,OAAOQ,OAAP,EAAzB;AACAb,aAAUc,IAAV;AACD,EAHD;;AAKA,KAAIC,aAAajB,MAAMkB,IAAN,CAAW,eAAX,EAA4BJ,GAA5B,EAAjB;;AAEA,KAAIG,cAAc,OAAlB,EAA2B;AACzBjB,SAAMkB,IAAN,CAAW,mBAAX,EAAgCd,KAAhC,CAAsC,KAAtC,EAA6C;AAC3Ce,uBAAkB;AADyB,IAA7C;AAGAnB,SAAMkB,IAAN,CAAW,mBAAX,EAAgCd,KAAhC,CAAsC,KAAtC,EAA6C;AAC3CgB,wBAAmB;AADwB,IAA7C;AAGApB,SAAMkB,IAAN,CAAW,oBAAX,EAAiCd,KAAjC,CAAuC,KAAvC,EAA8C;AAC5CC,eAAU,IADkC;AAE5CgB,kBAAa;AAF+B,IAA9C;;AAKArB,SAAMkB,IAAN,CAAW,oBAAX,EAAiCI,cAAjC,CAAgD;AAC9CC,eAAUC,SAASC,eAAT,CAAyBC,IADW;AAE9CC,gBAAW,IAFmC;AAG9CC,aAAQ,kBAHsC;AAI9CC,cAAS;AAJqC,IAAhD,EAKGhB,EALH,CAKM,MALN,EAKc,UAAUiB,EAAV,EAAc;AAC1B9B,WAAMG,QAAN,CAAe,kBAAf;AACD,IAPD;AAQAH,SAAMkB,IAAN,CAAW,oBAAX,EAAiCI,cAAjC,CAAgD,cAAhD,EAAgE,IAAIS,IAAJ,EAAhE;;AAEA,+BAAkB;AAChBC,cAAS,uBADO;AAEhBC,sBAAiB,yBAASC,IAAT,EAAeC,QAAf,EAAyB;AACxCnC,aAAMkB,IAAN,CAAW,uBAAX,EAAoCJ,GAApC,CAAwCqB,SAASC,GAAjD;AACA,6BAAO,SAAP,EAAkBC,WAAWC,KAAX,CAAiB,0BAAjB,CAAlB;AACD;AALe,IAAlB;AAOD;;AAGD,iCAAsBtC,KAAtB,E","file":"app/js/classroom/thread-form/index.js","sourcesContent":["import AttachmentActions from 'app/js/attachment/widget/attachment-actions';\nimport EsWebUploader from 'common/es-webuploader';\nimport notify from 'common/notify';\n\nlet $form = $('#thread-form');\nlet validator = $form.validate({\n  rules: {\n    'title': {\n      required: true,\n      trim: true,\n    },\n    'content': {\n      required: true,\n    }\n  }\n});\n\nlet editor = CKEDITOR.replace('thread_content', {\n  toolbar: 'Thread',\n  filebrowserImageUploadUrl: $('#thread_content').data('imageUploadUrl')\n});\n\neditor.on('change', () => {\n  $('#thread_content').val(editor.getData());\n  validator.form();\n});\neditor.on('blur', () => {\n  $('#thread_content').val(editor.getData());\n  validator.form();\n});\n\nlet threadType = $form.find('[name=\"type\"]').val();\n\nif (threadType == 'event') {\n  $form.find('[name=\"maxUsers\"]').rules('add', {\n    positive_integer: true\n  });\n  $form.find('[name=\"location\"]').rules('add', {\n    visible_character: true\n  })\n  $form.find('[name=\"startTime\"]').rules('add', {\n    required: true,\n    DateAndTime: true\n  })\n\n  $form.find('[name=\"startTime\"]').datetimepicker({\n    language: document.documentElement.lang,\n    autoclose: true,\n    format: 'yyyy-mm-dd hh:ii',\n    minView: 'hour',\n  }).on('hide', function (ev) {\n    $form.validate('[name=startTime]');\n  });\n  $form.find('[name=\"startTime\"]').datetimepicker('setStartDate', new Date);\n  \n  new EsWebUploader({\n    element: '#js-activity-uploader',\n    onUploadSuccess: function(file, response) {\n      $form.find('[name=actvityPicture]').val(response.url);\n      notify('success', Translator.trans('site.upload_success_hint'));\n    }\n  });\n}\n\n\nnew AttachmentActions($form);\n\n\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/classroom/thread-form/index.js"],"sourceRoot":""}