{"version":3,"sources":["app/Resources/static-src/app/js/courseset-manage/intro.js"],"names":["COURSE_BASE_INTRO","COURSE_TASK_INTRO","COURSE_TASK_DETAIL_INTRO","COURSE_LIST_INTRO","COURSE_LIST_INTRO_COOKIE","Intro","intro","$","on","event","stopPropagation","exit","isRestintroType","click","showResetStep","show","$btn","removeClass","addClass","isTaskCreatePage","initTaskCreatePageIntro","isCourseListPage","initNotTaskCreatePageIntro","initCourseListPageIntro","trigger","introStart","initAllSteps","initNotTaskPageSteps","length","attr","steps","ntro","introJs","setOptions","skipLabel","nextLabel","prevLabel","doneLabel","showBullets","tooltipPosition","showStepNumbers","start","onexit","store","get","set","initTaskSteps","element","initTaskDetailSteps","listLength","find","Promise","resolve","reject","setTimeout","$courseMenu","slideUp","then","initCourseListIntro","console","log","initCourseListSteps","remove","introBtnClassName","data","initResetStep","arry","isInitTaskDetailIntro","push","position"],"mappings":"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","file":"intro.js","sourceRoot":"/Users/kz/projects/edusoho","sourcesContent":["import 'store';\nimport Cookies from 'js-cookie';\nimport { showSettings } from 'app/js/course-manage/help';\nconst COURSE_BASE_INTRO = 'COURSE_BASE_INTRO';\nconst COURSE_TASK_INTRO = 'COURSE_TASK_INTRO';\nconst COURSE_TASK_DETAIL_INTRO = 'COURSE_TASK_DETAIL_INTRO';\nconst COURSE_LIST_INTRO = 'COURSE_LIST_INTRO';\nconst COURSE_LIST_INTRO_COOKIE = 'COURSE_LIST_INTRO_COOKIE';\n\nexport default class Intro {\n  constructor() {\n    this.intro = null;\n    showSettings();\n    $('body').on('click', '.js-reset-intro', (event) => {\n      event.stopPropagation();\n      this.intro.exit();\n      this.isRestintroType();\n    })\n    $('.js-intro-btn-group').click(()=>{\n      this.showResetStep();\n    });\n   \n  }\n  \n  resetButtonRender(show = false) {\n    let $btn = $('.js-intro-btn-group');\n    show ? $btn.removeClass('hidden') : $btn.addClass('hidden');\n  }\n\n  introType() {\n    if (this.isTaskCreatePage()) {\n      this.initTaskCreatePageIntro();\n      return;\n    }\n    if (!this.isCourseListPage()) {\n      this.initNotTaskCreatePageIntro();\n      return;\n    }\n    this.initCourseListPageIntro();\n  }\n\n  isRestintroType() {\n    if (this.isTaskCreatePage()) { \n      $('.js-task-manage-item:first').trigger('mouseenter');\n      this.introStart(this.initAllSteps());\n      return ;\n    }\n    this.introStart(this.initNotTaskPageSteps());\n  }\n\n  isCourseListPage() {\n    return !!$('#courses-list-table').length;\n  }\n\n  isTaskCreatePage() {\n    return !!$('#step-3').length;\n  }\n\n  isInitTaskDetailIntro() {\n    $('.js-task-manage-item').attr('id', 'step-5');\n    return !!$('.js-settings-list').length;\n  }\n\n  introStart(steps) {\n    this.ntro = introJs();\n    intro.setOptions({\n      steps: steps,\n      skipLabel: '<i class=\"es-icon es-icon-close01\"></i>',\n      nextLabel: '继续了解',\n      prevLabel: '上一步',\n      doneLabel: '<i class=\"es-icon es-icon-close01\"></i>',\n      showBullets: false,\n      tooltipPosition: 'auto',\n      // positionPrecedence:['left', 'right', 'bottom', 'top'],\n      showStepNumbers: false,\n    });\n    intro.start().onexit(function(){\n      $('body').removeClass('transparent-intro');\n    });\n  }\n\n  initTaskCreatePageIntro() {\n    $('.js-task-manage-item:first').trigger('mouseenter');\n    if (!store.get(COURSE_BASE_INTRO) && !store.get(COURSE_TASK_INTRO)) {\n      store.set(COURSE_BASE_INTRO, true);\n      store.set(COURSE_TASK_INTRO, true);\n      this.introStart(this.initAllSteps());\n    } else if (!store.get(COURSE_TASK_INTRO)) {\n      store.set(COURSE_TASK_INTRO, true);\n      this.introStart(this.initTaskSteps());\n    }\n  }\n\n  initTaskDetailIntro(element) {\n    if (!store.get(COURSE_TASK_DETAIL_INTRO)) {\n      store.set(COURSE_TASK_DETAIL_INTRO);\n      this.introStart(this.initTaskDetailSteps(element));\n    }\n  }\n\n  initNotTaskCreatePageIntro() {\n    if (!store.get(COURSE_BASE_INTRO)) {\n      store.set(COURSE_BASE_INTRO, true);\n      this.introStart(this.initNotTaskPageSteps());\n    }\n  }\n\n  isSetCourseListCookies() {\n    if (!store.get(COURSE_LIST_INTRO)) {\n      Cookies.set(COURSE_LIST_INTRO_COOKIE, true);\n    }\n  }\n\n  initCourseListPageIntro() {\n    let listLength = $('#courses-list-table').find('tbody tr').length;\n    \n    if (!(listLength === 2) || store.get(COURSE_LIST_INTRO)|| !Cookies.get(COURSE_LIST_INTRO_COOKIE)) {\n      return;\n    }\n    new Promise((resolve, reject) => {\n      setTimeout(function () {\n        let $courseMenu = $('.js-sidenav-course-menu');\n        if (!$courseMenu.length) {\n          resolve();\n          return;\n        }\n        $('.js-sidenav-course-menu').slideUp(function () {\n          resolve();\n        });\n      }, 500);\n    }).then(() => {\n      setTimeout(() => {\n        this.initCourseListIntro('.js-sidenav');\n        console.log('initCourseListIntro');\n      }, 500);\n    });\n  }\n\n  initCourseListIntro(element) {\n    if (!store.get(COURSE_LIST_INTRO)) {\n      store.set(COURSE_LIST_INTRO, true);\n      this.introStart(this.initCourseListSteps(element));\n      Cookies.remove(COURSE_LIST_INTRO_COOKIE);\n    }\n  }\n\n  showResetStep() {\n    let introBtnClassName = '';\n    if($('.js-sidenav').data('course-length') >   1 ) {\n      introBtnClassName  = 'hidden'\n    }\n    $('body').addClass('transparent-intro');\n    this.introStart(this.initResetStep(introBtnClassName));\n  }\n\n  initAllSteps() {\n    let arry = [\n      {\n        intro: `<p class=\"title\">功能升级</p>\n        课程管理功能现已全新升级!`,\n      },\n      {\n        element: '#step-1',\n        intro: `<p class=\"title\">计划任务</p>\n        教学内容的编辑、管理请点击左侧“计划任务”的菜单项进入!`,\n      },\n      {\n        element: '#step-2',\n        intro: `<p class=\"title\">营销设置</p>\n        在“营销设置”中您可以通过设置决定课程如何销售、如何加入、如何学习!`,\n      },\n      {\n        element: '#step-3',\n        intro: `<p class=\"title\">添加任务</p>\n        您可以在这里选择各种不同的教学手段，然后上传文件/设置内容/设置学习完成条件。!`,\n      }\n    ];\n    //如果存在任务\n    if (this.isInitTaskDetailIntro()) {\n      arry.push({\n        element: '#step-5',\n        intro: `<p class=\"title\">任务环节</p>\n        在设计学习任务时，您可以按照课时去设置预习、学习、练习、作业、课外这几个环节，\n        每个环节都可以通过各种教学手段来实现。!`,\n      })\n    }\n\n    return arry;\n  }\n\n  initNotTaskPageSteps() {\n    return [\n      {\n        intro: `<p class=\"title\">功能升级</p>\n        课程管理功能现已全新升级!`,\n      },\n      {\n        element: '#step-1',\n        intro: `<p class=\"title\">计划任务</p>\n        教学内容的编辑、管理请点击左侧“计划任务”的菜单项进入!`,\n      },\n      {\n        element: '#step-2',\n        intro: `<p class=\"title\">营销设置</p>\n        在“营销设置”中您可以通过设置决定课程如何销售、如何加入、如何学习!`,\n      }\n    ];\n  }\n\n  initTaskSteps() {\n    let arry = [\n      {\n        element: '#step-3',\n        intro: `<p class=\"title\">添加任务</p>\n        您可以在这里选择各种不同的教学手段，然后上传文件/设置内容/设置学习完成条件。!`,\n      }\n    ];\n    //如果存在任务\n    if (this.isInitTaskDetailIntro()) {\n      arry.push({\n        element: '#step-5',\n        intro: `<p class=\"title\">任务环节</p>\n        在设计学习任务时，您可以按照课时去设置预习、学习、练习、作业、课外这几个环节，\n        每个环节都可以通过各种教学手段来实现。!`,\n      })\n    }\n\n    return arry;\n  }\n\n  initTaskDetailSteps(element) {\n    return [\n      {\n        element: element,\n        intro: `<p class=\"title\">任务环节</p>\n        在设计学习任务时，您可以按照课时去设置预习、学习、练习、作业、课外这几个环节，\n        每个环节都可以通过各种教学手段来实现。!`,\n      },\n    ];\n  }\n\n  initCourseListSteps(element) {\n    return [\n      {\n        element: element,\n        intro: `\n          <p class=\"title\">多个教学计划</p>\n          恭喜你创建了多个教学计划！左侧的功能菜单会有所简化，\n          只会显示课程公共的相关设置。`,\n      }\n    ];\n  }\n  initResetStep(introBtnClassName='') {\n    return [\n      {\n        element: '.js-intro-btn-group',\n        intro: `<div class=\"btn-content\"><p><a class='btn btn-success js-reset-intro ${introBtnClassName}'>查看引导</a></p>\n        <a class='btn btn-info'>完整教程</a><div>`,\n        position:'left'\n      }\n    ];\n  }\n}\n\n\n\n\n\n\n\n"]}