{"version":3,"sources":["app/Resources/static-src/app/common/component/multi-input/list.js"],"names":["List","props","listId","$list","$item","sortId","$","sortable","element","itemSelector","ajax","data","children","remove","append","context","sortItem","onChange","on","clone","dataSourceUi","inputName","name","length","listClassName","map","item","i","itemId","seq","hidden","label","removeItem","event","contextTypes","PropTypes","func"],"mappings":";;;;;;;;AAAA;;;;AACA;;;;AACA;;;;;;;;;;IAEqBA,I;;;AACnB,gBAAYC,KAAZ,EAAmB;AAAA;;AAAA,4GACXA,KADW;;AAEjB,UAAKC,MAAL,GAAc,4BAAd;AACA,UAAKC,KAAL,GAAa,IAAb;AACA,UAAKC,KAAL,GAAa,IAAb;AAJiB;AAKlB;;;;wCAEmB;AAAA;;AAClB,UAAIC,eAAa,KAAKH,MAAtB;AACA,WAAKC,KAAL,GAAaG,EAAED,MAAF,CAAb;AACA,UAAI,KAAKJ,KAAL,CAAWM,QAAf,EAAyB;AACvB,gCAAS;AACPC,mBAASH,MADF;AAEPI,wBAAc,IAFP;AAGPC,gBAAM;AAHC,SAAT,EAIG,UAACC,IAAD,EAAU;AACX;AACAL,YAAED,MAAF,EAAUO,QAAV,GAAqBC,MAArB;AACAP,YAAED,MAAF,EAAUS,MAAV,CAAiB,OAAKV,KAAtB;AACA,iBAAKW,OAAL,CAAaC,QAAb,CAAsBL,IAAtB;AACD,SATD;AAUA,aAAKM,QAAL,CAAcZ,MAAd;AACD;AACF;;;6BAEQA,M,EAAQ;AAAA;;AACf;AACA,WAAKF,KAAL,CAAWe,EAAX,CAAc,WAAd,EAA2B,IAA3B,EAAiC,YAAM;AACrC,eAAKd,KAAL,GAAaE,EAAED,MAAF,EAAUO,QAAV,CAAmB,kBAAnB,CAAb;AACD,OAFD;AAGD;;;yCAEoB;AACnB,WAAKR,KAAL,GAAaE,EAAE,KAAKJ,MAAP,EAAeU,QAAf,GAA0BO,KAA1B,EAAb;AACD;;;6BAIQ;AAAA;;AAAA,mBACuC,KAAKlB,KAD5C;AAAA,UACCmB,YADD,UACCA,YADD;AAAA,UACeb,QADf,UACeA,QADf;AAAA,UACyBc,SADzB,UACyBA,SADzB;;AAEP,UAAIC,OAAO,EAAX;AACA,UAAIF,aAAaG,MAAb,GAAsB,CAA1B,EAA6B;AAC3BD,eAAO,YAAP;AACD;AACD,aACE;AAAA;AAAA,UAAI,IAAI,KAAKpB,MAAb,EAAqB,yCAAuCoB,IAAvC,SAA+C,KAAKrB,KAAL,CAAWuB,aAA/E;AAEIJ,qBAAaK,GAAb,CAAiB,UAACC,IAAD,EAAOC,CAAP,EAAa;AAC5B,iBACE;AAAA;AAAA,cAAI,WAAU,iBAAd,EAAgC,IAAID,KAAKE,MAAzC,EAAiD,KAAKD,CAAtD,EAAyD,YAAUD,KAAKG,GAAxE;AACE,iDAAG,WAAWtB,WAAW,oEAAX,GAAkFuB,MAAhG,GADF;AAEE;AAAA;AAAA,gBAAM,WAAU,uDAAhB;AAAyEJ,mBAAKK;AAA9E,aAFF;AAGE;AAAA;AAAA,gBAAG,WAAU,0BAAb,EAAwC,SAAS;AAAA,yBAAS,OAAKhB,OAAL,CAAaiB,UAAb,CAAwBC,KAAxB,CAAT;AAAA,iBAAjD,EAA0F,gBAAcP,KAAKE,MAA7G;AACE,mDAAG,WAAU,2DAAb;AADF,aAHF;AAME,qDAAO,MAAK,QAAZ,EAAqB,MAAMP,SAA3B,EAAsC,OAAOK,KAAKK,KAAlD;AANF,WADF;AAUD,SAXD;AAFJ,OADF;AAkBD;;;;;;kBA/DkB/B,I;AAgEpB;;AAEDA,KAAKkC,YAAL,GAAoB;AAClBF,cAAY,gBAAMG,SAAN,CAAgBC,IADV;AAElBpB,YAAU,gBAAMmB,SAAN,CAAgBC;AAFR,CAApB","file":"list.js","sourceRoot":"/Users/kz/projects/edusoho","sourcesContent":["import React, { Component } from 'react';\nimport sortList from 'common/sortable';\nimport { getRandomString } from './part';\n\nexport default class List extends Component {\n  constructor(props) {\n    super(props);\n    this.listId = getRandomString();\n    this.$list = null;\n    this.$item = null;\n  }\n\n  componentDidMount() {\n    let sortId = `#${this.listId}`;\n    this.$list = $(sortId);\n    if (this.props.sortable) {\n      sortList({\n        element: sortId,\n        itemSelector: \"li\",\n        ajax: false,\n      }, (data) => {\n        //@TODO需优化成React的组件\n        $(sortId).children().remove();\n        $(sortId).append(this.$item);\n        this.context.sortItem(data);\n      });\n      this.onChange(sortId);\n    }\n  }\n\n  onChange(sortId) {\n    //sortList操作了真实的DOM需要还原；\n    this.$list.on('mousedown', 'li', () => {\n      this.$item = $(sortId).children('.list-group-item');\n    })\n  }\n\n  componentWillMount() {\n    this.$item = $(this.listId).children().clone();\n  }\n\n\n\n  render() {\n    const { dataSourceUi, sortable, inputName } = this.props;\n    let name = '';\n    if (dataSourceUi.length > 0) {\n      name = 'list-group';\n    }\n    return (\n      <ul id={this.listId} className={`multi-list sortable-list ${name} ${this.props.listClassName}`} >\n        {\n          dataSourceUi.map((item, i) => {\n            return (\n              <li className=\"list-group-item\" id={item.itemId} key={i} data-seq={item.seq}>\n                <i className={sortable ? 'es-icon es-icon-yidong mrl color-gray inline-block vertical-middle' : hidden}></i>\n                <span className=\"label-name text-overflow inline-block vertical-middle\">{item.label}</span>\n                <a className=\"link-gray mts pull-right\" onClick={event => this.context.removeItem(event)} data-item-id={item.itemId}>\n                  <i className=\"es-icon es-icon-close01 inline-block vertical-top text-12\"></i>\n                </a>\n                <input type=\"hidden\" name={inputName} value={item.label} />\n              </li>\n            )\n          })\n        }\n      </ul>\n    )\n  }\n};\n\nList.contextTypes = {\n  removeItem: React.PropTypes.func,\n  sortItem: React.PropTypes.func,\n};"]}