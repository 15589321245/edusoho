{% extends 'TopxiaAdminBundle:Course:layout.html.twig' %}

{% block title %}笔记管理 - {{ parent() }}{% endblock %}

{% set menu = 'note' %}

{% set script_controller = 'course/note' %}

{% block main %}
<div class="page-header clearfix">
  <h1 class="pull-left">笔记管理</h1>
</div>

<div class="well well-sm">
  <form class="form-inline">
    <div class="form-group">
      {{ form_widget(form.keywords, {attr:{class:'form-control', placeholder:'输入关键词'}}) }}
    </div>

    <div class="form-group">
      {{ form_widget(form.nickname, {attr:{class:'form-control', placeholder:'输入作者昵称'}}) }}
    </div>

    <button class="btn btn-primary" type="submit">搜索</button>
  </form>
</div>

<div id="note-table-container">

  <table class="table table-striped table-hover" id="note-table">

    <thead>
      <tr>
        <th wdith="5%"> <input type="checkbox"  data-role="batch-select"> </th>
        <th width="15%">作者</th>
        <th width="10%">课程标题</th>
        <th width="10%">课时标题</th>
        <th width="45%">内容</th>
        <th width="20%">创建时间</th>
      </tr>
    </thead>
    <body>
      {% for note in notes %}
        <tr class="note-tr">
          <td><input value="{{note.id}}" type="checkbox"  data-role="batch-item" ></td>
          <td>
          	{{ users[note.userId].nickname }}
          </td>
           <td>
            {{ courses[note.courseId].title }}
          </td>
          <td>
            {{lessons[note.lessonId].title}}
          </td>
          <td>
          {{ note.content | raw | plain_text(20) }}
          </td>
          <td>{{ note.createdTime|date('Y-n-d H:i:s') }}</td>
        </tr>
      {% endfor %}
    </body>
  </table>

  <div>
    <label class="checkbox-inline"><input type="checkbox" data-role="batch-select"> 全选</label>
    <button class="btn btn-default btn-sm mlm" data-role="batch-delete"  data-name="笔记" data-url="{{ path('admin_note_delete_notes') }}">删除</button>
  </div>

</div>

{% endblock %} 