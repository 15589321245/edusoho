{"version":3,"sources":["app/Resources/static-src/app/js/testpaper/do-test/index.js"],"names":["DoTestpaper","$container","$timePauseDialog","find","$timer","_init","_initTimer","on","_clickBtnPause","event","_clickBtnReume","timer","countdown","duration","data","format","callback","modal","clearInterval","$usedTimer","usedTime","$","length","_submitTest","repeat","start","$btn","currentTarget","toggleClass","hasClass","_initUsedTimer","removeClass"],"mappings":";;;;AAAA;;;;AACA;;;;;;;;;;IAUMA,W;;;AACJ,uBAAYC,UAAZ,EAAwB;AAAA;;AAAA,0HAChBA,UADgB;;AAEtB,UAAKC,gBAAL,GAAwB,MAAKD,UAAL,CAAgBE,IAAhB,CAAqB,oBAArB,CAAxB;AACA,UAAKC,MAAL,GAAcH,WAAWE,IAAX,CAAgB,qBAAhB,CAAd;AACA,UAAKE,KAAL;AAJsB;AAKvB;;;;4BAEO;AAAA;;AACN;AACA;AACA;AACA;AACA;AACA,WAAKC,UAAL;AACA,WAAKL,UAAL,CAAgBM,EAAhB,CAAmB,OAAnB,EAA4B,eAA5B,EAA6C;AAAA,eAAS,OAAKC,cAAL,CAAoBC,KAApB,CAAT;AAAA,OAA7C;AACA,WAAKR,UAAL,CAAgBM,EAAhB,CAAmB,OAAnB,EAA4B,gBAA5B,EAA8C;AAAA,eAAS,OAAKG,cAAL,CAAoBD,KAApB,CAAT;AAAA,OAA9C;AACD;;;iCAEY;AAAA;;AACX,UAAI,KAAKL,MAAT,EAAiB;AACf,aAAKA,MAAL,CAAYO,KAAZ,CAAkB;AAChBC,qBAAW,IADK;AAEhBC,oBAAU,KAAKT,MAAL,CAAYU,IAAZ,CAAiB,MAAjB,CAFM;AAGhBC,kBAAQ,UAHQ;AAIhBC,oBAAU,oBAAM;AACd,mBAAKf,UAAL,CAAgBE,IAAhB,CAAqB,qBAArB,EAA4Cc,KAA5C,CAAkD,MAAlD;AACAC,0BAAc,OAAKC,UAAnB;AACA,mBAAKC,QAAL,GAAgB,OAAKhB,MAAL,CAAYU,IAAZ,CAAiB,MAAjB,IAA2B,EAA3C;AACA,gBAAIO,EAAE,uBAAF,EAA2BC,MAA3B,IAAqC,CAAzC,EAA4C;AAC1C,qBAAKC,WAAL,CAAiB,OAAKtB,UAAL,CAAgBE,IAAhB,CAAqB,4BAArB,EAAmDW,IAAnD,CAAwD,KAAxD,CAAjB;AACD;AACF,WAXe;AAYhBU,kBAAQ,IAZQ;AAahBC,iBAAO,iBAAM;AACX,mBAAKL,QAAL,GAAgB,CAAhB;AACD;AAfe,SAAlB;AAiBD;AACF;;;mCAEcX,K,EAAO;AACpB,UAAIiB,OAAOL,EAAEZ,MAAMkB,aAAR,EAAuBC,WAAvB,CAAmC,QAAnC,CAAX;AACA,UAAIF,KAAKG,QAAL,CAAc,QAAd,CAAJ,EAA6B;AAC3B,aAAKzB,MAAL,CAAYO,KAAZ,CAAkB,OAAlB;AACAO,sBAAc,KAAKC,UAAnB;AACA,aAAKjB,gBAAL,CAAsBe,KAAtB,CAA4B,MAA5B;AACD,OAJD,MAIO;AACL,aAAKb,MAAL,CAAYO,KAAZ,CAAkB,QAAlB;AACA,aAAKmB,cAAL;AACA,aAAK5B,gBAAL,CAAsBe,KAAtB,CAA4B,MAA5B;AACD;AACF;;;mCAEcR,K,EAAO;AACpB,WAAKL,MAAL,CAAYO,KAAZ,CAAkB,QAAlB;AACA,WAAKmB,cAAL;AACA,WAAK7B,UAAL,CAAgBE,IAAhB,CAAqB,eAArB,EAAsC4B,WAAtC,CAAkD,QAAlD;AACA,WAAK7B,gBAAL,CAAsBe,KAAtB,CAA4B,MAA5B;AACD;;;;;;AAGH,IAAIjB,WAAJ,CAAgBqB,EAAE,yBAAF,CAAhB","file":"index.js","sourceRoot":"/Users/kz/projects/edusoho","sourcesContent":["import DoTestBase from '../widget/do-test-base';\nimport {\n  initScrollbar,\n  testpaperCardFixed,\n  testpaperCardLocation,\n  initWatermark,\n  onlyShowError\n} from 'app/testpaper/widget/part';\n\n\n\nclass DoTestpaper extends DoTestBase {\n  constructor($container) {\n    super($container);\n    this.$timePauseDialog = this.$container.find('#time-pause-dialog');\n    this.$timer = $container.find('.js-testpaper-timer');\n    this._init();\n  }\n\n  _init() {\n    initScrollbar();\n    initWatermark();\n    testpaperCardFixed();\n    testpaperCardLocation();\n    onlyShowError();\n    this._initTimer();\n    this.$container.on('click', '.js-btn-pause', event => this._clickBtnPause(event));\n    this.$container.on('click', '.js-btn-resume', event => this._clickBtnReume(event));\n  }\n\n  _initTimer() {\n    if (this.$timer) {\n      this.$timer.timer({\n        countdown: true,\n        duration: this.$timer.data('time'),\n        format: '%H:%M:%S',\n        callback: () => {\n          this.$container.find('#time-finish-dialog').modal('show');\n          clearInterval(this.$usedTimer);\n          this.usedTime = this.$timer.data('time') / 60;\n          if ($('input[name=\"preview\"]').length == 0) {\n            this._submitTest(this.$container.find('[data-role=\"paper-submit\"]').data('url'));\n          }\n        },\n        repeat: true,\n        start: () => {\n          this.usedTime = 0;\n        }\n      });\n    }\n  }\n\n  _clickBtnPause(event) {\n    let $btn = $(event.currentTarget).toggleClass('active');\n    if ($btn.hasClass('active')) {\n      this.$timer.timer('pause');\n      clearInterval(this.$usedTimer);\n      this.$timePauseDialog.modal('show');\n    } else {\n      this.$timer.timer('resume');\n      this._initUsedTimer();\n      this.$timePauseDialog.modal('hide');\n    }\n  }\n\n  _clickBtnReume(event) {\n    this.$timer.timer('resume');\n    this._initUsedTimer();\n    this.$container.find('.js-btn-pause').removeClass('active');\n    this.$timePauseDialog.modal('hide');\n  }\n}\n\nnew DoTestpaper($('.js-task-testpaper-body'));"]}