{"version":3,"sources":["webpack:///./app/Resources/static-src/app/common/input-edit.js","webpack:///./app/Resources/static-src/app/js/settings/profile/index.js"],"names":["InputEdit","props","el","parent","document","$el","$","editBtn","saveBtn","cancelBtn","success","fail","init","event","$parent","on","edit","save","cancel","$this","currentTarget","hide","find","show","focus","select","text","val","url","data","inputName","button","post","always","done","$input","console","log","editor","CKEDITOR","replace","toolbar","filebrowserImageUploadUrl","datetimepicker","autoclose","format","minView","language","documentElement","lang","validate","rules","required","chinese_alphanumeric","byte_minlength","byte_maxlength","nickname","type","minlength","maxlength","digits","Translator","trans","message","responseJSON"],"mappings":"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","file":"app/js/settings/profile/index.js","sourcesContent":["class InputEdit {\n  constructor(props) {\n    this.el = props.el;\n    this.parent = props.parent || document;\n\n    this.$el = $(this.el);\n\n    this.editBtn = props.editBtn || '.input-edit__edit-btn';\n    this.saveBtn = props.saveBtn || '.input-edit__save-btn';\n    this.cancelBtn = props.cancelBtn || '.input-edit__cancel-btn';\n\n    this.success = props.success || this.success;\n    this.fail = props.fail || this.fail;\n\n    this.init();\n  }\n\n  init() {\n    this.event();\n  }\n\n  event() {\n    let $parent = $(this.parent);\n\n    $parent.on('click', this.editBtn, event => this.edit(event));\n\n    $parent.on('click', this.saveBtn, event => this.save(event));\n\n    $parent.on('click', this.cancelBtn, event => this.cancel(event));\n  }\n\n  edit(event) {\n    let $this = $(event.currentTarget);\n\n    $this.parent().hide();\n\n    this.$el.find('.input-edit__edit-dom').show()\n      .find('.input-edit__input').focus().select();\n  }\n\n  cancel(event) {\n    let $this = $(event.currentTarget);\n\n    this.$el.find('.input-edit__edit-dom').hide();\n\n    let text = this.$el.find('.input-edit__static-text').text();\n    this.$el.find('.input-edit__input').val(text);\n\n    this.$el.find('.input-edit__static-dom').show();\n  }\n\n  save(event) {\n    let $this = $(event.currentTarget);\n    let url = $this.data('url');\n    let inputName = $this.data('input-name');\n\n    let data = {};\n    data[inputName] = $(`input[name=${inputName}]`).val();\n\n    $this.button('loading');\n\n    $.post(url, data)\n      .always(() => {\n        $this.button('reset');\n      })\n      .done((data) => {\n        let $input = this.$el.find('.input-edit__input');\n\n        this.$el.find('.input-edit__static-text').text($input.val());\n\n        this.$el.find('.input-edit__edit-dom').hide();\n        \n        this.$el.find('.input-edit__static-dom').show();\n\n        this.success(data);\n      })\n      .fail((data) => {\n        this.fail(data);\n      })\n  }\n\n  success(data) {\n    console.log('success')\n  }\n  fail(data) {\n    console.log('fail')\n  }\n}\n\nexport default InputEdit;\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/common/input-edit.js","import notify from 'common/notify';\nimport InputEdit from 'app/common/input-edit';\n\nlet editor = CKEDITOR.replace('profile_about', {\n  toolbar: 'Simple',\n  filebrowserImageUploadUrl: $('#profile_about').data('imageUploadUrl')\n});\n\n$(\".js-date\").datetimepicker({\n  autoclose: true,\n  format: 'yyyy-mm-dd',\n  minView: 'month',\n  language: document.documentElement.lang\n});\n\n$(\"#user-profile-form\").validate({\n  rules: {\n    'nickname': {\n\t\t\trequired: true,\n\t\t\tchinese_alphanumeric: true,\n\t\t\tbyte_minlength: 4,\n\t\t\tbyte_maxlength: 18,\n\t\t\tnickname: true,\n\t\t\tchinese_alphanumeric: true,\n\t\t\tes_remote: {\n\t\t\t\ttype: 'get',\n\t\t\t}\n\t\t},\n    'profile[truename]': {\n      minlength: 2,\n      maxlength: 18\n    },\n    'profile[title]': {\n      maxlength: 24\n    },\n    'profile[qq]': 'qq',\n    'profile[weibo]': 'url',\n    'profile[blog]': 'url',\n    'profile[site]': 'url',\n    'profile[mobile]': 'mobile',\n    'profile[idcard]': 'idcardNumber',\n    'profile[intField1]': {digits: true, maxlength: 9},\n    'profile[intField2]': {digits: true, maxlength: 9},\n    'profile[intField3]': {digits: true, maxlength: 9},\n    'profile[intField4]': {digits: true, maxlength: 9},\n    'profile[intField5]': {digits: true, maxlength: 9},\n    'profile[floatField1]': 'float',\n    'profile[floatField2]': 'float',\n    'profile[floatField3]': 'float',\n    'profile[floatField4]': 'float',\n    'profile[floatField5]': 'float',\n    'profile[dateField5]': 'date',\n    'profile[dateField5]': 'date',\n    'profile[dateField5]': 'date',\n    'profile[dateField5]': 'date',\n    'profile[dateField5]': 'date'\n  }\n});\n\nnew InputEdit({\n  el: '#nickname-form-group',\n  success(data) {\n    notify('success', Translator.trans(data.message));\n  },\n  fail(data) {\n    if (data.responseJSON.message) {\n      notify('danger', Translator.trans(data.responseJSON.message));\n    } else {\n      notify('danger', Translator.trans('user.settings.basic_info.nickname_change_fail'));\n    }\n  }\n});\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/settings/profile/index.js"],"sourceRoot":""}