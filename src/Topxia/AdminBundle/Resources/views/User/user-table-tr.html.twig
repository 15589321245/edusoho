{% import 'TopxiaAdminBundle::admin-macro.html.twig' as admin_macro %}
<tr id="user-table-tr-{{ user.id }}">
  <td>
    {{ admin_macro.user_link(user) }}
  </td>

  <td>
    {% for role in user.roles %}
      {# role #}
      {# role|dict_text('user_role') #}
    {% endfor %}
  </td>

  <td>{{ user.createdTime|date('Y-n-d H:i:s') }}</td>
  <td>{{ user.loginTime|date('Y-n-d H:i:s') }}</td>
  <td>{{ user.loginIp }}</td>
  <td>
    <div class="btn-group">
      <a href="#modal" data-toggle="modal" data-url="{{ path('admin_user_show', {id:user.id}) }}" data-url="" class="btn btn-default btn-small">查看</a>
      <a href="#" type="button" class="btn btn-default btn-small dropdown-toggle" data-toggle="dropdown">
        <span class="caret"></span>
      </a>
      <ul class="dropdown-menu">
        <li><a href="javascript:" data-toggle="modal" data-target="#modal" data-url="{{ path('admin_user_edit', {id:user.id}) }}">编辑用户信息</a></li>
        <li><a href="javascript:" data-toggle="modal" data-target="#modal" data-url="{{ path('admin_user_set_roles', {id:user.id}) }}">设置用户组</a></li>
        <li><a class="send-passwordreset-email" href="javascript:" data-url="{{ path('admin_user_send_passwordreset_email', {id:user.id}) }}">发送密码重置邮件</a></li>
        <li><a class="send-emailverify-email" href="javascript:" data-url="{{ path('admin_user_send_emailverify_email', {id:user.id}) }}">发送Email验证邮件</a></li>
        {% if user.locked %}
          <li><a class="unlock-user" href="javascript:" title="解禁用户{{ user.nickname }}" data-url="{{ path('admin_user_unlock', {id:user.id }) }}">解禁用户</a></li>
        {% else %}
          <li><a class="lock-user" href="javascript:" title="封禁用户{{ user.nickname }}" data-url="{{ path('admin_user_lock', {id:user.id}) }}">封禁用户</a></li>
        {% endif %}
      </ul>
    </div>

  </td>
</tr>

