{"version":3,"sources":["app/Resources/static-src/app/js/activity-manage/ppt/index.js"],"names":["$mediaId","$","PPT","init","initStep2Form","initStep3Form","initFileChooser","$step2_form","validator","data","validate","rules","title","required","maxlength","trim","mediaId","messages","$step3_form","finishDetail","digits","max","fileChooser","on","file","val","id","inItStep2form","$select","children","onConditionTimeType","$conditionsDetail","removeClass","conditionsType","event","currentTarget","addClass"],"mappings":";;;;AAAA;;;;AACA;;;;;;AACA,IAAIA,WAAWC,EAAE,kBAAF,CAAf;;IAGMC,G;AACJ,iBAAc;AAAA;;AACZ,SAAKF,QAAL,GAAgBC,EAAE,kBAAF,CAAhB;AACA,SAAKE,IAAL;AACD;;;;2BACM;AACL,sCAAgB,KAAKH,QAArB;AACA,WAAKI,aAAL;AACA,WAAKC,aAAL;AACA,WAAKC,eAAL;AACD;;;oCAEe;AACd,UAAIC,cAAcN,EAAE,aAAF,CAAlB;AACA,UAAIO,YAAYD,YAAYE,IAAZ,CAAiB,WAAjB,CAAhB;AACAD,kBAAYD,YAAYG,QAAZ,CAAqB;AAC/BC,eAAO;AACLC,iBAAO;AACLC,sBAAU,IADL;AAELC,uBAAW,EAFN;AAGLC,kBAAM;AAHD,WADF;AAMLC,mBAAS;AANJ,SADwB;AAS/BC,kBAAU;AACRD,mBAAS;AACPH,sBAAU;AADH;AADD;AATqB,OAArB,CAAZ;AAeD;;;oCAEe;AACd,UAAIK,cAAcjB,EAAE,aAAF,CAAlB;AACA,UAAIO,YAAYU,YAAYR,QAAZ,CAAqB;AACnCC,eAAO;AACLQ,wBAAc;AACZN,sBAAU,IADE;AAEZO,oBAAQ,IAFI;AAGZC,iBAAK;AAHO;AADT,SAD4B;AAQnCJ,kBAAU;AACRE,wBAAc;AACZN,sBAAU;AADE;AADN;AARyB,OAArB,CAAhB;AAcAK,kBAAYT,IAAZ,CAAiB,WAAjB,EAA8BD,SAA9B;AACD;;;sCAEiB;AAChB,UAAIc,cAAc,0BAAlB;;AAEAA,kBAAYC,EAAZ,CAAe,QAAf,EAAyB,UAACC,IAAD,EAAU;AACjC;AACAxB,iBAASyB,GAAT,CAAaD,KAAKE,EAAlB;AACD,OAHD;AAID;;;;;;AASHC;;AAEA,SAASA,aAAT,GAAyB,CAExB;;AAGA,IAAIC,UAAU3B,EAAE,mBAAF,CAAd;AACG,IAAI2B,QAAQC,QAAR,CAAiB,iBAAjB,EAAoCJ,GAApC,OAA8C,MAAlD,EAA0D;AACxDK;AACD;;AAEL,IAAIA,sBAAsB,SAAtBA,mBAAsB,GAAM;AAC9B,MAAIZ,cAAcjB,EAAE,aAAF,CAAlB;AACA,MAAIO,YAAYU,YAAYR,QAAZ,CAAqB;AACnCC,WAAO;AACLQ,oBAAc;AACZN,kBAAU,IADE;AAEZO,gBAAQ,IAFI;AAGZC,aAAK;AAHO;AADT,KAD4B;AAQnCJ,cAAU;AACRE,oBAAc;AACZN,kBAAU;AADE;AADN;AARyB,GAArB,CAAhB;AAcAK,cAAYT,IAAZ,CAAiB,WAAjB,EAA8BD,SAA9B;AACA,MAAIuB,oBAAoB9B,EAAE,kBAAF,CAAxB;AACA8B,oBAAkBC,WAAlB,CAA8B,QAA9B;AACD,CAnBD;;AAuBAJ,QAAQL,EAAR,CAAW,QAAX,EAAqB,iBAAS;AAC5B,MAAIU,iBAAiBhC,EAAEiC,MAAMC,aAAR,EAAuBN,QAAvB,CAAgC,iBAAhC,EAAmDJ,GAAnD,EAArB;AACA,MAAIM,oBAAoB9B,EAAE,kBAAF,CAAxB;AACA,MAAIgC,mBAAmB,MAAvB,EAA+B;AAC7BF,sBAAkBK,QAAlB,CAA2B,QAA3B;AACD,GAFD,MAEO;AACLN;AACD;AACF,CARD","file":"index.js","sourceRoot":"/Users/kz/projects/edusoho","sourcesContent":["import FileChooser from '../../file-chooser/file-choose';\nimport { chooserUiOpen, chooserUiClose, showChooserType } from '../widget/chooser-ui.js';\nlet $mediaId = $('[name=\"mediaId\"]');\n\n\nclass PPT {\n  constructor() {\n    this.$mediaId = $('[name=\"mediaId\"]');\n    this.init();\n  }\n  init() {\n    showChooserType(this.$mediaId);\n    this.initStep2Form();\n    this.initStep3Form();\n    this.initFileChooser();\n  }\n\n  initStep2Form() {\n    var $step2_form = $(\"#step2-form\");\n    var validator = $step2_form.data('validator');\n    validator = $step2_form.validate({\n      rules: {\n        title: {\n          required: true,\n          maxlength: 50,\n          trim: true,\n        },\n        mediaId: 'required',\n      },\n      messages: {\n        mediaId: {\n          required: '请上传或选择%display%'\n        }\n      }\n    });\n  }\n\n  initStep3Form() {\n    var $step3_form = $(\"#step3-form\");\n    let validator = $step3_form.validate({\n      rules: {\n        finishDetail: {\n          required: true,\n          digits: true,\n          max: 300,\n        },\n      },\n      messages: {\n        finishDetail: {\n          required: '请输入至少观看多少分钟',\n        },\n      }\n    });\n    $step3_form.data('validator', validator);\n  }\n\n  initFileChooser() {\n    let fileChooser = new FileChooser();\n\n    fileChooser.on('select', (file) => {\n      chooserUiClose();\n      $mediaId.val(file.id);\n    });\n  }\n\n}\n\n\n\n\n\n\ninItStep2form();\n\nfunction inItStep2form() {\n\n}\n\n\n let $select = $('#condition-select');\n    if ($select.children('option:selected').val() === 'time') {\n      onConditionTimeType();\n    }\n\nlet onConditionTimeType = () => {\n  var $step3_form = $(\"#step3-form\");\n  let validator = $step3_form.validate({\n    rules: {\n      finishDetail: {\n        required: true,\n        digits: true,\n        max: 300,\n      },\n    },\n    messages: {\n      finishDetail: {\n        required: '请输入至少观看多少分钟',\n      },\n    }\n  });\n  $step3_form.data('validator', validator);\n  let $conditionsDetail = $(\"#condition-group\");\n  $conditionsDetail.removeClass('hidden');\n};\n\n\n\n$select.on('change', event => {\n  let conditionsType = $(event.currentTarget).children('option:selected').val();\n  let $conditionsDetail = $(\"#condition-group\");\n  if (conditionsType !== 'time') {\n    $conditionsDetail.addClass('hidden');\n  } else {\n    onConditionTimeType();\n  }\n});\n"]}