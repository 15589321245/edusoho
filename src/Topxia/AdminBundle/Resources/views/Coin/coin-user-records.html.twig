{% extends 'TopxiaAdminBundle:System:layout.html.twig' %}

{% block title %}虚拟币设置 - {{ parent() }}{% endblock %}

{% set menu = 'coin' %}
{% set submenu = 'user-records' %}

 
{% block main %}
    {% include 'TopxiaAdminBundle:Coin:coin-ul.html.twig' %}

    <div class="page-header"><h1>用户虚拟币</h1></div>

    <form id="coin-orders-search-form" class="form-inline well well-sm" action="" method="get" novalidate>

        <div class="form-group">
         <a type="button" class="btn btn-default {% if condition.timeType != "threeMonths" and  condition.timeType != "oneMonth" %}active{% endif %}" href="{{path('admin_coin_user_records',{timeType:"oneWeek",searchType:condition.searchType,keyword:condition.keyword})}}">本周</a>
        </div>
        <div class="form-group">
         <a type="button" class="btn btn-default {% if condition.timeType == "oneMonth" %}active{% endif %}" href="{{path('admin_coin_user_records',{timeType:"oneMonth",searchType:condition.searchType,keyword:condition.keyword})}}">本月</a>
        </div>
        <div class="form-group">
         <a type="button" class="btn btn-default {% if condition.timeType == "threeMonths" %}active{% endif %}" href="{{path('admin_coin_user_records',{timeType:"threeMonths",searchType:condition.searchType,keyword:condition.keyword})}}">三个月</a>
        </div>
        <input value="{{condition.type}}" name="flowType" type="hidden"/>
        <input value="{{condition.timeType}}" name="timeType" type="hidden"/>
        <div class="form-group">
          <select class="form-control" name="searchType"> 
               {% set options = {'nickname':'用户名','email':'邮件地址'} %}
            {{ select_options(options, app.request.get('searchType')) }} 
          </select> 
        </div>

        <div class="form-group">
            <input type="text" id="keyword" name="keyword" class="form-control" value="{{ app.request.query.get('keyword') }}" placeholder="关键词">
        </div>

      <button class="btn btn-primary">搜索</button>
    </form>
  
    <div class="table-responsive">
      <table class="table table-striped">
        <tr>
          <th width="30%">用户</th>
          <th>充值 
            {% if not condition.userId|default(null) %}
            <a type="button" href="{{path('admin_coin_user_records',{flowType:"inUp",timeType:condition.timeType})}}"><span class="glyphicon glyphicon-arrow-up"></span></a> <a type="button" href="{{path('admin_coin_user_records',{flowType:"inDown",timeType:condition.timeType})}}"><span class="glyphicon glyphicon-arrow-down"></span></a>
          {% endif %}
          </th>
          <th>消费
            {% if not condition.userId|default(null) %}
            <a type="button" href="{{path('admin_coin_user_records',{flowType:"outUp",timeType:condition.timeType})}}"><span class="glyphicon glyphicon-arrow-up"></span></a> <a type="button" href="{{path('admin_coin_user_records',{flowType:"outDown",timeType:condition.timeType})}}"><span class="glyphicon glyphicon-arrow-down"></span>
            {% endif %}
          </a></th>
          <th>账户余额</th>
          <th>操作</th>
        </tr>

        {% if userIds %}
          {% for userId in userIds %}
            <tr><td >{{ web_macro.user_link(users[userId] , 'link-muted') }}</td><td style="color:#1bb974;">{{userInCash(userId,condition.timeType)|default("0.00")}}</td><td style="color:#ff7b0e;">{{userOutCash(userId,condition.timeType)|default("0.00")}}</td><td style="color:blue;">{{userAccount(userId).cash}}</td><td><a class="btn btn-default" data-toggle="modal" data-target="#modal" data-url="{{path('admin_coin_flow_detail',{userId:userId,timeType:condition.timeType})}}" href="javascript:;">查看</a></td></tr>
          {% endfor %}
        {% endif %}
       
      </table>
      {% if paginator|default(null) %}
      {{ web_macro.paginator(paginator) }}
      {% endif %}
    </div>


{% endblock %}