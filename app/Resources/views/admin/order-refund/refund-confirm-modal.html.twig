{% extends 'old-bootstrap-modal-layout.html.twig' %}

{% block title %}{{'admin.order_refund.audit.content_title'|trans}}{% endblock %}

{% block body %}
  {% set coinSetting = setting('coin') %}
  <form id="order-refund-confirm-form" class="form-horizontal" method="post" action="{{ path('admin_order_audit_refund', {refundId:refund.id}) }}">
    <div class="form-group">
      <label class="col-md-3 control-label">{{'admin.order_refund.order_amount'|trans}}</label>
      <div class="col-md-8 controls">
        <span class="control-text">{{ refund.amount/100 }}{{'site.currency.CNY'|trans}}</span>
      </div>
    </div>

    <div class="form-group">
      <label class="col-md-3 control-label">{{ 'order.payment_pattern.cash'|trans }}</label>
      <div class="col-md-8 controls">
        <span class="control-text">
        {{ trade.cash_amount/100 }}{{'site.currency.CNY'|trans}}
        ({{dict_text('payment', trade.platform)}})
        （{{ 'admin.order_cash.refund.success.tips'|trans }}）
        </span>
      </div>
    </div>

    {% if trade.coin_amount|default(0) > 0 %}
      <div class="form-group">
        <label class="col-md-3 control-label">{{ 'order.payment_pattern.coin'|trans({'%coin_name%': coinSetting.coin_name}) }}</label>
        <div class="col-md-8 controls">
          <span class="control-text">
          {{ trade.coin_amount * trade.rate }}{{'site.currency.CNY'|trans}} 
          (={{trade.coin_amount ~ coinSetting.coin_name}})
          （{{ 'admin.order_coin.refund.success.tips'|trans }}）
          </span>
        </div>
      </div>
    {% endif %}

    <div class="form-group">
      <label class="col-md-3 control-label">{{'admin.order_refund.audit.result'|trans}}</label>
      <div class="col-md-8 controls radios">
        {{ radios('result', {pass:'form.radio_btn.pass'|trans, unpass:'form.radio_btn.unpass'|trans}) }}
      </div>
    </div>

    <div class="form-group">
      <label class="control-label col-md-3" for="refund-note-field">{{'admin.order_refund.audit.description'|trans}}</label>
      <div class="col-md-8 controls">
        <textarea id="refund-note-field" class="form-control" name="note"></textarea>
      </div>
    </div>

    <input type="hidden" name="_csrf_token" value="{{ csrf_token('site') }}">
      {% if trade.coin_amount|default(0) > 0 %}
         <div class="alert alert-danger">
          <strong>
            {{ 'admin.order_cash_coin_refund.audit.tips'|trans }}
          </strong>
        </div>
      {% else %}
         <div class="alert alert-info">
          <strong>      
            {{ 'admin.order_cash_refund.audit.tips'|trans }} 
          </strong>
        </div>
      {% endif %}
  </form>
{% endblock %}

{% block footer %}
  <button id="refund-confirm-btn" data-submiting-text="{{'form.btn.submit.submiting'|trans}}" class="btn btn-primary" type="submit" data-toggle="form-submit" data-target="#order-refund-confirm-form">{{'form.btn.submit'|trans}}</button>
  
  <script>app.load('order/refund-confirm-modal');</script>
{% endblock %}