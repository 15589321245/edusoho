{"version":3,"sources":["app/Resources/static-src/app/js/courseset-manage/intro.js"],"names":["COURSE_BASE_INTRO","COURSE_TASK_INTRO","COURSE_TASK_DETAIL_INTRO","COURSE_LIST_INTRO","COURSE_LIST_INTRO_COOKIE","Intro","isCourseListPage","store","get","$","hide","on","isRestintroType","isTaskCreatePage","initTaskCreatePageIntro","initCourseListPageIntro","initNotTaskCreatePageIntro","show","remove","length","attr","steps","intro","introJs","setOptions","skipLabel","nextLabel","prevLabel","start","set","introStart","initAllSteps","initTaskSteps","element","initTaskDetailSteps","console","log","initNotTaskPageSteps","arry","isInitTaskDetailIntro","push","listLength","find","Promise","resolve","reject","setTimeout","$courseMenu","slideUp","then","initCourseListIntro","initCourseListSteps"],"mappings":"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","file":"intro.js","sourceRoot":"/Users/kz/projects/edusoho","sourcesContent":["import 'store';\nimport Cookies from 'js-cookie';\n// const COURSE_All_INTRO = 'COURSE_All_INTRO';\nconst COURSE_BASE_INTRO = 'COURSE_BASE_INTRO'; \nconst COURSE_TASK_INTRO = 'COURSE_TASK_INTRO';\nconst COURSE_TASK_DETAIL_INTRO = 'COURSE_TASK_DETAIL_INTRO';\nconst COURSE_LIST_INTRO = 'COURSE_LIST_INTRO';\nconst COURSE_LIST_INTRO_COOKIE = 'COURSE_LIST_INTRO_COOKIE';\n\nexport default class Intro {\n  constructor() {\n    if(this.isCourseListPage() && !store.get(COURSE_LIST_INTRO)) {\n      $('.js-intro-btn-group').hide();\n    }\n    $('body').on('click','.js-reset-intro', ()=> {\n      this.isRestintroType();\n    })\n  }\n\n  introType() {\n    if(this.isTaskCreatePage()) {\n      this.initTaskCreatePageIntro();\n      return;\n    }\n    if(this.isCourseListPage()){\n      this.initCourseListPageIntro();\n      return;\n    }\n    this.initNotTaskCreatePageIntro();\n    $('.js-intro-btn-group').show();\n  }\n\n  isRestintroType() {\n    if(this.isTaskCreatePage()) {\n      store.remove(COURSE_TASK_INTRO);\n      this.initTaskCreatePageIntro();\n      return;\n    }\n    if(this.isCourseListPage()){\n      //教学计划只有两条数据的时候才会滑动效果；\n      store.remove(COURSE_LIST_INTRO);\n      this.initCourseListPageIntro();\n      return;\n    }\n    store.remove(COURSE_BASE_INTRO);\n    this.initNotTaskCreatePageIntro();\n  }\n \n  isCourseListPage() {\n    return !!$('#courses-list-table').length;\n  }\n\n  isTaskCreatePage() {\n    return !!$('#step-3').length;\n  }\n\n  isInitTaskDetailIntro() {\n    $('.js-task-manage-item').attr('id','step-5');\n    return !!$('.js-settings-list').length;\n  }\n\n  introStart(steps){\n    let intro = introJs();\n    intro.setOptions({\n      steps: steps,\n      skipLabel:'我知道了',\n      nextLabel:'下一步',\n      prevLabel:'上一步'\n    });\n\n    intro.start();\n  }\n\n  initTaskCreatePageIntro() {\n    if (!store.get(COURSE_BASE_INTRO) && !store.get(COURSE_TASK_INTRO)) {\n      store.set(COURSE_BASE_INTRO, true);\n      store.set(COURSE_TASK_INTRO, true);\n      this.introStart(this.initAllSteps());\n    }else if(!store.get(COURSE_TASK_INTRO)) {\n      store.set(COURSE_TASK_INTRO, true);\n      this.introStart(this.initTaskSteps());\n    }\n  }\n\n  initTaskDetailIntro(element){\n    if (!store.get(COURSE_TASK_DETAIL_INTRO)) {\n      store.set(COURSE_TASK_DETAIL_INTRO);\n      this.introStart(this.initTaskDetailSteps(element));\n    }\n  }\n\n  initNotTaskCreatePageIntro() {\n    if (!store.get(COURSE_BASE_INTRO)) {\n      console.log('ok');\n      store.set(COURSE_BASE_INTRO, true);\n      this.introStart(this.initNotTaskPageSteps());\n    }\n  }\n\n  initNotTaskPageSteps() {\n    return [\n      { \n        intro: \"课程管理功能现已全新升级!\",\n      },\n      { \n        element: '#step-1',\n        intro: \"教学内容的编辑、管理请点击左侧“计划任务”的菜单项进入!\",\n      },\n      { \n        element: '#step-2',\n        intro: \"在“营销设置”中您可以通过设置决定课程如何销售、如何加入、如何学习!\",\n      }\n    ];\n  }\n\n  initAllSteps() {\n    let arry = [\n      { \n        intro: \"课程管理功能现已全新升级!\",\n      },\n      { \n        element: '#step-1',\n        intro: \"教学内容的编辑、管理请点击左侧“计划任务”的菜单项进入!\",\n      },\n      { \n        element: '#step-2',\n        intro: \"在“营销设置”中您可以通过设置决定课程如何销售、如何加入、如何学习!\",\n      },\n      { \n        element: '#step-3',\n        intro: \"您可以在这里选择各种不同的教学手段，然后上传文件/设置内容/设置学习完成条件。!\",\n      }\n    ];  \n    //如果存在任务\n    if(this.isInitTaskDetailIntro()) {\n      arry.push({\n        element: '#step-5',\n        intro: `在设计学习任务时，\n        您可以按照课时去设置预习、学习、练习、作业、课外这几个环节，\n        每个环节都可以通过各种教学手段来实现。!`,\n      })\n    }\n\n    return arry;\n  }\n\n  initTaskSteps() {\n    let arry = [\n      { \n        element: '#step-3',\n        intro: \"您可以在这里选择各种不同的教学手段，然后上传文件/设置内容/设置学习完成条件。!\",\n      }\n    ];\n    //如果存在任务\n    if(this.isInitTaskDetailIntro()) {\n      arry.push({\n        element: '#step-5',\n        intro: `在设计学习任务时，\n        您可以按照课时去设置预习、学习、练习、作业、课外这几个环节，\n        每个环节都可以通过各种教学手段来实现。!`,\n      })\n    }\n\n    return arry;\n  }\n\n  initCourseListSteps(element) {\n    return [\n      { \n        element: element,\n        intro: `恭喜你创建了多个教学计划!\n          左侧的功能菜单会有所简化，\n          只会显示课程公共的相关设置。`,\n      }\n    ];\n  }\n\n  isSetCourseListCookies() {\n    if(!store.get(COURSE_LIST_INTRO)) {\n      console.log('ok');\n      Cookies.set(COURSE_LIST_INTRO_COOKIE,true);\n    }\n  }\n\n  initCourseListPageIntro() {\n    let listLength = $('#courses-list-table').find('tbody tr').length;\n    if(!(listLength === 2) || store.get(COURSE_LIST_INTRO) ) {\n      console.log('ok');\n      return;\n    }\n    console.log('ok1');\n    new Promise((resolve, reject)=> {\n      setTimeout(function () {\n        let $courseMenu = $('.js-sidenav-course-menu');\n        if(!$courseMenu.length) {\n          resolve();\n          return;\n        }\n        $('.js-sidenav-course-menu').slideUp(function () {\n          resolve();\n        });\n      }, 500);\n    }).then( ()=> {\n      setTimeout( ()=> {\n            this.initCourseListIntro('.js-sidenav');\n            console.log('initCourseListIntro');\n        }, 500);\n    });\n  } \n\n  initCourseListIntro(element) {\n    if(!store.get(COURSE_LIST_INTRO)) {\n      store.set(COURSE_LIST_INTRO,true);\n      this.introStart(this.initCourseListSteps(element));\n      Cookies.remove(COURSE_LIST_INTRO_COOKIE);\n    }\n  }\n\n  initTaskDetailSteps(element) {\n    return [\n      { \n        element: element,\n        intro: `在设计学习任务时，\n        您可以按照课时去设置预习、学习、练习、作业、课外这几个环节，\n        每个环节都可以通过各种教学手段来实现。!`,\n      },\n    ];\n  }\n}\n\n\n\n\n\n\n\n"]}