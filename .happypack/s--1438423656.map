{"version":3,"sources":["app/Resources/static-src/app/js/courseset-manage/base/index.js"],"names":["Base","init","$","select2","ajax","url","dataType","quietMillis","data","term","page","q","page_limit","results","each","index","item","push","id","name","initSelection","element","callback","val","split","formatSelection","formatResult","formatSearching","width","multiple","maximumSelectionSize","placeholder","Translator","trans","$form","validator","validate","onkeyup","rules","title","required","depends","trim","open_live_course_title","subtitle","messages","addMethod","value","params","test","click","form","event","currentTarget","button","submit"],"mappings":"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","file":"index.js","sourceRoot":"/Users/kz/projects/edusoho","sourcesContent":["import 'select2';\nclass Base {\n  constructor() {\n    this.init();\n  }\n\n  init() {\n    //init ui components\n    $('#tags').select2({\n      ajax: {\n        url: '/tag/match_jsonp#',\n        dataType: 'json',\n        quietMillis: 100,\n        data: function(term, page) {\n          return {\n            q: term,\n            page_limit: 10\n          };\n        },\n        results: function(data) {\n          var results = [];\n          $.each(data, function(index, item) {\n            results.push({\n              id: item.name,\n              name: item.name\n            });\n          });\n          return {\n            results: results\n          };\n        }\n      },\n      initSelection: function(element, callback) {\n        var data = [];\n        $(element.val().split(\",\")).each(function() {\n          data.push({\n            id: this,\n            name: this\n          });\n        });\n        callback(data);\n      },\n      formatSelection: function(item) {\n        return item.name;\n      },\n      formatResult: function(item) {\n        return item.name;\n      },\n      formatSearching: '搜索中...',\n      width: 'off',\n      multiple: true,\n      maximumSelectionSize: 20,\n      placeholder: Translator.trans('请输入标签'),\n      width: 'off',\n      multiple: true,\n      createSearchChoice: function() {\n        return null;\n      },\n      maximumSelectionSize: 20\n    });\n\n    let $form = $('#courseset-form');\n    let validator = $form.validate({\n      onkeyup: false,\n      rules: {\n        title: {\n          required: {\n            depends:function(){\n                $(this).val($.trim($(this).val()));\n                return true;\n            }\n          },\n          open_live_course_title: true\n        },\n        subtitle: {\n          required: {\n            depends:function(){\n                $(this).val($.trim($(this).val()));\n                return false;\n            }\n          }\n        }\n      },\n      messages: {\n        title: \"请输入有效的课程标题（直播公开课标题暂不支持<、>、\\\"、&、‘、’、”、“字符）\"\n      }\n    });\n\n    $.validator.addMethod(\"open_live_course_title\", function(value, element, params) {\n      if ($('#courseSetType').val() === 'liveOpen' && !/^[^(<|>|'|\"|&|‘|’|”|“)]*$/.test(value)) {\n        return false;\n      } else {\n        return true;\n      }\n    }, Translator.trans('直播公开课标题暂不支持<、>、\\\"、&、‘、’、”、“字符'));\n\n    $('#courseset-base-submit').click(event => {\n      if (validator.form()) {\n        $(event.currentTarget).button('loading');\n        $form.submit();\n      }\n    });\n  }\n\n  initSelect2() {\n    \n  }\n\n}\n\nnew Base();\n"]}