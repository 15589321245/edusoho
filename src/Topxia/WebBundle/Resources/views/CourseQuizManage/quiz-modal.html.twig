{% extends 'TopxiaWebBundle::bootstrap-modal-layout.html.twig' %}

{% set modal_size = 'xlarge' %}

{% block title %}测验管理{% endblock %}
{% block body %}

<div class="quiz-manager" id="quiz-manager">
  <div class="quiz-manager-side">
    <div class="quiz-manager-side-header">
      <button data-role="quiz-item-add" type="button" class="btn btn-small btn-default pull-right">新增题目</button>
      <span class="quiz-manager-side-title">题目列表</span>
    </div>

    <div class="list-group" data-role="items" data-delete-url="{{ path('course_manage_quiz_item_delete', {courseId:course.id, itemId:'__id__'}) }}"></div>
  </div>

  <div class="quiz-manager-main">

    <form id="quiz-form" class="form-horizontal quiz-form" method="post"
        action="{{ path('course_manage_quiz_item_save', {courseId:course.id, lessonId:lesson.id}) }}"
        >

      <div class="control-group">
        <div class="control-label"><label>问题描述</label></div>
        <div class="controls"><textarea id="quiz-description-field" name="description"></textarea></div>
      </div>
      
      <div class="row control-group">
        <div class="col-lg-2 control-label"><label>题目难度</label></div>
        <div class="col-lg-10 controls">
          <input type="radio" name="level" value="low"> 入门
          <input type="radio" name="level" value="normal"> 中级
          <input type="radio" name="level" value="high"> 高级
        </div>
      </div>

      <div class="options">

      </div>

      <button data-role="option-add" type="button" class="btn btn-success">增加新的选项</button>
      <input type="hidden" name="id">
      <input type="hidden" name="answers">

    </form>

    <script type="text/plain" data-role="items-model">{{ quizItems|json_encode|raw }}</script>
    <script type="text/x-handlebars-template" data-role="choice-template">
      {% verbatim %}
        <div class="row control-group">
          <div class="controls">
            <label class="choice-label">选项{{ code }}</label>
            <input class="width-input item-input" id="item-input-{{ globalId }}" name="choices[]" type="text" value="{{ name }}">
            <input type="checkbox" class="answer-checkbox" {{#if isAnswer }}checked="checked"{{/if}}> 正确答案
            <button type="button" data-role="option-delete" class="btn btn-link btn-small" tabindex="-1"><i class="glyphicon glyphicon-trash"></i></button>
          </div>
        </div>
      {% endverbatim %}
    </script>

    <script type="text/x-handlebars-template" data-role="item-template">
      {% verbatim %}

        <a class="list-group-item" href="javascript:;" data-id="{{ id }}" data-role="quiz-item-edit">
          {{ description }}
          <button class="btn btn-mini btn-link pull-right" data-role="quiz-item-delete">
          <i class="glyphicon glyphicon-trash"></i></button>
        </a>

      {% endverbatim %}
    </script>



  </div>


</div>

<script>app.load('course-manage/quiz-modal')</script>

{% endblock %}

{% block footer %}
    <button type="button" class="btn btn-link" data-dismiss="modal" tabindex="-1">关闭</button>
    <button type="submit" class="btn btn-primary" data-toggle="form-submit" data-target="#quiz-form">保存</button>
{% endblock %}

{% set hideFooter = true %}