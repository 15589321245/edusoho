webpackJsonp(["app/js/course-chapter-manage/index"],[function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var _notify=__webpack_require__("b334fd7e4c5a19234db2"),_notify2=_interopRequireDefault(_notify);$("#chapter-title-field").on("keypress",function(e){13===(e.keyCode||e.which)&&e.preventDefault()});var sortList=function($list){var data=$list.sortable("serialize").get();$.post($list.data("sortUrl"),{ids:data},function(response){var lessonNum=0,chapterNum=0,unitNum=0;$list.find(".task-manage-unit, .task-manage-chapter").each(function(){var $item=$(this);$item.hasClass("item-lesson")?(lessonNum++,$item.find(".number").text(lessonNum)):$item.hasClass("task-manage-unit")?(unitNum++,$item.find(".number").text(unitNum)):$item.hasClass("task-manage-chapter")&&(chapterNum++,unitNum=0,$item.find(".number").text(chapterNum))})})};$("#course-chapter-btn").on("click",function(){var $this=$(this),$form=$("#course-chapter-form");$form.validate({rules:{title:"required"},ajax:!0,currentDom:$this,submitSuccess:function(html){$this.closest(".modal").modal("hide");var $item=$("#"+$(html).attr("id"));if($item.length)$item.replaceWith(html),(0,_notify2["default"])("success",Translator.trans("信息已保存"));else{var $parent=$("#"+$form.data("parentid"));if($parent.length){var add=0;$parent.nextAll().each(function(){if($(this).hasClass("task-manage-chapter"))return $(this).before(html),add=1,!1}),1!=add&&$("#sortable-list").append(html)}else $("#sortable-list").append(html);var $list=$("#sortable-list");sortList($list)}}})})}]);