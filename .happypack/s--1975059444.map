{"version":3,"sources":["app/Resources/static-src/app/js/activity-manage/ppt/index.js"],"names":["PPT","$mediaId","$","validator3","init","initStep2Form","initSelect","initFileChooser","$step2_form","validator","data","validate","rules","title","required","maxlength","trim","mediaId","messages","$step3_form","finishDetail","children","val","positive_integer","max","min","fileChooser","on","file","id","$select","initStep3Form","conditionsType","event","currentTarget","$conditionsDetail","addClass","removeClass"],"mappings":";;;;AAAA;;;;AACA;;;;;;AACA;;IAEMA,G;AACJ,iBAAc;AAAA;;AACZ,SAAKC,QAAL,GAAgBC,EAAE,kBAAF,CAAhB;AACA,SAAKC,UAAL,GAAkB,IAAlB;AACA,SAAKC,IAAL;AACD;;;;2BACM;AACL,sCAAgB,KAAKH,QAArB;AACA,WAAKI,aAAL;AACA,WAAKC,UAAL;AACA,WAAKC,eAAL;AACD;;;oCAEe;AACd,UAAIC,cAAcN,EAAE,aAAF,CAAlB;AACA,UAAIO,YAAYD,YAAYE,IAAZ,CAAiB,WAAjB,CAAhB;AACAD,kBAAYD,YAAYG,QAAZ,CAAqB;AAC/BC,eAAO;AACLC,iBAAO;AACLC,sBAAU,IADL;AAELC,uBAAW,EAFN;AAGLC,kBAAM;AAHD,WADF;AAMLC,mBAAS;AANJ,SADwB;AAS/BC,kBAAU;AACRD,mBAAS;AACPH,sBAAU;AADH;AADD;AATqB,OAArB,CAAZ;AAeD;;;oCAEe;AACd,UAAIK,cAAcjB,EAAE,aAAF,CAAlB;AACA,WAAKC,UAAL,GAAkBgB,YAAYR,QAAZ,CAAqB;AACrCC,eAAO;AACLQ,wBAAc;AACZN,sBAAU,oBAAK;AACb,qBAAOZ,EAAE,mBAAF,EAAuBmB,QAAvB,CAAgC,iBAAhC,EAAmDC,GAAnD,OAA6D,MAApE;AACD,aAHW;AAIZC,8BAAkB,IAJN;AAKZC,iBAAK,GALO;AAMZC,iBAAK;AANO;AADT,SAD8B;AAWrCP,kBAAU;AACRE,wBAAc;AACZN,sBAAU;AADE;AADN;AAX2B,OAArB,CAAlB;AAiBAK,kBAAYT,IAAZ,CAAiB,WAAjB,EAA8B,KAAKP,UAAnC;AACD;;;sCAEiB;AAAA;;AAChB,UAAIuB,cAAc,0BAAlB;;AAEAA,kBAAYC,EAAZ,CAAe,QAAf,EAAyB,UAACC,IAAD,EAAU;AACjC;AACA,cAAK3B,QAAL,CAAcqB,GAAd,CAAkBM,KAAKC,EAAvB;AACD,OAHD;AAID;;;iCAEY;AAAA;;AACX,UAAIC,UAAU5B,EAAE,mBAAF,CAAd;AACA,UAAI4B,QAAQT,QAAR,CAAiB,iBAAjB,EAAoCC,GAApC,OAA8C,MAAlD,EAA0D;AACxD,aAAKS,aAAL;AACD;;AAEDD,cAAQH,EAAR,CAAW,QAAX,EAAqB,iBAAS;AAC5B,YAAIK,iBAAiB9B,EAAE+B,MAAMC,aAAR,EAAuBb,QAAvB,CAAgC,iBAAhC,EAAmDC,GAAnD,EAArB;AACA,YAAIa,oBAAoBjC,EAAE,kBAAF,CAAxB;AACA,YAAI8B,mBAAmB,MAAvB,EAA+B;AAC7BG,4BAAkBC,QAAlB,CAA2B,QAA3B;AACA;AACD,SAHD,MAGM;AACHD,4BAAkBE,WAAlB,CAA8B,QAA9B;AACF;AACD,YAAG,CAAC,OAAKlC,UAAT,EAAqB;AAClB,iBAAK4B,aAAL;AACF;AACF,OAZD;AAaD;;;;;;AAGH,IAAI/B,GAAJ;;AAWA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.js","sourceRoot":"/Users/kz/projects/edusoho","sourcesContent":["import FileChooser from '../../file-chooser/file-choose';\nimport { chooserUiOpen, chooserUiClose, showChooserType } from '../widget/chooser-ui.js';\n// let $mediaId = $('[name=\"mediaId\"]');\n\nclass PPT {\n  constructor() {\n    this.$mediaId = $('[name=\"mediaId\"]');\n    this.validator3 = null\n    this.init();\n  }\n  init() {\n    showChooserType(this.$mediaId);\n    this.initStep2Form();\n    this.initSelect();\n    this.initFileChooser();\n  }\n\n  initStep2Form() {\n    var $step2_form = $(\"#step2-form\");\n    var validator = $step2_form.data('validator');\n    validator = $step2_form.validate({\n      rules: {\n        title: {\n          required: true,\n          maxlength: 50,\n          trim: true,\n        },\n        mediaId: 'required',\n      },\n      messages: {\n        mediaId: {\n          required: '请上传或选择%display%'\n        }\n      }\n    });\n  }\n\n  initStep3Form() {\n    var $step3_form = $(\"#step3-form\");\n    this.validator3 = $step3_form.validate({\n      rules: {\n        finishDetail: {\n          required: ()=> {\n            return $('#condition-select').children('option:selected').val() === 'time';\n          },\n          positive_integer: true,\n          max: 300,\n          min: 1,\n        },\n      },\n      messages: {\n        finishDetail: {\n          required: '请输入至少观看多少分钟',\n        },\n      }\n    });\n    $step3_form.data('validator', this.validator3);\n  }\n\n  initFileChooser() {\n    let fileChooser = new FileChooser();\n\n    fileChooser.on('select', (file) => {\n      chooserUiClose();\n      this.$mediaId.val(file.id);\n    });\n  }\n\n  initSelect() {\n    let $select = $('#condition-select');\n    if ($select.children('option:selected').val() === 'time') {\n      this.initStep3Form();\n    }\n\n    $select.on('change', event => {\n      let conditionsType = $(event.currentTarget).children('option:selected').val();\n      let $conditionsDetail = $(\"#condition-group\");\n      if (conditionsType !== 'time') {\n        $conditionsDetail.addClass('hidden');\n        return;\n      }else {\n         $conditionsDetail.removeClass('hidden');\n      }\n      if(!this.validator3) {\n         this.initStep3Form();\n      }\n    });\n  }\n}\n\nnew PPT();\n\n\n\n\n\n\n\n\n\n\n// let onConditionTimeType = () => {\n//   var $step3_form = $(\"#step3-form\");\n//   let validator = $step3_form.validate({\n//     rules: {\n//       finishDetail: {\n//         required: true,\n//         digits: true,\n//         max: 300,\n//       },\n//     },\n//     messages: {\n//       finishDetail: {\n//         required: '请输入至少观看多少分钟',\n//       },\n//     }\n//   });\n//   $step3_form.data('validator', validator);\n//   let $conditionsDetail = $(\"#condition-group\");\n//   $conditionsDetail.removeClass('hidden');\n// };\n\n\n"]}