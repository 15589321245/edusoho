{"version":3,"sources":["app/Resources/static-src/app/js/activity-manage/doc/index.js"],"names":["Document","$mediaId","$","init","initStep2Form","initStep3Form","initFileChooser","$step2_form","validator","data","validate","rules","title","required","maxlength","trim","mediaId","messages","$step3_form","onkeyup","finishDetail","digits","fileChooser","on","file","val","id","conditionsType","event","currentTarget","children","$conditionsDetail","addClass","onConditionTimeType"],"mappings":";;;;AAAA;;;;AACA;;;;;;IAEMA,Q;AACJ,sBAAc;AAAA;;AAEZ,SAAKC,QAAL,GAAgBC,EAAE,kBAAF,CAAhB;AACA,SAAKC,IAAL;AACA,oCAAgB,KAAKF,QAArB;AACA,SAAKG,aAAL;AACA,SAAKC,aAAL;AACA,SAAKC,eAAL;AACD;;;;oCAEe;AACd,UAAIC,cAAcL,EAAE,aAAF,CAAlB;AACA,UAAIM,YAAYD,YAAYE,IAAZ,CAAiB,WAAjB,CAAhB;AACAD,kBAAYD,YAAYG,QAAZ,CAAqB;AAC/BC,eAAO;AACLC,iBAAO;AACLC,sBAAU,IADL;AAELC,uBAAW,EAFN;AAGLC,kBAAM;AAHD,WADF;AAMLC,mBAAS;AANJ,SADwB;AAS/BC,kBAAU;AACRD,mBAAS;AACPH,sBAAU;AADH;AADD;AATqB,OAArB,CAAZ;AAeD;;;oCAEe;AACd,UAAIK,cAAchB,EAAE,aAAF,CAAlB;AACA,UAAIM,YAAYU,YAAYR,QAAZ,CAAqB;AACnCS,iBAAS,KAD0B;AAEnCR,eAAO;AACLC,iBAAO;AACLC,sBAAU,IADL;AAELC,uBAAW;AAFN,WADF;AAKLM,wBAAc;AACZP,sBAAU,IADE;AAEZQ,oBAAQ;AAFI;AALT,SAF4B;AAYnCJ,kBAAU;AACRG,wBAAc;AACZP,sBAAU,SADE;AAEZQ,oBAAQ;AAFI;AADN;AAZyB,OAArB,CAAhB;AAmBAH,kBAAYT,IAAZ,CAAiB,WAAjB,EAA8BD,SAA9B;AACD;;;sCAEiB;AAAA;;AAChB,UAAIc,cAAc,0BAAlB;;AAEAA,kBAAYC,EAAZ,CAAe,QAAf,EAAyB,UAACC,IAAD,EAAU;AACjC;AACA,cAAKvB,QAAL,CAAcwB,GAAd,CAAkBD,KAAKE,EAAvB;AACD,OAHD;;AAKAxB,QAAE,mBAAF,EAAuBqB,EAAvB,CAA0B,QAA1B,EAAoC,iBAAS;AAC3C,YAAII,iBAAiBzB,EAAE0B,MAAMC,aAAR,EAAuBC,QAAvB,CAAgC,iBAAhC,EAAmDL,GAAnD,EAArB;;AAEA,YAAIM,oBAAoB7B,EAAE,kBAAF,CAAxB;AACA,YAAIyB,mBAAmB,MAAvB,EAA+B;AAC7BI,4BAAkBC,QAAlB,CAA2B,QAA3B;AACD,SAFD,MAEO;AACLC;AACD;AACF,OATD;AAUD;;;;;;AAGH,IAAIjC,QAAJ","file":"index.js","sourceRoot":"/Users/kz/projects/edusoho","sourcesContent":["import FileChooser from '../../file-chooser/file-choose';\nimport { chooserUiOpen, chooserUiClose, showChooserType } from '../widget/chooser-ui.js';\n\nclass Document {\n  constructor() {\n\n    this.$mediaId = $('[name=\"mediaId\"]');\n    this.init();\n    showChooserType(this.$mediaId)\n    this.initStep2Form();\n    this.initStep3Form();\n    this.initFileChooser();\n  }\n\n  initStep2Form() {\n    var $step2_form = $(\"#step2-form\");\n    var validator = $step2_form.data('validator');\n    validator = $step2_form.validate({\n      rules: {\n        title: {\n          required: true,\n          maxlength: 50,\n          trim: true,\n        },\n        mediaId: 'required',\n      },\n      messages: {\n        mediaId: {\n          required: '请上传或选择%display%'\n        }\n      }\n    });\n  }\n\n  initStep3Form() {\n    let $step3_form = $(\"#step3-form\");\n    let validator = $step3_form.validate({\n      onkeyup: false,\n      rules: {\n        title: {\n          required: true,\n          maxlength: 50,\n        },\n        finishDetail: {\n          required: true,\n          digits: true\n        },\n      },\n      messages: {\n        finishDetail: {\n          required: \"请输入完成条件\",\n          digits: \"完成条件必须为数字\"\n        }\n      }\n    });\n    $step3_form.data('validator', validator);\n  }\n\n  initFileChooser() {\n    let fileChooser = new FileChooser();\n\n    fileChooser.on('select', (file) => {\n      chooserUiClose();\n      this.$mediaId.val(file.id);\n    });\n\n    $('#condition-select').on('change', event => {\n      let conditionsType = $(event.currentTarget).children('option:selected').val();\n\n      let $conditionsDetail = $(\"#condition-group\");\n      if (conditionsType !== 'time') {\n        $conditionsDetail.addClass('hidden');\n      } else {\n        onConditionTimeType();\n      }\n    });\n  }\n}\n\nnew Document();"]}