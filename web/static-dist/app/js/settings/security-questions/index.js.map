{"version":3,"sources":["webpack:///./app/Resources/static-src/app/js/settings/security-questions/index.js","webpack:///./app/Resources/static-src/app/js/settings/security-questions/security-questions.js"],"names":["element","saveBtn","SecurityQuestion","props","$q1","$","$q2","$q3","init","validator","initEvent","$node","_this","css","on","event","$this","reflesh_option_display","btn","validate","currentDom","ajax","rules","required","maxlength","submitSuccess","data","Translator","trans","message","modal","window","location","reload","submitError","responseJSON","val","questions","questionId"],"mappings":"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","file":"app/js/settings/security-questions/index.js","sourcesContent":["import SecurityQuestion from './security-questions';\n\nnew SecurityQuestion({\n  element: '#settings-security-questions-form',\n  saveBtn: '#password-save-btn'\n})\n\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/settings/security-questions/index.js","import notify from 'common/notify';\n\nclass SecurityQuestion {\n  constructor(props) {\n    this.element = props.element;\n    this.saveBtn = props.saveBtn;\n    this.$q1 = $('[name=question-1]');\n    this.$q2 = $('[name=question-2]');\n    this.$q3 = $('[name=question-3]');\n    this.init();\n  }\n\n  init() {\n    this.validator();\n    this.initEvent();\n  }\n\n  initEvent() {\n    const $node = $(this.element);\n    const _this = this;\n\n    $('option[value=parents]').css('display', 'none');\n    $('option[value=teacher]').css('display', 'none');\n    $('option[value=lover]').css('display', 'none');\n    \n    this.$q1.on('change', function(event) {\n      let $this = $(this);\n      _this.reflesh_option_display($this)\n    });\n\n    this.$q2.on('change', function(event) {\n      let $this = $(this);\n      _this.reflesh_option_display($this)\n    });\n\n    this.$q3.on('change', function(event) {\n      let $this = $(this);\n      _this.reflesh_option_display($this)\n    });\n\n  }\n\n  validator() {\n    let btn = this.saveBtn;\n    $(this.element).validate({\n      currentDom: btn,\n      ajax: true,\n      rules: {\n        'answer-1': {\n          required: true,\n          maxlength: 20\n        },\n        'answer-2': {\n          required: true,\n          maxlength: 20\n        },\n        'answer-3': {\n          required: true,\n          maxlength: 20\n        },\n        'userLoginPassword': 'required'\n      },\n      submitSuccess(data) {\n        notify('success', Translator.trans(data.message));\n        \n        $('.modal').modal('hide');\n        window.location.reload();\n      },\n      submitError(data) {\n        notify('danger',  Translator.trans(data.responseJSON.message));\n      }\n    })\n  }\n\n  reflesh_option_display($node) {\n\n    if (this.$q1.val() === this.$q2.val() || this.$q3.val() === this.$q2.val() || this.$q1.val() === this.$q3.val()) {\n      notify('danger',Translator.trans('user.settings.security.security_questions.type_duplicate_hint'));\n      this.$q1.val('parents');\n      this.$q2.val('teacher');\n      this.$q3.val('lover');\n      \n    } else {\n      $(`option[value=${$node.val()}]`).css('display', 'none');\n    }\n\n    let questions = ['parents', 'teacher', 'lover', 'schoolName', 'firstTeacher', 'hobby', 'notSelected'];\n\n    for (let questionId in questions) {\n      if (questions[questionId] !== this.$q1.val() && questions[questionId] !== this.$q2.val() && questions[questionId] !== this.$q3.val()) {\n        $(`option[value=${questions[questionId]}]`).css('display', 'block');\n      }\n    }\n  }\n}\n\nexport default SecurityQuestion;\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/settings/security-questions/security-questions.js"],"sourceRoot":""}