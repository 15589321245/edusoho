{"version":3,"sources":["webpack:///./app/Resources/static-src/app/js/cashier/coin.js","webpack:///./app/Resources/static-src/common/api/modules/trade.js","webpack:///./app/Resources/static-src/app/js/cashier/index.js","webpack:///./app/Resources/static-src/app/js/cashier/pay/alipay_legacy_express.js","webpack:///./app/Resources/static-src/app/js/cashier/pay/alipay_legacy_wap.js","webpack:///./app/Resources/static-src/app/js/cashier/pay/confirm.js","webpack:///./app/Resources/static-src/app/js/cashier/pay/lianlianpay_wap.js","webpack:///./app/Resources/static-src/app/js/cashier/pay/lianlianpay_web.js","webpack:///./app/Resources/static-src/app/js/cashier/pay/payment.js","webpack:///./app/Resources/static-src/app/js/cashier/form.js","webpack:///./app/Resources/static-src/app/js/cashier/pay/wechatpay_js.js","webpack:///./app/Resources/static-src/app/js/cashier/pay/wechatpay_mweb.js","webpack:///./app/Resources/static-src/app/js/cashier/pay/wechatpay_native.js","webpack:///./app/Resources/static-src/common/api/ajax.js","webpack:///./app/Resources/static-src/common/api/index.js","webpack:///./app/Resources/static-src/common/api/modules/classroom.js","webpack:///./app/Resources/static-src/common/api/modules/course.js","webpack:///./app/Resources/static-src/app/js/cashier/pay/sdk.js"],"names":["Coin","props","$container","$coinContainer","cashierForm","$form","priceType","data","coinRate","maxCoinInput","initEvent","on","changeAmount","event","$this","$","currentTarget","inputCoinNum","val","parseFloat","toFixed","isNaN","removePasswordValidate","trigger","calcPayPrice","addPasswordValidate","coinName","price","originalPirce","coinPrice","Translator","trans","find","rules","tradeModule","api","get","options","Object","assign","url","params","tradeSn","create","type","element","AlipayLegacyExpress","res","getOptions","showConfirmModal","window","open","payUrl","location","href","AlipayLegacyWap","ConfirmModal","modalID","template","length","append","checkIsPaid","bind","getTrade","then","isPaid","paidSuccessUrl","modal","LianlianpayWap","LianlianpayWeb","BasePayment","confirmModal","show","trade","createTrade","afterTradeCreated","postParams","gateway","orderSn","coinAmount","amount","openid","payPassword","keys","forEach","k","undefined","filterParams","async","promise","done","error","CashierForm","$priceList","validator","validate","initCoin","paySdk","$coin","coin","switchPayType","payOrder","id","title","addPriceItem","removePriceItem","changeCoinPrice","valid","$btn","button","formDataToObject","payAmount","text","pay","hasClass","addClass","siblings","removeClass","attr","post","formArr","serializeArray","index","name","value","$priceItem","hasPriceItem","remove","html","$payCoin","WechatPayJs","WechatPayMweb","mweb_url","WechatPayNative","clearInterval","intervalWechatId","$modal","qrcodeUrl","cash_amount","startInterval","setInterval","ajax","defaultOptions","parameter","dataType","beforeSend","request","setRequestHeader","Promise","resolve","API_URL_PREFIX","Api","course","classroom","classroomModule","join","classroomId","courseModule","courseId","PaySDK","getGateway","wpn","wpm","wpj","ale","alw","llwp","llwb","payment","isMobile"],"mappings":"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","file":"app/js/cashier/index.js","sourcesContent":["export default class Coin {\n  constructor(props) {\n    this.$container = props.$coinContainer;\n    this.cashierForm = props.cashierForm;\n    this.$form = props.$form;\n    this.priceType = this.$container.data('priceType');\n    this.coinRate = this.$container.data('coinRate');\n    this.maxCoinInput = this.$container.data('maxAllowCoin') > this.$container.data('coinBalance') ? \n                        this.$container.data('coinBalance') : this.$container.data('maxAllowCoin');\n    this.initEvent();\n  }\n\n  initEvent() {\n    this.$form.on('change', '.js-coin-amount', event => this.changeAmount(event));\n  }\n\n  changeAmount(event) {\n    let $this = $(event.currentTarget);\n    let inputCoinNum = $this.val();\n    $this.val(parseFloat(inputCoinNum).toFixed(2));\n\n    if (isNaN(inputCoinNum) || inputCoinNum <= 0) {\n      inputCoinNum = 0;\n      $this.val(parseFloat(inputCoinNum).toFixed(2));\n      this.removePasswordValidate();\n      \n      this.$form.trigger('removePriceItem', ['coin-price']);\n      this.cashierForm.calcPayPrice(inputCoinNum);\n    }\n    if (inputCoinNum > this.maxCoinInput) {\n      inputCoinNum = this.maxCoinInput;\n      $this.val(parseFloat(inputCoinNum).toFixed(2));\n    }\n\n    if (inputCoinNum > 0) {\n      this.addPasswordValidate();\n      let coinName = this.$form.data('coin-name');\n      let price = 0.00;\n      if (this.priceType === 'coin') {\n        price = parseFloat(inputCoinNum).toFixed(2) + ' ' + coinName;\n\n        let originalPirce = parseFloat(this.$container.data('maxAllowCoin'));\n        let coinPrice = parseFloat(originalPirce - inputCoinNum).toFixed(2) + ' ' + coinName;;\n        this.$form.trigger('changeCoinPrice', [coinPrice]);\n      } else {\n        price = '￥' + parseFloat(inputCoinNum / this.coinRate).toFixed(2);\n      }\n      this.$form.trigger('addPriceItem', ['coin-price', coinName + Translator.trans('order.create.minus'), price]);\n      this.cashierForm.calcPayPrice(inputCoinNum);\n    }\n  }\n\n  addPasswordValidate() {\n    this.$container.find('[name=\"payPassword\"]').rules('add', 'required passwordCheck');\n  }\n\n  removePasswordValidate() {\n    this.$container.find('[name=\"payPassword\"]').rules('remove', 'required passwordCheck');\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/cashier/coin.js","import ajax from '../ajax';\n\nconst tradeModule = (api) => {\n  return {\n    get(options) {\n      return ajax(Object.assign({\n        url: `${api}/trades/${options.params.tradeSn}`,\n      }, options));\n    },\n\n    create(options) {\n      return ajax(Object.assign({\n        url: `${api}/trades`,\n        type: 'POST',\n      }, options));\n\n    }\n  }\n};\n\nexport default tradeModule;\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/common/api/modules/trade.js","import CashierForm from './form';\n\nnew CashierForm({\n  element: '#cashier-form'\n});\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/cashier/index.js","import BasePayment from './payment';\n\nexport default class AlipayLegacyExpress extends BasePayment {\n\n  afterTradeCreated(res) {\n    let options = this.getOptions();\n    if (options.showConfirmModal) {\n      window.open(res.payUrl, '_blank');\n      this.showConfirmModal(res.tradeSn);\n    } else {\n      location.href = res.payUrl;\n    }\n\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/cashier/pay/alipay_legacy_express.js","import BasePayment from './payment';\n\nexport default class AlipayLegacyWap extends BasePayment {\n\n  afterTradeCreated(res) {\n    location.href = res.payUrl;\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/cashier/pay/alipay_legacy_wap.js","import notify from 'common/notify';\nimport BasePayment from './payment';\n\nclass ConfirmModal {\n\n  $container = $('body');\n\n  modalID = 'cashier-confirm-modal';\n\n  tradeSn = '';\n\n  constructor() {\n\n    let template = `\n      <div id=\"${this.modalID}\" class=\"modal\">\n        <div class=\"modal-dialog cd-modal-dialog\">\n          <div class=\"modal-content\">\n            <div class=\"modal-header\">\n              <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-hidden=\"true\">\n                <i class=\"cd-icon cd-icon-close\"></i>\n              </button>\n              <h4 class=\"modal-title\">${Translator.trans('cashier.confirm.title')}</h4>\n            </div>\n            <div class=\"modal-body\">\n              <p>\n              ${Translator.trans('cashier.confirm.desc')}\n              </p>\n            </div>\n            <div class=\"modal-footer\">\n              <a class=\"btn cd-btn cd-btn-flat-default cd-btn-lg\" data-dismiss=\"modal\">${Translator.trans('cashier.confirm.pick_again')}</a>\n              <a class=\"btn cd-btn cd-btn-primary cd-btn-lg js-confirm-btn\">${Translator.trans('cashier.confirm.success')}</a>\n            </div>\n          </div>\n        <div>  \n      </div>\n    `;\n\n    if (this.$container.find('#'+this.modalID).length === 0) {\n      this.$container.append(template);\n    }\n\n    $('body').on('click', '.js-confirm-btn', this.checkIsPaid.bind(this));\n  }\n\n  checkIsPaid() {\n    BasePayment.getTrade(this.tradeSn).then(res => {\n      if (res.isPaid) {\n        location.href = res.paidSuccessUrl;\n      } else {\n        notify('danger', Translator.trans('cashier.confirm.fail_message'));\n        $('#' + this.modalID).modal('hide');\n      }\n    });\n  }\n\n  show(tradeSn) {\n    $('#'+this.modalID).modal('show');\n    this.tradeSn = tradeSn;\n  }\n}\n\nexport default ConfirmModal;\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/cashier/pay/confirm.js","import AlipayLegacyWap from './alipay_legacy_wap';\n\nexport default class LianlianpayWap extends AlipayLegacyWap {\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/cashier/pay/lianlianpay_wap.js","import AlipayLegacyExpress from './alipay_legacy_express';\n\nexport default class LianlianpayWeb extends AlipayLegacyExpress {\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/cashier/pay/lianlianpay_web.js","import Api from 'common/api';\nimport notify from 'common/notify';\nimport ConfirmModal from './confirm';\n\nexport default class BasePayment {\n\n  setOptions(options) {\n    this.options = options;\n  }\n\n  getOptions() {\n    return this.options;\n  }\n\n  showConfirmModal(tradeSn) {\n    if (!this.confirmModal) {\n      this.confirmModal = new ConfirmModal();\n    }\n\n    this.confirmModal.show(tradeSn);\n  }\n\n  pay(params) {\n\n    let trade = BasePayment.createTrade(params);\n    if (trade.paidSuccessUrl) {\n      location.href = trade.paidSuccessUrl;\n    } else {\n      this.afterTradeCreated(trade)\n    }\n\n  }\n\n  afterTradeCreated(res) {\n\n  }\n\n  static filterParams(postParams) {\n    let params = {\n      gateway: postParams.gateway,\n      type: postParams.type,\n      orderSn: postParams.orderSn,\n      coinAmount: postParams.coinAmount,\n      amount: postParams.amount,\n      openid: postParams.openid,\n      payPassword: postParams.payPassword\n    };\n\n    Object.keys(params).forEach(k => (!params[k] && params[k] !== undefined) && delete params[k]);\n\n    return params;\n  }\n\n  static createTrade(postParams) {\n\n    let params = this.filterParams(postParams);\n\n    let trade = null;\n\n    Api.trade.create({data:params, async: false, promise: false}).done( res => {\n      trade = res;\n    }).error( res => {\n      notify('danger', Translator.trans('cashier.pay.error_message'));\n    });\n\n    return trade;\n  }\n\n  static getTrade(tradeSn, orderSn = '') {\n    let params = {};\n\n    if (tradeSn) {\n      params.tradeSn = tradeSn;\n    }\n\n    if (orderSn) {\n      params.orderSn = orderSn;\n    }\n\n    return Api.trade.get({\n      params: params\n    });\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/cashier/pay/payment.js","import Coin from './coin';\nimport PaySDK from './pay/sdk';\n\nclass CashierForm {\n  constructor(props) {\n    this.$form = $(props.element);\n    this.$priceList = this.$form.find('#order-center-price-list');\n\n    this.validator = this.$form.validate();\n\n    this.initEvent();\n    this.initCoin();\n\n    this.paySdk = new PaySDK();\n  }\n\n  initCoin() {\n    let $coin = $('#coin-use-section');\n    if ($coin.length > 0) {\n      this.coin = new Coin({\n        $coinContainer: $coin,\n        cashierForm: this,\n        $form: this.$form\n      });\n    }\n  }\n\n  initEvent() {\n    let $form = this.$form;\n\n    $form.on('click', '.js-pay-type', event => this.switchPayType(event));\n    $form.on('click', '.js-pay-btn', event => this.payOrder(event));\n    $form.on('addPriceItem', (event, id, title, price) => this.addPriceItem(event, id, title, price));\n    $form.on('removePriceItem', (event, id) => this.removePriceItem(event, id));\n    $form.on('changeCoinPrice', (event, price) => this.changeCoinPrice(event, price));\n    \n  }\n\n  payOrder(event) {\n    let $form = this.$form;\n\n    if ($form.valid()) {\n      let $btn = $(event.currentTarget);\n      $btn.button('loading');\n      let params = this.formDataToObject($form);\n\n      params.payAmount = $form.find('.js-pay-price').text();\n      this.paySdk.pay(params);\n      $btn.button('reset');\n    }\n  }\n\n  switchPayType(event) {\n    let $this = $(event.currentTarget);\n    if (!$this.hasClass('active')) {\n      $this.addClass('active').siblings().removeClass('active');\n      $(\"input[name='payment']\").val($this.attr(\"id\"));\n    }\n  }\n\n  calcPayPrice(coinAmount) {\n    $.post(this.$form.data('priceUrl'), {\n      coinAmount\n    }).done((res) => {\n      this.$form.find('.js-pay-price').text(res.data);\n    });\n  }\n\n  formDataToObject($form) {\n    let params = {},\n      formArr = $form.serializeArray();\n    for (let index in formArr) {\n      params[formArr[index].name] = formArr[index].value;\n    }\n\n    return params;\n  }\n\n  hasPriceItem(event, id) {\n    let $priceItem = $(`#${id}`);\n    if ($priceItem.length) {\n      return true;\n    }\n\n    return false;\n  }\n\n  addPriceItem(event, id, title, price) {\n    let $priceItem = $(`#${id}`);\n\n    if (this.hasPriceItem(event, id)) {\n      $priceItem.remove();\n    }\n\n    let html = `\n      <div class=\"order-center-price\" id=\"${id}\">\n        <div class=\"order-center-price__title\">${title}</div>\n        <div class=\"order-center-price__content\">-${price}</div>\n      </div>\n    `;\n\n    this.$priceList.append(html);\n  }\n\n  removePriceItem(event, id) {\n    let $priceItem = $(`#${id}`);\n    \n    if (this.hasPriceItem(event, id)) {\n      $priceItem.remove();\n    }\n  }\n\n  changeCoinPrice(event, price) {\n    let $payCoin = this.$form.find('.js-pay-coin');\n    $payCoin.text(price);\n  }\n}\n\n\nexport default CashierForm;\n\n\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/cashier/form.js","import BasePayment from './payment';\n\nexport default class WechatPayJs extends BasePayment {\n\n  afterTradeCreated(res) {\n    location.href = '/pay/center/wxpay?tradeSn=' + res.tradeSn;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/cashier/pay/wechatpay_js.js","import BasePayment from './payment';\n\nexport default class WechatPayMweb extends BasePayment {\n\n\tafterTradeCreated(res) {\n\t\tlocation.href = res.mweb_url;\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/cashier/pay/wechatpay_mweb.js","import BasePayment from './payment';\n\nexport default class WechatPayNative extends BasePayment {\n  $container = $('body');\n\n  modalID = 'wechat-qrcode-modal';\n\n  constructor() {\n    super();\n\n    let template = `\n      <div id=\"${this.modalID}\" class=\"modal\">\n        <div class=\"modal-dialog cd-modal-dialog cd-modal-dialog-sm\">\n          <div class=\"modal-content\">\n          \n            <div class=\"modal-header\">\n              <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-hidden=\"true\">\n                <i class=\"cd-icon cd-icon-close\"></i>\n              </button>\n              <h4 class=\"modal-title\">${Translator.trans('cashier.wechat_pay')}</h4>\n            </div>\n            \n            <div class=\"modal-body\">\n              <div class=\"text-center\">\n                <img class=\"cd-mb16 js-qrcode-img\" src=\"\">\n                <div class=\"cd-mb16\">\n                  ${Translator.trans('cashier.wechat_pay.scan_qcode_pay_tips')}\n                </div>\n                <div class=\"cd-text-danger cd-mb32 js-pay-amount\" style=\"font-size:16px;\"></div>\n              </div>\n            </div>\n            \n          </div>\n        </div>\n      </div>\n    `;\n\n    if (this.$container.find('#'+this.modalID).length === 0) {\n      this.$container.append(template);\n    }\n\n    this.$container.find('#'+this.modalID).on('hidden.bs.modal', function () {\n      clearInterval(window.intervalWechatId);\n    });\n  }\n\n  afterTradeCreated(res) {\n   let $modal = this.$container.find('#'+this.modalID);\n   $modal.find('.js-qrcode-img').attr('src', res.qrcodeUrl);\n   $modal.find('.js-pay-amount').text('￥' + res.cash_amount);\n   $modal.modal('show');\n   this.startInterval(res.tradeSn);\n }\n\n startInterval(tradeSn) {\n   window.intervalWechatId = setInterval(this.checkIsPaid.bind(this, tradeSn), 2000);\n }\n\n checkIsPaid(tradeSn) {\n   BasePayment.getTrade(tradeSn).then(res => {\n     if (res.isPaid) {\n       location.href = res.paidSuccessUrl;\n     }\n   });\n }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/cashier/pay/wechatpay_native.js","const ajax = (options) => {\n\n  let defaultOptions = {\n    async: true,\n    promise: true\n  };\n\n  options = Object.assign(defaultOptions, options);\n\n  let parameter = {\n    type: options.type || 'GET',\n    url: options.url || '',\n    dataType: options.dataType || 'json',\n    async: options.async,\n    beforeSend(request) {\n      request.setRequestHeader(\"Accept\", 'application/vnd.edusoho.v2+json');\n      request.setRequestHeader(\"X-CSRF-Token\", $('meta[name=csrf-token]').attr('content'));\n    }\n  };\n\n  if (options.data) {\n    Object.assign(parameter, {\n      data: options.data\n    })\n  }\n\n  if (options.promise) {\n    return Promise.resolve($.ajax(parameter));\n  } else {\n    return $.ajax(parameter);\n  }\n\n};\n\nexport default ajax;\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/common/api/ajax.js","/**\n * 使用说明\n * \n * import Api from 'common/api';\n * \n * Api.course.create({\n *    params: {},\n *    data: {}\n * }).then((res) => {\n *    // 请求成功\n *    console.log('res', res);\n * }).catch((res) => {\n *   // 异常捕获\n *   console.log('catch', res.responseJSON.error.message);\n * })\n */\n\nimport courseModule from './modules/course';\nimport classroomModule from './modules/classroom';\nimport tradeModule from './modules/trade';\n\nconst API_URL_PREFIX = '/api';\n\nconst Api = {\n  // 课程模块\n  course: courseModule(API_URL_PREFIX),\n  // 班级模块\n  classroom: classroomModule(API_URL_PREFIX),\n  trade: tradeModule(API_URL_PREFIX),\n};\n\nexport default Api;\n\n\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/common/api/index.js","import ajax from '../ajax';\n\nconst classroomModule = (api) => {\n  return {\n    join(options) {\n      return ajax(Object.assign({\n        url: `${api}/classrooms/${options.params.classroomId}/members`,\n        type: 'POST'\n      }, options));\n    }\n  }\n}\n\nexport default classroomModule;\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/common/api/modules/classroom.js","import ajax from '../ajax';\n\nconst courseModule = (api) => {\n  return {\n    get(options) {\n      return ajax(Object.assign({\n        url: `${api}/courses/${options.params.courseId}`,\n      }, options));\n    }\n  }\n}\n\nexport default courseModule;\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/common/api/modules/course.js","import WechatPayNative from './wechatpay_native';\nimport AlipayLegacyExpress from './alipay_legacy_express';\nimport AlipayLegacyWap from './alipay_legacy_wap';\nimport LianlianpayWap from './lianlianpay_wap';\nimport LianlianpayWeb from './lianlianpay_web';\nimport WechatPayJs from './wechatpay_js';\nimport WechatPayMweb from './wechatpay_mweb';\n\nexport default class PaySDK {\n\n  pay(params, options = {}) {\n    let gateway = this.getGateway(params['payment'], params['isMobile'], params['openid']);\n\t  params.gateway = gateway;\n    let paySdk = null;\n    switch (gateway) {\n      case 'WechatPay_Native':\n        paySdk = this.wpn ? this.wpn : this.wpn = new WechatPayNative();\n        break;\n\t    case 'WechatPay_MWeb':\n\t\t    paySdk = this.wpm ? this.wpm : this.wpm = new WechatPayMweb();\n\t\t    break;\n      case 'WechatPay_Js':\n        paySdk = this.wpj ? this.wpj : this.wpj = new WechatPayJs();\n        break;\n      case 'Alipay_LegacyExpress':\n        paySdk = this.ale ? this.ale : this.ale = new AlipayLegacyExpress();\n        break;\n      case 'Alipay_LegacyWap':\n        paySdk = this.alw ? this.alw : this.alw = new AlipayLegacyWap();\n        break;\n      case 'Lianlian_Wap':\n        paySdk = this.llwp ? this.llwp : this.llwp = new LianlianpayWap();\n        break;\n      case 'Lianlian_Web':\n        paySdk = this.llwb ? this.llwb : this.llwb = new LianlianpayWeb();\n        break;\n    }\n\n    paySdk.options = Object.assign({\n      'showConfirmModal': 1\n    }, options);\n\n    paySdk.pay(params);\n  }\n\n  getGateway(payment, isMobile, openid) {\n    let gateway = '';\n    switch (payment) {\n      case 'wechat':\n        if (openid > 0) {\n          gateway = 'WechatPay_Js';\n        } else if(isMobile){\n\t        gateway = 'WechatPay_MWeb';\n        }else {\n          gateway = 'WechatPay_Native';\n        }\n        break;\n\n      case 'alipay':\n        if (isMobile) {\n          gateway = 'Alipay_LegacyWap';\n        } else {\n          gateway = 'Alipay_LegacyExpress';\n        }\n        break;\n\n      case 'lianlianpay':\n        if (isMobile) {\n          gateway = 'Lianlian_Wap';\n        } else {\n          gateway = 'Lianlian_Web';\n        }\n        break;\n    }\n\n    return gateway;\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/cashier/pay/sdk.js"],"sourceRoot":""}