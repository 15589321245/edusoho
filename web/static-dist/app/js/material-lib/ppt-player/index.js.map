{"version":3,"sources":["webpack:///./app/Resources/static-src/app/common/ppt-player.js","webpack:///./app/Resources/static-src/app/js/material-lib/ppt-player/index.js","webpack:///./~/screenfull/dist/screenfull.js"],"names":["PPT","element","slides","watermark","$","_KEY_ACTION_MAP","_onPrev","_onNext","_onLast","_onFirst","total","length","_page","placeholder","_init","html","find","text","slidesHTML","reduce","src","index","append","_render","_bindEvents","page","currentPage","$slide","_getSlide","attr","data","eq","document","on","event","keyCode","call","_onFullScreen","_onChangePage","self","current","before","emit","enabled","isFullscreen","toggle","request","e","target","val","newPage","beforePage","removeClass","$currentSlide","addClass","load","_lazyLoad","$player","params","images"],"mappings":"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","file":"app/js/material-lib/ppt-player/index.js","sourcesContent":["import Emitter from \"common/es-event-emitter\";\nimport screenfull from \"screenfull\";\n\nexport default class PPT extends Emitter {\n  constructor({element, slides, watermark}) {\n    super();\n    this.element = $(element);\n    this.slides = slides || [];\n    this.watermark = watermark || '';\n    this._KEY_ACTION_MAP = {\n      37: this._onPrev,  // ←\n      39: this._onNext,  // →\n      38: this._onLast,  // ↑\n      40: this._onFirst  // ↓\n    };\n    this.total = this.slides.length;\n    this._page = 0;\n    this.placeholder = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC\";\n    this._init();\n  }\n\n  get page() {\n    return this._page;\n  }\n\n  set page(newPage) {\n    let beforePage = this.page;\n    let currentPage = newPage;\n\n    if (currentPage > this.total) {\n      this.element.find('.goto-page').val(currentPage);\n      this._page = currentPage;\n    }\n\n    if (currentPage < 1) {\n      this.element.find('.goto-page').val(beforePage);\n      this._page = beforePage;\n    }\n\n    if (beforePage) {\n      this.element.find('.slide-player-body .slide').eq(beforePage - 1).removeClass('active');\n    }\n\n    let $currentSlide = this._getSlide(currentPage);\n\n    if ($currentSlide.attr('src')) {\n      $currentSlide.addClass('active');\n    } else {\n      $currentSlide.load(() => {\n        if (this._page != $currentSlide.data('page')) {\n          return;\n        }\n        $currentSlide.addClass('active');\n      });\n      $currentSlide.attr('src', $currentSlide.data('src'));\n    }\n\n    this._lazyLoad(currentPage);\n\n    this.element.find('.goto-page').val(currentPage);\n\n    this._page = currentPage;\n\n    this.emit('change', {\n      current: currentPage,\n      before: beforePage\n    });\n  }\n\n  _render() {\n    let html = `\n      <div class=\"slide-player\">\n        <div class=\"slide-player-body loading-background\"></div>\n        <div class=\"slide-notice\">\n          <div class=\"header\">{{ 'site.data_last_picture'|trans }}\n            <button type=\"button\" class=\"close\">×</button>\n          </div>\n        </div>\n      \n        <div class=\"slide-player-control clearfix\">\n          <a href=\"javascript:\" class=\"goto-first\">\n            <span class=\"glyphicon glyphicon-step-backward\"></span>\n          </a>\n          <a href=\"javascript:\" class=\"goto-prev\">\n            <span class=\"glyphicon glyphicon-chevron-left\"></span>\n          </a>\n          <a href=\"javascript:\" class=\"goto-next\">\n            <span class=\"glyphicon glyphicon-chevron-right\"></span>\n          </a>\n          <a href=\"javascript:\" class=\"goto-last\">\n            <span class=\"glyphicon glyphicon-step-forward\"></span>\n          </a>\n          <a href=\"javascript:\" class=\"fullscreen\">\n            <span class=\"glyphicon glyphicon-fullscreen\"></span>\n          </a>\n          <div class=\"goto-page-input\">\n            <input type=\"text\" class=\"goto-page form-control input-sm\" value=\"1\">&nbsp;/&nbsp;\n              <span class=\"total\"></span>\n          </div>\n        </div>\n      </div>`;\n\n    this.element.html(html);\n\n    this.element.find('.total').text(this.total);\n\n    let slidesHTML = this.slides.reduce((html, src, index) => {\n      html += `<img data-src=\"${src}\" class=\"slide\" data-page=\"${index + 1}\">`;\n      return html;\n    }, '');\n\n    this.element.find('.slide-player-body').html(slidesHTML);\n    this.watermark && this.element.append(`<div class=\"slide-player-watermark\">${this.watermark}</div>`);\n  }\n\n  _init() {\n    this._render();\n    this._bindEvents();\n    this._onFirst();\n  }\n\n\n  _lazyLoad(page) {\n    for (let currentPage = page; currentPage < page + 4; currentPage++) {\n      if (currentPage > this.total) {\n        break;\n      }\n\n      let $slide = this._getSlide(currentPage);\n      $slide.attr('src') || $slide.attr('src', $slide.data('src'));\n    }\n  }\n\n  _getSlide(page) {\n    return this.element.find('.slide-player-body .slide').eq(page - 1);\n  }\n\n  _bindEvents() {\n    $(document).on('keydown', (event) => {\n      this._KEY_ACTION_MAP[event.keyCode] && this._KEY_ACTION_MAP[event.keyCode].call(this);\n    });\n\n    this.element.on('click', '.goto-next', event => this._onNext(event));\n    this.element.on('click', '.goto-prev', event => this._onPrev(event));\n    this.element.on('click', '.goto-first', event => this._onFirst(event));\n    this.element.on('click', '.goto-last', event => this._onLast(event));\n    this.element.on('click', '.fullscreen', event => this._onFullScreen(event));\n    this.element.on('change', '.goto-page', event => this._onChangePage(event));\n    let self = this;\n    this.on('change', ({current, before}) => {\n      if (current == self.total) {\n        self.emit('end',{page: this.total});\n      }\n    });\n  }\n\n  _onNext() {\n    if (this.page === this.total) {\n      this.emit('end',{page: this.total});\n      return;\n    }\n\n    this.page++;\n  }\n\n  _onPrev() {\n    if (this.page == 1) {\n      return;\n    }\n\n    this.page--;\n  }\n\n  _onFirst() {\n    this.page = 1;\n  }\n\n  _onLast() {\n    this.page = this.total;\n  }\n\n  _onFullScreen() {\n    if (!screenfull.enabled) {\n      return;\n    }\n    if (screenfull.isFullscreen) {\n      screenfull.toggle();\n    } else {\n      screenfull.request();\n    }\n  }\n\n  _onChangePage(e) {\n    this.page = $(e.target).val();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/common/ppt-player.js","import PptPlayer from 'app/common/ppt-player';\n\nlet $player = $(\"#ppt-player\");\nlet params =  $player.data('params');\nnew PptPlayer({\n  element: '#ppt-player',\n  slides: params.images,\n});\n\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/material-lib/ppt-player/index.js","/*!\n* screenfull\n* v3.0.0 - 2015-11-24\n* (c) Sindre Sorhus; MIT License\n*/\n(function () {\n\t'use strict';\n\n\tvar isCommonjs = typeof module !== 'undefined' && module.exports;\n\tvar keyboardAllowed = typeof Element !== 'undefined' && 'ALLOW_KEYBOARD_INPUT' in Element;\n\n\tvar fn = (function () {\n\t\tvar val;\n\t\tvar valLength;\n\n\t\tvar fnMap = [\n\t\t\t[\n\t\t\t\t'requestFullscreen',\n\t\t\t\t'exitFullscreen',\n\t\t\t\t'fullscreenElement',\n\t\t\t\t'fullscreenEnabled',\n\t\t\t\t'fullscreenchange',\n\t\t\t\t'fullscreenerror'\n\t\t\t],\n\t\t\t// new WebKit\n\t\t\t[\n\t\t\t\t'webkitRequestFullscreen',\n\t\t\t\t'webkitExitFullscreen',\n\t\t\t\t'webkitFullscreenElement',\n\t\t\t\t'webkitFullscreenEnabled',\n\t\t\t\t'webkitfullscreenchange',\n\t\t\t\t'webkitfullscreenerror'\n\n\t\t\t],\n\t\t\t// old WebKit (Safari 5.1)\n\t\t\t[\n\t\t\t\t'webkitRequestFullScreen',\n\t\t\t\t'webkitCancelFullScreen',\n\t\t\t\t'webkitCurrentFullScreenElement',\n\t\t\t\t'webkitCancelFullScreen',\n\t\t\t\t'webkitfullscreenchange',\n\t\t\t\t'webkitfullscreenerror'\n\n\t\t\t],\n\t\t\t[\n\t\t\t\t'mozRequestFullScreen',\n\t\t\t\t'mozCancelFullScreen',\n\t\t\t\t'mozFullScreenElement',\n\t\t\t\t'mozFullScreenEnabled',\n\t\t\t\t'mozfullscreenchange',\n\t\t\t\t'mozfullscreenerror'\n\t\t\t],\n\t\t\t[\n\t\t\t\t'msRequestFullscreen',\n\t\t\t\t'msExitFullscreen',\n\t\t\t\t'msFullscreenElement',\n\t\t\t\t'msFullscreenEnabled',\n\t\t\t\t'MSFullscreenChange',\n\t\t\t\t'MSFullscreenError'\n\t\t\t]\n\t\t];\n\n\t\tvar i = 0;\n\t\tvar l = fnMap.length;\n\t\tvar ret = {};\n\n\t\tfor (; i < l; i++) {\n\t\t\tval = fnMap[i];\n\t\t\tif (val && val[1] in document) {\n\t\t\t\tfor (i = 0, valLength = val.length; i < valLength; i++) {\n\t\t\t\t\tret[fnMap[0][i]] = val[i];\n\t\t\t\t}\n\t\t\t\treturn ret;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t})();\n\n\tvar screenfull = {\n\t\trequest: function (elem) {\n\t\t\tvar request = fn.requestFullscreen;\n\n\t\t\telem = elem || document.documentElement;\n\n\t\t\t// Work around Safari 5.1 bug: reports support for\n\t\t\t// keyboard in fullscreen even though it doesn't.\n\t\t\t// Browser sniffing, since the alternative with\n\t\t\t// setTimeout is even worse.\n\t\t\tif (/5\\.1[\\.\\d]* Safari/.test(navigator.userAgent)) {\n\t\t\t\telem[request]();\n\t\t\t} else {\n\t\t\t\telem[request](keyboardAllowed && Element.ALLOW_KEYBOARD_INPUT);\n\t\t\t}\n\t\t},\n\t\texit: function () {\n\t\t\tdocument[fn.exitFullscreen]();\n\t\t},\n\t\ttoggle: function (elem) {\n\t\t\tif (this.isFullscreen) {\n\t\t\t\tthis.exit();\n\t\t\t} else {\n\t\t\t\tthis.request(elem);\n\t\t\t}\n\t\t},\n\t\traw: fn\n\t};\n\n\tif (!fn) {\n\t\tif (isCommonjs) {\n\t\t\tmodule.exports = false;\n\t\t} else {\n\t\t\twindow.screenfull = false;\n\t\t}\n\n\t\treturn;\n\t}\n\n\tObject.defineProperties(screenfull, {\n\t\tisFullscreen: {\n\t\t\tget: function () {\n\t\t\t\treturn Boolean(document[fn.fullscreenElement]);\n\t\t\t}\n\t\t},\n\t\telement: {\n\t\t\tenumerable: true,\n\t\t\tget: function () {\n\t\t\t\treturn document[fn.fullscreenElement];\n\t\t\t}\n\t\t},\n\t\tenabled: {\n\t\t\tenumerable: true,\n\t\t\tget: function () {\n\t\t\t\t// Coerce to boolean in case of old WebKit\n\t\t\t\treturn Boolean(document[fn.fullscreenEnabled]);\n\t\t\t}\n\t\t}\n\t});\n\n\tif (isCommonjs) {\n\t\tmodule.exports = screenfull;\n\t} else {\n\t\twindow.screenfull = screenfull;\n\t}\n})();\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/screenfull/dist/screenfull.js\n// module id = 56b32877cbcf8d29840e\n// module chunks = app/js/activity/ppt/index app/js/material-lib/ppt-player/index"],"sourceRoot":""}