{"version":3,"sources":["webpack:///./app/Resources/static-src/app/js/testpaper-manage/create/index.js"],"names":["TestpaperForm","$form","$description","find","validator","difficultySlider","_initEvent","_initValidate","_initSortList","scoreSlider","on","_submit","event","changeMode","changeRange","changeCount","passScore","score","document","getElementById","option","start","connect","tooltips","step","range","updateOptions","noUiSlider","create","values","handle","$","text","toFixed","parseInt","attr","Translator","trans","tooltip","html","$this","currentTarget","val","removeClass","initDifficultySlider","addClass","sliders","margin","serialization","resolution","simplePercentage","normalPercentage","difficultyPercentage","editor","CKEDITOR","replace","toolbar","filebrowserImageUploadUrl","data","height","a","b","c","getData","form","num","each","index","item","validate","rules","name","required","maxlength","trim","description","limitedTime","min","max","digits","mode","questioncount","messages","length","self","_initEditor","element","itemSelector","ajax","$target","status","post","serialize","result","button","submit","change","url","checkQuestionNum","courseId","lessonId","i","n","questionNum"],"mappings":"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","file":"app/js/testpaper-manage/create/index.js","sourcesContent":["import sortList from 'common/sortable';\nimport { delHtmlTag } from 'common/utils';\nimport SelectLinkage from 'app/js/question-manage/widget/select-linkage.js';\n\nclass TestpaperForm {\n  constructor($form) {\n    this.$form = $form;\n    this.$description = this.$form.find('[name=\"description\"]');\n    this.validator = null;\n    this.difficultySlider = null;\n    this._initEvent();\n    this._initValidate();\n    this._initSortList();\n    this.scoreSlider = null;\n  }\n\n  _initEvent() {\n    this.$form.on('click', '[data-role=\"submit\"]', event => this._submit(event));\n    this.$form.on('click', '[name=\"mode\"]', event => this.changeMode(event));\n    this.$form.on('click', '[name=\"range\"]', event => this.changeRange(event));\n    this.$form.on('blur', '[data-role=\"count\"]', event => this.changeCount(event));\n  }\n\n  initScoreSlider(passScore, score) {\n    let scoreSlider = document.getElementById('score-slider');\n    let option = {\n      start: passScore,\n      connect: [true, false],\n      tooltips: [true],\n      step: 1,\n      range: {\n        'min': 0,\n        'max': score\n      }\n    }\n    if (this.scoreSlider) {\n      this.scoreSlider.updateOptions(option);\n    } else {\n      this.scoreSlider = noUiSlider.create(scoreSlider, option);\n      scoreSlider.noUiSlider.on('update', function (values, handle) {\n        $('.noUi-tooltip').text(`${(values[handle] / score * 100).toFixed(0)}%`);\n        $('.js-passScore').text(parseInt(values[handle]));\n      });\n    }\n    $('.noUi-handle').attr('data-placement', 'top').attr('data-original-title', Translator.trans('activity.testpaper_manage.pass_score_hint', {'passScore' : passScore})).attr('data-container', 'body');\n    $('.noUi-handle').tooltip({ html: true })\n    $('.noUi-tooltip').text(`${(passScore / score * 100).toFixed(0)}%`);\n  }\n\n  changeMode(event) {\n    let $this = $(event.currentTarget);\n    if ($this.val() == 'difficulty') {\n      this.$form.find('#difficulty-form-group').removeClass('hidden');\n      this.initDifficultySlider();\n    } else {\n      this.$form.find('#difficulty-form-group').addClass('hidden')\n    }\n  }\n\n  changeRange(event) {\n    let $this = $(event.currentTarget);\n    ($this.val() == 'course') ? this.$form.find('#testpaper-range-selects').addClass('hidden') : this.$form.find('#testpaper-range-selects').removeClass('hidden');\n  }\n\n  initDifficultySlider() {\n    if (!this.difficultySlider) {\n      let sliders = document.getElementById('difficulty-percentage-slider');\n      this.difficultySlider = noUiSlider.create(sliders, {\n        start: [30, 70],\n        margin: 30,\n        range: {\n          'min': 0,\n          'max': 100\n        },\n        step: 1,\n        connect: [true, true, true],\n        serialization: {\n          resolution: 1\n        },\n      });\n      sliders.noUiSlider.on('update', function (values, handle) {\n        let simplePercentage = parseInt(values[0]),\n          normalPercentage = values[1] - values[0],\n          difficultyPercentage = 100 - values[1];\n        $('.js-simple-percentage-text').html(Translator.trans('activity.testpaper_manage.simple_percentage', {'simplePercentage':simplePercentage}));\n        $('.js-normal-percentage-text').html(Translator.trans('activity.testpaper_manage.normal_percentage', {'normalPercentage':normalPercentage}));\n        $('.js-difficulty-percentage-text').html(Translator.trans('activity.testpaper_manage.difficulty_percentage', {'difficultyPercentage':difficultyPercentage}));\n        $('input[name=\"percentages[simple]\"]').val(simplePercentage);\n        $('input[name=\"percentages[normal]\"]').val(normalPercentage);\n        $('input[name=\"percentages[difficulty]\"]').val(difficultyPercentage);\n      });\n    }\n  }\n\n  _initEditor(validator) {\n    let editor = CKEDITOR.replace(this.$description.attr('id'), {\n      toolbar: 'Simple',\n      filebrowserImageUploadUrl: this.$description.data('imageUploadUrl'),\n      height: 100\n    });\n    editor.on('change', (a, b, c) => {\n      this.$description.val(delHtmlTag(editor.getData()));\n    });\n    editor.on('blur', () => {\n      this.$description.val(delHtmlTag(editor.getData()));//fix ie11\n      validator.form();\n    });\n  }\n\n  changeCount() {\n    let num = 0;\n    this.$form.find('[data-role=\"count\"]').each(function (index, item) {\n      num += parseInt($(item).val());\n    });\n    this.$form.find('[name=\"questioncount\"]').val(num > 0 ? num : null);\n  }\n\n  _initValidate() {\n    this.validator = this.$form.validate({\n      rules: {\n        name: {\n          required: true,\n          maxlength: 50,\n          trim: true,\n        },\n        description: {\n          required: true,\n          maxlength: 500,\n          trim: true,\n        },\n        limitedTime: {\n          min: 0,\n          max: 10000,\n          digits: true\n        },\n        mode: {\n          required: true\n        },\n        range: {\n          required: true\n        },\n        questioncount: {\n          required: true\n        }\n      },\n      messages: {\n        questioncount: Translator.trans('activity.testpaper_manage.question_required_error_hint'),\n        name: {\n          required: Translator.trans('activity.testpaper_manage.input_title_hint'),\n          maxlength: Translator.trans('site.maxlength_hint',{length: 50})\n        },\n        description: {\n          required: Translator.trans('activity.testpaper_manage.input_description_hint'),\n          maxlength: Translator.trans('site.maxlength_hint',{length: 500})\n        },\n        mode: Translator.trans('activity.testpaper_manage.generate_mode_hint'),\n        range: Translator.trans('activity.testpaper_manage.question_scope')\n      }\n    });\n    this.$form.find('.testpaper-question-option-item').each(function () {\n      let self = $(this);\n      self.find('[data-role=\"count\"]').rules('add', {\n        min: 0,\n        max: function () {\n          return parseInt(self.find('[role=\"questionNum\"]').text());\n        },\n        digits: true\n      })\n\n      self.find('[data-role=\"score\"]').rules('add', {\n        min: 0,\n        max: 100,\n        digits: true\n      })\n\n      if (self.find('[data-role=\"missScore\"]').length > 0) {\n        self.find('[data-role=\"missScore\"]').rules('add', {\n          min: 0,\n          max: function () {\n            return parseInt(self.find('[data-role=\"score\"]').val());\n          },\n          digits: true\n        })\n      }\n    })\n    this._initEditor(this.validator);\n  }\n\n  _initSortList() {\n    sortList({\n      element: '#testpaper-question-options',\n      itemSelector: '.testpaper-question-option-item',\n      handle: '.question-type-sort-handler',\n      ajax: false\n    });\n  }\n\n  _submit(event) {\n    let $target = $(event.currentTarget);\n    let status = this.validator.form();\n\n    if (status) {\n      $.post($target.data('checkUrl'),this.$form.serialize(),result => {\n        if (result.status == 'no') {\n          $('.js-build-check').html(Translator.trans('activity.testpaper_manage.question_num_error'));\n        } else {\n          $('.js-build-check').html('');\n\n          $target.button('loading').addClass('disabled');\n          this.$form.submit();\n        }\n      })\n\n    }\n  }\n}\n\nnew TestpaperForm($('#testpaper-form'));\nnew SelectLinkage($('[name=\"ranges[courseId]\"]'),$('[name=\"ranges[lessonId]\"]'));\n\n$('[name=\"ranges[courseId]\"]').change(function(){\n  let url = $(this).data('checkNumUrl');\n  checkQuestionNum(url);\n})\n\n$('[name=\"ranges[lessonId]\"]').change(function(){\n  let url = $(this).data('checkNumUrl');\n  checkQuestionNum(url);\n})\n\nfunction checkQuestionNum(url) {\n  let courseId = $('[name=\"ranges[courseId]\"]').val();\n  let lessonId = $('[name=\"ranges[lessonId]\"]').val();\n\n  $.post(url,{courseId:courseId, lessonId:lessonId},function(data){\n    $('[role=\"questionNum\"]').text(0);\n\n    $.each(data,function(i,n){\n      $(\"[type='\"+i+\"']\").text(n.questionNum);\n    });\n  })\n}\n\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/testpaper-manage/create/index.js"],"sourceRoot":""}