{"version":3,"sources":["webpack:///./app/Resources/static-src/app/js/auth/login-bind-exist/index.js"],"names":["$form","$","$btn","find","validator","validate","rules","emailOrMobile","required","email_or_mobile","password","click","form","button","hide","post","attr","serialize","response","console","log","success","html","message","show","Translator","trans","window","location","href","_target_path","fail","always","addMethod","value","element","params","reg_email","reg_mobile","result","isEmail","test","isMobile","removeClass","addClass","optional"],"mappings":";;;;;;AAAA;;;;;;AAEA,KAAIA,QAAQC,EAAE,kBAAF,CAAZ;AACA,KAAIC,OAAOF,MAAMG,IAAN,CAAW,qBAAX,CAAX;AACA,KAAIC,YAAYJ,MAAMK,QAAN,CAAe;AAC7BC,UAAO;AACLC,oBAAe;AACbC,iBAAU,IADG;AAEbC,wBAAiB;AAFJ,MADV;AAKLC,eAAU;AACRF,iBAAU;AADF;AALL;AADsB,EAAf,CAAhB;;AAYAN,MAAKS,KAAL,CAAW,YAAM;AACf,OAAIP,UAAUQ,IAAV,EAAJ,EAAsB;AACpBV,UAAKW,MAAL,CAAY,SAAZ;AACAZ,OAAE,wBAAF,EAA4Ba,IAA5B;AACAb,OAAEc,IAAF,CAAOf,MAAMgB,IAAN,CAAW,QAAX,CAAP,EAA6BhB,MAAMiB,SAAN,EAA7B,EAAgD,UAAUC,QAAV,EAAoB;;AAElEC,eAAQC,GAAR,CAAYF,QAAZ;AACA,WAAI,CAACA,SAASG,OAAd,EAAuB;AACrBpB,WAAE,wBAAF,EAA4BqB,IAA5B,CAAiCJ,SAASK,OAA1C,EAAmDC,IAAnD;AACCtB,cAAKW,MAAL,CAAY,OAAZ;AACD;AACD;AACD,6BAAO,SAAP,EAAiBY,WAAWC,KAAX,CAAiB,yCAAjB,CAAjB;AACAC,cAAOC,QAAP,CAAgBC,IAAhB,GAAuBX,SAASY,YAAhC;AACD,MAVD,EAUG,MAVH,EAUWC,IAVX,CAUgB,YAAY;AAC1B,6BAAO,QAAP,EAAgBN,WAAWC,KAAX,CAAiB,wCAAjB,CAAhB;AACD,MAZD,EAYGM,MAZH,CAYU,YAAY;AACpB9B,YAAKW,MAAL,CAAY,OAAZ;AACD,MAdD;AAeD;AACF,EApBD;;AAsBAZ,GAAEG,SAAF,CAAY6B,SAAZ,CAAsB,iBAAtB,EAAyC,UAAUC,KAAV,EAAiBC,OAAjB,EAA0BC,MAA1B,EAAkC;AACzE,OAAI7B,gBAAgB2B,KAApB;AACA,OAAIG,YAAY,mEAAhB;AACA,OAAIC,aAAa,WAAjB;AACA,OAAIC,SAAS,KAAb;AACA,OAAIC,UAAUH,UAAUI,IAAV,CAAelC,aAAf,CAAd;AACA,OAAImC,WAAWJ,WAAWG,IAAX,CAAgBlC,aAAhB,CAAf;AACA,OAAImC,QAAJ,EAAc;AACZzC,OAAE,mBAAF,EAAuB0C,WAAvB,CAAmC,QAAnC;AACD,IAFD,MAEO;AACL1C,OAAE,mBAAF,EAAuB2C,QAAvB,CAAgC,QAAhC;AACD;AACD,OAAIJ,WAAWE,QAAf,EAAyB;AACvBH,cAAS,IAAT;AACD;AACD,UAAO,KAAKM,QAAL,CAAcV,OAAd,KAA0BI,MAAjC;AACD,EAhBD,EAgBGd,WAAWC,KAAX,CAAiB,0CAAjB,CAhBH,E","file":"app/js/auth/login-bind-exist/index.js","sourcesContent":["import notify from 'common/notify';\n\nlet $form = $('#bind-exist-form');\nlet $btn = $form.find('#set-bind-exist-btn');\nlet validator = $form.validate({\n  rules: {\n    emailOrMobile: {\n      required: true,\n      email_or_mobile: true,\n    },\n    password: {\n      required: true,\n    }\n  }\n});\n\n$btn.click(() => {\n  if (validator.form()) {\n    $btn.button('loading');\n    $(\"#bind-exist-form-error\").hide();\n    $.post($form.attr('action'), $form.serialize(), function (response) {\n\n      console.log(response);\n      if (!response.success) {\n        $(\"#bind-exist-form-error\").html(response.message).show();\n         $btn.button('reset');\n        return;\n      }\n      notify('success',Translator.trans('auth.login_bind_exist.bind_success_hint'));\n      window.location.href = response._target_path;\n    }, 'json').fail(function () {\n      notify('danger',Translator.trans('auth.login_bind_exist_bind_failed_hint'));\n    }).always(function () {\n      $btn.button('reset');\n    });\n  }\n})\n\n$.validator.addMethod(\"email_or_mobile\", function (value, element, params) {\n  var emailOrMobile = value;\n  var reg_email = /^([a-zA-Z0-9_\\.\\-\\+])+\\@(([a-zA-Z0-9\\-])+\\.)+([a-zA-Z0-9]{2,4})+$/;\n  var reg_mobile = /^1\\d{10}$/;\n  var result = false;\n  var isEmail = reg_email.test(emailOrMobile);\n  var isMobile = reg_mobile.test(emailOrMobile);\n  if (isMobile) {\n    $(\".email_mobile_msg\").removeClass('hidden');\n  } else {\n    $(\".email_mobile_msg\").addClass('hidden');\n  }\n  if (isEmail || isMobile) {\n    result = true;\n  }\n  return this.optional(element) || result;\n}, Translator.trans('auth.login_bind_exist_bind_validate_hint'));\n\n\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/auth/login-bind-exist/index.js"],"sourceRoot":""}