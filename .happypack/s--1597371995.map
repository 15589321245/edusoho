{"version":3,"sources":["app/Resources/static-src/app/js/testpaper/widget/part.js"],"names":["initScrollbar","$taskTestpaperBodyIframe","$","$paneCard","ie","firefox","css","perfectScrollbar","testpaperCardFixed","$testpaperCard","length","testpaperCard_top","offset","top","window","scroll","event","scrollTop","addClass","removeClass","testpaperCardLocation","click","$btn","currentTarget","siblings","$current","data","$testpaperBodyIframe","onlyShowError","change","each","index","item","$item","$itemParent","closest","prop","hide","find","show","initWatermark","$testpaperWatermark","get","response","WaterMark"],"mappings":"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","file":"part.js","sourceRoot":"/Users/kz/projects/edusoho","sourcesContent":["import 'app/common/watermark';\nimport { Browser } from 'common/utils';\n\nexport const initScrollbar = ()=> {\n\tlet $taskTestpaperBodyIframe = $('.js-task-testpaper-body-iframe');\n\tlet $paneCard = $('.js-panel-card');\n\tif (Browser.ie  || Browser.firefox) {\n\t\t$taskTestpaperBodyIframe.css('overflow-y','auto')\n\t} else {\n\t\t$taskTestpaperBodyIframe.perfectScrollbar();\n\t\t$taskTestpaperBodyIframe.perfectScrollbar('update'); \n\t}\n  $paneCard.perfectScrollbar();\n\t$paneCard.perfectScrollbar('update');\n}\n\nexport const testpaperCardFixed =()=> {\n\tlet $testpaperCard = $(\".js-testpaper-card\");\n\tif($testpaperCard.length<=0) {\n\t\treturn;\n\t}\n\tlet testpaperCard_top = $testpaperCard.offset().top;\n\t$(window).scroll(function(event) {\n\t\t\tlet scrollTop = $(window).scrollTop();\n\t\t\tif (scrollTop >= testpaperCard_top) {\n\t\t\t\t$testpaperCard.addClass('affix')\n\t\t\t} else {\n\t\t\t\t$testpaperCard.removeClass('affix');\n\t\t\t}\n\t});\n}\n\nexport const testpaperCardLocation = () => {\n\t$('.js-btn-index').click((event)=>{\n\t\tlet $btn = $(event.currentTarget);\n\t\tif($('.js-testpaper-heading').length <= 0) {\n\t\t\t$btn.addClass('doing').siblings('.doing').removeClass('doing');\n\t\t}\n    let $current = $($btn.data('anchor'));\n\t\tlet $testpaperBodyIframe = $('.js-task-testpaper-body-iframe');\n\t\t//iframe中的滚动事件\n\t\tif($testpaperBodyIframe.length>0) {\n\t\t\t$(\".js-task-testpaper-body-iframe\").scrollTop($current.offset().top);\n\t\t\t$(\".js-task-testpaper-body-iframe\").perfectScrollbar('update');\n\t\t}\n\t\telse {\n\t\t\t$(\"body\").scrollTop($current.offset().top);\n\t\t}\n\t})\n}\n\nexport const onlyShowError = ()=> {\n\t$('#showWrong').change((event)=>{\n\t\tlet $current =$(event.currentTarget);\n\t\t$('.js-answer-notwrong').each(function (index,item) {  \n\t\t\tlet $item = $($(item).data('anchor'));\n\t\t\tlet $itemParent = $item.closest('.js-testpaper-question-block');\n\t\t\tif($current.prop('checked')) {\n\t\t\t\t$item.hide();\n\t\t\t\tif($itemParent.find('.js-testpaper-question:visible').length<=0) {\n\t\t\t\t\t$itemParent.hide();\n\t\t\t\t}\n\t\t\t}else {\n\t\t\t\t$item.show();\n\t\t\t\t$itemParent.show();\n\t\t\t}\n\t\t});\n\t\tinitScrollbar();\n\t})\n}\n\nexport const initWatermark = ()=> {\n\tlet $testpaperWatermark = $('.js-testpaper-watermark');\n  if ($testpaperWatermark.length > 0) {\n    $.get($testpaperWatermark.data('watermark-url'), function(response){\n      $testpaperWatermark.each(function(){\n        $(this).WaterMark({\n          'yPosition': 'center',\n          'style': {'font-size':10},\n          'opacity': 0.6,\n          'contents': response\n        });\n      })\n    });\n  }\n}"]}