{% extends 'layout.html.twig' %}
{% do script(['libs/easy-pie-chart/dist/jquery.easypiechart.js','app/js/courseset/show/index.js']) %}

{% block top_content %}

{% endblock %}

{% block content %}

  {{ render(controller('AppBundle:Course:header',{id: course.id})) }}

  <!-- 中部 -->
  <div class="container">
    <div class="course-detail row">
      <div class="col-lg-9 col-md-8 course-detail-main">
        <div class="alert alert-warning" role="alert">
          <a href="" class="alert-link">
            课程公告：下节直播课程将于本周五上午10:30按时开课，请各位学员准备好上次的作业进行批阅。 <i class="es-icon es-icon-close01 alert-close"></i>
          </a>
        </div> 
        {% include 'course-set/announcement/block.html.twig' with { courseSetId:courseSet.id, courseId:course.id } %}
        <!-- 课程详情页中部内容 -->
        <section class="es-section">
          <div class="nav-btn-tab">
            <ul class="nav nav-tabs" role="tablist">
              <li role="presentation" class="{% if nav|default('') == 'overview' %}active{% endif %}">
                <a href="{{ path('course_show', {'id': course.id}) }}">课程概览</a>
              </li>

              <li role="presentation" class="{% if nav|default('') == 'directory' %}active{% endif %}">
                <a href="{{ path('course_task_list',{id: course.id}) }}">课程目录</a>
              </li>
              <li role="presentation" class="{% if nav|default('') == 'thread' %}active{% endif %}">
                <a href="{{ path('course_threads', {id: course.id}) }}">
                  话题
                  <small class="text-muted">({{ course.threadNum|default(0) }})</small>
                </a>
              </li>
              <li role="presentation" class="{% if nav|default('') == 'review' %}active{% endif %}">
                <a href="{{ path('course_review',{id:course.id}) }}">评价({{ course.ratingNum }})</a>
              </li>
              <li role="presentation" class="{% if nav|default('') == 'note' %}active{% endif %}">
                <a href="{{ path('course_notes', { id: course.id }) }}">
                  笔记
                  <small class="text-muted">({{ course.noteNum }})</small>
                </a>
              </li>
              {#<li class="highlight" style="left: 585px; width: 92px; overflow: hidden;"></li>#}
            </ul>
          </div>
          <div class="course-detail-content">
            {% block detail_content %}
            {% endblock %}
          </div>
        </section>

      </div>
      <div class="col-lg-3 col-md-4 course-sidebar">
        {# @TODO 现在数据还是写死的，到时候通过render(controller) 方式去做 #}

        <!-- 课程特色: 加入前显示，加入后不显示 -->
        {{ render(controller('AppBundle:Course:characteristicPart', {id: course.id})) }}

        <!-- 其他计划: 加入前不显示，加入后显示-->
        {{ render(controller('AppBundle:Course:otherCoursePart', {id: course.id})) }}

        <!-- 推荐班级 -->
        {% include 'course-set/recommend-classroom.html.twig' %}

        <!-- 授课教师 -->
        {{ render(controller('AppBundle:Course:teachersPart', {id: course.id})) }}

        <!-- 最新学员-->
        {{ render(controller('AppBundle:Course:newestStudentsPart', {id: course.id})) }}

        <!-- 学员动态 -->
        {% include 'course-set/student-activity.html.twig' with {course: course} %}
      </div>
    </div>
  </div>

  {% include 'seajs_loader_compatible.html.twig' with {topxiawebbundle: true} %}
{% endblock %}
