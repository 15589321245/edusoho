{"version":3,"sources":["webpack:///./app/Resources/static-src/app/js/open-course-manage/lesson/index.js"],"names":["$list","$","element","distance","itemSelector","data","sortListAfter","on","e","confirm","Translator","trans","$btn","currentTarget","_isTestPaper","parents","_remove_item","remove","post","response","find","show","attr","chapter_name","part_name","chapterName","partName","html","error","code","id","replaceWith","parent","addClass","removeClass","tooltip","append","window","location","reload","css","mouseout","hide","mouseover","asyncLoadFiles","click","url","get","modal","fileIds","Array","each","isNaN","push","length","join","i","file","inArray","type","convertStatus","ids","lessonNum","chapterNum","unitNum","$item","hasClass","text"],"mappings":"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","file":"app/js/open-course-manage/lesson/index.js","sourcesContent":["import sortList from 'common/sortable';\nimport notify from 'common/notify';\n\nlet $list = $('#course-item-list');\n\nsortList({\n  element: '#course-item-list',\n  distance: 20,\n  itemSelector: '.item-lesson, .item-chapter'\n}, (data) => {\n  sortListAfter(data, $('#course-item-list'));\n})\n\n$list.on('click', '.delete-lesson-btn', function (e) {\n  if (!confirm(Translator.trans('open_course.lesson_delete_hint'))) {\n    return;\n  }\n  let $btn = $(e.currentTarget);\n  let _isTestPaper = function () {\n    return $btn.parents('.item-chapter')[0];\n  }\n  let _remove_item = function () {\n    if (_isTestPaper()) {\n      $btn.parents('.item-chapter').remove();\n    } else {\n      $btn.parents('.item-lesson').remove();\n    }\n  }\n  $.post($(this).data('url'), function (response) {\n    _remove_item();\n    sortListAfter($list);\n    $('.lesson-manage-panel').find('.only-one-lesson-notify').show();\n    $('.lesson-manage-panel').find('#lesson-create-btn').attr('disabled', false);\n    notify('success',Translator.trans('open_course.lesson_delete_success_hint'));\n  }, 'json');\n});\n\n$list.on('click', '.delete-chapter-btn', function (e) {\n  let chapter_name = $(this).data('chapter');\n  let part_name = $(this).data('part');\n  if (!confirm(Translator.trans('open_course.chapter_delete_hint', {chapterName: chapter_name, partName: part_name}))) {\n    return;\n  }\n  let $btn = $(e.currentTarget);\n  $.post($(this).data('url'), function (response) {\n    $btn.parents('.item-chapter').remove();\n    sortListAfter($list);\n    notify('success' + chapter_name + '' + part_name + Translator.trans('open_course_chapter_delete_success_hint'));\n  }, 'json');\n});\n\n$list.on('click', '.replay-lesson-btn', function (e) {\n  if (!confirm(Translator.trans('open_course.add_replay_hint'))) {\n    return;\n  }\n  $.post($(this).data('url'), function (html) {\n    if (html.error) {\n      if (html.error.code == 10019)\n        notify('danger', Translator.trans('open_course.add_replay_failed_where_live'));\n      else\n        notify('danger', Translator.trans('open_course.add_replay_failed_hint'));\n    } else {\n      let id = '#' + $(html).attr('id');\n      $(id).replaceWith(html);\n      notify('success', Translator.trans('open_course.add_replay_success_hint'));\n    }\n  });\n});\n\n$list.on('click', '.publish-lesson-btn', function (e) {\n  let $btn = $(e.currentTarget);\n  $.post($(this).data('url'), function (html) {\n    let id = '#' + $(html).attr('id');\n    $(id).find('.item-content .unpublish-warning').remove();\n    $(id).find('.item-actions .publish-lesson-btn').parent().addClass('hidden').removeClass('show');\n    $(id).find('.item-actions .unpublish-lesson-btn').parent().addClass('show').removeClass('hidden');\n    $(id).find('.item-actions .delete-lesson-btn').parent().addClass('hidden').removeClass('show');\n    $(id).find('.btn-link').tooltip();\n    notify('success', Translator.trans('open_course.publish_lesson_hint'));\n  });\n});\n\n$list.on('click', '.unpublish-lesson-btn', function (e) {\n  let $btn = $(e.currentTarget);\n  $.post($(this).data('url'), function (html) {\n    let id = '#' + $(html).attr('id');\n    $(id).find('.item-content').append('<span class=\"unpublish-warning text-warning\">' + Translator.trans('open_course.unpublish_hint') +'</span>');\n    $(id).find('.item-actions .publish-lesson-btn').parent().addClass('show').removeClass('hidden');\n    $(id).find('.item-actions .unpublish-lesson-btn').parent().addClass('hidden').removeClass('show');\n    $(id).find('.item-actions .delete-lesson-btn').parent().addClass('show').removeClass('hidden');\n    $(id).find('.btn-link').tooltip();\n    notify('success', Translator.trans('open_course.unpublish_success_hint'));\n  });\n});\n\n$list.on('click', '.delete-exercise-btn', function (e) {\n  if (!confirm(Translator.trans('open_course.exercise_delete_hint'))) {\n    return;\n  }\n  let $btn = $(e.currentTarget);\n  $.post($(this).data('url'), function (response) {\n    notify('success', Translator.trans('open_course.exercise_delete_success_hint'));\n    window.location.reload();\n  }, 'json');\n});\n\n$list.on('click', '.delete-homework-btn', function (e) {\n  if (!confirm(Translator.trans('open_course.homework_delete_hint'))) {\n    return;\n  }\n  let $btn = $(e.currentTarget);\n  $.post($(this).data('url'), function (response) {\n    notify('success', Translator.trans('open_course.homework_delete_success_hint'));\n    window.location.reload();\n  }, 'json');\n});\n\n\n$(\"#course-item-list .item-actions .btn-link\").tooltip();\n$(\"#course-item-list .fileDeletedLesson\").tooltip();\n\n$('.dropdown-menu').parent().on('shown.bs.dropdown', function () {\n  if ($(this).find('.dropdown-menu-more').css('display') == 'block') {\n    $(this).parent().find('.dropdown-menu-more').mouseout(function () {\n      $(this).parent().find('.dropdown-menu-more').hide();\n    });\n\n    $(this).parent().find('.dropdown-menu-more').mouseover(function () {\n      $(this).parent().find('.dropdown-menu-more').show();\n    });\n\n  } else {\n    $(this).parent().find('.dropdown-menu-more').show();\n  }\n});\n\n$('.dropdown-menu').parent().on('hide.bs.dropdown', function () {\n  $(this).find('.dropdown-menu-more').show();\n});\n\nasyncLoadFiles();\n\n$('#lesson-create-btn').click(function () {\n  let url = $(this).data('url');\n  $.get(url, function (data) {\n    if (data['result']) {\n      notify('warning', Translator.trans('open_course.add_lesson_hint'));\n    } else {\n      $('#modal').html(data);\n      $('#modal').modal('show');\n    }\n  })\n})\n\nfunction asyncLoadFiles() {\n  let url = $('.lesson-manage-panel').data('file-status-url');\n\n  let fileIds = new Array();\n  $('.lesson-list .item-lesson').each(function () {\n    if (!isNaN($(this).data('file-id'))) {\n      fileIds.push($(this).data('file-id'));\n    }\n  });\n\n  if (fileIds.length == 0) {\n    return;\n  }\n\n  $.post(url, { 'ids': fileIds.join(\",\") }, function (data) {\n\n    if (!data || data.length == 0) {\n      return;\n    }\n\n    for (let i = 0; i < data.length; i++) {\n      let file = data[i];\n\n      if ($.inArray(file.type, ['video', 'ppt', 'document']) > -1) {\n        if (file.convertStatus == 'waiting' || file.convertStatus == 'doing') {\n          $(\"li[data-file-id=\" + file.id + \"]\").find('span[data-role=\"mediaStatus\"]').append(\"<span class='text-warning'>\"+Translator.trans('open_course.file_format_conversion_hint')+\"</span>\");\n        } else if (file.convertStatus == 'error') {\n          $(\"li[data-file-id=\" + file.id + \"]\").find('span[data-role=\"mediaStatus\"]').append(\"<span class='text-danger'>\"+Translator.trans('open_course.file_format_conversion_failed_hint')+\"</span>\");\n        } else if (file.convertStatus == 'success') {\n          $(\"li[data-file-id=\" + file.id + \"]\").find('.mark-manage').show();\n          $(\"li[data-file-id=\" + file.id + \"]\").find('.mark-manage-divider').show();\n        }\n      }\n    }\n  });\n}\n\nfunction sortListAfter(data, $list) {\n  $.post($list.data('sortUrl'), { ids: data }, function (response) {\n    let lessonNum = chapterNum = unitNum = 0;\n\n    $list.find('.item-lesson, .item-chapter').each(function () {\n      let $item = $(this);\n      if ($item.hasClass('item-lesson')) {\n        lessonNum++;\n        $item.find('.number').text(lessonNum);\n      } else if ($item.hasClass('item-chapter-unit')) {\n        unitNum++;\n        $item.find('.number').text(unitNum);\n      } else if ($item.hasClass('item-chapter')) {\n        chapterNum++;\n        unitNum = 0;\n        $item.find('.number').text(chapterNum);\n      }\n\n    });\n  });\n}\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/open-course-manage/lesson/index.js"],"sourceRoot":""}