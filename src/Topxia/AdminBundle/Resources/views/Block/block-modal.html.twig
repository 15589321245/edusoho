{% extends 'TopxiaWebBundle::bootstrap-modal-layout.html.twig' %}
{% set block = block|default(null) %}

{% block title %}
  {% if editBlock.id == 0 %}新增{% else %}设置{% endif %}编辑区
{% endblock %}

{% if editBlock.id == 0 %}
  {% set checkCodeUrl = path('admin_block_code_check_forcreate') %}
{% else %}
  {% set checkCodeUrl = path('admin_block_code_check_foredit', {id:editBlock.id}) %}
{% endif %}

{% block body %}
  <form class="form-horizontal" data-id = {{ editBlock.id }} id="block-form"  
  {% if editBlock.id == 0 %}
    action="{{ path('admin_block_create') }}"
  {% else %}
    action="{{ path('admin_block_edit', {block:editBlock.id}) }}" 
  {% endif %}  method="post">


  <div class="row form-group">
    <div class="col-md-3 control-label"><label for="code">编号</label></div>
    <div class="col-md-8 controls"> 
    <input class="form-control" type="text" id="code" value="{{editBlock.code}}" data-url="{{checkCodeUrl}}" name="code"></div>
  </div>

  <div class="row form-group">
    <div class="col-md-3 control-label"><label for="title">标题</label></div>
    <div class="col-md-8 controls"> 
    <input class="form-control" type="text" id="title" value="{{editBlock.title}}" name="title"></div>
  </div>

  <div class="row form-group">
    <div class="col-md-3 control-label"><label for="mode">编辑模式</label></div>
    <div class="col-md-8 controls"> 
      <div class="controls col-md-8 radios">
        <label><input type="radio" name="mode" value="html" {% if editBlock.mode == 'html' %}checked{% endif %}>HTML</label>
        <label><input type="radio" name="mode" value="template" {% if editBlock.mode == 'template' %}checked{% endif %}>模板</label>
      </div>
    </div>
  </div>

  <div class="row form-group" style="display:none;" id="template">
    <div class="col-md-3 control-label"><label for="template">模板内容</label></div>
    <div class="col-md-8 controls">
      <textarea id="template" name="template" class="form-control" rows="8">{{ editBlock.template }}</textarea>
    </div>
  </div>

  <div class="row form-group">
    <div class="col-md-3 control-label"><label for="tips">Tips</label></div>
    <div class="col-md-8 controls">
      <textarea id="tips" name="tips" class="form-control" rows="4"></textarea>
      <p class="help-block">
        请在此处输入此Block的格式设置提示信息
      </p>
    </div>
  </div>

    <input type="hidden" name="_csrf_token" value="{{ csrf_token('site') }}">

  </form>

  <script type="text/javascript">
    app.load('block/save-modal')
  </script>
{% endblock %}

{% block footer %}
    <button type="button" class="btn btn-link" data-dismiss="modal">取消</button>
    <button type="submit" class="btn btn-primary" data-toggle="form-submit" data-target="#block-form">保存</button>
{% endblock %}
