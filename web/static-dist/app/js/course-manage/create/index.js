webpackJsonp(["app/js/course-manage/create/index"],[function(module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),Creator=function(){function Creator(){_classCallCheck(this,Creator),this.init()}return _createClass(Creator,[{key:"init",value:function(){this.initValidator(),this.checkBoxChange()}},{key:"initValidator",value:function(){var $form=$("#course-create-form"),validator=$form.validate({groups:{date:"expiryStartDate expiryEndDate"},rules:{title:{required:!0,trim:!0},expiryDays:{required:function(){return"date"==$('input[name="expiryMode"]:checked').val()},digits:!0,max_year:!0},expiryStartDate:{required:function(){return"date"==$('input[name="expiryMode"]:checked').val()},date:!0,after_now_date:!0,before_date:"#expiryEndDate"},expiryEndDate:{required:function(){return"date"==$('input[name="expiryMode"]:checked').val()},date:!0,after_date:"#expiryStartDate"}},messages:{title:Translator.trans("请输入教学计划课程标题"),expiryStartDate:{required:Translator.trans("请输入开始日期"),before_date:Translator.trans("开始日期应早于结束日期")},expiryEndDate:{required:Translator.trans("请输入结束日期"),after_date:Translator.trans("结束日期应晚于开始日期")}}});$("#course-submit").click(function(evt){validator.form()&&($(evt.currentTarget).button("loading"),$form.submit())}),this.initDatePicker("#expiryStartDate",validator),this.initDatePicker("#expiryEndDate",validator)}},{key:"checkBoxChange",value:function(){$('input[name="expiryMode"]').on("change",function(event){"date"==$('input[name="expiryMode"]:checked').val()?($("#expiry-days").removeClass("hidden").addClass("hidden"),$("#expiry-date").removeClass("hidden")):($("#expiry-date").removeClass("hidden").addClass("hidden"),$("#expiry-days").removeClass("hidden"))}),$('input[name="learnMode"]').on("change",function(event){"freeMode"==$('input[name="learnMode"]:checked').val()?($("#learnLockModeHelp").removeClass("hidden").addClass("hidden"),$("#learnFreeModeHelp").removeClass("hidden")):($("#learnFreeModeHelp").removeClass("hidden").addClass("hidden"),$("#learnLockModeHelp").removeClass("hidden"))})}},{key:"initDatePicker",value:function($id,validator){var $picker=$($id);$picker.datetimepicker({format:"yyyy-mm-dd",language:"zh",minView:2,autoclose:!0,endDate:new Date(Date.now()+31536e7)}).on("hide",function(){validator.form()}),$picker.datetimepicker("setStartDate",new Date)}}]),Creator}();new Creator}]);