{% extends 'TopxiaWebBundle:CourseManage:layout.html.twig' %}
{% import 'TopxiaWebBundle::macro.html.twig' as macro %}

{% block title %}题目管理 - {{ parent() }}{% endblock %}

{% set side_nav = 'quizQuestion' %}
{% set script_controller = 'course-manage/list' %}

{% block main %}

<div class="panel panel-default panel-col">
  <div class="panel-heading">
    <div class="pull-right">
      <a href="{{ path('course_manage_question_create',{courseId:course.id,type:'choice',parentId:parentId, goto:app.request.server.get('REQUEST_URI')}) }}" class="btn btn-info btn-sm"><span class="glyphicon glyphicon-plus"></span> 选择题</a>
      <a href="{{ path('course_manage_question_create',{courseId:course.id,type:'fill',parentId:parentId, goto:app.request.server.get('REQUEST_URI')}) }}" class="btn btn-info btn-sm"><span class="glyphicon glyphicon-plus"></span> 填空题</a>
      <a href="{{ path('course_manage_question_create',{courseId:course.id,type:'determine',parentId:parentId, goto:app.request.server.get('REQUEST_URI')}) }}" class="btn btn-info btn-sm"><span class="glyphicon glyphicon-plus"></span> 判断题</a>
      <a href="{{ path('course_manage_question_create',{courseId:course.id,type:'essay',parentId:parentId, goto:app.request.server.get('REQUEST_URI')}) }}" class="btn btn-info btn-sm"><span class="glyphicon glyphicon-plus"></span> 问答题</a>
      {% if not parentId %}
        <a href="{{ path('course_manage_question_create',{courseId:course.id,type:'material'}) }}" class="btn btn-info btn-sm"><span class="glyphicon glyphicon-plus"></span> 材料题</a>
      {% endif %}
    </div>
    题目管理
  </div>

  <div class="panel-body " id="quiz-table-container">

    {{ web_macro.flash_messages() }}

    <table class="table table-striped table-hover" id="quiz-table">
      <thead>
      <tr>
        <th><input type="checkbox"  autocomplete="off"  data-role="batch-select"></th>
        <th width="50%">题干</th>
        <th>类型</th>
        <th>最后更新</th>
        <th>操作</th>
      </tr>
      </thead>
      <tbody>
        {% for question in questions %}
          {% include 'TopxiaWebBundle:CourseQuestionManage:question-tr.html.twig' %}
        {% else %}
          <tr>
            <td colspan="20"><div class="empty">一道题都没有，请点击右上角按钮，按不同的题型录入题目</div></td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
    <div>
      <label class="checkbox-inline"><input type="checkbox"  autocomplete="off" data-role="batch-select"> 全选</label>
      <button class="btn btn-default btn-sm mlm" data-role="batch-delete"  data-name="题目" data-url="{{ path('course_manage_question_deletes',{courseId:course.id}) }}">删除</button>
      <span class="pull-right text-muted">共{{ paginator.getItemCount() }}题</span>
    </div>
    {{ web_macro.paginator(paginator) }}
  </div>
</div>

{% endblock %}



