{% extends 'TopxiaWebBundle::bootstrap-modal-layout.html.twig' %}

{% block title %}添加练习题{% endblock %}
{% set modal_class = 'modal-lg' %}
{% block body %}
<link rel="stylesheet" media="screen" href="{{ asset('bundles/topxiaweb/css/tag-chooser-2.css') }}" />
<div class="execrcise-tips">
  <div class="row">
    <div class="col-md-6"><span class="text-muted">考察知识点:{{ mainKnowledge.name|default('') }}</span></div>
    <div class="col-md-6" style="border-left:2px solid #eee;"><span class="text-muted">时间点:{{ showtime }}</span></div>
  </div>
</div>

   <form id="search-form" class="form-inline well well-sm" action="" method="get" novalidate>
    <div class="form-group" id="tags-search-group">
      <label>标签：</label>
        <a href="javascript:;" class="tag-search-trigger">
          {% for tag in choosedTags %}
            {{tag.name}}
          {% else %}
            选择
          {% endfor %}
        </a>
    </div>
    <input type="hidden" name="tagIds" value="">
    <input type="hidden" name="position" value="{{ showtime }}">
     <div class="form-group">
       <input class="form-control" type="text" name="stem" value="{{ app.request.query.get('stem') }}" placeholder="题目关键词">
     </div>

     <a class="btn btn-primary search-btn" data-search-text="搜索中..." data-url="{{ path('courseware_exercise_add', {courseId:courseId, lessonId:lessonId}) }}">搜索</a>
   </form>
   {% include 'CustomWebBundle:Tag:tagchooser-overlay.html.twig' with {id: 'tags-search', type: 'question'} %}
    <div class="">
      <table class="table table-striped table-hover question-table">
        <thead>
          <tr>
            <th width="60%">题干</th>
            <th width="10%">类型/难度</th>
            <th width="20%" align="center">标签</th>
            <th width="10%">操作</th>
          </tr>
        </thead>
        <tbody>
          {% for question in questions|default(null) %}
            <tr>
              <td>{{ question.stem |fill_question_stem_text| plain_text(40) }}</td>
              <td>{{ dict('questionType')[question.type] }}</td>
              <td class="">
                {% for tagId in question.tagIds %}
                  {{ tags[tagId].name|default('') }}
                {% endfor %}
              </td>
              <td>
                <a class="btn btn-default btn-sm btn-add-exercise" data-url="{{ path('courseware_exercise_add', {courseId:courseId, lessonId:lessonId, questionId:question.id, showtime:showtime}) }}">选择</a>
              </td>
            </tr>
          {% else %}
            <tr ><td class="empty" colspan="4">没有题目!</td></tr>
          {% endfor %}
          
        </tbody>
      </table>
    </div>
    {{ web_macro.paginator(paginator) }}
{% endblock %}
 
{% block footer %}
  <script>
      app.load('customwebbundle/controller/coursewareexercise/add-modal');
  </script>
{% endblock %}