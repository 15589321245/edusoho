{"version":3,"sources":["app/Resources/static-src/app/js/activity-manage/doc/index.js"],"names":["$mediaId","$","$select","fileChooser","inItStep2form","$step2_form","validator","data","validate","rules","title","required","maxlength","mediaId","messages","onConditionTimeType","$step3_form","onkeyup","finishDetail","digits","$conditionsDetail","removeClass","children","val","on","file","id","conditionsType","event","currentTarget","addClass"],"mappings":";;AAAA;;;;AACA;;;;AACA,IAAIA,WAAWC,EAAE,kBAAF,CAAf;AACA,IAAIC,UAAUD,EAAE,mBAAF,CAAd;AACA,IAAIE,cAAc,0BAAlB;;AAEA,gCAAgBH,QAAhB;AACAI;;AAEA,SAASA,aAAT,GAAyB;AACvB,MAAIC,cAAcJ,EAAE,aAAF,CAAlB;AACA,MAAIK,YAAYD,YAAYE,IAAZ,CAAiB,WAAjB,CAAhB;AACAD,cAAYD,YAAYG,QAAZ,CAAqB;AAC/BC,WAAO;AACLC,aAAO;AACLC,kBAAU,IADL;AAELC,mBAAW;AAFN,OADF;AAKLC,eAAS;AALJ,KADwB;AAQ/BC,cAAU;AACRD,eAAS;AACPF,kBAAU;AADH;AADD;AARqB,GAArB,CAAZ;AAcD;;AAED,SAASI,mBAAT,GAA+B;AAC7B,MAAIC,cAAcf,EAAE,aAAF,CAAlB;AACA,MAAIK,YAAYU,YAAYR,QAAZ,CAAqB;AACnCS,aAAS,KAD0B;AAEnCR,WAAO;AACLC,aAAO;AACLC,kBAAU,IADL;AAELC,mBAAW;AAFN,OADF;AAKLM,oBAAc;AACZP,kBAAU,IADE;AAEZQ,gBAAQ;AAFI;AALT,KAF4B;AAYnCL,cAAU;AACRI,oBAAc;AACZP,kBAAU,SADE;AAEZQ,gBAAQ;AAFI;AADN;AAZyB,GAArB,CAAhB;AAmBAH,cAAYT,IAAZ,CAAiB,WAAjB,EAA8BD,SAA9B;AACA,MAAIc,oBAAoBnB,EAAE,kBAAF,CAAxB;AACAmB,oBAAkBC,WAAlB,CAA8B,QAA9B;AACD;;AAED,IAAInB,QAAQoB,QAAR,CAAiB,iBAAjB,EAAoCC,GAApC,OAA8C,MAAlD,EAA0D;AACxDR;AACD;;AAEDZ,YAAYqB,EAAZ,CAAe,QAAf,EAAyB,UAACC,IAAD,EAAU;AACjC;AACAzB,WAASuB,GAAT,CAAaE,KAAKC,EAAlB;AACD,CAHD;;AAKAxB,QAAQsB,EAAR,CAAW,QAAX,EAAqB,iBAAS;AAC5B,MAAIG,iBAAiB1B,EAAE2B,MAAMC,aAAR,EAAuBP,QAAvB,CAAgC,iBAAhC,EAAmDC,GAAnD,EAArB;;AAEA,MAAIH,oBAAoBnB,EAAE,kBAAF,CAAxB;AACA,MAAI0B,mBAAmB,MAAvB,EAA+B;AAC7BP,sBAAkBU,QAAlB,CAA2B,QAA3B;AACD,GAFD,MAEO;AACLf;AACD;AACF,CATD","file":"index.js","sourceRoot":"/Users/kz/projects/edusoho","sourcesContent":["import FileChooser from '../../file-chooser/file-choose';\nimport { chooserUiOpen, chooserUiClose, showChooserType } from '../widget/chooser-ui.js';\nlet $mediaId = $('[name=\"mediaId\"]');\nlet $select = $('#condition-select');\nlet fileChooser = new FileChooser();\n\nshowChooserType($mediaId);\ninItStep2form();\n\nfunction inItStep2form() {\n  var $step2_form = $(\"#step2-form\");\n  var validator = $step2_form.data('validator');\n  validator = $step2_form.validate({\n    rules: {\n      title: {\n        required: true,\n        maxlength: 50,\n      },\n      mediaId: 'required',\n    },\n    messages: {\n      mediaId: {\n        required: '请上传或选择%display%'\n      }\n    }\n  });\n}\n\nfunction onConditionTimeType() {\n  let $step3_form = $(\"#step3-form\");\n  let validator = $step3_form.validate({\n    onkeyup: false,\n    rules: {\n      title: {\n        required: true,\n        maxlength: 50,\n      },\n      finishDetail: {\n        required: true,\n        digits: true\n      },\n    },\n    messages: {\n      finishDetail: {\n        required: \"请输入完成条件\",\n        digits: \"完成条件必须为数字\"\n      }\n    }\n  });\n  $step3_form.data('validator', validator);\n  let $conditionsDetail = $(\"#condition-group\");\n  $conditionsDetail.removeClass('hidden');\n};\n\nif ($select.children('option:selected').val() === 'time') {\n  onConditionTimeType();\n}\n\nfileChooser.on('select', (file) => {\n  chooserUiClose();\n  $mediaId.val(file.id);\n});\n\n$select.on('change', event => {\n  let conditionsType = $(event.currentTarget).children('option:selected').val();\n\n  let $conditionsDetail = $(\"#condition-group\");\n  if (conditionsType !== 'time') {\n    $conditionsDetail.addClass('hidden');\n  } else {\n    onConditionTimeType();\n  }\n});\n"]}