{"version":3,"sources":["app/Resources/static-src/app/common/component/persona-multi-input/index.js"],"names":["initItem","dataSourceUi","data","index","props","obj","itemId","Math","random","nickname","isVisible","avatar","seq","id","outputValue","push","updateChecked","map","item","PersonaMultiInput","onChecked","event","currentTarget","value","state","setState","addItem","replaceItem","length","dataSource","addable","searchable","sortable","listClassName","inputName","showCheckbox","showDeleteBtn","checkBoxName","removeItem","sortItem","propTypes","PropTypes","string","bool","defaultProps","childContextTypes","func"],"mappings":"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","file":"index.js","sourceRoot":"/Users/kz/projects/edusoho","sourcesContent":["import React, { Component } from 'react';\nimport MultiInput from '../multi-input';\nimport List from './list';\n\nfunction initItem(dataSourceUi,data,index,props) {\n  let obj = {\n    itemId:Math.random(),\n    nickname: data[props.nickname],\n    isVisible: data[props.isVisible] == 1 ? true : false,\n    avatar: data[props.avatar],\n    seq: index,\n    id:data[props.id],\n    outputValue: {\n      [props.id]: data[props.id],\n      [props.isVisible]: data[props.isVisible] ,\n    }\n  }\n  dataSourceUi.push(obj);\n}\n\nfunction updateChecked(dataSourceUi,id) {\n  dataSourceUi.map((item,index)=>{\n    if(item.itemId == id) {\n      dataSourceUi[index].isVisible = !dataSourceUi[index].isVisible;\n      dataSourceUi[index].outputValue.isVisible = dataSourceUi[index].isVisible ? 1 : 0\n    }\n  })\n}\n\nexport default class PersonaMultiInput extends MultiInput {\n  constructor(props) {\n    super(props);\n  }\n\n  componentWillMount() {\n    this.state = {\n      dataSourceUi: [],\n    }\n    this.props.dataSource.map((item,index)=>{\n      initItem(this.state.dataSourceUi,item,index+1,this.props);\n    })\n  }\n\n  getChildContext() {\n    return {\n      \n      addable: this.props.addable,\n      searchable: this.props.searchable,\n      sortable: this.props.sortable,\n      listClassName:this.props.listClassName,\n      inputName: this.props.inputName,\n      showCheckbox:this.props.showCheckbox,\n      showDeleteBtn:this.props.showDeleteBtn,\n      checkBoxName:this.props.checkBoxName,\n      onChecked:this.onChecked,\n      removeItem: this.removeItem,\n      sortItem: this.sortItem,\n      addItem: this.addItem,\n      dataSourceUi: this.state.dataSourceUi,\n      \n    }\n  }\n\n  onChecked=(event)=> {\n    let id = event.currentTarget.value;\n    updateChecked(this.state.dataSourceUi,id);\n    this.setState({\n      dataSourceUi: this.state.dataSourceUi,\n    });\n  }\n\n  addItem = (value,data) =>{\n    if(!data)  {\n      return;\n    }\n    //@TODO重复添加提示\n    if(this.props.replaceItem) {\n      this.state.dataSourceUi = [];\n    }\n    initItem(this.state.dataSourceUi,data,this.state.dataSourceUi.length+1,this.props);\n\n    this.setState({\n      dataSourceUi: this.state.dataSourceUi,\n    });\n  }\n\n  getList() {\n    return (<List listClassName={this.props.listClassName}  dataSourceUi = {this.state.dataSourceUi}  sortable={this.props.sortable} showCheckbox = {this.props.showCheckbox} showDeleteBtn = {this.props.showDeleteBtn}  inputName = { this.props.inputName } checkBoxName ={this.props.checkBoxName}></List>);\n  }\n}\n\nPersonaMultiInput.propTypes = {\n  ...MultiInput.propTypes,\n  id:React.PropTypes.string,\n  nickname:React.PropTypes.string,\n  avatar: React.PropTypes.string,\n  isVisible:React.PropTypes.string,\n  replaceItem: React.PropTypes.bool,\n  showCheckbox:React.PropTypes.bool,\n  showDeleteBtn:React.PropTypes.bool,\n};\n\nPersonaMultiInput.defaultProps = {\n  ...MultiInput.defaultProps,\n  id: 'id',\n  nickname:'nickname',\n  avatar: 'avatar',\n  isVisible:'isVisible',\n  replaceItem: false,\n  showCheckbox: true,\n  showDeleteBtn:true,\n};\n\nPersonaMultiInput.childContextTypes = {\n  ...MultiInput.childContextTypes,\n  showCheckbox:React.PropTypes.bool,\n  showDeleteBtn:React.PropTypes.bool,\n  checkBoxName:React.PropTypes.string,\n  onChecked: React.PropTypes.func,\n};\n\n"]}