webpackJsonp(["app/js/activity/doc/index"],{e3591734a7ec9a6a6c56:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_esSwfobject=__webpack_require__("9333a322cf9b0734355d"),_esSwfobject2=_interopRequireDefault(_esSwfobject);!function($){$.fn.WaterMark=function(options){function genereateDiv(){var IEversion=getInternetExplorerVersion();$watermarkDiv=$('<div id="waterMark" class="watermark"></div>');var rotate="rotate("+settings.rotate+"deg)";return $watermarkDiv.addClass("active"),$watermarkDiv.css({opacity:settings.opacity,"-webkit-transform":rotate,"-moz-transform":rotate,"-ms-transform":rotate,"-o-transform":rotate,transform:rotate,filter:"progid:DXImageTransform.Microsoft.Matrix(M11=0.70710678, M12=0.70710678, M21=-0.70710678, M22=0.70710678, sizingMethod='auto expand')"}),$watermarkDiv.css(settings.style),IEversion>=8&&IEversion<9&&$watermarkDiv.css({height:60,filter:"progid:DXImageTransform.Microsoft.Matrix(M11=0.70710678, M12=0.70710678, M21=-0.70710678, M22=0.70710678, sizingMethod='auto expand')progid:DXImageTransform.Microsoft.Alpha(opacity="+100*parseFloat(settings.opacity)+")"}),$watermarkDiv.html(settings.contents),$watermarkDiv}function alwaysShow(){displayWaterMark()}function displayWaterMark(){getOffset(),$watermarkDiv.css({top:topOffset,left:leftOffset}),$watermarkDiv.show()}function timeingShow(){displayWaterMark(),showTimer=setInterval(function(){displayWaterMark(),setTimeout(function(){$watermarkDiv.hide()},settings.duringTime)},settings.interval)}function getOffset(){settings.isUseRandomPos?setOffsetRandom():setOffsetByPosition()}function setOffsetRandom(){var maxTopOffset=$thiz.height()-$watermarkDiv.height()-minTopOffset,maxLeftOffset=$thiz.width()-$watermarkDiv.width()-minLeftOffset;topOffset=Math.random()*maxTopOffset+minTopOffset,leftOffset=Math.random()*maxLeftOffset}function setOffsetByPosition(){"left"==settings.xPosition&&(leftOffset=minLeftOffset),"center"==settings.xPosition&&(leftOffset=($thiz.width()-$watermarkDiv.width())/2),"right"==settings.xPosition&&(leftOffset=$thiz.width()-$watermarkDiv.width()-minLeftOffset),"top"==settings.yPosition&&(topOffset=minTopOffset),"center"==settings.yPosition&&(topOffset=($thiz.height()-$watermarkDiv.height())/2+minTopOffset),"bottom"==settings.yPosition&&(topOffset=$thiz.height()-$watermarkDiv.height()-minTopOffset)}function startShow(){settings.isAlwaysShow?alwaysShow():timeingShow()}function getInternetExplorerVersion(){var rv=-1;if("Microsoft Internet Explorer"==navigator.appName){var ua=navigator.userAgent,re=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");null!=re.exec(ua)&&(rv=parseFloat(RegExp.$1))}return rv}function init(){$thiz.append(genereateDiv()),startShow()}var showTimer,settings=$.extend({duringTime:3e5,interval:6e5,isAlwaysShow:!0,xPosition:"center",yPosition:"top",isUseRandomPos:!1,opacity:.8,rotate:45,style:{},contents:""},options),$thiz=$(this),minTopOffset=40,minLeftOffset=15,topOffset=minTopOffset,leftOffset=minLeftOffset,$watermarkDiv=null;init()}}($);var DocPlayer=function(){function DocPlayer(_ref){var element=_ref.element,swfUrl=_ref.swfUrl,pdfUrl=_ref.pdfUrl,watermarkOptions=_ref.watermarkOptions,canCopy=_ref.canCopy;_classCallCheck(this,DocPlayer),this.element=$(element),this.swfUrl=swfUrl||"",this.pdfUrl=pdfUrl||"",this.swfPlayerWidth="100%",this.swfPlayerHeight="100%",this.swfPlayerUrl="",this.watermarkOptions=watermarkOptions||"",this.canCopy=canCopy||!1,this.init()}return _createClass(DocPlayer,[{key:"init",value:function(){this.isSupportHtml5()&&!this.isIE9()?this.initPDFJSViewer():this.initSwfViewer()}},{key:"isIE9",value:function(){return navigator.appVersion.indexOf("MSIE 9.")!=-1}},{key:"isSupportHtml5",value:function(){return $.support.leadingWhitespace}},{key:"initPDFJSViewer",value:function(){$("html").attr("dir","ltr");var src="http://opencdn.edusoho.net/pdf.js/v3/viewer.html#"+this.pdfUrl;this.canCopy||(src+="#false");var iframe=document.createElement("iframe");iframe.style.height="100%",iframe.allowfullscreen=!0,iframe.style.width="100%",iframe.id="doc-pdf-player",iframe.src=src,this.element.get(0).appendChild(iframe),this.addWatermark()}},{key:"initSwfViewer",value:function(){$.html('<div id="website"><p align="center" class="style1">'+Translator.trans("您还没有安装flash播放器 请点击")+'<a href="http://www.adobe.com/go/getflashplayer">'+Translator.trans("这里")+"</a>"+Translator.trans("安装")+"</p></div>");var flashVars={doc_url:decodeURI(this.swfUrl.value)},params={bgcolor:"#efefef",allowFullScreen:!0,wmode:"window",allowNetworking:"all",allowscriptaccess:"always",autoPlay:!1},attributes={id:"website"};_esSwfobject2["default"].embedSWF(this.swfPlayerUrl,"website",this.swfPlayerWidth,this.swfPlayerHeight,"9.0.45",null,flashVars,params,attributes),this.addWatermark()}},{key:"addWatermark",value:function(){this.watermarkOptions&&this.element.WaterMark(this.watermarkOptions)}}]),DocPlayer}();exports["default"]=DocPlayer},0:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var _docPlayer=__webpack_require__("e3591734a7ec9a6a6c56"),_docPlayer2=_interopRequireDefault(_docPlayer),_activityEmitter=__webpack_require__("da32dea28c2b82c7aab1"),_activityEmitter2=_interopRequireDefault(_activityEmitter),$element=$("#document-content"),activityEmitter=(new _docPlayer2["default"]({element:$element,swfUrl:$element.data("swf"),pdfUrl:$element.data("pdf"),watermark:{xPosition:"center",yPosition:"center",rotate:45,contents:""}}),new _activityEmitter2["default"]),finishType=$element.data("finishType");"time"==finishType&&!function(){var finishDetail=$element.data("finishDetail");activityEmitter.receive("doing",function(data){finishDetail<=data.learnedTime&&activityEmitter.emit("finish")})}()}});