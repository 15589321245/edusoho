{"version":3,"sources":["app/Resources/static-src/app/js/course-manage/marketing/index.js"],"names":["Marketing","init","$","perfectScrollbar","$form","validator","validate","onkeyup","rules","originPrice","required","val","currency","tryLookLength","digits","min","max","tryLookLimit","buyExpiryTime","date","feature","messages","addMethod","value","element","params","Date","getTime","now","Translator","trans","on","event","$li","toggleClass","$input","find","prop","is","stopPropagation","closest","removeClass","addClass","datetimepicker","format","language","minView","autoclose","endDate","console","log","click","$item","currentTarget","$values","values","JSON","parse","hasClass","splice","indexOf","text","push","stringify","evt","form","submit"],"mappings":"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","file":"index.js","sourceRoot":"/Users/kz/projects/edusoho","sourcesContent":["\nimport { TabChange } from '../help';\n\nclass Marketing {\nconstructor() {\nthis.init();\n}\n\ninit() {\n$('.js-task-price-setting').perfectScrollbar();\nlet $form = $('#course-marketing-form');\n$('.js-task-price-setting').perfectScrollbar();\nTabChange();\nlet validator = $form.validate({\nonkeyup: false,\nrules: {\noriginPrice: {\nrequired: function() {\nreturn $(\"[name=isFree]:checked\").val() == 0;\n},\ncurrency: function() {\nreturn $(\"[name=isFree]:checked\").val() == 0;\n},\n},\ntryLookLength: {\ndigits: true,\nmin: 1,\nmax: 10\n},\ntryLookLimit: {\ndigits: true\n},\nbuyExpiryTime: {\nrequired: function(){\nreturn $('input[name=\"enableBuyExpiryTime\"]:checked').val() == 1;\n},\ndate: true,\nfeature: true\n}\n},\nmessages: {\nbuyExpiryTime: {\nrequired: '请选择有效的购买截止日期',\ndate: '请选择有效的购买截止日期'\n}\n}\n});\n\n$.validator.addMethod(\n\"feature\",\nfunction(value, element, params) {\nreturn value && (new Date(value).getTime()) > Date.now();\n},\nTranslator.trans('购买截止时间需在当前时间之后')\n);\n\n$('.js-task-price-setting').on('click', 'li', function (event) {\nlet $li = $(this).toggleClass('open');\nlet $input = $li.find('input');\n$input.prop(\"checked\", !$input.is(\":checked\"))\n});\n\n$('.js-task-price-setting').on('click', 'input', function (event) {\nevent.stopPropagation();\nlet $input = $(this);\n$input.closest('li').toggleClass('open');\n});\n\n$('input[name=\"isFree\"]').on('change', function (event) {\nif ($('input[name=\"isFree\"]:checked').val() == 0) {\n$('.js-is-free').removeClass('hidden');\n} else {\n$('.js-is-free').addClass('hidden');\n}\n});\n\n$('input[name=\"enableBuyExpiryTime\"]').on('change', function (event) {\nif ($('input[name=\"enableBuyExpiryTime\"]:checked').val() == 0) {\n$('#buyExpiryTime').addClass('hidden');\n} else {\n$('#buyExpiryTime').removeClass('hidden');\n}\n});\n\n$('input[name=\"buyExpiryTime\"]').datetimepicker({\nformat: 'yyyy-mm-dd',\nlanguage: \"zh\",\nminView: 2, //month\nautoclose: true,\nendDate: new Date(Date.now() + 86400 * 365 * 100 * 1000)\n});\n$('input[name=\"buyExpiryTime\"]').datetimepicker('setStartDate', new Date(Date.now() + 86400 * 1000));\n\n$('input[name=\"tryLookable\"]').on('change', function (event) {\nconsole.log('tryLook : ', $('input[name=\"tryLookable\"]:checked').val());\nif ($('input[name=\"tryLookable\"]:checked').val() == 1) {\n$('.js-enable-try-look').removeClass('hidden');\n$('#tryLookLength').val('1');\n} else {\n$('.js-enable-try-look').addClass('hidden');\n}\n});\n\n$('.js-service-item').click(function (event) {\nlet $item = $(event.currentTarget);\nlet $values = $('#course_services').val();\nif (!$values) {\nvalues = [];\n}\n$values = JSON.parse($values);\nif ($item.hasClass('label-primary')) {\n$item.removeClass('label-primary');\n$item.addClass('label-default');\n$values.splice($values.indexOf($item.text()), 1);\n} else {\n$item.removeClass('label-default');\n$item.addClass('label-primary');\n$values.push($item.text());\n}\n$('#course_services').val(JSON.stringify($values));\n});\n\n$('#course-submit').click(function (evt) {\nif (validator.form()) {\n$form.submit();\n}\n});\n}\n}\n\nnew Marketing();"]}