{"version":3,"sources":["app/Resources/static-src/app/js/share/index.js"],"names":["$","on","$btn","type","data","params","parents","url","length","post","val","weibo","window","open","qzone","qq","weixin","append","makeWeixinModal","$modal","find","empty","show","html","load","hide","modal","query","title","message","picture","indexOf","pic","document","domain","buildUrlQuery","summary","desc","pics","queryItems","q","push","encodeURIComponent","join"],"mappings":"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","file":"index.js","sourceRoot":"/Users/kz/projects/edusoho","sourcesContent":["$('body').on('click', '.js-social-share', function() {\n  var $btn = $(this);\n  var type = $btn.data('share');\n  var params = $btn.parents('.js-social-share-params').data();\n\n  var url = '';\n  if ($(\".point-share-url\").length > 0) {\n    $.post($(\".point-share-url\").val(), function() {});\n  }\n  switch (type) {\n  case 'weibo':\n    url = weibo(params);\n    window.open(url);\n    break;\n  case 'qzone':\n    url = qzone(params);\n    window.open(url);\n    break;\n  case 'qq':\n    url = qq(params);\n    window.open(url);\n    break;\n  case 'weixin':\n    weixin($btn, params);\n    break;\n  }\n\n});\n\nfunction weixin($btn, params) {\n  if ($('.weixin-share-modal').length == 0) {\n    $('body').append(makeWeixinModal(params));\n    var $modal = $('.weixin-share-modal');\n    $modal.on('show.bs.modal', function() {\n      $modal.find('.weixin-share-qrcode').empty();\n      $modal.find('.weixin-share-loading').show();\n      $modal.find('.weixin-share-qrcode').html('<img src=\"' + $btn.data('qrcodeUrl') + '\">');\n      $modal.find('.weixin-share-qrcode img').load(function() {\n        $modal.find('.weixin-share-loading').hide();\n      });\n    });\n  }\n\n  $('.weixin-share-modal').modal('show');\n}\n\nfunction makeWeixinModal(params) {\n  var html = '';\n  html += '<div class=\"modal fade weixin-share-modal\" tabindex=\"-1\" role=\"dialog\" aria-hidden=\"true\">';\n  html += '  <div class=\"modal-dialog modal-sm\">';\n  html += '    <div class=\"modal-content\">';\n  html += '      <div class=\"modal-header\">';\n  html += '        <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"关闭\"><span aria-hidden=\"true\">×</span></button>';\n  html += '        <h4 class=\"modal-title\">分享到微信朋友圈</h4>';\n  html += '      </div>';\n  html += '      <div class=\"modal-body\">';\n  html += '        <p class=\"weixin-share-loading\" style=\"text-align:center;\">正在加载二维码...</p>';\n  html += '        <p class=\"weixin-share-qrcode text-center\"></p>';\n  html += '        <p class=\"text-muted text-center\"><small>打开微信，点击底部的“发现”，</small><br><small>使用 “扫一扫” 即可将网页分享到我的朋友圈。</small></p>';\n  html += '      </div>';\n  html += '    </div>';\n  html += '  </div>';\n  html += '</div>';\n  return html;\n}\n\n\nfunction weibo(params) {\n  var query = {};\n  query.url = params.url;\n  query.title = params.message;\n\n  if (params.picture != '') {\n    if (params.picture.indexOf('://') != -1) {\n      query.pic = params.picture;\n    } else {\n      query.pic = document.domain + params.picture;\n    }\n  }\n\n  return 'http://service.weibo.com/share/share.php?' + buildUrlQuery(query);\n}\n\nfunction qzone(params) {\n  var query = {};\n  query.url = params.url;\n  query.title = params.title;\n  query.summary = params.summary;\n  query.desc = params.message;\n  if (params.picture != '') {\n    query.pics = params.picture;\n  }\n\n  return 'http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?' + buildUrlQuery(query);\n}\n\nfunction qq(params) {\n  var query = {};\n\n  query.url = params.url;\n  query.title = params.title;\n  query.summary = params.summary;\n  query.desc = params.message;\n  if (params.picture != '') {\n    query.pics = params.picture;\n  }\n\n  return 'http://connect.qq.com/widget/shareqq/index.html?' + buildUrlQuery(query);\n}\n\nfunction buildUrlQuery(query) {\n  var queryItems = [];\n  for (var q in query) {\n    queryItems.push(q + '=' + encodeURIComponent(query[q] || ''));\n  }\n\n  return queryItems.join('&');\n}\n"]}