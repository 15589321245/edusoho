{"version":3,"sources":["webpack:///./app/Resources/static-src/app/common/widget/delete-action.js?84af","webpack:///./app/Resources/static-src/app/js/testpaper-manage/index.js"],"names":["DeleteAction","$element","onSuccess","initEvent","on","_itemDelete","event","_batchDelete","$btn","$","currentTarget","name","data","message","self","Translator","trans","confirm","post","isFunction","call","closest","remove","window","location","reload","ids","find","each","push","value","length","TestpaperManage","$container","_initEvent","_init","testpaperAction","$target","$tr","attr","html","replaceWith","error"],"mappings":"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","file":"app/js/testpaper-manage/index.js","sourcesContent":["import notify from 'common/notify';\n\nclass DeleteAction {\n  constructor($element,onSuccess) {\n    this.$element = $element;\n    this.onSuccess = onSuccess;\n    this.initEvent();\n  }\n\n  initEvent() {\n    this.$element.on('click','[data-role=\"item-delete\"]', event=>this._itemDelete(event));\n    this.$element.on('click','[data-role=\"batch-delete\"]', event=>this._batchDelete(event));\n  }\n\n  _itemDelete(event) {\n    let $btn = $(event.currentTarget);\n\n    let name = $btn.data('name');\n    let message = $btn.data('message');\n    let self = this;\n\n    if (!message) {\n      message = Translator.trans('site.data.delete_name_hint', {'name':name});\n    }\n\n    if (!confirm(message)) {\n      return ;\n    }\n\n    $.post($btn.data('url'), function() {\n      if ($.isFunction(self.onSuccess)) {\n        self.onSuccess.call(self.$element);\n      } else {\n        $btn.closest('[data-role=item]').remove();\n        notify('success', \"删除成功\");\n        window.location.reload();\n      }\n    });\n  }\n\n  _batchDelete(event) {\n    let $btn = $(event.currentTarget);\n    let name = $btn.data('name');\n\n    let ids = [];\n    this.$element.find('[data-role=\"batch-item\"]:checked').each(function(){\n      ids.push(this.value);\n    });\n\n    if (ids.length == 0) {\n      notify('danger', Translator.trans('site.data.uncheck_name_hint', {'name':name}));\n      return ;\n    }\n\n    if (!confirm(Translator.trans('site.data.delete_check_name_hint', {'name':name}))) {\n        return ;\n    }\n\n    notify('info', Translator.trans('site.data.delete_submiting_hint'));\n\n    $.post($btn.data('url'), {ids:ids}, function(){\n      window.location.reload();\n    });\n  }\n}\n\nexport default DeleteAction;\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/common/widget/delete-action.js","import notify from 'common/notify';\nimport BatchSelect from '../../common/widget/batch-select';\nimport DeleteAction from '../../common/widget/delete-action';\n\nclass TestpaperManage\n{\n  constructor($container) {\n\n    this.$container = $container;\n    this._initEvent();\n    this._init();\n  }\n\n  _initEvent() {\n    this.$container.on('click','.open-testpaper,.close-testpaper',event=>this.testpaperAction(event));\n\n  }\n\n  _init() {\n\n  }\n\n  testpaperAction(event) {\n    let $target = $(event.currentTarget);\n    let $tr = $target.closest('tr');\n\n    if (!confirm($target.attr('title'))) {\n      return ;\n    }\n\n    $.post($target.data('url'), function(html){\n      notify('success', Translator.trans(\"testpaper_manage.save_success_hint\"));\n      $tr.replaceWith(html);\n    }).error(function(){\n      notify('danger', Translator.trans(\"testpaper_manage.save_error_hint\"));\n    });\n  }\n  \n}\n\nlet $container = $('#quiz-table-container');\nnew TestpaperManage($container);\nnew BatchSelect($container);\nnew DeleteAction($container);\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/testpaper-manage/index.js"],"sourceRoot":""}