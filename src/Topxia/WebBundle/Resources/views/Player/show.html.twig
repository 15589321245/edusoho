{% import "TopxiaWebBundle::macro.html.twig" as web_macro %}
<html>
	<head>
		{% include 'TopxiaWebBundle:Default:stylesheet.html.twig' %}
		{% if setting("developer.balloon_player")|default(0) %}
		    <link rel="stylesheet" media="screen" href="{{asset('assets/libs/balloon-video-player/1.0.0/src/skin/video-js-debug.css') }}" rel="stylesheet" type="text/css">
		 {% endif %}
	</head>
	<body>
		{% if file|default(null) %}
			<div class="lesson-dashboard ">
				<div id="lesson-video-content" 
				data-user-id="{{app.user.id}}" 
				data-file-id="{{file.id}}" 
				data-file-type="{{file.type}}" 
				{% if file.type == 'video' and file.storage == 'cloud' %}
				data-url="{{url}}.m3u8"
				{% else %}
				data-url="{{url}}"
				{% endif %}
				data-player="{{player}}"
				{% if setting('storage.video_watermark') > 0 and setting('storage.video_watermark_image') %}
		            data-watermark="{{ filepath(setting('storage.video_watermark_image'), null, true) }}"
	          	{% endif %}
		      	{% if setting('storage.video_fingerprint') and app.user %}
		            data-fingerprint="{{ finger_print() }}"
		            data-fingerprint-src="{{ url('cloud_video_fingerprint', {userId:app.user.id}) }}"
		        {% endif %}
				{% if file.type == 'video' %}
					{% if file.storage == 'local' %}
					class="lesson-content local-video-player "
					{% elseif setting("developer.balloon_player")|default(0) %}
					class="lesson-content ballon-video-player"
					{% else  %}
					class="lesson-content "
					{% endif %}
				{% elseif file.type == 'audio' %}
					class="lesson-content lesson-content-audio"
				{% endif %}
				></div>
			</div>

			{% set script_controller = 'player/show' %}

			{% include 'TopxiaWebBundle::script_boot.html.twig' with {script_main: asset('bundles/topxiaweb/js/app.js')} %}
		{% else %}
			<div class=""><br>&nbsp;&nbsp;&nbsp;&nbsp;该浏览器不支持云视频播放，请前往<a href="{{path('mobile')}}">下载App</a>。</div>
		{% endif %}
	</body>
</html>