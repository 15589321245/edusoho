webpackJsonp(["app/js/activity/live/index"],[function(r,a){"use strict";function t(r,a){if(!(r instanceof a))throw new TypeError("Cannot call a class as a function")}var e=function(){function r(r,a){for(var t=0;t<a.length;t++){var e=a[t];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(r,e.key,e)}}return function(a,t,e){return t&&r(a.prototype,t),e&&r(a,e),a}}(),n=function(){function r(){t(this,r),this.init()}return e(r,[{key:"init",value:function(){var r=this;this.isLiveRoomOpened=!1;var a=0,t=1;a=setInterval(function(){if(t>10){clearInterval(a);var e=Translator.trans("进入直播教室错误，请联系管理员，")+"<a href='javascript:document.location.reload()'>"+Translator.trans("重试")+"</a>"+Translator.trans("或")+"<a href='javascript:window.close();'>"+Translator.trans("关闭")+"</a>";return void $("#entry").html(e)}$.ajax({url:$("#entry").data("url"),success:function(e){if(e.error){clearInterval(a);var n=e.error+Translator.trans("，")+"<a href='javascript:document.location.reload()'>"+Translator.trans("重试")+"</a>或<a href='javascript:window.close();'>"+Translator.trans("关闭")+"</a>";return void $("#entry").html(n)}if(e.roomUrl){clearInterval(a),r.isLiveRoomOpened=!0;var o='<iframe name="classroom" src="'+e.roomUrl+'" style="position:absolute; left:0; top:0; height:100%; width:100%; border:0px;" scrolling="no"></iframe>';$("body").html(o)}t++},error:function(){var r="进入直播教室错误，请联系管理员，<a href='javascript:document.location.reload()'>重试</a>或<a href='javascript:window.close();'>关闭</a>";$("#entry").html(r)}})},3e3),this.triggerLiveEvent()}},{key:"triggerLiveEvent",value:function(){var r=this,a=null,t=setInterval(function(){r.isLiveRoomOpened&&(a=a?"doing":"start",$.ajax({url:$('meta[name="trigger_url"]').attr("content"),type:"GET",data:{eventName:a},success:function(r){r.live_end&&clearInterval(t)}}))},6e4)}}]),r}();new n}]);