{% extends 'TopxiaAdminBundle:Course:layout.html.twig' %}

{% block title %}课程评价管理 - {{ parent() }}{% endblock %}

{% set script_controller = 'review/list' %}

{% set menu = 'review' %}

{% block main %}
  <div class="page-header clearfix">
    <h1>评价管理</h1>
  </div>

  <form id="review-search-form" class="form-inline well well-sm" action="" method="get" novalidate> 
    <div class="form-group">
      {{ form_widget(form.keywordType, {attr:{class:'form-control'}}) }}
    </div>

    <div class="form-group">
      {{ form_widget(form.keyword, {attr:{class:'form-control',  placeholder:'关键词:标题或者内容'}}) }}
    </div>

    <div class="form-group">
      {{ form_widget(form.nickname, {attr:{class:'form-control', placeholder:'作者'}}) }}
    </div>

    <button class="btn btn-primary">搜索</button>

    {{ form_rest(form) }}
  </form>

  <table class="table table-striped" id="review-list">
    <thead>
      <tr>
        <th>全选</th>
        <th>评价</th>
        <th>作者</th>
        <th>操作</th>
      </tr>
    </thead>
    <tbody>
      {% for review in reviews %}
        {% set author = users[review.userId]|default(null) %}
        <tr id="review-table-tr-{{review.id}}">
          <td><input value="{{review.id}}" type="checkbox" name="review-item"></td>
          <td>
            <div><a href="#">{{ courses[review.courseId].title }}：</a></div>
            {{review.content}}
          </td>
          <td>
            {{ admin_macro.user_link(author) }}<br>
            <span class="text-muted">{{review.createdTime|date('Y-n-d H:i')}}</span>
          </td>
          <td></td>
        </tr>
      {% endfor %}
    </tbody>
  </table>

  <input class= "choose-all" name="choose-all" type="checkbox">
    全选/取消全选
  <a class="review-delete pull-right btn btn-danger" href="javascript:" data-url="{{ path('admin_content_delete_reviews') }}">删除</a>

  <div>
    {{ web_macro.paginator(paginator) }} 
  </div>

{% endblock %}
