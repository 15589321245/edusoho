{% extends 'TopxiaWebBundle::bootstrap-modal-layout.html.twig' %}

{% set modal_class = 'modal-lg' %}

{% block title %}<span class="text-muted">资料预览</span>{% endblock %}

{% block body %}

		{% if file.type == 'video' %}
				<div id="lesson-preview-video-player" data-url="{{ path('material_lib_file_preview_content', {fileId: file.id}) }}" data-hls-url="{{ hlsUrl }}"
                    {% if setting('storage.video_watermark') and setting('storage.video_watermark_image') %}
                        data-watermark="{{ file_url(setting('storage.video_watermark_image'), null, true) }}"
                    {% endif %}
                    {% if setting('storage.video_fingerprint') and app.user %}
                        data-fingerprint="{{ url('cloud_video_fingerprint', {userId:app.user.id}) }}"
                    {% endif %}
                ></div>
        {% elseif file.type == 'audio' %}
            <audio id="lesson-preview-audio-player" width="100%" height="100%">
                 <source src="{{ path('material_lib_file_preview_content', {fileId: file.id}) }}" type='audio/mp3' />
            </audio>
        {% elseif file.type == 'ppt' %}
            <div id="lesson-preview-ppt-player" data-url="{{ path('material_lib_file_preview_ppt', {fileId: file.id}) }}" style="min-height: 500px; "></div>
        {% else %}
            <div id="lesson-preview-iframe" data-url="{{ path('material_lib_file_preview_content', {fileId: file.id}) }}"></div>
        {% endif %}

        <script>app.load('course/lesson-preview')</script>
{% endblock %}

{% block footer %}
	<button type="button" class="btn btn-primary" data-dismiss="modal">关闭</button>
{% endblock %}