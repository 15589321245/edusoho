{"version":3,"sources":["webpack:///./app/Resources/static-src/app/common/component/question-options/index.js","webpack:///./app/Resources/static-src/app/js/question-manage/type/question-uncertain-choice.js","webpack:///./app/Resources/static-src/app/js/question-manage/form/index.js","webpack:///./app/Resources/static-src/app/js/question-manage/type/form-base.js","webpack:///./app/Resources/static-src/app/js/question-manage/type/question-choice.js","webpack:///./app/Resources/static-src/app/common/component/question-options/option.js","webpack:///./app/Resources/static-src/app/js/question-manage/type/question-essay.js","webpack:///./app/Resources/static-src/app/js/question-manage/type/question-fill.js","webpack:///./app/Resources/static-src/app/js/question-manage/type/question-material.js","webpack:///./app/Resources/static-src/app/js/question-manage/type/question-single-choice.js","webpack:///./app/Resources/static-src/app/js/question-manage/type/question-determine.js"],"names":["InitOptionData","dataSource","inputValue","validatorDatas","seq","checked","obj","optionId","Math","random","toString","replace","optionLabel","Translator","trans","Options","length","checkedNum","push","deleteOption","i","splice","console","log","changeOptionChecked","id","isRadio","map","item","index","updateOption","value","QuestionOptions","props","state","isValidator","dataAnswer","defaultNum","subscriptionMessage","validatorOptions","subscribe","channel","topic","callback","data","envelope","publish","validNum","setState","option","minCheckedNum","publishMessage","maxNum","minNum","createNewName","imageUploadUrl","imageDownloadUrl","updateInputValue","addOption","defaultProps","SingleChoice","render","document","getElementById","QuestionCreator","type","$form","initTitleEditor","initAnalysisEditor","$","find","val","getCreator","QuestionFormBase","titleFieldId","analysisFieldId","validator","titleEditorToolBarName","_init","attachmentActions","_initEvent","_initValidate","on","submitForm","event","submitType","currentTarget","self","form","button","submit","validate","onkeyup","rules","required","difficulty","stem","score","number","max","min","messages","$target","editor","CKEDITOR","toolbar","filebrowserImageUploadUrl","height","getData","toolbarName","_titleEditorToolBarName","Choice","isSubmit","$submit","$questionOptions","JSON","parse","initOptions","datas","editorBody","editorHtml","initCkeditor","attributes","dataSourceUi","parent","contents","setTimeout","setData","showDanger","html","correctName","onChangeChecked","Essay","answerFieldId","$answerField","init","jQuery","addMethod","element","optional","test","Fill","$titleField","fillCheck","Material","Datermine"],"mappings":"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","file":"app/js/question-manage/form/index.js","sourcesContent":["import React, { Component } from 'react';\nimport Option from './option';\nimport notify from 'common/notify';\nimport postal from 'postal';\nimport { numberConvertLetter } from '../../unit';\n\nfunction InitOptionData(dataSource,inputValue,validatorDatas,seq,checked) {\n  var obj = {\n    optionId:Math.random().toString().replace('.',''),\n    optionLabel: Translator.trans('activity.testpaper_manage.question_options')+ numberConvertLetter(seq),\n    inputValue: inputValue,\n    checked: checked,\n  }\n  validatorDatas.Options[obj.optionId] = inputValue.length > 0 ? 1 : 0;\n  if(checked) {\n    validatorDatas.checkedNum += 1;\n  }\n  dataSource.push(obj);\n}\n\nfunction deleteOption(dataSource,validatorDatas,optionId) {\n  for(let i = 0; i< dataSource.length ;i++) {\n    if(dataSource[i].optionId==optionId) {\n      if(dataSource[i].checked) {\n        validatorDatas.checkedNum = 0;\n      }\n      dataSource.splice(i, 1);\n      console.log(validatorDatas.Options[optionId]);\n      console.log(dataSource);\n      delete validatorDatas.Options[optionId];\n      i--;\n    }else {\n      dataSource[i].optionLabel = Translator.trans('activity.testpaper_manage.question_options')+ numberConvertLetter(i+1);\n    }\n  }\n}\n\nfunction changeOptionChecked(dataSource,validatorDatas,id,checked,isRadio) {\n  let checkedNum = 0;\n  dataSource.map((item,index)=> {\n    if(!isRadio) {\n      if(item.optionId == id ) {\n        dataSource[index].checked= !checked;\n      }\n    }else {\n      //单选\n      if(item.optionId == id && !checked ) { \n        dataSource[index].checked  = true;\n      }else if(!checked){\n        dataSource[index].checked = false;\n      }\n    }\n    //计算选择的答案\n    console.log(dataSource[index].checked);\n    if(dataSource[index].checked) {\n      checkedNum++;\n    }\n  });\n  console.log(checkedNum);\n  validatorDatas.checkedNum = checkedNum;\n}\n\nfunction updateOption(dataSource,validatorDatas,id,value) {\n  dataSource.map((item,index)=>{\n    if(item.optionId == id) {\n      dataSource[index].inputValue = value;\n    }\n  })\n}\n\nexport default class QuestionOptions extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      dataSource:[],\n      isValidator: false,\n    }\n    //验证的数据\n    this.validatorDatas = {\n      checkedNum: 0,\n      Options: {}\n    };\n    const dataSource = this.props.dataSource;\n    const dataAnswer = this.props.dataAnswer;\n    if(dataSource.length > 0) {\n      dataSource.map((item,index)=>{\n        let checked = false;\n        for( let i = 0 ;i< dataAnswer.length;i++) {\n          if(index == dataAnswer[i]) {\n            checked = true;\n          }\n        }\n        InitOptionData(this.state.dataSource,item,this.validatorDatas,index+1,checked);\n      })\n    }else {\n      for(let i = 1; i <= this.props.defaultNum;i++) {\n        InitOptionData(this.state.dataSource,'',this.validatorDatas,i,false);\n      }\n    }\n    this.subscriptionMessage();\n    console.log(this.validatorOptions);\n  }\n\n  subscriptionMessage() {\n    postal.subscribe({\n      channel  : \"manage-question\",\n      topic    : \"question-create-form-validator-start\",\n      callback : (data, envelope) =>{\n        this.validatorOptions(data);\n      }\n    });\n  }\n\n  publishMessage(isValidator) {\n    postal.publish({\n      channel : \"manage-question\",\n      topic : \"question-create-form-validator-end\",\n      data : {\n        isValidator: isValidator,\n      }\n    });\n  }\n\n  validatorOptions(data) {\n    let validNum = 0;\n\n    //触发视觉\n    this.setState({\n      isValidator: data.isValidator,\n    })\n\n    for(let option in this.validatorDatas.Options){\n      validNum += this.validatorDatas.Options[option];\n    }\n\n    if(validNum < this.state.dataSource.length ) {\n      console.log(' validNum is error ');\n      return;\n    }\n\n    if(this.validatorDatas.checkedNum < this.props.minCheckedNum ) {\n      notify('danger',Translator.trans('course.question.create.choose_min_answer_num_hint', {'minCheckedNum' : this.props.minCheckedNum}));\n    }else {\n      console.log('publishMessage');\n      this.publishMessage(true);\n    }\n  }\n\n  addOption() {\n    if(this.state.dataSource.length >= this.props.maxNum) {\n      notify('danger', Translator.trans('course.question.create.choose_max_num_hint', {'maxNum' : this.props.maxNum}));\n      return;\n    }\n    InitOptionData(this.state.dataSource,'',this.validatorDatas,this.state.dataSource.length+1,false);\n    this.setState({\n      dataSource:this.state.dataSource,\n    });\n    console.log({'dataSource':this.state.dataSource});\n    console.log({'validatorDatas':this.validatorDatas});\n  }\n\n  changeOptionChecked(id,checked) {\n    changeOptionChecked(this.state.dataSource,this.validatorDatas,id,checked,this.props.isRadio);\n    this.setState({\n      dataSource:this.state.dataSource,\n    });\n    if(this.validatorDatas.checkedNum <= 0) {\n      this.publishMessage(false);\n    }\n  }\n\n  deleteOption(id) {\n    if(this.state.dataSource.length <= this.props.minNum) {\n      notify('danger', Translator.trans('course.question.create.choose_min_num_hint', {'minNum' : this.props.minNum}));\n      return;\n    }\n    deleteOption(this.state.dataSource,this.validatorDatas,id);\n    this.setState({\n      dataSource:this.state.dataSource,\n    });\n    console.log({'validatorDatas':this.validatorDatas});\n  }\n\n  updateInputValue(id,value) {\n    updateOption(this.state.dataSource,this.validatorDatas,id,value);\n    this.validatorDatas.Options[id] = value.length > 0 ? 1:0;\n    if(value.length <=0 ) {\n      this.publishMessage(false);\n    }\n    this.setState({\n      dataSource: this.state.dataSource,\n    })\n\n    console.log(this.state.dataSource);\n  }\n\n  render() {\n    let createNewName = Translator.trans('course.question.create_hint');\n    return(\n      <div className=\"question-options-group\">\n        {\n          this.state.dataSource.map((item,index)=>{\n            return (\n              <Option imageUploadUrl= {this.props.imageUploadUrl} imageDownloadUrl={this.props.imageDownloadUrl}  isRadio = {this.props.isRadio} publishMessage= {(isValidator)=>this.publishMessage(isValidator)} validatorDatas = {this.validatorDatas} isValidator= {this.state.isValidator} datas = {item} key = {index} index = {index} deleteOption ={(id)=>this.deleteOption(id)} changeOptionChecked= {(id,checked)=>this.changeOptionChecked(id,checked)} updateInputValue={ (id,value)=>this.updateInputValue(id,value)}></Option>\n            )\n          })\n        }\n        <div className=\"form-group\">\n          <div className=\"col-md-8 col-md-offset-2\">\n            <a className=\"btn btn-success btn-sm pull-right\" onClick={()=>this.addOption()}>{ createNewName }</a>\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nQuestionOptions.defaultProps = {\n  defaultNum: 4, //默认选项个数\n  maxNum: 10,//最多选项的个数\n  minNum: 2,//最少选项的个数\n  isRadio: false,//是否为单选\n  minCheckedNum:1,//至少选择几个答案\n}\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/common/component/question-options/index.js","import QuestionChoice from './question-choice';\nimport ReactDOM from 'react-dom';\nimport React from 'react';\nimport QuestionOptions from 'app/common/component/question-options';\n\nclass SingleChoice extends QuestionChoice {\n  initOptions() {\n    ReactDOM.render( <QuestionOptions imageUploadUrl={this.imageUploadUrl} imageDownloadUrl={this.imageDownloadUrl} dataSource={this.dataSource} dataAnswer={this.dataAnswer} />,\n      document.getElementById('question-options')\n    );\n  }\n}\n\nexport default SingleChoice;\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/question-manage/type/question-uncertain-choice.js","import QuestionFormBase from '../type/form-base';\nimport Choice from '../type/question-choice';\nimport SingleChoice from '../type/question-single-choice';\nimport UncertainChoice from '../type/question-uncertain-choice';\nimport Determine from '../type/question-determine';\nimport Fill from '../type/question-fill';\nimport Essay from '../type/question-essay';\nimport Material from '../type/question-material';\nimport SelectLinkage from '../widget/select-linkage.js';\n\n\nclass QuestionCreator {\n  constructor() {\n  }\n\n  static getCreator(type, $form) {\n    switch (type) {\n      case 'single_choice':\n        QuestionCreator = new SingleChoice($form);\n        break;\n      case 'uncertain_choice':\n        QuestionCreator = new UncertainChoice($form);\n        break;\n      case 'choice':\n        QuestionCreator = new Choice($form);\n        break;\n      case 'determine':\n        QuestionCreator = new Determine($form);\n        break;\n      case 'essay':\n        QuestionCreator = new Essay($form);\n        break;\n      case 'fill':\n        QuestionCreator = new Fill($form);\n        break;\n      case 'material':\n        QuestionCreator = new Material($form);\n        break;\n      default:\n        QuestionCreator = new QuestionFormBase($form);\n        QuestionCreator.initTitleEditor();\n        QuestionCreator.initAnalysisEditor();\n    }\n\n    return QuestionCreator;\n  }\n}\n\nlet $form = $('[data-role=\"question-form\"]');\nlet type = $('[data-role=\"question-form\"]').find('[name=\"type\"]').val();\n\nQuestionCreator.getCreator(type, $form);\n\nnew SelectLinkage($('[data-role=\"courseId\"]'),$('[data-role=\"lessonId\"]'));\n\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/question-manage/form/index.js","import AttachmentActions from '../../attachment/widget/attachment-actions';\n\nclass QuestionFormBase {\n  constructor($form) {\n    this.$form = $form;\n    this.titleFieldId = 'question-stem-field';\n    this.analysisFieldId = 'question-analysis-field';\n    this.validator = null;\n    this.titleEditorToolBarName = 'Minimal';\n    this._init();\n    this.attachmentActions = new AttachmentActions($form);\n  }\n\n  _init() {\n    this._initEvent();\n    this._initValidate();\n  }\n\n  _initEvent() {\n    this.$form.on('click', '[data-role=submit]', event => this.submitForm(event));\n  }\n\n  submitForm(event) {\n    let submitType = $(event.currentTarget).data('submission');\n    this.$form.find('[name=submission]').val(submitType);\n    let self = this;\n\n    if (this.validator.form()) {\n      $(event.currentTarget).button('loading');\n      self.$form.submit();\n    }\n  }\n\n  _initValidate() {\n    let validator = this.$form.validate({\n      onkeyup: false,\n      rules: {\n        '[data-role=\"target\"]': {\n          required: true,\n        },\n        difficulty: {\n          required: true,\n        },\n        stem: {\n          required: true,\n        },\n        score: {\n          required: true,\n          number: true,\n          max: 999,\n          min: 0\n        }\n      },\n      messages: {\n        '[data-role=\"target\"]': Translator.trans('course.question.create.belong_required_error_hint'),\n        difficulty: Translator.trans('course.question.create.difficulty_required_error_hint')\n      }\n    });\n    this.validator = validator;\n  }\n\n  initTitleEditor(validator) {\n    let $target = $('#' + this.titleFieldId);\n    let editor = CKEDITOR.replace(this.titleFieldId, {\n      toolbar: this.titleEditorToolBarName,\n      filebrowserImageUploadUrl: $target.data('imageUploadUrl'),\n      height: $target.height()\n    });\n\n    editor.on('change', () => {\n      $target.val(editor.getData());\n      validator.form();\n\n      console.log(editor.getData());\n    });\n    editor.on('blur', () => {\n      $target.val(editor.getData());\n      validator.form();\n      console.log(editor.getData());\n    });\n  }\n\n  initAnalysisEditor() {\n    let $target = $('#' + this.analysisFieldId);\n    let editor = CKEDITOR.replace(this.analysisFieldId, {\n      toolbar: this.titleEditorToolBarName,\n      filebrowserImageUploadUrl: $target.data('imageUploadUrl'),\n      height: $target.height()\n    });\n\n    editor.on('change', () => {\n      $target.val(editor.getData());\n    });\n  }\n\n  set titleEditorToolBarName(toolbarName) {\n    this._titleEditorToolBarName = toolbarName;\n  }\n\n  get titleEditorToolBarName() {\n    return this._titleEditorToolBarName;\n  }\n}\n\nexport default QuestionFormBase;\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/question-manage/type/form-base.js","import QuestionFormBase from './form-base';\nimport ReactDOM from 'react-dom';\nimport React from 'react';\nimport QuestionOptions from 'app/common/component/question-options';\nimport postal from 'postal';\n\nclass Choice extends QuestionFormBase {\n  constructor($form) {\n    super($form);\n    this.isSubmit =  false;\n    this.$submit = null;\n    this.$questionOptions = $('#question-options');\n    this.dataSource = this.$questionOptions.data('choices');\n    this.dataAnswer = this.$questionOptions.data('answer');\n    if(this.dataSource) {\n      this.dataSource = JSON.parse(this.dataSource);\n      this.dataAnswer = JSON.parse(this.dataAnswer);\n    }else {\n      this.dataSource = [];\n      this.dataAnswer =[];\n    }\n    this.imageUploadUrl = this.$questionOptions.data('imageUploadUrl');\n    this.imageDownloadUrl = this.$questionOptions.data('imageDownloadUrl');\n    this.initTitleEditor(this.validator);\n    this.initAnalysisEditor();\n    this.initOptions();\n    this.subscriptionMessage();\n  }\n\n  _initEvent() {\n    this.$form.on('click','[data-role=submit]',event=>this.submitForm(event));\n  }\n\n  submitForm(event) {\n    this.$submit = $(event.currentTarget);\n    let submitType = this.$submit.data('submission');\n    this.$form.find('[name=submission]').val(submitType);\n    \n    if(this.validator.form() && this.isSubmit ) {\n      this.submit();\n    }\n    if(!this.isSubmit ) {\n      this.publishMessage();\n    }\n  }\n\n  submit() {\n    this.$submit.button('loading');\n    this.$form.submit();\n  }\n\n  initOptions() {\n    ReactDOM.render( <QuestionOptions imageUploadUrl={this.imageUploadUrl} imageDownloadUrl={this.imageDownloadUrl} dataSource={this.dataSource} dataAnswer={this.dataAnswer}  minCheckedNum={ 2 } />,\n      document.getElementById('question-options')\n    );\n  }\n\n  publishMessage() {\n    console.log('publishMessage');\n    postal.publish({\n      channel : \"manage-question\",\n      topic : \"question-create-form-validator-start\",\n      data : {\n        isValidator: true,\n      }\n    });\n  }\n\n  subscriptionMessage() {\n    console.log('subscriptionMessage');\n    postal.subscribe({\n      channel  : \"manage-question\",\n      topic    : \"question-create-form-validator-end\",\n      callback : (data, envelope) =>{\n        this.isSubmit = data.isValidator;\n        console.log({\n          'subscriptionMessage':this.isSubmit\n        });\n        if(this.isSubmit &&  this.validator.form()) {\n          console.log('submit by subscriptionMessage');\n          this.submit();\n        }\n      }\n    });\n  }\n}\n\nexport default Choice;\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/question-manage/type/question-choice.js","import React,{ Component } from 'react';\n\nexport default class Options extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      datas: this.props.datas,\n    }\n    this.editor = null;\n    this.editorBody = null;\n    this.editorHtml = null;\n  }\n \n  componentDidMount() {\n    console.log('componentDidMount');\n    this.initCkeditor();\n  }\n\n  deleteOption(event) {\n    this.editorHtml = null;\n    this.props.deleteOption(event.currentTarget.attributes[\"data-option-id\"].value);\n  }\n\n  onChangeChecked(event) {\n    this.updateInputValue(this.editor.getData()); //fix ie 11,check befor blur;\n    this.props.changeOptionChecked(event.currentTarget.attributes[\"data-option-id\"].value,this.props.datas.checked);\n  }\n\n  initCkeditor(dataSourceUi) {\n    if(!this.editor) {\n      this.editor = CKEDITOR.replace(this.props.datas.optionId, {\n        toolbar: 'Minimal',\n        filebrowserImageUploadUrl:this.props.imageUploadUrl,\n        height: 120\n      });\n      let self = this;\n      this.editor.on(\"instanceReady\", function () {  \n        self.editorBody = $('#' + [self.props.datas.optionId]).parent().find('iframe').contents().find('body');\n        //setData两个问题：1、引发事件失效 2、死循环触发；\n      }); \n      this.editor.on('change',function(){\n        console.log('change'+self.editor.getData());\n        setTimeout(function(){\n          self.updateInputValue(self.editor.getData());\n        },100)\n      });\n      this.editor.on('blur', () => { //fix ie 11 中文输入\n        console.log('blur'+ self.editor.getData());\n        setTimeout(function(){\n          self.updateInputValue(self.editor.getData());\n        },100)\n      });\n    }else {\n      this.editor.setData(datas.inputValue);\n    }\n  }\n\n  updateInputValue(inputValue) {\n    console.log(inputValue);\n\n    this.editorHtml = inputValue;\n    this.props.updateInputValue(this.props.datas.optionId,inputValue);\n  }\n\n  render() {\n    let showDanger = this.props.isValidator && this.props.datas.inputValue.length <= 0;\n    let type = 'checkbox';\n    if(this.props.isRadio) {\n      type= 'radio';\n    }\n    if(this.editorBody && this.editorHtml != this.props.datas.inputValue) {\n      this.editorBody.html(this.props.datas.inputValue);\n    }\n\n    let correctName = Translator.trans('course.question.right_answer_hint');\n    return (\n      <div className=\"form-group\">\n        <div className=\"col-sm-2 control-label\">\n          <label className=\"choice-label control-label-required\">{this.props.datas.optionLabel}</label>\n        </div>\n        <div className=\"col-sm-8 controls\">\n          <textarea className=\"form-control datas-input col-md-8\" id={this.props.datas.optionId}  defaultValue={this.props.datas.inputValue} name='choices[]' value={this.props.datas.inputValue} data-image-upload-url={this.props.imageUploadUrl} data-image-download-url={this.props.imageDownloadUrl}></textarea>\n          <div className=\"mtm\">\n            <label>\n              <input type={type} name='answer[]' data-option-id={this.props.datas.optionId} value={this.props.index}  checked={this.props.datas.checked} className=\"answer-checkbox\" onChange = {(event)=>this.onChangeChecked(event)}/> { correctName }\n            </label>\n          </div>\n          <p className={showDanger ? 'color-danger' : 'hidden'}>{ Translator.trans('course.question.right_answer_content_hint') }</p>\n        </div>\n        <div className=\"col-sm-2\">\n          <a className=\"btn btn-default btn-sm\" data-option-id={ this.props.datas.optionId }  onClick={(event)=>this.deleteOption(event)} href=\"javascript:;\"><i className=\"glyphicon glyphicon-trash\"></i></a>\n        </div>\n      </div>\n    )\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/common/component/question-options/option.js","import QuestionFormBase from './form-base';\n\nclass Essay extends QuestionFormBase {\n  constructor($form) {\n    super($form);\n\n    this.initTitleEditor(this.validator);\n    this.initAnalysisEditor();\n\n    this.answerFieldId = 'question-answer-field';\n    this.$answerField = $('#' + this.answerFieldId);\n\n    this.init();\n  }\n\n  init() {\n    this.$answerField.rules('add', {\n      required: true\n    })\n\n    let editor = CKEDITOR.replace(this.answerFieldId, {\n      toolbar: 'Minimal',\n      filebrowserImageUploadUrl: this.$answerField.data('imageUploadUrl'),\n      height: this.$answerField.height()\n    });\n\n    editor.on('change', () => {\n      this.$answerField.val(editor.getData());\n    });\n    editor.on('blur', () => {\n      this.$answerField.val(editor.getData());\n    });\n  }\n}\n\nexport default Essay;\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/question-manage/type/question-essay.js","import QuestionFormBase from './form-base';\n\njQuery.validator.addMethod(\"fillCheck\", function (value, element) {\n    return this.optional(element) || /(\\[\\[(.+?)\\]\\])/i.test(value);\n}, Translator.trans('course.question.create.fill_hint'));\n\nclass Fill extends QuestionFormBase {\n  constructor($form) {\n    super($form);\n    this.titleEditorToolBarName = 'Question';\n    this.initTitleEditor(this.validator);\n    this.initAnalysisEditor();\n    \n    this.$titleField = $('#'+this.titleFieldId);\n    this.init();\n  }\n\n  init() {\n    this.$titleField.rules('add',{\n      fillCheck:true\n    })\n  }\n}\n\nexport default Fill;\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/question-manage/type/question-fill.js","import QuestionFormBase from './form-base';\n\nclass Material extends QuestionFormBase {\n  constructor($form) {\n    super($form);\n    \n    this.initTitleEditor(this.validator);\n    this.initAnalysisEditor();\n  }\n}\n\nexport default Material;\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/question-manage/type/question-material.js","import QuestionChoice from './question-choice';\nimport ReactDOM from 'react-dom';\nimport React from 'react';\nimport QuestionOptions from 'app/common/component/question-options';\n\nclass SingleChoice extends QuestionChoice {\n  initOptions() {\n    ReactDOM.render( <QuestionOptions imageUploadUrl={this.imageUploadUrl} imageDownloadUrl={this.imageDownloadUrl} dataSource={this.dataSource} dataAnswer={this.dataAnswer}  isRadio={true}/>,\n      document.getElementById('question-options')\n    );\n  }\n}\n\nexport default SingleChoice;\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/question-manage/type/question-single-choice.js","import QuestionFormBase from './form-base';\n\nclass Datermine extends QuestionFormBase {\n\tconstructor($form) {\n\t\tsuper($form);\n\n\t\tthis.initTitleEditor(this.validator);\n\t\tthis.initAnalysisEditor();\n\n\t\tthis.$answerField = $('[name=\"answer\\[\\]\"]');\n\n\t\tthis.init();\n\t}\n\n\tinit() {\n\t\tthis.$answerField.rules('add', {\n\t\t\trequired: true,\n\t\t\tmessages: {\n\t\t\t\trequired: Translator.trans('course.question.create.right_answer_required_error_hint')\n\t\t\t}\n\t\t})\n\n\t}\n}\n\nexport default Datermine;\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/question-manage/type/question-determine.js"],"sourceRoot":""}