{"version":3,"sources":["webpack:///./app/Resources/static-src/app/js/media-manage/coord.js","webpack:///./~/xtend/immutable.js","webpack:///./app/Resources/static-src/app/js/media-manage/manage.js","webpack:///./app/Resources/static-src/app/js/media-manage/messenger.js","webpack:///./app/Resources/static-src/app/js/media-manage/subtitle-select.js","webpack:///./app/Resources/static-src/app/js/media-manage/video.js","webpack:///./~/subtitle/lib/add.js","webpack:///./app/Resources/static-src/app/js/media-manage/index.js","webpack:///./~/subtitle/lib/parse.js","webpack:///./~/subtitle/lib/resync.js","webpack:///./~/subtitle/lib/stringify.js","webpack:///./~/subtitle/lib/toMS.js","webpack:///./~/subtitle/lib/toSrtTime.js","webpack:///./~/subtitle/subtitle.js","webpack:///./~/subtitle/lib/getSubtitles.js"],"names":["Tool","$elem","$","$editbox_list","partnum","mediaLength","data","parttime","i","$new_scale_default","clone","css","getleft","removeClass","removeAttr","find","text","sec2Time","Math","round","before","on","currentTime","event","changeleft","document","window","getSelection","removeAllRanges","selection","empty","left","pageX","width","times","gettime","sendToChild","id","time","off","videoLength","_width","_totaltime","parseInt","_left","$textTrackDisplay","$uploader","Manage","select","init","initTextDisplay","initSelect","initUploader","height","tabHeight","textTrackTitleHeight","selectorHeight","show","Object","create","$subtitleListElem","subtitleList","mediaId","_this","optionsLimit","html","Translator","trans","ajax","url","type","notSetHeader","done","showSubtitleContent","post","hide","resetOptions","videoNo","subtitleCreateUrl","uploader","UploaderSDK","initUrl","finishUrl","ui","multi","accept","extensions","mimeTypes","process","err","error","file","name","success","addOption","setTimeout","get","subtitles","responseJSON","message","captions","parse","e","subtitleArray","getSubtitles","duration","timeFormat","map","cue","$subtitleDom","last","index","start","end","parseFloat","eq","addClass","messenger","project","children","getElementById","convertStatus","status","statusMap","waiting","doing","none","Select","options","$el","eventManager","initParent","initEvent","_self","$documentFragment","createDocumentFragment","append","templete","$parentDom","$list","$dataShow","$open","$close","$showBox","delegate","handleOpen","bind","handleClose","handleDelete","siblings","attr","setValue","toggle","getValue","length","trigger","getOptionsStr","getDefaultOption","handleOptionEmpty","open","optionsStr","option","value","slideDown","slideUp","el","target","parent","remove","splice","stopPropagation","fn","push","optionsArray","videoHtml","playerUrl"],"mappings":"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A;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,kBAAiB,GAAG;AACpB;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,oCAAmC,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,UAAU,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE;AACrF;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA,MAAK;AACL;AACA;AACA,QAAO;AACP;AACA;AACA;AACA,IAAG;;AAEH;AACA;;;;;;;;ACzEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,YAAW,MAAM;AACjB,YAAW,OAAO;AAClB;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,IAAG;AACH;;;;;;;;ACrCA;AACA;AACA,YAAW,MAAM;AACjB,aAAY,OAAO;AACnB;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;;;;;;;;ACtBA;AACA;AACA,YAAW,OAAO;AAClB,cAAa,OAAO;AACpB;;AAEA;AACA,mCAAkC,EAAE,MAAM,EAAE,MAAM,EAAE,MAAM,EAAE;;AAE5D;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;;;;;;;ACvBA;AACA;AACA,YAAW,QAAQ;AACnB,aAAY,OAAO;AACnB;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,IAAG;AACH;AACA;;AAEA;;AAEA;AACA;;;;;;;;ACtCA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,YAAW,OAAO;AAClB;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,OAAO;AAClB;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,cAAa,MAAM;AACnB;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,cAAa,OAAO;AACpB;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,QAAQ;AACnB;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAW,OAAO;AAClB;;AAEA;;AAEA;AACA;AACA;AACA;AACA,YAAW,QAAQ;AACnB;;AAEA;;;;;;;;AClIA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,YAAW,MAAM;AACjB,YAAW,OAAO;AAClB,aAAY,MAAM;AAClB;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;;AAEA;AACA;AACA;AACA;AACA,MAAK;AACL;;AAEA;AACA","file":"app/js/media-manage/index.js","sourcesContent":["import messenger from './messenger';\nimport * as Tool from 'common/utils';\n\nlet $elem = $('.js-editbox');\nlet $editbox_list = $('#editbox-lesson-list');\nlet partnum = 6;\nlet mediaLength = $elem.data('mediaLength');\nlet parttime = mediaLength / partnum;\n\nfor (let i = 0; i <= partnum; i++) {\n  let $new_scale_default = $('[data-role=\"scale-default\"]').clone().css('left', getleft(parttime * i, mediaLength)).removeClass('hidden').removeAttr('data-role');\n  $new_scale_default.find('[data-role=\"scale-time\"]').text(Tool.sec2Time(Math.round(parttime * i)));\n  $('[data-role=\"scale-default\"]').before($new_scale_default);\n}\n\nmessenger.on(\"timechange\", function(data) {\n  $('.scale-white').css('left', getleft(data.currentTime, mediaLength));\n});\n\n$('.scale-white').on('mousedown', function(event) {\n  let changeleft = false;\n  $(document).on('mousemove.playertime', function(event) {\n    window.getSelection ? window.getSelection().removeAllRanges() : document.selection.empty();\n    let left = event.pageX > ($editbox_list.width() + 20) ? ($editbox_list.width() + 20) : event.pageX && event.pageX <= 20 ? 20 : event.pageX;\n    $('.scale-white').css('left', left);\n    let times = gettime(left, mediaLength);\n    messenger.sendToChild({ id: 'viewerIframe' }, 'setCurrentTime', { time: times });\n  }).on('mouseup.playertime', function(event) {\n    $(document).off('mousemove.playertime');\n    $(document).off('mousedown.playertime');\n    changeleft = true;\n    // messenger.sendToChild({ id: 'viewerIframe' }, 'setPlayerPlay');\n  });\n\n});\n\nfunction getleft(time, videoLength) {\n  let _width = $('#editbox-lesson-list').width();\n  let _totaltime = parseInt(videoLength);\n  let _left = time * _width / _totaltime;\n  return _left + 20;\n}\n\nfunction gettime(left, mediaLength) {\n  return Math.round((left - 20) * mediaLength / $('#editbox-lesson-list').width());\n}\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/media-manage/coord.js","module.exports = extend\n\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\nfunction extend() {\n    var target = {}\n\n    for (var i = 0; i < arguments.length; i++) {\n        var source = arguments[i]\n\n        for (var key in source) {\n            if (hasOwnProperty.call(source, key)) {\n                target[key] = source[key]\n            }\n        }\n    }\n\n    return target\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/xtend/immutable.js\n// module id = 631b083c4a39c1f7f104\n// module chunks = app/js/media-manage/index","import './video';\nimport './coord';\nimport Select from './subtitle-select';\nimport messenger from './messenger';\nimport notify from 'common/notify';\nimport Subtitle from 'subtitle';\n\nlet $textTrackDisplay = $('.text-track-overview');\nlet $uploader = $('#uploader');\n\nclass Manage {\n  constructor() {\n    this.select = null;\n    this.init();\n  }\n\n  init() {\n    this.initTextDisplay();\n    this.initSelect();\n    this.initUploader();\n  }\n\n  initTextDisplay() {\n    let height = $('.manage-edit-body').height();\n    let tabHeight = $('.nav-tabs-edit').height();\n    let textTrackTitleHeight = $('.text-track-title').height();\n    let selectorHeight = $('#track-select').height();\n    $textTrackDisplay.height(height - tabHeight - textTrackTitleHeight - selectorHeight - 140).show();\n  }\n\n  initSelect() {\n    let select = Object.create(Select);\n    let $subtitleListElem = $('#track-select');\n    let subtitleList = $subtitleListElem.data('subtitleList');\n    let mediaId = $uploader.data('mediaId');\n    let _this = this;\n    \n    select.init({\n      id: '#track-select',\n      optionsLimit: 4\n    });\n    select.on('valuechange', function(data) {\n      if (!data) {\n        $textTrackDisplay.html(Translator.trans('subtitle.no_subtitle_hint'));\n        return;\n      }\n      $.ajax({\n        url: data.url,\n        type: 'GET',\n        notSetHeader: true,\n      }).done(_this.showSubtitleContent);\n    });\n    select.on('deleteoption', function(data) {\n      let url = `/media/${mediaId}/subtitle/${data.id}/delete`;\n      $.post(url, (data) => {\n        if (data) {\n          notify('success', Translator.trans('subtitle.delete_success_hint'));\n          $uploader.show();\n        }\n      });\n    });\n    select.on('optionlimit', function() {\n      $uploader.hide();\n    });\n    select.resetOptions(subtitleList);\n\n    this.select = select;\n  }\n\n  initUploader() {\n    let select = this.select;\n\n    let videoNo = $uploader.data('mediaGlobalId');;\n    let mediaId = $uploader.data('mediaId');\n    let subtitleCreateUrl = $uploader.data('subtitleCreateUrl');\n    \n    let uploader = new UploaderSDK({\n      initUrl: $uploader.data('initUrl'),\n      finishUrl: $uploader.data('finishUrl'),\n      id: 'uploader',\n      ui: 'simple',\n      multi: true,\n      accept: {\n        extensions: ['srt'],\n        mimeTypes: ['text/srt']\n      },\n      type: 'sub',\n      process: {\n        videoNo: videoNo\n      }\n    });\n\n    uploader.on('error', function(err) {\n      if (err.error === 'Q_TYPE_DENIED') {\n        notify('danger', Translator.trans('subtitle.upload_srt_hint'));\n      }\n    });\n\n    uploader.on('file.finish', function(file) {\n      $.post(subtitleCreateUrl, {\n        \"name\": file.name,\n        \"subtitleId\": file.id,\n        \"mediaId\": mediaId\n      }).success(function (data) {\n        if (!data) {\n          return;\n        }\n        select.addOption(data);\n        notify('success', Translator.trans('subtitle.upload_success_hint'));\n        \n        setTimeout(function() {\n          let url = `/media/${mediaId}/subtitles`;\n          $.get(url).done(function(data) {\n            if (data.subtitles) {\n              select.resetOptions(data.subtitles);\n            }\n          })\n        }, 5000);\n      }).error(function(data) {\n        notify('danger', Translator.trans(data.responseJSON.error.message));\n      });\n    });\n  }\n\n  showSubtitleContent(data) {\n    let captions = new Subtitle();\n    \n    try {\n      captions.parse(data);\n    } catch(e) {\n      notify('danger', Translator.trans('subtitle.parse_error_hint'))\n      $textTrackDisplay.html(Translator.trans('subtitle.parse_error_hint'));\n      return;\n    }\n\n    let subtitleArray = captions.getSubtitles({\n      duration: true,\n      timeFormat: 'ms'\n    });\n\n    let html = '';\n    subtitleArray.map((cue) => {\n      html += `<p>${cue.text}</p>`;\n    });\n    \n    $textTrackDisplay.html(html);\n\n    let $subtitleDom = $textTrackDisplay.find('p');\n    \n    messenger.on('timechange', function(data) {\n      setTimeout(function() {\n        let last = subtitleArray.find(function(cue, index) {\n          if (cue.start / 1000 > data.currentTime) {\n            return cue;\n          }\n        });\n\n        $subtitleDom.removeClass('active');\n        if (!last) {\n          return;\n        }\n        if (last.index > 1 && subtitleArray[last.index - 2].end > parseFloat(data.currentTime) * 1000) {\n          $subtitleDom.eq(last.index - 2).addClass('active');\n        }\n      }, 0);\n    })\n  }\n  \n}\n\nexport default Manage;\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/media-manage/manage.js","import EsMessenger from 'app/common/messenger';\n\nlet messenger = new EsMessenger({\n  name: 'parent',\n  project: 'PlayerProject',\n  children: [document.getElementById('viewerIframe')],\n  type: 'parent'\n});\n\nexport default messenger;\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/media-manage/messenger.js","const convertStatus = (status) => {\n  let statusMap = {\n    waiting: Translator.trans('subtitle.status.waiting'),\n    doing: Translator.trans('subtitle.status.doing'),\n    success: Translator.trans('subtitle.status.success'),\n    error: Translator.trans('subtitle.status.error'),\n    none: Translator.trans('subtitle.status.waiting')\n  };\n  return statusMap[status];\n}\n\nlet Select = {\n  init(options) {\n    this.$el = $(options.id);\n    this.options = [];\n    this.optionsLimit = options.optionsLimit || false;\n    this.eventManager = {};\n    this.initParent();\n    this.initEvent();\n  },\n  initParent() {\n    let _self = this;\n    let $documentFragment = $(document.createDocumentFragment());\n    $documentFragment.append(this.templete());\n    this.$el.append($documentFragment);\n    this.$parentDom = $('.track-select-parent');\n    this.$list = $('.track-selcet-list');\n    this.$dataShow = this.$parentDom.find('.data-show');\n    this.$open = this.$parentDom.find('.track-selcet-open-arrow');\n    this.$close = this.$parentDom.find('.track-selcet-close-arrow');\n    this.$showBox = this.$parentDom.find('.track-select-show');\n  },\n  initEvent() {\n    let _self = this;\n    this.$parentDom\n    .delegate('.track-selcet-open-arrow', 'click', this.handleOpen.bind(this))\n    .delegate('.track-selcet-close-arrow', 'click', this.handleClose.bind(this))\n    .delegate('.delete','click', this.handleDelete.bind(this))\n    .delegate('.select-item', 'click', function() {\n      $(this).siblings().removeClass('active');\n      $(this).addClass('active');\n      let name = $(this).find('.value').html();\n      let url = $(this).find('.value').attr('url');\n      _self.setValue({name:name,url:url});\n      _self.handleClose();\n    })\n    this.$showBox.on('click',this.toggle.bind(this));\n    this.on('valuechange',function(){\n      this.$dataShow.html(this.getValue().name);\n      this.$dataShow.attr('title',this.getValue().name);\n    });\n    this.on('listchange', function() {\n      if(this.optionsLimit && this.options.length >= this.optionsLimit ){\n        this.trigger('optionlimit');\n      }\n      this.$list.html(this.getOptionsStr());\n      this.setValue(this.getDefaultOption())\n    });\n    this.on('optionempty', this.handleOptionEmpty.bind(this))\n  },\n  templete() {\n    return `<div class=\"track-select-parent\">\n              <div class=\"track-select-show\">\n                <div class=\"data-show\" title=\"${this.getDefaultOption().name}\"></div>\n                <span class=\"track-selcet-open-arrow\">\n                  <i class=\"es-icon es-icon-keyboardarrowdown\"></i>\n                </span>\n                <span class=\"track-selcet-close-arrow\" style=\"display:none;\">\n                  <i class=\"es-icon es-icon-keyboardarrowup\"></i>\n                </span>\n              </div>\n              <ul class=\"track-selcet-list\" style=\"display:none;\">\n                ${this.getOptionsStr()}\n              </ul>\n            </div>`;\n  },\n  getDefaultOption() {\n    if (this.options.length) {\n      return this.options[0];\n    } else {\n      this.open ? this.handleClose() : '';\n      return false;\n    }\n  },\n  getOptionsStr() {\n      let _self = this;\n      if(!this.options.length){\n        this.trigger('optionempty');\n      }\n      let optionsStr = '';\n      this.options.map((option, index) => {\n        optionsStr += `<li class=\"select-item\">\n                        <div class=\"value\" title=\"${option.name}\" url=\"${option.url}\">\n                          ${option.name}\n                        </div>\n                        <span class=\"convertStatus convert-${option.convertStatus}\">${convertStatus(option.convertStatus)}</span>\n                        <i class=\"es-icon es-icon-close01 delete\" data-index=\"${index}\"></i>\n                      </li>`;\n      })\n      return optionsStr;\n  },\n  setValue(value) {\n    if (!value) {\n      this.$dataShow.html(Translator.trans('subtitle.no_subtitle_hint'));\n      this.trigger('valuechange',false);\n      return;\n    }\n    this.value = value;\n    this.trigger('valuechange',this.value);\n  },\n  getValue() {\n    return this.value || { name: Translator.trans('subtitle.no_subtitle_hint')};\n  },\n  toggle() {\n    this.open ? this.handleClose() : this.handleOpen();\n  },\n  handleOpen() {\n    if (!this.options.length) return;\n    this.open = true;\n    this.$open.hide();\n    this.$close.show();\n    this.$showBox.addClass('active');\n    this.$list.slideDown(200);\n  },\n  handleClose() {\n    this.open = false;\n    this.$close.hide();\n    this.$open.show();\n    this.$showBox.removeClass('active');\n    this.$list.slideUp(200);\n  },\n  handleDelete(e) {\n    let el = e.target;\n    $(el).parent().remove();\n    this.trigger('deleteoption',this.options[$(el).data('index')]);\n    this.options.splice($(el).data('index'),1);\n    this.trigger('listchange',this.options);\n    e.stopPropagation();\n  },\n  handleOptionEmpty() {\n    this.value = '';\n    this.trigger('valuechange',false);\n  },\n  on(event, fn) {\n    if (!this.eventManager[event]) {\n      this.eventManager[event] = [fn.bind(this)];\n    } else {\n      this.eventManager[event].push(fn.bind(this));\n    }\n  },\n  trigger(event, data) {\n    if (this.eventManager[event]) {\n      this.eventManager[event].map(function(fn) {\n        fn(data);\n      });\n    }\n  },\n  resetOptions(optionsArray) {\n    this.options = optionsArray;\n    this.trigger('listchange', this.options);\n  },\n  addOption(option) {\n    if (!option.convertStatus) {\n      option.convertStatus = 'waiting';\n    }\n    this.options.push(option);\n    this.trigger('listchange');\n  }\n}\n\nexport default Select;\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/media-manage/subtitle-select.js","let videoHtml = $('#lesson-dashboard');\nlet playerUrl = videoHtml.data(\"media-player-url\");\nlet html = '<iframe src=\\'' + playerUrl + '\\' name=\\'viewerIframe\\' id=\\'viewerIframe\\' width=\\'100%\\'allowfullscreen webkitallowfullscreen height=\\'100%\\' style=\\'border:0px\\'></iframe>';\n$(\"#lesson-video-content\").html(html);\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/media-manage/video.js","/**\n * Module dependencies.\n */\n\nvar toMS = require('./toMS')\nvar toSrtTime = require('./toSrtTime')\n\n/**\n * Add a new caption into the array of subtitles.\n *\n * @param {Array} subtitles\n * @param {Object} caption\n * @return {Array} subtitles\n */\n\nmodule.exports = function add (subtitles, caption) {\n  if (!caption.start || !caption.end || !caption.text) {\n    throw new Error('Invalid caption data')\n  }\n\n  for (var prop in caption) {\n    if (!caption.hasOwnProperty(prop) || prop === 'text') {\n      continue\n    }\n\n    if (prop === 'start' || prop === 'end') {\n      if (/^(\\d{2}):(\\d{2}):(\\d{2}),(\\d{3})$/.test(caption[prop])) {\n        continue\n      }\n      if (/^\\d+$/.test(caption[prop])) {\n        caption[prop] = toSrtTime(caption[prop])\n      } else {\n        throw new Error('Invalid caption time format')\n      }\n    }\n  }\n\n  subtitles.push({\n    index: subtitles.length + 1,\n    start: caption.start,\n    end: caption.end,\n    duration: toMS(caption.end) - toMS(caption.start),\n    text: caption.text\n  })\n\n  return subtitles\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/subtitle/lib/add.js\n// module id = 27d19b4547a9c8dcdebe\n// module chunks = app/js/media-manage/index","import Manage from './manage';\n\nnew Manage();\n\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/media-manage/index.js","/**\n * Module dependencies.\n */\n\nvar toMS = require('./toMS')\n\n/**\n * Parse SRT string.\n * @param {String} srt\n * @return {Array} subtitles\n */\n\nmodule.exports = function parse (srt) {\n  var subs = []\n  var index\n  var time\n  var text\n  var start\n  var end\n\n  if (!srt) {\n    throw new Error('No SRT to parse')\n  }\n\n  srt = srt.trim()\n  srt += '\\n'\n  srt = srt\n    .replace(/\\r\\n/g, '\\n')\n    .replace(/\\n{3,}/g, '\\n\\n')\n    .split('\\n')\n\n  srt.forEach(function (line) {\n    line = line.toString()\n\n    // if we don't have an index, so we should expect an index\n    if (!index) {\n      if (/^\\d+$/.test(line)) {\n        index = parseInt(line)\n        return\n      }\n    }\n\n    // now we have to check for the time\n    if (!time) {\n      var match = line.match(/^(\\d{2}:\\d{2}:\\d{2},\\d{3}) --> (\\d{2}:\\d{2}:\\d{2},\\d{3})$/)\n      if (match) {\n        start = match[1]\n        end = match[2]\n        time = true\n        return\n      }\n    }\n\n    // now we get all the strings until we get an empty line\n    if (line.trim() === '') {\n      subs.push({\n        index: index,\n        start: start,\n        end: end,\n        duration: toMS(end) - toMS(start),\n        text: text || ''\n      })\n      index = time = start = end = text = null\n    } else {\n      if (!text) {\n        text = line\n      } else {\n        text += '\\n' + line\n      }\n    }\n  })\n\n  return subs\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/subtitle/lib/parse.js\n// module id = 62dd28380e65e28b6966\n// module chunks = app/js/media-manage/index","/**\n * Module dependencies.\n */\n\nvar toMS = require('./toMS')\nvar toSrtTime = require('./toSrtTime')\n\n/**\n * Resync the subtitles.\n * @param {Array} subtitles\n * @param {Number} time\n */\n\nmodule.exports = function resync (subtitles, time) {\n  if (!/(-|\\+)?\\d+/.test(time.toString())) {\n    throw new Error('Invalid time: ' + time + '.Expected a valid integer')\n  }\n\n  time = parseInt(time, 10)\n\n  return subtitles.map(function (caption) {\n    var start = toMS(caption.start)\n    var end = toMS(caption.end)\n\n    start = start + time\n    end = end + time\n\n    caption.start = start < 0\n      ? toSrtTime(0)\n      : toSrtTime(start)\n\n    caption.end = end < 0\n      ? toSrtTime(0)\n      : toSrtTime(end)\n\n    return caption\n  })\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/subtitle/lib/resync.js\n// module id = a354ef45a5643f3faa0a\n// module chunks = app/js/media-manage/index","/**\n * Stringify the given array of subtitles.\n * @param {Array} subtitles\n * @return {String} srt\n */\n\nmodule.exports = function stringify (subtitles) {\n  var buffer = ''\n\n  subtitles.forEach(function (caption, index) {\n    if (index > 0) {\n      buffer += '\\n'\n    }\n    buffer += caption.index\n    buffer += '\\n'\n    buffer += caption.start + ' --> ' + caption.end\n    buffer += '\\n'\n    buffer += caption.text\n    buffer += '\\n'\n  })\n\n  return buffer\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/subtitle/lib/stringify.js\n// module id = 4fbc8f4e49952771dc85\n// module chunks = app/js/media-manage/index","/**\n * Return the given SRT timestamp as milleseconds.\n * @param {String} srtTime\n * @returns {Number} milliseconds\n */\n\nmodule.exports = function toMS (srtTime) {\n  var match = srtTime.match(/^(\\d{2}):(\\d{2}):(\\d{2}),(\\d{3})$/)\n\n  if (!match) {\n    throw new Error('Invalid SRT time format')\n  }\n\n  var hours = parseInt(match[1], 10)\n  var minutes = parseInt(match[2], 10)\n  var seconds = parseInt(match[3], 10)\n  var milliseconds = parseInt(match[4], 10)\n\n  hours *= 3600000\n  minutes *= 60000\n  seconds *= 1000\n\n  return hours + minutes + seconds + milliseconds\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/subtitle/lib/toMS.js\n// module id = 7ea730999b7f9bc57768\n// module chunks = app/js/media-manage/index","/**\n * Return the given milliseconds as SRT timestamp.\n * @param {Integer} milliseconds\n * @return {String} srtTimestamp\n */\n\nmodule.exports = function toSrtTime (milliseconds) {\n  if (!/^\\d+$/.test(milliseconds.toString())) {\n    throw new Error('Time should be an Integer value in milliseconds')\n  }\n\n  milliseconds = parseInt(milliseconds)\n\n  var date = new Date(0, 0, 0, 0, 0, 0, milliseconds)\n\n  var hours = date.getHours() < 10\n    ? '0' + date.getHours()\n    : date.getHours()\n\n  var minutes = date.getMinutes() < 10\n    ? '0' + date.getMinutes()\n    : date.getMinutes()\n\n  var seconds = date.getSeconds() < 10\n    ? '0' + date.getSeconds()\n    : date.getSeconds()\n\n  var ms = milliseconds - ((hours * 3600000) + (minutes * 60000) + (seconds * 1000))\n\n  if (ms < 100 && ms >= 10) {\n    ms = '0' + ms\n  } else if (ms < 10) {\n    ms = '00' + ms\n  }\n\n  var srtTime = hours + ':' + minutes + ':' + seconds + ',' + ms\n\n  return srtTime\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/subtitle/lib/toSrtTime.js\n// module id = 6d5fc844ee5e8f1afd1c\n// module chunks = app/js/media-manage/index","'use strict'\n\n/*!\n * Subtitle.js\n * Parse and manipulate SRT (SubRip)\n * https://github.com/gsantiago/subtitle.js\n *\n * @version 0.1.5\n * @author Guilherme Santiago\n*/\n\n/**\n * Module dependencies.\n */\n\nvar toMS = require('./lib/toMS')\nvar toSrtTime = require('./lib/toSrtTime')\nvar parse = require('./lib/parse')\nvar stringify = require('./lib/stringify')\nvar resync = require('./lib/resync')\nvar getSubtitles = require('./lib/getSubtitles')\nvar add = require('./lib/add')\n\n/**\n * Export `Subtitle`.\n */\n\nmodule.exports = Subtitle\n\n/**\n * Subtitle constructor.\n * @constructor\n * @param {String} srt\n */\n\nfunction Subtitle (srt) {\n  if (!(this instanceof Subtitle)) return new Subtitle(srt)\n\n  this._subtitles = []\n\n  if (srt) {\n    this.parse(srt)\n  }\n}\n\n/**\n * Alias for `Subtitle.prototype`.\n */\n\nvar fn = Subtitle.prototype\n\n/**\n * Parse the given SRT.\n *\n * @method\n * @param {String} srt\n */\n\nfn.parse = function _parse (srt) {\n  this._subtitles = parse(srt)\n}\n\n/**\n * Add a caption.\n * You have to pass an object with the following data:\n * start - The start timestamp\n * end - The end timestamp\n * text - The caption text\n *\n * The timestamps support two patterns:\n * The SRT pattern: '00:00:24,400'\n * Or a positive integer representing milliseconds\n *\n * @public\n * @param {Object} Caption data\n */\n\nfn.add = function _add (caption) {\n  add(this._subtitles, caption)\n  return this\n}\n\n/**\n * Return the subtitles.\n *\n * @param {Object} Options\n * @returns {Array} Subtitles\n */\n\nfn.getSubtitles = function _getSubtitles (options) {\n  return getSubtitles(this._subtitles, options)\n}\n\n/**\n * Stringify the SRT.\n *\n * @returns {String} srt\n */\n\nfn.stringify = function _stringify () {\n  return stringify(this._subtitles)\n}\n\n/**\n * Resync the captions.\n *\n * @param {Integer} Time in milleseconds\n */\n\nfn.resync = function _resync (time) {\n  this._subtitles = resync(this._subtitles, time)\n  return this\n}\n\n/**\n * Convert the SRT time format to milliseconds\n *\n * @static\n * @param {String} SRT time format\n */\n\nSubtitle.toMS = toMS\n\n/**\n * Convert milliseconds to SRT time format\n *\n * @static\n * @param {Integer} Milleseconds\n */\n\nSubtitle.toSrtTime = toSrtTime\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/subtitle/subtitle.js\n// module id = d5971171c2b26114cfc1\n// module chunks = app/js/media-manage/index","/**\n * Module dependencies.\n */\n\nvar extend = require('xtend/immutable')\nvar toMS = require('./toMS')\n\n/**\n * Default options.\n */\n\nvar defaults = {\n  timeFormat: 'srt',\n  duration: false\n}\n\n/**\n * Transform the given array of subtitles.\n * @param {Array} subtitles\n * @param {Object} options\n * @return {Array} subtitles\n */\n\nmodule.exports = function getSubtitles (subtitles, options) {\n  options = extend(defaults, options)\n\n  if (options.timeFormat === 'ms') {\n    subtitles = subtitles.map(function (caption) {\n      caption.start = toMS(caption.start)\n      caption.end = toMS(caption.end)\n      return caption\n    })\n  }\n\n  if (!options.duration) {\n    subtitles = subtitles.map(function (caption) {\n      delete caption.duration\n      return caption\n    })\n  }\n\n  return subtitles\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/subtitle/lib/getSubtitles.js\n// module id = 558e05aa09312b06bb5c\n// module chunks = app/js/media-manage/index"],"sourceRoot":""}