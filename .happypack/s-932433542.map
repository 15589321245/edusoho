{"version":3,"sources":["app/Resources/static-src/app/common/component/persona-multi-input/index.js"],"names":["initItem","dataSourceUi","data","index","props","obj","itemId","Math","random","nickname","isVisible","avatar","seq","id","outputValue","push","updateChecked","map","item","PersonaMultiInput","onChecked","event","currentTarget","value","state","setState","addItem","replaceItem","length","dataSource","removeItem","sortItem","addable","searchable","sortable","listClassName","inputName","showCheckbox","PropTypes","bool","showDeleteBtn","checkBoxName","string","propTypes","defaultProps","childContextTypes","func"],"mappings":"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","file":"index.js","sourceRoot":"/Users/kz/projects/edusoho","sourcesContent":["import React, { Component } from 'react';\nimport MultiInput from '../multi-input';\nimport List from './list';\n\nfunction initItem(dataSourceUi,data,index,props) {\n  let obj = {\n    itemId:Math.random(),\n    nickname: data[props.nickname],\n    isVisible: data[props.isVisible] == 1 ? true : false,\n    avatar: data[props.avatar],\n    seq: index,\n    id:data[props.id],\n    outputValue: {\n      [props.id]: data[props.id],\n      [props.isVisible]: data[props.isVisible] ,\n    }\n  }\n  dataSourceUi.push(obj);\n}\n\nfunction updateChecked(dataSourceUi,id) {\n  dataSourceUi.map((item,index)=>{\n    if(item.itemId == id) {\n      dataSourceUi[index].isVisible = !dataSourceUi[index].isVisible;\n      dataSourceUi[index].outputValue.isVisible = dataSourceUi[index].isVisible ? 1 : 0\n    }\n  })\n}\n\nexport default class PersonaMultiInput extends MultiInput {\n  constructor(props) {\n    super(props);\n  }\n\n  componentWillMount() {\n    this.state = {\n      dataSourceUi: [],\n    }\n    this.props.dataSource.map((item,index)=>{\n      initItem(this.state.dataSourceUi,item,index+1,this.props);\n    })\n  }\n\n  getChildContext() {\n    return {\n      removeItem: this.removeItem,\n      sortItem: this.sortItem,\n      addItem: this.addItem,\n      addable: this.props.addable,\n      searchable: this.props.searchable,\n      sortable: this.props.sortable,\n      listClassName:this.props.listClassName,\n      inputName: this.props.inputName,\n      dataSourceUi: this.state.dataSourceUi,\n      onChecked:this.onChecked,\n      showCheckbox:React.PropTypes.bool,\n      showDeleteBtn:React.PropTypes.bool,\n      checkBoxName:React.PropTypes.string,\n    }\n  }\n\n  onChecked=(event)=> {\n    let id = event.currentTarget.value;\n    updateChecked(this.state.dataSourceUi,id);\n    this.setState({\n      dataSourceUi: this.state.dataSourceUi,\n    });\n  }\n\n  addItem = (value,data) =>{\n    if(!data)  {\n      return;\n    }\n    //@TODO重复添加提示\n    if(this.props.replaceItem) {\n      this.state.dataSourceUi = [];\n    }\n    initItem(this.state.dataSourceUi,data,this.state.dataSourceUi.length+1,this.props);\n\n    this.setState({\n      dataSourceUi: this.state.dataSourceUi,\n    });\n  }\n\n  getList() {\n    return (<List listClassName={this.props.listClassName}  dataSourceUi = {this.state.dataSourceUi}  sortable={this.props.sortable} showCheckbox = {this.props.showCheckbox} showDeleteBtn = {this.props.showDeleteBtn}  inputName = { this.props.inputName } checkBoxName ={this.props.checkBoxName}></List>);\n  }\n}\n\nPersonaMultiInput.propTypes = {\n  ...MultiInput.propTypes,\n  id:React.PropTypes.string,\n  nickname:React.PropTypes.string,\n  avatar: React.PropTypes.string,\n  isVisible:React.PropTypes.string,\n  replaceItem: React.PropTypes.bool,\n  showCheckbox:React.PropTypes.bool,\n  showDeleteBtn:React.PropTypes.bool,\n};\n\nPersonaMultiInput.defaultProps = {\n  ...MultiInput.defaultProps,\n  id: 'id',\n  nickname:'nickname',\n  avatar: 'avatar',\n  isVisible:'isVisible',\n  replaceItem: false,\n  showCheckbox: true,\n  showDeleteBtn:true,\n};\n\nPersonaMultiInput.childContextTypes = {\n  ...MultiInput.childContextTypes,\n  onChecked: React.PropTypes.func,\n  showCheckbox:React.PropTypes.bool,\n  showDeleteBtn:React.PropTypes.bool,\n  checkBoxName:React.PropTypes.string,\n};\n\n"]}