webpackJsonp(["web/task/live/index"],[function(t,a){"use strict";function r(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}var n=function(){function t(t,a){for(var r=0;r<a.length;r++){var n=a[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(a,r,n){return r&&t(a.prototype,r),n&&t(a,n),a}}(),e=function(){function t(){r(this,t),this.init()}return n(t,[{key:"init",value:function(){function t(){var t=live_activity_data.nowDate+c,p=parseInt(i-t),d=parseInt(s-t),b=Math.floor(p/86400),y=p%86400,_=Math.floor(y/3600);y%=3600;var T=Math.floor(y/60),f=y%60,u=Translator.trans("老师们：");u+="<br>",1==live_activity_data.liveProvider?(u+="&nbsp;&nbsp;&nbsp;&nbsp;"+Translator.trans("录制直播课程时，需在直播课程间点击"),u+="<span style='color:red'>"+Translator.trans("录制面板")+"</span>",u+=Translator.trans("，录制完成后点击"),u+="<span style='color:red'>"+Translator.trans("暂停")+"</span>",u+=Translator.trans("结束录播，录播结束后在"),u+="<span style='color:red'>"+Translator.trans("录播管理")+"</span>",u+=Translator.trans("界面生成回放。"),u+="<br>"):(u+="&nbsp;&nbsp;&nbsp;&nbsp;",u+=Translator.trans("直播平台")+"<span style='color:red'>"+Translator.trans("下课后")+"</span>"+Translator.trans("且")+"<span style='color:red'>"+Translator.trans("直播时间")+"</span>"+Translator.trans("结束后，在课时管理的"),u+="<span style='color:red'>"+Translator.trans("录播管理")+"</span>",u+=Translator.trans("点击生成回放。"),u+="<br>");var m=r._getCountDown(b,_,T,f);if(0<p&&p<7200){v="<p>"+Translator.trans("直播将于%liveStartTime%开始，于%liveEndTime%结束，请在课前10分钟内提早进入。",{liveStartTime:"<strong>"+n+"</strong>",liveEndTime:"<strong>"+e+"</strong>"})+"</p>";var g=location.protocol+"//"+location.hostname+"/course/"+o+"/activity/"+l+"/live_entry";live_activity_data.isTeacher?(m=u+m,m="<p>"+m+"&nbsp;<a class='btn btn-primary' href='"+g+"' target='_blank'>"+Translator.trans("进入直播教室")+"</a><br><br></p>"):m="<p>"+m+"&nbsp;<a class='btn btn-primary' href='"+g+"' target='_blank'>"+Translator.trans("进入直播教室")+"</a><br><br></p>"}if(p<=0){clearInterval(a),v="<p>"+Translator.trans("直播已经开始，直播将于%liveEndTime%结束。",{liveEndTime:"<strong>"+e+"</strong>"})+"</p>";var g=location.protocol+"//"+location.hostname+"/course/"+o+"/activity/"+l+"/live_entry";live_activity_data.isTeacher?(m=u,m+="<p><a class='btn btn-primary' href='"+g+"' target='_blank'>"+Translator.trans("进入直播教室")+"</a><br><br></p>"):m="<p><a class='btn btn-primary' href='"+g+"' target='_blank'>"+Translator.trans("进入直播教室")+"</a><br><br></p>"}d<=0&&(v="<p style='margin: 10px 0 0 10px; font-weight: bold; font-size: 1.5em;'>"+Translator.trans("直播已经结束")+"</p>",m="","videoGenerated"==live_activity_data.replayStatus?(m+="<button class='btn btn-primary live-video-play-btn' data-lesson-id='"+live_activity_data.id+"'>查看回放</button>&nbsp;&nbsp;",$("body").on("click",".live-video-play-btn",function(){return 0==live_activity_data.liveId||$.inArray("liveMediaError",live_activity_data)!=-1&&""!=live_activity_data.liveMediaError?void Notify.danger("抱歉，视频文件不存在，暂时无法学习。"):($("#lesson-live-content").hide(),$("#lesson-video-content").html(""),void self._videoPlay(live_activity_data))})):live_activity_data.replays&&live_activity_data.replays.length>0&&$.each(live_activity_data.replays,function(t,a){m+="<a class='btn btn-primary' href='"+a.url+"' target='_blank'>"+a.title+"</a>&nbsp;&nbsp;"}));var h=v+'<div style="padding:15px 15px 15px 30px; border-bottom:1px dashed #ccc; height: auto;">'+live_activity_data.summary+"</div><br>"+m;$("#lesson-live-content").find(".lesson-content-text-body").html(h),c++}var a,r=this,n=live_activity_data.liveStartTimeFormat,e=live_activity_data.liveEndTimeFormat,i=live_activity_data.startTime,s=live_activity_data.endTime,o=live_activity_data.courseId,l=live_activity_data.id,v="<p>"+Translator.trans("直播将于%liveStartTime%开始，于%liveEndTime%结束，请在课前10分钟内提早进入。",{liveStartTime:"<strong>"+n+"</strong>",liveEndTime:"<strong>"+e+"</strong>"})+"</p>";a&&clearInterval(a);var c=0;t(),live_activity_data.endTime>live_activity_data.nowDate&&(a=setInterval(t,1e3)),$("#lesson-live-content").show(),$("#lesson-live-content").scrollTop(0)}},{key:"_getCountDown",value:function(t,a,r,n){var e=Translator.trans("还剩: ");return e+=t?"<strong class='text-info'>"+t+"</strong>"+Translator.trans("天"):"",e+=a?"<strong class='text-info'>"+a+"</strong>"+Translator.trans("小时"):"",e+=r?"<strong class='text-info'>"+r+"</strong>"+Translator.trans("分钟"):"",e+=n?"<strong class='text-info'>"+n+"</strong>"+Translator.trans("秒"):""}}]),t}();new e}]);