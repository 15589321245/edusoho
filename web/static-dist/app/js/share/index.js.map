{"version":3,"sources":["webpack:///./app/Resources/static-src/app/js/share/index.js"],"names":["$","on","$btn","type","data","params","parents","url","length","post","val","weibo","window","open","qzone","qq","weixin","append","makeWeixinModal","$modal","find","empty","show","html","load","hide","modal","Translator","trans","query","title","message","picture","indexOf","pic","document","domain","buildUrlQuery","summary","desc","pics","queryItems","q","push","encodeURIComponent","join"],"mappings":"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","file":"app/js/share/index.js","sourcesContent":["$('body').on('click', '.js-social-share', function() {\n  var $btn = $(this);\n  var type = $btn.data('share');\n  var params = $btn.parents('.js-social-share-params').data();\n\n  var url = '';\n  if ($(\".point-share-url\").length > 0) {\n    $.post($(\".point-share-url\").val(), function() {});\n  }\n  switch (type) {\n  case 'weibo':\n    url = weibo(params);\n    window.open(url);\n    break;\n  case 'qzone':\n    url = qzone(params);\n    window.open(url);\n    break;\n  case 'qq':\n    url = qq(params);\n    window.open(url);\n    break;\n  case 'weixin':\n    weixin($btn, params);\n    break;\n  }\n\n});\n\nfunction weixin($btn, params) {\n  if ($('.weixin-share-modal').length == 0) {\n    $('body').append(makeWeixinModal(params));\n    var $modal = $('.weixin-share-modal');\n    $modal.on('show.bs.modal', function() {\n      $modal.find('.weixin-share-qrcode').empty();\n      $modal.find('.weixin-share-loading').show();\n      $modal.find('.weixin-share-qrcode').html('<img src=\"' + $btn.data('qrcodeUrl') + '\">');\n      $modal.find('.weixin-share-qrcode img').load(function() {\n        $modal.find('.weixin-share-loading').hide();\n      });\n    });\n  }\n\n  $('.weixin-share-modal').modal('show');\n}\n\nfunction makeWeixinModal(params) {\n  var html = '';\n  html += '<div class=\"modal fade weixin-share-modal\" tabindex=\"-1\" role=\"dialog\" aria-hidden=\"true\">';\n  html += '  <div class=\"modal-dialog modal-sm\">';\n  html += '    <div class=\"modal-content\">';\n  html += '      <div class=\"modal-header\">';\n  html += '        <button type=\"button\" class=\"close\" data-dismiss=\"modal\"><span aria-hidden=\"true\">Ã—</span></button>';\n  html += '        <h4 class=\"modal-title\">' + Translator.trans('share.share_to_wechat_circle_of_friends_hint') + '</h4>';\n  html += '      </div>';\n  html += '      <div class=\"modal-body\">';\n  html += '        <p class=\"weixin-share-loading\" style=\"text-align:center;\">' + Translator.trans('share.qr_code_load_hint') + '</p>';\n  html += '        <p class=\"weixin-share-qrcode text-center\"></p>';\n  html += '        <p class=\"text-muted text-center\"><small>' + Translator.trans('share.wechat_share_usage_hint') + '</small></p>';\n  html += '      </div>';\n  html += '    </div>';\n  html += '  </div>';\n  html += '</div>';\n  return html;\n}\n\n\nfunction weibo(params) {\n  var query = {};\n  query.url = params.url;\n  query.title = params.message;\n\n  if (params.picture != '') {\n    if (params.picture.indexOf('://') != -1) {\n      query.pic = params.picture;\n    } else {\n      query.pic = document.domain + params.picture;\n    }\n  }\n\n  return 'http://service.weibo.com/share/share.php?' + buildUrlQuery(query);\n}\n\nfunction qzone(params) {\n  var query = {};\n  query.url = params.url;\n  query.title = params.title;\n  query.summary = params.summary;\n  query.desc = params.message;\n  if (params.picture != '') {\n    query.pics = params.picture;\n  }\n\n  return 'http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?' + buildUrlQuery(query);\n}\n\nfunction qq(params) {\n  var query = {};\n\n  query.url = params.url;\n  query.title = params.title;\n  query.summary = params.summary;\n  query.desc = params.message;\n  if (params.picture != '') {\n    query.pics = params.picture;\n  }\n\n  return 'http://connect.qq.com/widget/shareqq/index.html?' + buildUrlQuery(query);\n}\n\nfunction buildUrlQuery(query) {\n  var queryItems = [];\n  for (var q in query) {\n    queryItems.push(q + '=' + encodeURIComponent(query[q] || ''));\n  }\n\n  return queryItems.join('&');\n}\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/share/index.js"],"sourceRoot":""}