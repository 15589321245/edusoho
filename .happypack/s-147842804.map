{"version":3,"sources":["app/Resources/static-src/app/common/component/multi-input/input-group.js"],"names":["InputGroup","props","state","itemName","searched","resultful","searchResult","searchable","enable","addable","searchableUrl","url","name","data","context","addItem","setState","event","value","currentTarget","length","setTimeout","console","log","itemData","blurIsAdd","handleNameChange","onFocus","selectChange","handleAdd","contextTypes","PropTypes","func"],"mappings":"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","file":"input-group.js","sourceRoot":"/Users/kz/projects/edusoho","sourcesContent":["import React, { Component } from 'react';\nimport { trim } from '../../unit';\nimport { send } from '../../server';\nimport Options from './options';\n\nexport default class InputGroup extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      itemName: \"\",\n      searched: true,\n      resultful: false,\n      searchResult:[],\n    }\n    this.searchable = this.props.searchable.enable;\n    this.addable = this.props.addable;\n    this.searchableUrl = this.props.searchable.url;\n  }\n\n  selectChange(name,data) {\n    if(data) {\n      this.context.addItem(name,data);\n    }\n    this.setState({\n      itemName: '',\n    });\n  }\n\n  onFocus(event) {\n    //在这种情况下，重新开启搜索功能；\n    this.setState({\n      searched: true,\n    })\n  }\n\n  handleNameChange (event){\n    let value = trim(event.currentTarget.value);\n    this.setState({\n      itemName: value,\n      searchResult: [],\n      resultful:false,\n    });\n\n    if(this.searchable && value.length > 0 && this.state.searched) {\n      setTimeout(()=>{\n        send(this.searchableUrl+value,searchResult=>{\n          if(this.state.itemName.length>0) {\n            console.log({'searchResult': searchResult});\n            this.setState({\n              searchResult: searchResult,\n              resultful : true,\n            });\n          }\n        });\n      },100)\n    }\n  }\n\n  handleAdd()  {\n    if(this.state.itemName.length>0) {\n      this.context.addItem(this.state.itemName,this.state.itemData);\n    }\n    this.setState({\n      itemName:'',\n      searchResult:[],\n      resultful: false,\n    })\n  }\n\n  blurAdd() {\n    if(this.props.blurIsAdd) {\n      console.log();\n    }\n  }\n\n  render (){\n    return (\n      <div className=\"input-group\">\n        <input className=\"form-control\" value={this.state.itemName} onChange={event => this.handleNameChange(event)} onFocus = {event=>this.onFocus(event)}  />\n        { this.searchable && this.state.resultful && <Options searchResult ={this.state.searchResult} selectChange ={(event,name)=>this.selectChange(event,name)} resultful={this.state.resultful}/> }\n        { this.addable && <span className=\"input-group-btn\"><a className=\"btn btn-default\" onClick={()=>this.handleAdd()}>添加</a></span> }\n      </div>\n    );\n  }\n}\n\nInputGroup.contextTypes = {\n  addItem:React.PropTypes.func,\n};\n"]}