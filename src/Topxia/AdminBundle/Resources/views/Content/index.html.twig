{% extends 'TopxiaAdminBundle:Content:layout.html.twig' %}

{% block title %}内容管理 - {{ parent() }}{% endblock %}

{% set script_controller = 'content/list' %}

{% set menu = 'content' %}

{% block main %}

<div class="page-header clearfix">

	<div class="btn-group pull-right">
	  <button class="btn btn-primary btn-small" id="content-add-btn" type="button" data-target="#modal" data-toggle="modal" data-url="{{ path('admin_content_create', {type:'article'}) }}"><span class="glyphicon glyphicon-plus"></span> 添加文章</button>
	  <button type="button" class="btn btn-primary btn-small dropdown-toggle" data-toggle="dropdown">
	    <span class="caret"></span>
	  </button>
	  <ul class="dropdown-menu">
	    <li><a href="#modal" data-toggle="modal" data-url="{{ path('admin_content_create', {type:'article'}) }}">添加<strong>文章</strong></a></li>
	    <li><a href="#modal" data-toggle="modal" data-url="{{ path('admin_content_create', {type:'activity'}) }}">添加<strong>活动</strong></a></li>
	    <li><a href="#modal" data-toggle="modal" data-url="{{ path('admin_content_create', {type:'page'}) }}">添加<strong>页面</strong></a></li>
	  </ul>
	</div>

  <h1 class="pull-left">内容管理</h1></div>

<form class="well well-small form-inline">
	<select class="width-input" name="type">
    {{ select_options(dict('contentType'), app.request.query.get('type'), '--所有类型--') }}
	</select>
	<select class="width-input" name="status">
    {{ select_options(dict('contentStatus'), app.request.query.get('status'), '--所有状态--') }}
	</select>
	<input class="width-input-large" name="keywords" type="text" placeholder="关键词" value="{{ app.request.query.get('keywords') }}">
	<button class="btn btn-default" type="submit">搜索</button>
</form>

<table class="table table-hover" id="content-table">
	<thead>
		<tr>
			<th width="50%">标题</th>
			<th>类型</th>
			<th>状态</th>
			<th>发布时间/人</th>
			<th>操作</th>
		</tr>
	</thead>
	<tbody>
		{% for content in contents %}
		  {% set user = users[content.userId] %}
		  {% set category = categories[content.categoryId]|default(null) %}
		  {% include 'TopxiaAdminBundle:Content:content-tr.html.twig' %}
		{% endfor %}
	</tbody>
</table>

{{ web_macro.paginator(paginator) }}

{% endblock %}