{"version":3,"sources":["webpack:///./app/Resources/static-src/app/js/classroom-manage/classroom-create.js?3cf8","webpack:///./app/Resources/static-src/app/js/classroom-manage/set-info/index.js"],"names":["classroomCreate","$","val","data","attr","click","removeAttr","select2","ajax","url","app","arguments","tagMatchUrl","dataType","quietMillis","term","page","q","page_limit","results","each","index","item","push","id","name","initSelection","element","callback","split","formatSelection","formatResult","width","multiple","maximumSelectionSize","placeholder","Translator","trans","initEditor","validator","initValidator","toggleExpiryValue","change","classroomStatus","expiryValue","match","addClass","removeClass","$esBlock","text","editor_classroom_about","CKEDITOR","replace","allowedContent","toolbar","filebrowserImageUploadUrl","filebrowserFlashUploadUrl","treeview","dropdownAutoWidth","treeviewInitState","placeholderOption","validate","rules","title","required","expiryMode","elementRemoveRules","datetimepicker","elementAddRules","getExpiryModeDaysRules","form","undefined","language","document","documentElement","lang","autoclose","format","minView","endDate","Date","now","getExpiryModeDateRules","digits","min","max","messages","date","after_now_date","$element","options"],"mappings":"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","file":"app/js/classroom-manage/set-info/index.js","sourcesContent":["const classroomCreate = ()=>{\n  if($(\"#create-classroom\").val() != ''){\n    if($(\"#showable-open\").data('showable')==1){\n        $(\"#showable-open\").attr('checked','checked');\n        if($(\"#buyable-open\").data('buyable')==1){\n            $(\"#buyable-open\").attr('checked','checked');\n        }else{\n            $(\"#buyable-close\").attr('checked','checked');\n        }\n    }\n    else{\n        $(\"#showable-close\").attr('checked','checked');\n        if($(\"#buyable-open\").data('buyable')==1){\n            $(\"#buyable-open\").attr('checked','checked');\n        }\n        else{\n            $(\"#buyable-close\").attr('checked','checked');\n        }\n        $(\"#buyable\").attr('hidden','hidden');\n    }\n  }\n  $(\"#showable-close\").click(function(){\n      $(\"#buyable\").attr('hidden','hidden');\n  })\n  $(\"#showable-open\").click(function(){\n      $(\"#buyable\").removeAttr('hidden');\n  })\n  $('#classroom_tags').select2({\n\n      ajax: {\n          url: app.arguments.tagMatchUrl + '#',\n          dataType: 'json',\n          quietMillis: 100,\n          data: function (term, page) {\n              return {\n                  q: term,\n                  page_limit: 10\n              };\n          },\n          results: function (data) {\n              var results = [];\n              $.each(data, function (index, item) {\n\n                  results.push({\n                      id: item.name,\n                      name: item.name\n                  });\n              });\n\n              return {\n                  results: results\n              };\n\n          }\n      },\n      initSelection: function (element, callback) {\n          var data = [];\n          $(element.val().split(\",\")).each(function () {\n              data.push({\n                  id: this,\n                  name: this\n              });\n          });\n          callback(data);\n      },\n      formatSelection: function (item) {\n          return item.name;\n      },\n      formatResult: function (item) {\n          return item.name;\n      },\n      width: 'off',\n      multiple: true,\n      maximumSelectionSize: 20,\n      placeholder: Translator.trans('classroom.manage.tag_required_hint'),\n      width: 'off',\n      multiple: true,\n      createSearchChoice: function () {\n          return null;\n      }\n  });\n}\nexport default classroomCreate();\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/classroom-manage/classroom-create.js","import notify from 'common/notify';\nimport 'app/js/classroom-manage/classroom-create';\n\ninitEditor();\nconst validator = initValidator();\ntoggleExpiryValue($(\"[name=expiryMode]:checked\").val());\n\n$(\"[name='expiryMode']\").change(function () {\n  if (app.arguments.classroomStatus === 'published') {\n    return false;\n  }\n  var expiryValue = $(\"[name='expiryValue']\").val();\n  if (expiryValue) {\n    if (expiryValue.match(\"-\")) {\n      $(\"[name='expiryValue']\").data('date', $(\"[name='expiryValue']\").val());\n    } else {\n      $(\"[name='expiryValue']\").data('days', $(\"[name='expiryValue']\").val());\n    }\n    $(\"[name='expiryValue']\").val('')\n  }\n\n  if ($(this).val() == 'forever') {\n    $('.expiry-value-js').addClass('hidden');\n  } else {\n    $('.expiry-value-js').removeClass('hidden');\n    var $esBlock = $('.expiry-value-js > .controls > .help-block');\n    $esBlock.text($esBlock.data($(this).val()));\n  }\n  toggleExpiryValue($(this).val());\n});\n\nfunction initEditor() {\n  let editor_classroom_about = CKEDITOR.replace('about', {\n    allowedContent: true,\n    toolbar: 'Detail',\n    filebrowserImageUploadUrl: $('#about').data('imageUploadUrl'),\n    filebrowserFlashUploadUrl: $('#about').data('flashUploadUrl')\n  });\n\n  $('[name=\"categoryId\"]').select2({\n    treeview: true,\n    dropdownAutoWidth: true,\n    treeviewInitState: 'collapsed',\n    placeholderOption: 'first'\n  });\n}\n\nfunction initValidator() {\n  return $('#classroom-set-form').validate({\n    rules: {\n      title: {\n        required: true,\n      }\n    },\n  });\n\n  $('#classroom-save').click(() => {\n    // validator.form();\n  })\n}\n\nfunction toggleExpiryValue(expiryMode) {\n  if (!$(\"[name='expiryValue']\").val()) {\n    $(\"[name='expiryValue']\").val($(\"[name='expiryValue']\").data(expiryMode));\n  }\n  elementRemoveRules($(\"[name='expiryValue']\"));\n  switch (expiryMode) {\n    case 'days':\n      $('[name=\"expiryValue\"]').datetimepicker('remove');\n      $(\".expiry-value-js .controls > span\").removeClass('hidden');\n      elementAddRules($('[name=\"expiryValue\"]'),getExpiryModeDaysRules());\n      validator.form();\n      break;\n    case 'date':\n      if($('#classroom_expiryValue').attr('readonly') !== undefined){\n        return false;\n      }\n      $(\".expiry-value-js .controls > span\").addClass('hidden');\n      $(\"#classroom_expiryValue\").datetimepicker({\n        language: document.documentElement.lang,\n        autoclose: true,\n        format: 'yyyy-mm-dd',\n        minView: 'month',\n        endDate: new Date(Date.now() + 86400 * 365 * 10 * 1000)\n      });\n      $(\"#classroom_expiryValue\").datetimepicker('setStartDate', new Date);\n       elementAddRules($('[name=\"expiryValue\"]'),getExpiryModeDateRules());\n       validator.form();\n      break;\n    default:\n      break;\n  }\n}\n\nfunction getExpiryModeDaysRules() {\n  return {\n    required: true,\n    digits:true,\n    min: 1,\n    max: 10000,\n    messages: {\n      required: Translator.trans('classroom.manage.expiry_mode_days_error_hint'),\n    }\n  }\n}\n\nfunction getExpiryModeDateRules() {\n  return {\n    required: true,\n    date: true,\n    after_now_date: true,\n    messages: {\n      required: Translator.trans('classroom.manage.expiry_mode_date_error_hint'),\n    }\n  }\n}\n\nfunction elementAddRules($element, options) {\n  $element.rules(\"add\", options);\n}\n\nfunction elementRemoveRules($element) {\n  $element.rules('remove');\n}\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/classroom-manage/set-info/index.js"],"sourceRoot":""}