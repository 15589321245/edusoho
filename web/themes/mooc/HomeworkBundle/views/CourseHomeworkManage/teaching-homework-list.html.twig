<table class="table table-striped table-hover">
  <tbody>
    {% if homeworksResults|default(null) %}
      <thead>
        <tr>
          <th width="70%">学员</th>
          <th width="30%">操作</th>
        </tr>
      </thead>
      {% for key,homeworkResult in homeworksResults %}
        {% set userId = users[homeworkResult.userId].id %}
        {% set user = users[homeworkResult.userId] %}
        {% set lesson = lessons[homeworkResult.lessonId]|default(null) %}
        {% set course = courses[homeworkResult.courseId] %}
        {% if lesson %}
          {% set lessonUrl = path('course_learn', {id:course.id}) ~ '#lesson/' ~ lesson.id %}
        {% endif %}
        {% set courseUrl = path('course_show', {id:course.id}) %}
        <tr>
          <td class="media">
            {{ web_macro.user_avatar(user, 'pull-left') }}
            <a target="_blank" href="{{ path('user_show', {id:user.id}) }}">{{ user.nickname }}</a>
            <div class="clear-fix text-sm">
              <div class="pull-left">
                <a class="text-success" href="{{ courseUrl }}">《{{ course.title }}》</a>
              </div>
              {% if lesson %}
                <div class="pull-left">
                  <a class="text-success" href="{{ lessonUrl }}">第 {{ lesson.number }}课时</a>
                </div>
              {% endif %}
              <div class="mll text-muted pull-left">
                提交时间：{{ homeworkResult.usedTime|date('Y-n-d H:i') }}
              </div>
            </div>
          </td>
          <td>
            {% if status == 'reviewing' or status=='pairReviewing' %}
              <a href="{{ path('homework_review_create', {homeworkResultId:homeworkResult.id,source:source|default('course'),targetId:targetId|default(0) }) }}" class="btn btn-default btn-sm">批改</a>
            {% else %}
              <a class="btn btn-default btn-sm"  href="{{ path('course_homework_result',{courseId:course.id,homeworkId:homeworkResult.homeworkId,resultId:homeworkResult.id, userId:userId }) }}" target="_blank" >查看</a>
            {% endif %}
          </td>
        </tr>
      {% endfor %}
    {% else %}
      {% if status == 'reviewing' %}
        <div class="empty">没有需要批改的作业</div>
      {% else %}
        <div class="empty">没有已批改的作业</div>
      {% endif %}
    {% endif  %}
  </tbody>
</table>
{{ web_macro.paginator(paginator) }}