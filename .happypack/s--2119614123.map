{"version":3,"sources":["node_modules/.0.5.0@postal.xframe/lib/postal.xframe.min.js"],"names":["define","module","exports","e","t","require","amd","postalXframe","_","postal","n","r","o","id","loaded","call","m","c","p","w","routeMessage","apply","arguments","a","include","g","workers","addEventListener","push","i","__esModule","s","u","_memoRemoteByInstanceId","f","_memoRemoteByTarget","l","_disconnectClient","safeSerialize","d","state","h","env","v","getInstance","origin","isWorker","Worker","options","target","fedx","transports","xframe","eagerSerialize","useEagerSerialize","XFrameClient","configure","config","defaults","extend","clearConfiguration","getTargets","postMessage","map","document","getElementsByTagName","createElement","href","src","protocol","host","contentWindow","defaultOriginUrl","window","parent","concat","remotes","wrapForTransport","JSON","stringify","packingSlip","unwrapFromTransport","indexOf","parse","source","currentTarget","data","find","instanceId","onMessage","sendMessage","cloneDeep","each","disconnect","reduce","isArray","doNotNotify","without","signalReady","length","sendPing","Error","listenToWorker","stopListeningToWorker","removeEventListener","pop","Symbol","iterator","next","done","value","isPlainObject","Array","Object","TypeError","defineProperty","regeneratorRuntime","mark","wrap","prev","keys","t0","finish","stop","entries","location","test","navigator","userAgent","allowedOrigins","enabled","configurable","writable","defineProperties","prototype","getOwnPropertyDescriptor","getPrototypeOf","get","create","constructor","enumerable","__proto__","transportName","shouldProcess","contains","send","FederationClient"],"mappings":"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","file":"postal.xframe.min.js","sourceRoot":"/Users/kz/projects/edusoho","sourcesContent":["/*** IMPORTS FROM imports-loader ***/\nvar define = false;\nvar module = false;\nvar exports = false;\n(function() {\n\n/*!\n *  * postal.xframe - postal.js/postal.federation plugin for federating instances of postal.js across iframe/window boundaries.\n *  * Author: Jim Cowart (http://ifandelse.com)\n *  * Version: v0.5.0\n *  * Url: http://github.com/postaljs/postal.xframe\n *  * License(s): (MIT OR GPL-2.0)\n */\n(function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t(require(\"lodash\"),require(\"postal\")):\"function\"==typeof define&&define.amd?define([\"lodash\",\"postal\"],t):\"object\"==typeof exports?exports.postalXframe=t(require(\"lodash\"),require(\"postal\")):e.postalXframe=t(e._,e.postal)})(this,function(e,t){return function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var r={};return t.m=e,t.c=r,t.p=\"\",t(0)}([function(e,t,r){function n(){w.routeMessage.apply(w,arguments)}function o(e){a.include(g.workers,e)||(e.addEventListener(\"message\",n),g.workers.push(e))}var i=function(e){return e&&e.__esModule?e[\"default\"]:e},a=i(r(1)),s=i(r(2)),u=r(3),c=u._memoRemoteByInstanceId,f=u._memoRemoteByTarget,l=u._disconnectClient,p=u.safeSerialize,d=r(4),g=d.state,h=d.env,v=i(r(5));v.getInstance=function(e,t,r){var n=new v(e,{origin:t,isWorker:\"undefined\"!=typeof Worker&&e instanceof Worker},r);return n.options.isWorker&&o(n.target),n};var m=function(){},w=s.fedx.transports.xframe={eagerSerialize:h.useEagerSerialize,XFrameClient:v,configure:function(e){return e&&(g.config=a.defaults(a.extend(g.config,e),g.defaults)),g.config},clearConfiguration:function(){g.config=a.extend({},g.defaults)},getTargets:h.isWorker?function(){return[{target:{postMessage:postMessage}}]}:function(){var e=a.map(document.getElementsByTagName(\"iframe\"),function(e){var t=document.createElement(\"a\");t.href=e.src;var r=t.protocol+\"//\"+t.host;return\"//\"===r&&(r=null),{target:e.contentWindow,origin:r||g.config.defaultOriginUrl}});return window.parent&&window.parent!==window&&e.push({target:window.parent,origin:\"*\"}),e.concat(g.workers)},remotes:[],wrapForTransport:h.useEagerSerialize?function(e){return JSON.stringify({postal:!0,packingSlip:e})}:function(e){return{postal:!0,packingSlip:e}},unwrapFromTransport:function(e){if(\"string\"!=typeof e||!h.useEagerSerialize&&-1===e.indexOf('\"postal\":true'))return e;try{return JSON.parse(e)}catch(t){return{}}},routeMessage:function(e){var t=e.source||e.currentTarget,r=this.unwrapFromTransport(e.data);if(r.postal){var n=a.find(this.remotes,function(e){return e.target===t});n||(n=v.getInstance(t,e.origin,r.packingSlip.instanceId),this.remotes.push(n)),n.onMessage(r.packingSlip)}},sendMessage:function(e){var t=e;g.config.safeSerialize&&(t=p(a.cloneDeep(e))),a.each(this.remotes,function(e){e.sendMessage(t)})},disconnect:function(e){e=e||{};var t=e.instanceId?a.reduce(a.isArray(e.instanceId)?e.instanceId:[e.instanceId],c,[],this):e.target?a.reduce(a.isArray(e.target)?e.target:[e.target],f,[],this):this.remotes;e.doNotNotify||a.each(t,l,this),this.remotes=a.without.apply(null,[this.remotes].concat(t))},signalReady:function(e,t){e=a.isArray(e)?e:[e],e=e.length?e:this.getTargets(),t=t||m,a.each(e,function(e){if(e.target){e.origin=e.origin||g.config.defaultOriginUrl;var r=a.find(this.remotes,function(t){return t.target===e.target});r||(r=v.getInstance(e.target,e.origin),this.remotes.push(r)),r.sendPing(t)}},this)},addEventListener:h.isWorker?function(){addEventListener(\"message\",n)}:function(e,t,r){if(\"undefined\"==typeof window||\"function\"!=typeof window.addEventListener)throw new Error(\"postal.xframe only works with browsers that support window.addEventListener\");window.addEventListener(e,t,r)},listenToWorker:o,stopListeningToWorker:function(e){if(e)e.removeEventListener(\"message\",n),g.workers=a.without(g.workers,e);else for(;g.workers.length;)g.workers.pop().removeEventListener(\"message\",n)}};w.addEventListener(\"message\",n,!1)},function(t,r){t.exports=e},function(e,r){e.exports=t},function(e,t,r){function n(e,t){var r=c.find(this.remotes,function(e){return e.instanceId===t});return r&&e.push(r),e}function o(e,t){var r=c.find(this.remotes,function(e){return e.target===t});return r&&e.push(r),e}function i(e){e.disconnect()}function a(e){var t=!0,r=!1,n=void 0;try{for(var o,i=f(e)[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var s=u(o.value,2),l=s[0],p=s[1];\"function\"==typeof p&&delete e[l],c.isPlainObject(p)&&a(p),c.isArray(p)&&c.each(p,a)}}catch(d){r=!0,n=d}finally{try{!t&&i[\"return\"]&&i[\"return\"]()}finally{if(r)throw n}}return e}var s=function(e){return e&&e.__esModule?e[\"default\"]:e},u=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e)){for(var r,n=[],o=e[Symbol.iterator]();!(r=o.next()).done&&(n.push(r.value),!t||n.length!==t););return n}throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")};t._memoRemoteByInstanceId=n,t._memoRemoteByTarget=o,t._disconnectClient=i,t.safeSerialize=a,Object.defineProperty(t,\"__esModule\",{value:!0});var c=s(r(1)),f=regeneratorRuntime.mark(function l(e){var t,r,n,o,i,a;return regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:-1===[\"object\",\"function\"].indexOf(typeof e)&&(e={}),t=!0,r=!1,n=void 0,s.prev=4,o=Object.keys(e)[Symbol.iterator]();case 6:if(t=(i=o.next()).done){s.next=13;break}return a=i.value,s.next=10,[a,e[a]];case 10:t=!0,s.next=6;break;case 13:s.next=19;break;case 15:s.prev=15,s.t0=s[\"catch\"](4),r=!0,n=s.t0;case 19:s.prev=19,s.prev=20,!t&&o[\"return\"]&&o[\"return\"]();case 22:if(s.prev=22,!r){s.next=25;break}throw n;case 25:return s.finish(22);case 26:return s.finish(19);case 27:case\"end\":return s.stop()}},l,this,[[4,15,19,27],[20,,22,26]])});t.entries=f},function(e,t,r){var n=function(e){return e&&e.__esModule?e[\"default\"]:e};Object.defineProperty(t,\"__esModule\",{value:!0});var o=n(r(1)),i={origin:location.origin||location.protocol+\"//\"+location.host,isWorker:\"undefined\"==typeof window&&postMessage&&location,useEagerSerialize:/MSIE [8,9]/.test(navigator.userAgent)};t.env=i;var a={allowedOrigins:[i.origin],enabled:!0,defaultOriginUrl:\"*\",safeSerialize:!1},s={workers:[],config:o.extend({},a),defaults:a};t.state=s},function(e,t,r){var n=function(e){return e&&e.__esModule?e[\"default\"]:e},o=function(){function e(e,t){for(var r in t){var n=t[r];n.configurable=!0,n.value&&(n.writable=!0)}Object.defineProperties(e,t)}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=function g(e,t,r){var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var o=Object.getPrototypeOf(e);return null===o?void 0:g(o,t,r)}if(\"value\"in n&&n.writable)return n.value;var i=n.get;return void 0===i?void 0:i.call(r)},a=function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)},s=function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")},u=n(r(2)),c=n(r(1)),f=r(4),l=f.state,p=f.env,d=function(e){function t(){for(var e=arguments.length,r=Array(e),n=0;e>n;n++)r[n]=arguments[n];s(this,t),this.transportName=\"xframe\",i(Object.getPrototypeOf(t.prototype),\"constructor\",this).apply(this,r)}return a(t,e),o(t,{shouldProcess:{value:function(){var e=!!l.config.allowedOrigins.length;return l.config.enabled&&(\"*\"===this.options.origin||e&&c.contains(l.config.allowedOrigins,this.options.origin)||!e||this.options.isWorker&&c.contains(l.workers,this.target)||p.isWorker)}},send:{value:function(e){if(this.shouldProcess()){var t=p.isWorker?null:this.target,r=[u.fedx.transports.xframe.wrapForTransport(e)];this.options.isWorker||p.isWorker||r.push(this.options.origin),p.isWorker?this.target.postMessage.apply(t,r):1===r.length?this.target.postMessage(r[0]):this.target.postMessage(r[0],r[1])}}}}),t}(u.fedx.FederationClient);e.exports=d}])});\n//# sourceMappingURL=postal.xframe.min.js.map\n}.call(window));"]}